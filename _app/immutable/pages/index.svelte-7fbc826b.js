import{K as Ri,L as Xo,M as nm,N as M_,S as An,i as kn,s as Mn,F as Jn,C as Jt,l as ge,m as _e,n as Ce,h as Y,O as en,b as et,P as un,G as Qn,H as $n,I as ea,z as aa,Q as Ma,f as _t,t as It,R as ha,T as Ni,U as va,o as fs,V as xa,W as D_,X as Di,w as Ei,e as sn,x as qi,y as Ii,A as Lr,d as $r,B as Ai,Y as sr,j as Ja,Z as Al,g as es,E as Ba,_ as P_,a as St,c as Et,p as ve,$ as L_,J as ie,a0 as R_,r as wt,u as Ct,v as nn,a1 as Ru,a2 as xo,a3 as wo,a4 as Au,a5 as Bh,a6 as ma,a7 as Tl,a8 as am,a9 as rm,aa as bo,ab as vo,ac as z_,ad as ku,q as Ep}from"../chunks/index-9d50326c.js";import{r as B_,w as sm}from"../chunks/index-58f07d97.js";var Gh=function(u,a){return Gh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,l){s.__proto__=l}||function(s,l){for(var m in l)Object.prototype.hasOwnProperty.call(l,m)&&(s[m]=l[m])},Gh(u,a)};function Is(u,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");Gh(u,a);function s(){this.constructor=u}u.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}var Cr=function(){return Cr=Object.assign||function(a){for(var s,l=1,m=arguments.length;l<m;l++){s=arguments[l];for(var g in s)Object.prototype.hasOwnProperty.call(s,g)&&(a[g]=s[g])}return a},Cr.apply(this,arguments)};function fu(u){var a=typeof Symbol=="function"&&Symbol.iterator,s=a&&u[a],l=0;if(s)return s.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&l>=u.length&&(u=void 0),{value:u&&u[l++],done:!u}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var kl=function(){function u(a){a===void 0&&(a={}),this.adapter=a}return Object.defineProperty(u,"cssClasses",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(u,"strings",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(u,"numbers",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(u,"defaultAdapter",{get:function(){return{}},enumerable:!1,configurable:!0}),u.prototype.init=function(){},u.prototype.destroy=function(){},u}();/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function F_(u){return u===void 0&&(u=window),O_(u)?{passive:!0}:!1}function O_(u){u===void 0&&(u=window);var a=!1;try{var s={get passive(){return a=!0,!1}},l=function(){};u.document.addEventListener("test",l,s),u.document.removeEventListener("test",l,s)}catch{a=!1}return a}const N_=Object.freeze(Object.defineProperty({__proto__:null,applyPassive:F_},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function U_(u,a){if(u.closest)return u.closest(a);for(var s=u;s;){if(om(s,a))return s;s=s.parentElement}return null}function om(u,a){var s=u.matches||u.webkitMatchesSelector||u.msMatchesSelector;return s.call(u,a)}function V_(u){var a=u;if(a.offsetParent!==null)return a.scrollWidth;var s=a.cloneNode(!0);s.style.setProperty("position","absolute"),s.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(s);var l=s.scrollWidth;return document.documentElement.removeChild(s),l}const lm=Object.freeze(Object.defineProperty({__proto__:null,closest:U_,matches:om,estimateScrollWidth:V_},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var j_={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},G_={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},Ip={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300},mu;function H_(u,a){a===void 0&&(a=!1);var s=u.CSS,l=mu;if(typeof mu=="boolean"&&!a)return mu;var m=s&&typeof s.supports=="function";if(!m)return!1;var g=s.supports("--css-vars","yes"),v=s.supports("(--css-vars: yes)")&&s.supports("color","#00000000");return l=g||v,a||(mu=l),l}function q_(u,a,s){if(!u)return{x:0,y:0};var l=a.x,m=a.y,g=l+s.left,v=m+s.top,r,T;if(u.type==="touchstart"){var A=u;r=A.changedTouches[0].pageX-g,T=A.changedTouches[0].pageY-v}else{var C=u;r=C.pageX-g,T=C.pageY-v}return{x:r,y:T}}/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Ap=["touchstart","pointerdown","mousedown","keydown"],kp=["touchend","pointerup","mouseup","contextmenu"],gu=[],Z_=function(u){Is(a,u);function a(s){var l=u.call(this,Cr(Cr({},a.defaultAdapter),s))||this;return l.activationAnimationHasEnded=!1,l.activationTimer=0,l.fgDeactivationRemovalTimer=0,l.fgScale="0",l.frame={width:0,height:0},l.initialSize=0,l.layoutFrame=0,l.maxRadius=0,l.unboundedCoords={left:0,top:0},l.activationState=l.defaultActivationState(),l.activationTimerCallback=function(){l.activationAnimationHasEnded=!0,l.runDeactivationUXLogicIfReady()},l.activateHandler=function(m){l.activateImpl(m)},l.deactivateHandler=function(){l.deactivateImpl()},l.focusHandler=function(){l.handleFocus()},l.blurHandler=function(){l.handleBlur()},l.resizeHandler=function(){l.layout()},l}return Object.defineProperty(a,"cssClasses",{get:function(){return j_},enumerable:!1,configurable:!0}),Object.defineProperty(a,"strings",{get:function(){return G_},enumerable:!1,configurable:!0}),Object.defineProperty(a,"numbers",{get:function(){return Ip},enumerable:!1,configurable:!0}),Object.defineProperty(a,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!1,configurable:!0}),a.prototype.init=function(){var s=this,l=this.supportsPressRipple();if(this.registerRootHandlers(l),l){var m=a.cssClasses,g=m.ROOT,v=m.UNBOUNDED;requestAnimationFrame(function(){s.adapter.addClass(g),s.adapter.isUnbounded()&&(s.adapter.addClass(v),s.layoutInternal())})}},a.prototype.destroy=function(){var s=this;if(this.supportsPressRipple()){this.activationTimer&&(clearTimeout(this.activationTimer),this.activationTimer=0,this.adapter.removeClass(a.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer&&(clearTimeout(this.fgDeactivationRemovalTimer),this.fgDeactivationRemovalTimer=0,this.adapter.removeClass(a.cssClasses.FG_DEACTIVATION));var l=a.cssClasses,m=l.ROOT,g=l.UNBOUNDED;requestAnimationFrame(function(){s.adapter.removeClass(m),s.adapter.removeClass(g),s.removeCssVars()})}this.deregisterRootHandlers(),this.deregisterDeactivationHandlers()},a.prototype.activate=function(s){this.activateImpl(s)},a.prototype.deactivate=function(){this.deactivateImpl()},a.prototype.layout=function(){var s=this;this.layoutFrame&&cancelAnimationFrame(this.layoutFrame),this.layoutFrame=requestAnimationFrame(function(){s.layoutInternal(),s.layoutFrame=0})},a.prototype.setUnbounded=function(s){var l=a.cssClasses.UNBOUNDED;s?this.adapter.addClass(l):this.adapter.removeClass(l)},a.prototype.handleFocus=function(){var s=this;requestAnimationFrame(function(){return s.adapter.addClass(a.cssClasses.BG_FOCUSED)})},a.prototype.handleBlur=function(){var s=this;requestAnimationFrame(function(){return s.adapter.removeClass(a.cssClasses.BG_FOCUSED)})},a.prototype.supportsPressRipple=function(){return this.adapter.browserSupportsCssVars()},a.prototype.defaultActivationState=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},a.prototype.registerRootHandlers=function(s){var l,m;if(s){try{for(var g=fu(Ap),v=g.next();!v.done;v=g.next()){var r=v.value;this.adapter.registerInteractionHandler(r,this.activateHandler)}}catch(T){l={error:T}}finally{try{v&&!v.done&&(m=g.return)&&m.call(g)}finally{if(l)throw l.error}}this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler)}this.adapter.registerInteractionHandler("focus",this.focusHandler),this.adapter.registerInteractionHandler("blur",this.blurHandler)},a.prototype.registerDeactivationHandlers=function(s){var l,m;if(s.type==="keydown")this.adapter.registerInteractionHandler("keyup",this.deactivateHandler);else try{for(var g=fu(kp),v=g.next();!v.done;v=g.next()){var r=v.value;this.adapter.registerDocumentInteractionHandler(r,this.deactivateHandler)}}catch(T){l={error:T}}finally{try{v&&!v.done&&(m=g.return)&&m.call(g)}finally{if(l)throw l.error}}},a.prototype.deregisterRootHandlers=function(){var s,l;try{for(var m=fu(Ap),g=m.next();!g.done;g=m.next()){var v=g.value;this.adapter.deregisterInteractionHandler(v,this.activateHandler)}}catch(r){s={error:r}}finally{try{g&&!g.done&&(l=m.return)&&l.call(m)}finally{if(s)throw s.error}}this.adapter.deregisterInteractionHandler("focus",this.focusHandler),this.adapter.deregisterInteractionHandler("blur",this.blurHandler),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler)},a.prototype.deregisterDeactivationHandlers=function(){var s,l;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler);try{for(var m=fu(kp),g=m.next();!g.done;g=m.next()){var v=g.value;this.adapter.deregisterDocumentInteractionHandler(v,this.deactivateHandler)}}catch(r){s={error:r}}finally{try{g&&!g.done&&(l=m.return)&&l.call(m)}finally{if(s)throw s.error}}},a.prototype.removeCssVars=function(){var s=this,l=a.strings,m=Object.keys(l);m.forEach(function(g){g.indexOf("VAR_")===0&&s.adapter.updateCssVariable(l[g],null)})},a.prototype.activateImpl=function(s){var l=this;if(!this.adapter.isSurfaceDisabled()){var m=this.activationState;if(!m.isActivated){var g=this.previousActivationEvent,v=g&&s!==void 0&&g.type!==s.type;if(!v){m.isActivated=!0,m.isProgrammatic=s===void 0,m.activationEvent=s,m.wasActivatedByPointer=m.isProgrammatic?!1:s!==void 0&&(s.type==="mousedown"||s.type==="touchstart"||s.type==="pointerdown");var r=s!==void 0&&gu.length>0&&gu.some(function(T){return l.adapter.containsEventTarget(T)});if(r){this.resetActivationState();return}s!==void 0&&(gu.push(s.target),this.registerDeactivationHandlers(s)),m.wasElementMadeActive=this.checkElementMadeActive(s),m.wasElementMadeActive&&this.animateActivation(),requestAnimationFrame(function(){gu=[],!m.wasElementMadeActive&&s!==void 0&&(s.key===" "||s.keyCode===32)&&(m.wasElementMadeActive=l.checkElementMadeActive(s),m.wasElementMadeActive&&l.animateActivation()),m.wasElementMadeActive||(l.activationState=l.defaultActivationState())})}}}},a.prototype.checkElementMadeActive=function(s){return s!==void 0&&s.type==="keydown"?this.adapter.isSurfaceActive():!0},a.prototype.animateActivation=function(){var s=this,l=a.strings,m=l.VAR_FG_TRANSLATE_START,g=l.VAR_FG_TRANSLATE_END,v=a.cssClasses,r=v.FG_DEACTIVATION,T=v.FG_ACTIVATION,A=a.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal();var C="",I="";if(!this.adapter.isUnbounded()){var k=this.getFgTranslationCoordinates(),K=k.startPoint,$=k.endPoint;C=K.x+"px, "+K.y+"px",I=$.x+"px, "+$.y+"px"}this.adapter.updateCssVariable(m,C),this.adapter.updateCssVariable(g,I),clearTimeout(this.activationTimer),clearTimeout(this.fgDeactivationRemovalTimer),this.rmBoundedActivationClasses(),this.adapter.removeClass(r),this.adapter.computeBoundingRect(),this.adapter.addClass(T),this.activationTimer=setTimeout(function(){s.activationTimerCallback()},A)},a.prototype.getFgTranslationCoordinates=function(){var s=this.activationState,l=s.activationEvent,m=s.wasActivatedByPointer,g;m?g=q_(l,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):g={x:this.frame.width/2,y:this.frame.height/2},g={x:g.x-this.initialSize/2,y:g.y-this.initialSize/2};var v={x:this.frame.width/2-this.initialSize/2,y:this.frame.height/2-this.initialSize/2};return{startPoint:g,endPoint:v}},a.prototype.runDeactivationUXLogicIfReady=function(){var s=this,l=a.cssClasses.FG_DEACTIVATION,m=this.activationState,g=m.hasDeactivationUXRun,v=m.isActivated,r=g||!v;r&&this.activationAnimationHasEnded&&(this.rmBoundedActivationClasses(),this.adapter.addClass(l),this.fgDeactivationRemovalTimer=setTimeout(function(){s.adapter.removeClass(l)},Ip.FG_DEACTIVATION_MS))},a.prototype.rmBoundedActivationClasses=function(){var s=a.cssClasses.FG_ACTIVATION;this.adapter.removeClass(s),this.activationAnimationHasEnded=!1,this.adapter.computeBoundingRect()},a.prototype.resetActivationState=function(){var s=this;this.previousActivationEvent=this.activationState.activationEvent,this.activationState=this.defaultActivationState(),setTimeout(function(){return s.previousActivationEvent=void 0},a.numbers.TAP_DELAY_MS)},a.prototype.deactivateImpl=function(){var s=this,l=this.activationState;if(!!l.isActivated){var m=Cr({},l);l.isProgrammatic?(requestAnimationFrame(function(){s.animateDeactivation(m)}),this.resetActivationState()):(this.deregisterDeactivationHandlers(),requestAnimationFrame(function(){s.activationState.hasDeactivationUXRun=!0,s.animateDeactivation(m),s.resetActivationState()}))}},a.prototype.animateDeactivation=function(s){var l=s.wasActivatedByPointer,m=s.wasElementMadeActive;(l||m)&&this.runDeactivationUXLogicIfReady()},a.prototype.layoutInternal=function(){var s=this;this.frame=this.adapter.computeBoundingRect();var l=Math.max(this.frame.height,this.frame.width),m=function(){var v=Math.sqrt(Math.pow(s.frame.width,2)+Math.pow(s.frame.height,2));return v+a.numbers.PADDING};this.maxRadius=this.adapter.isUnbounded()?l:m();var g=Math.floor(l*a.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&g%2!==0?this.initialSize=g-1:this.initialSize=g,this.fgScale=""+this.maxRadius/this.initialSize,this.updateLayoutCssVars()},a.prototype.updateLayoutCssVars=function(){var s=a.strings,l=s.VAR_FG_SIZE,m=s.VAR_LEFT,g=s.VAR_TOP,v=s.VAR_FG_SCALE;this.adapter.updateCssVariable(l,this.initialSize+"px"),this.adapter.updateCssVariable(v,this.fgScale),this.adapter.isUnbounded()&&(this.unboundedCoords={left:Math.round(this.frame.width/2-this.initialSize/2),top:Math.round(this.frame.height/2-this.initialSize/2)},this.adapter.updateCssVariable(m,this.unboundedCoords.left+"px"),this.adapter.updateCssVariable(g,this.unboundedCoords.top+"px"))},a}(kl);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Qo={FIXED_CLASS:"mdc-top-app-bar--fixed",FIXED_SCROLLED_CLASS:"mdc-top-app-bar--fixed-scrolled",SHORT_CLASS:"mdc-top-app-bar--short",SHORT_COLLAPSED_CLASS:"mdc-top-app-bar--short-collapsed",SHORT_HAS_ACTION_ITEM_CLASS:"mdc-top-app-bar--short-has-action-item"},Tu={DEBOUNCE_THROTTLE_RESIZE_TIME_MS:100,MAX_TOP_APP_BAR_HEIGHT:128},K_={ACTION_ITEM_SELECTOR:".mdc-top-app-bar__action-item",NAVIGATION_EVENT:"MDCTopAppBar:nav",NAVIGATION_ICON_SELECTOR:".mdc-top-app-bar__navigation-icon",ROOT_SELECTOR:".mdc-top-app-bar",TITLE_SELECTOR:".mdc-top-app-bar__title"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Xh=function(u){Is(a,u);function a(s){return u.call(this,Cr(Cr({},a.defaultAdapter),s))||this}return Object.defineProperty(a,"strings",{get:function(){return K_},enumerable:!1,configurable:!0}),Object.defineProperty(a,"cssClasses",{get:function(){return Qo},enumerable:!1,configurable:!0}),Object.defineProperty(a,"numbers",{get:function(){return Tu},enumerable:!1,configurable:!0}),Object.defineProperty(a,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},getTopAppBarHeight:function(){return 0},notifyNavigationIconClicked:function(){},getViewportScrollY:function(){return 0},getTotalActionItems:function(){return 0}}},enumerable:!1,configurable:!0}),a.prototype.handleTargetScroll=function(){},a.prototype.handleWindowResize=function(){},a.prototype.handleNavigationClick=function(){this.adapter.notifyNavigationIconClicked()},a}(kl);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var _u=0,cm=function(u){Is(a,u);function a(s){var l=u.call(this,s)||this;return l.wasDocked=!0,l.isDockedShowing=!0,l.currentAppBarOffsetTop=0,l.isCurrentlyBeingResized=!1,l.resizeThrottleId=_u,l.resizeDebounceId=_u,l.lastScrollPosition=l.adapter.getViewportScrollY(),l.topAppBarHeight=l.adapter.getTopAppBarHeight(),l}return a.prototype.destroy=function(){u.prototype.destroy.call(this),this.adapter.setStyle("top","")},a.prototype.handleTargetScroll=function(){var s=Math.max(this.adapter.getViewportScrollY(),0),l=s-this.lastScrollPosition;this.lastScrollPosition=s,this.isCurrentlyBeingResized||(this.currentAppBarOffsetTop-=l,this.currentAppBarOffsetTop>0?this.currentAppBarOffsetTop=0:Math.abs(this.currentAppBarOffsetTop)>this.topAppBarHeight&&(this.currentAppBarOffsetTop=-this.topAppBarHeight),this.moveTopAppBar())},a.prototype.handleWindowResize=function(){var s=this;this.resizeThrottleId||(this.resizeThrottleId=setTimeout(function(){s.resizeThrottleId=_u,s.throttledResizeHandler()},Tu.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)),this.isCurrentlyBeingResized=!0,this.resizeDebounceId&&clearTimeout(this.resizeDebounceId),this.resizeDebounceId=setTimeout(function(){s.handleTargetScroll(),s.isCurrentlyBeingResized=!1,s.resizeDebounceId=_u},Tu.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)},a.prototype.checkForUpdate=function(){var s=-this.topAppBarHeight,l=this.currentAppBarOffsetTop<0,m=this.currentAppBarOffsetTop>s,g=l&&m;if(g)this.wasDocked=!1;else if(this.wasDocked){if(this.isDockedShowing!==m)return this.isDockedShowing=m,!0}else return this.wasDocked=!0,!0;return g},a.prototype.moveTopAppBar=function(){if(this.checkForUpdate()){var s=this.currentAppBarOffsetTop;Math.abs(s)>=this.topAppBarHeight&&(s=-Tu.MAX_TOP_APP_BAR_HEIGHT),this.adapter.setStyle("top",s+"px")}},a.prototype.throttledResizeHandler=function(){var s=this.adapter.getTopAppBarHeight();this.topAppBarHeight!==s&&(this.wasDocked=!1,this.currentAppBarOffsetTop-=this.topAppBarHeight-s,this.topAppBarHeight=s),this.handleTargetScroll()},a}(Xh);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var W_=function(u){Is(a,u);function a(){var s=u!==null&&u.apply(this,arguments)||this;return s.wasScrolled=!1,s}return a.prototype.handleTargetScroll=function(){var s=this.adapter.getViewportScrollY();s<=0?this.wasScrolled&&(this.adapter.removeClass(Qo.FIXED_SCROLLED_CLASS),this.wasScrolled=!1):this.wasScrolled||(this.adapter.addClass(Qo.FIXED_SCROLLED_CLASS),this.wasScrolled=!0)},a}(cm);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var X_=function(u){Is(a,u);function a(s){var l=u.call(this,s)||this;return l.collapsed=!1,l.isAlwaysCollapsed=!1,l}return Object.defineProperty(a.prototype,"isCollapsed",{get:function(){return this.collapsed},enumerable:!1,configurable:!0}),a.prototype.init=function(){u.prototype.init.call(this),this.adapter.getTotalActionItems()>0&&this.adapter.addClass(Qo.SHORT_HAS_ACTION_ITEM_CLASS),this.setAlwaysCollapsed(this.adapter.hasClass(Qo.SHORT_COLLAPSED_CLASS))},a.prototype.setAlwaysCollapsed=function(s){this.isAlwaysCollapsed=!!s,this.isAlwaysCollapsed?this.collapse():this.maybeCollapseBar()},a.prototype.getAlwaysCollapsed=function(){return this.isAlwaysCollapsed},a.prototype.handleTargetScroll=function(){this.maybeCollapseBar()},a.prototype.maybeCollapseBar=function(){if(!this.isAlwaysCollapsed){var s=this.adapter.getViewportScrollY();s<=0?this.collapsed&&this.uncollapse():this.collapsed||this.collapse()}},a.prototype.uncollapse=function(){this.adapter.removeClass(Qo.SHORT_COLLAPSED_CLASS),this.collapsed=!1},a.prototype.collapse=function(){this.adapter.addClass(Qo.SHORT_COLLAPSED_CLASS),this.collapsed=!0},a}(Xh);function zn(u){return Object.entries(u).filter(([a,s])=>a!==""&&s).map(([a])=>a).join(" ")}function Rr(u,a,s,l={bubbles:!0},m=!1){if(typeof Event<"u"&&u){const g=new CustomEvent(a,Object.assign(Object.assign({},l),{detail:s}));if(u==null||u.dispatchEvent(g),m&&a.startsWith("SMUI")){const v=new CustomEvent(a.replace(/^SMUI/g,()=>"MDC"),Object.assign(Object.assign({},l),{detail:s}));u==null||u.dispatchEvent(v),v.defaultPrevented&&g.preventDefault()}return g}}function Mp(u,a){let s=Object.getOwnPropertyNames(u);const l={};for(let m=0;m<s.length;m++){const g=s[m],v=g.indexOf("$");v!==-1&&a.indexOf(g.substring(0,v+1))!==-1||a.indexOf(g)===-1&&(l[g]=u[g])}return l}const Dp=/^[a-z]+(?::(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/,Y_=/^[^$]+(?:\$(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$/;function wa(u){let a,s=[];u.$on=(m,g)=>{let v=m,r=()=>{};return a?r=a(v,g):s.push([v,g]),v.match(Dp)&&console&&console.warn('Event modifiers in SMUI now use "$" instead of ":", so that all events can be bound with modifiers. Please update your event binding: ',v),()=>{r()}};function l(m){Xo(u,m)}return m=>{const g=[],v={};a=(r,T)=>{let A=r,C=T,I=!1;const k=A.match(Dp),K=A.match(Y_),$=k||K;if(A.match(/^SMUI:\w+:/)){const Te=A.split(":");let me="";for(let Le=0;Le<Te.length;Le++)me+=Le===Te.length-1?":"+Te[Le]:Te[Le].split("-").map(Ue=>Ue.slice(0,1).toUpperCase()+Ue.slice(1)).join("");console.warn(`The event ${A.split("$")[0]} has been renamed to ${me.split("$")[0]}.`),A=me}if($){const Te=A.split(k?":":"$");A=Te[0];const me=Object.fromEntries(Te.slice(1).map(Le=>[Le,!0]));me.passive&&(I=I||{},I.passive=!0),me.nonpassive&&(I=I||{},I.passive=!1),me.capture&&(I=I||{},I.capture=!0),me.once&&(I=I||{},I.once=!0),me.preventDefault&&(C=nm(C)),me.stopPropagation&&(C=M_(C))}const he=Ri(m,A,C,I),we=()=>{he();const Te=g.indexOf(we);Te>-1&&g.splice(Te,1)};return g.push(we),A in v||(v[A]=Ri(m,A,l)),we};for(let r=0;r<s.length;r++)a(s[r][0],s[r][1]);return{destroy:()=>{for(let r=0;r<g.length;r++)g[r]();for(let r of Object.entries(v))r[1]()}}}}function Sl(u,a){let s=Object.getOwnPropertyNames(u);const l={};for(let m=0;m<s.length;m++){const g=s[m];g.substring(0,a.length)===a&&(l[g.substring(a.length)]=u[g])}return l}function lr(u,a){let s=[];if(a)for(let l=0;l<a.length;l++){const m=a[l],g=Array.isArray(m)?m[0]:m;Array.isArray(m)&&m.length>1?s.push(g(u,m[1])):s.push(g(u))}return{update(l){if((l&&l.length||0)!=s.length)throw new Error("You must not change the length of an actions array.");if(l)for(let m=0;m<l.length;m++){const g=s[m];if(g&&g.update){const v=l[m];Array.isArray(v)&&v.length>1?g.update(v[1]):g.update()}}},destroy(){for(let l=0;l<s.length;l++){const m=s[l];m&&m.destroy&&m.destroy()}}}}const{window:Pp}=D_;function J_(u){let a,s,l,m,g,v,r;const T=u[22].default,A=Jn(T,u,u[21],null);let C=[{class:s=zn({[u[2]]:!0,"mdc-top-app-bar":!0,"mdc-top-app-bar--short":u[4]==="short","mdc-top-app-bar--short-collapsed":u[0],"mdc-top-app-bar--fixed":u[4]==="fixed","smui-top-app-bar--static":u[4]==="static","smui-top-app-bar--color-secondary":u[5]==="secondary","mdc-top-app-bar--prominent":u[6],"mdc-top-app-bar--dense":u[7],...u[11]})},{style:l=Object.entries(u[12]).map(Lp).concat([u[3]]).join(" ")},u[15]],I={};for(let k=0;k<C.length;k+=1)I=Jt(I,C[k]);return{c(){a=ge("header"),A&&A.c(),this.h()},l(k){a=_e(k,"HEADER",{class:!0,style:!0});var K=Ce(a);A&&A.l(K),K.forEach(Y),this.h()},h(){en(a,I)},m(k,K){et(k,a,K),A&&A.m(a,null),u[25](a),g=!0,v||(r=[Ri(Pp,"resize",u[23]),Ri(Pp,"scroll",u[24]),un(m=lr.call(null,a,u[1])),un(u[13].call(null,a)),Ri(a,"SMUITopAppBarIconButton:nav",u[26])],v=!0)},p(k,K){A&&A.p&&(!g||K[0]&2097152)&&Qn(A,T,k,k[21],g?ea(T,k[21],K,null):$n(k[21]),null),en(a,I=aa(C,[(!g||K[0]&2293&&s!==(s=zn({[k[2]]:!0,"mdc-top-app-bar":!0,"mdc-top-app-bar--short":k[4]==="short","mdc-top-app-bar--short-collapsed":k[0],"mdc-top-app-bar--fixed":k[4]==="fixed","smui-top-app-bar--static":k[4]==="static","smui-top-app-bar--color-secondary":k[5]==="secondary","mdc-top-app-bar--prominent":k[6],"mdc-top-app-bar--dense":k[7],...k[11]})))&&{class:s},(!g||K[0]&4104&&l!==(l=Object.entries(k[12]).map(Lp).concat([k[3]]).join(" ")))&&{style:l},K[0]&32768&&k[15]])),m&&Ma(m.update)&&K[0]&2&&m.update.call(null,k[1])},i(k){g||(_t(A,k),g=!0)},o(k){It(A,k),g=!1},d(k){k&&Y(a),A&&A.d(k),u[25](null),v=!1,ha(r)}}}const Lp=([u,a])=>`${u}: ${a};`;function Q_(u,a,s){const l=["use","class","style","variant","color","collapsed","prominent","dense","scrollTarget","getPropStore","getElement"];let m=Ni(a,l),{$$slots:g={},$$scope:v}=a;const r=wa(va());let T=()=>{};function A(Lt){return Lt===T}let{use:C=[]}=a,{class:I=""}=a,{style:k=""}=a,{variant:K="standard"}=a,{color:$="primary"}=a,{collapsed:he=T}=a;const we=!A(he)&&!!he;A(he)&&(he=!1);let{prominent:Te=!1}=a,{dense:me=!1}=a,{scrollTarget:Le=void 0}=a,Ue,Oe,We={},Me={},Ve,tt=B_({variant:K,prominent:Te,dense:me},Lt=>{s(18,Ve=Lt)}),it,dt=K;fs(()=>(s(9,Oe=Dt()),Oe.init(),()=>{Oe.destroy()}));function Dt(){const Lt={static:Xh,short:X_,fixed:W_}[K]||cm;return new Lt({hasClass:He,addClass:Xe,removeClass:pt,setStyle:Ne,getTopAppBarHeight:()=>Ue.clientHeight,notifyNavigationIconClicked:()=>Rr(Ue,"SMUITopAppBar:nav",void 0,void 0,!0),getViewportScrollY:()=>Le==null?window.pageYOffset:Le.scrollTop,getTotalActionItems:()=>Ue.querySelectorAll(".mdc-top-app-bar__action-item").length})}function He(Lt){return Lt in We?We[Lt]:jt().classList.contains(Lt)}function Xe(Lt){We[Lt]||s(11,We[Lt]=!0,We)}function pt(Lt){(!(Lt in We)||We[Lt])&&s(11,We[Lt]=!1,We)}function Ne(Lt,vi){Me[Lt]!=vi&&(vi===""||vi==null?(delete Me[Lt],s(12,Me),s(20,dt),s(4,K),s(9,Oe)):s(12,Me[Lt]=vi,Me))}function Ft(){Oe&&(Oe.handleTargetScroll(),K==="short"&&s(0,he="isCollapsed"in Oe&&Oe.isCollapsed))}function ut(){return tt}function jt(){return Ue}const yt=()=>K!=="short"&&K!=="fixed"&&Oe&&Oe.handleWindowResize(),mi=()=>Le==null&&Ft();function bi(Lt){Di[Lt?"unshift":"push"](()=>{Ue=Lt,s(10,Ue)})}const gi=()=>Oe&&Oe.handleNavigationClick();return u.$$set=Lt=>{a=Jt(Jt({},a),xa(Lt)),s(15,m=Ni(a,l)),"use"in Lt&&s(1,C=Lt.use),"class"in Lt&&s(2,I=Lt.class),"style"in Lt&&s(3,k=Lt.style),"variant"in Lt&&s(4,K=Lt.variant),"color"in Lt&&s(5,$=Lt.color),"collapsed"in Lt&&s(0,he=Lt.collapsed),"prominent"in Lt&&s(6,Te=Lt.prominent),"dense"in Lt&&s(7,me=Lt.dense),"scrollTarget"in Lt&&s(8,Le=Lt.scrollTarget),"$$scope"in Lt&&s(21,v=Lt.$$scope)},u.$$.update=()=>{u.$$.dirty[0]&262352&&Ve&&Ve({variant:K,prominent:Te,dense:me}),u.$$.dirty[0]&1049104&&dt!==K&&Oe&&(s(20,dt=K),Oe.destroy(),s(11,We={}),s(12,Me={}),s(9,Oe=Dt()),Oe.init()),u.$$.dirty[0]&528&&Oe&&K==="short"&&"setAlwaysCollapsed"in Oe&&Oe.setAlwaysCollapsed(we),u.$$.dirty[0]&524544&&it!==Le&&(it&&it.removeEventListener("scroll",Ft),Le&&Le.addEventListener("scroll",Ft),s(19,it=Le))},[he,C,I,k,K,$,Te,me,Le,Oe,Ue,We,Me,r,Ft,m,ut,jt,Ve,it,dt,v,g,yt,mi,bi,gi]}class $_ extends An{constructor(a){super(),kn(this,a,Q_,J_,Mn,{use:1,class:2,style:3,variant:4,color:5,collapsed:0,prominent:6,dense:7,scrollTarget:8,getPropStore:16,getElement:17},null,[-1,-1])}get getPropStore(){return this.$$.ctx[16]}get getElement(){return this.$$.ctx[17]}}function ey(u){let a,s,l,m,g;const v=u[6].default,r=Jn(v,u,u[5],null);let T=[u[3]],A={};for(let C=0;C<T.length;C+=1)A=Jt(A,T[C]);return{c(){a=ge("div"),r&&r.c(),this.h()},l(C){a=_e(C,"DIV",{});var I=Ce(a);r&&r.l(I),I.forEach(Y),this.h()},h(){en(a,A)},m(C,I){et(C,a,I),r&&r.m(a,null),u[7](a),l=!0,m||(g=[un(s=lr.call(null,a,u[0])),un(u[2].call(null,a))],m=!0)},p(C,[I]){r&&r.p&&(!l||I&32)&&Qn(r,v,C,C[5],l?ea(v,C[5],I,null):$n(C[5]),null),en(a,A=aa(T,[I&8&&C[3]])),s&&Ma(s.update)&&I&1&&s.update.call(null,C[0])},i(C){l||(_t(r,C),l=!0)},o(C){It(r,C),l=!1},d(C){C&&Y(a),r&&r.d(C),u[7](null),m=!1,ha(g)}}}function ty(u,a,s){const l=["use","getElement"];let m=Ni(a,l),{$$slots:g={},$$scope:v}=a,{use:r=[]}=a;const T=wa(va());let A;function C(){return A}function I(k){Di[k?"unshift":"push"](()=>{A=k,s(1,A)})}return u.$$set=k=>{a=Jt(Jt({},a),xa(k)),s(3,m=Ni(a,l)),"use"in k&&s(0,r=k.use),"$$scope"in k&&s(5,v=k.$$scope)},[r,A,T,m,C,v,g,I]}class um extends An{constructor(a){super(),kn(this,a,ty,ey,Mn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function iy(u){let a;const s=u[10].default,l=Jn(s,u,u[12],null);return{c(){l&&l.c()},l(m){l&&l.l(m)},m(m,g){l&&l.m(m,g),a=!0},p(m,g){l&&l.p&&(!a||g&4096)&&Qn(l,s,m,m[12],a?ea(s,m[12],g,null):$n(m[12]),null)},i(m){a||(_t(l,m),a=!0)},o(m){It(l,m),a=!1},d(m){l&&l.d(m)}}}function ny(u){let a,s,l;const m=[{use:[u[7],...u[0]]},{class:zn({[u[1]]:!0,[u[5]]:!0,...u[4]})},u[6],u[8]];var g=u[2];function v(r){let T={$$slots:{default:[iy]},$$scope:{ctx:r}};for(let A=0;A<m.length;A+=1)T=Jt(T,m[A]);return{props:T}}return g&&(a=new g(v(u)),u[11](a)),{c(){a&&Ei(a.$$.fragment),s=sn()},l(r){a&&qi(a.$$.fragment,r),s=sn()},m(r,T){a&&Ii(a,r,T),et(r,s,T),l=!0},p(r,[T]){const A=T&499?aa(m,[T&129&&{use:[r[7],...r[0]]},T&50&&{class:zn({[r[1]]:!0,[r[5]]:!0,...r[4]})},T&64&&Lr(r[6]),T&256&&Lr(r[8])]):{};if(T&4096&&(A.$$scope={dirty:T,ctx:r}),g!==(g=r[2])){if(a){es();const C=a;It(C.$$.fragment,1,0,()=>{Ai(C,1)}),$r()}g?(a=new g(v(r)),r[11](a),Ei(a.$$.fragment),_t(a.$$.fragment,1),Ii(a,s.parentNode,s)):a=null}else g&&a.$set(A)},i(r){l||(a&&_t(a.$$.fragment,r),l=!0)},o(r){a&&It(a.$$.fragment,r),l=!1},d(r){u[11](null),r&&Y(s),a&&Ai(a,r)}}}const _o={component:um,class:"",classMap:{},contexts:{},props:{}};function ay(u,a,s){const l=["use","class","component","getElement"];let m=Ni(a,l),{$$slots:g={},$$scope:v}=a,{use:r=[]}=a,{class:T=""}=a,A;const C=_o.class,I={},k=[],K=_o.contexts,$=_o.props;let{component:he=_o.component}=a;Object.entries(_o.classMap).forEach(([Le,Ue])=>{const Oe=sr(Ue);Oe&&"subscribe"in Oe&&k.push(Oe.subscribe(We=>{s(4,I[Le]=We,I)}))});const we=wa(va());for(let Le in K)K.hasOwnProperty(Le)&&Ja(Le,K[Le]);Al(()=>{for(const Le of k)Le()});function Te(){return A.getElement()}function me(Le){Di[Le?"unshift":"push"](()=>{A=Le,s(3,A)})}return u.$$set=Le=>{a=Jt(Jt({},a),xa(Le)),s(8,m=Ni(a,l)),"use"in Le&&s(0,r=Le.use),"class"in Le&&s(1,T=Le.class),"component"in Le&&s(2,he=Le.component),"$$scope"in Le&&s(12,v=Le.$$scope)},[r,T,he,A,I,C,$,we,m,Te,g,me,v]}class ry extends An{constructor(a){super(),kn(this,a,ay,ny,Mn,{use:0,class:1,component:2,getElement:9})}get getElement(){return this.$$.ctx[9]}}const Rp=Object.assign({},_o);function Hr(u){return new Proxy(ry,{construct:function(a,s){return Object.assign(_o,Rp,u),new a(...s)},get:function(a,s){return Object.assign(_o,Rp,u),a[s]}})}function sy(u){let a,s,l,m,g;const v=u[7].default,r=Jn(v,u,u[6],null);let T=[{href:u[1]},u[4]],A={};for(let C=0;C<T.length;C+=1)A=Jt(A,T[C]);return{c(){a=ge("a"),r&&r.c(),this.h()},l(C){a=_e(C,"A",{href:!0});var I=Ce(a);r&&r.l(I),I.forEach(Y),this.h()},h(){en(a,A)},m(C,I){et(C,a,I),r&&r.m(a,null),u[8](a),l=!0,m||(g=[un(s=lr.call(null,a,u[0])),un(u[3].call(null,a))],m=!0)},p(C,[I]){r&&r.p&&(!l||I&64)&&Qn(r,v,C,C[6],l?ea(v,C[6],I,null):$n(C[6]),null),en(a,A=aa(T,[(!l||I&2)&&{href:C[1]},I&16&&C[4]])),s&&Ma(s.update)&&I&1&&s.update.call(null,C[0])},i(C){l||(_t(r,C),l=!0)},o(C){It(r,C),l=!1},d(C){C&&Y(a),r&&r.d(C),u[8](null),m=!1,ha(g)}}}function oy(u,a,s){const l=["use","href","getElement"];let m=Ni(a,l),{$$slots:g={},$$scope:v}=a,{use:r=[]}=a,{href:T="javascript:void(0);"}=a;const A=wa(va());let C;function I(){return C}function k(K){Di[K?"unshift":"push"](()=>{C=K,s(2,C)})}return u.$$set=K=>{a=Jt(Jt({},a),xa(K)),s(4,m=Ni(a,l)),"use"in K&&s(0,r=K.use),"href"in K&&s(1,T=K.href),"$$scope"in K&&s(6,v=K.$$scope)},[r,T,C,A,m,I,v,g,k]}class ly extends An{constructor(a){super(),kn(this,a,oy,sy,Mn,{use:0,href:1,getElement:5})}get getElement(){return this.$$.ctx[5]}}function cy(u){let a,s,l,m,g;const v=u[6].default,r=Jn(v,u,u[5],null);let T=[u[3]],A={};for(let C=0;C<T.length;C+=1)A=Jt(A,T[C]);return{c(){a=ge("button"),r&&r.c(),this.h()},l(C){a=_e(C,"BUTTON",{});var I=Ce(a);r&&r.l(I),I.forEach(Y),this.h()},h(){en(a,A)},m(C,I){et(C,a,I),r&&r.m(a,null),a.autofocus&&a.focus(),u[7](a),l=!0,m||(g=[un(s=lr.call(null,a,u[0])),un(u[2].call(null,a))],m=!0)},p(C,[I]){r&&r.p&&(!l||I&32)&&Qn(r,v,C,C[5],l?ea(v,C[5],I,null):$n(C[5]),null),en(a,A=aa(T,[I&8&&C[3]])),s&&Ma(s.update)&&I&1&&s.update.call(null,C[0])},i(C){l||(_t(r,C),l=!0)},o(C){It(r,C),l=!1},d(C){C&&Y(a),r&&r.d(C),u[7](null),m=!1,ha(g)}}}function uy(u,a,s){const l=["use","getElement"];let m=Ni(a,l),{$$slots:g={},$$scope:v}=a,{use:r=[]}=a;const T=wa(va());let A;function C(){return A}function I(k){Di[k?"unshift":"push"](()=>{A=k,s(1,A)})}return u.$$set=k=>{a=Jt(Jt({},a),xa(k)),s(3,m=Ni(a,l)),"use"in k&&s(0,r=k.use),"$$scope"in k&&s(5,v=k.$$scope)},[r,A,T,m,C,v,g,I]}class hy extends An{constructor(a){super(),kn(this,a,uy,cy,Mn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function dy(u){let a,s,l,m,g;const v=u[6].default,r=Jn(v,u,u[5],null);let T=[u[3]],A={};for(let C=0;C<T.length;C+=1)A=Jt(A,T[C]);return{c(){a=ge("h1"),r&&r.c(),this.h()},l(C){a=_e(C,"H1",{});var I=Ce(a);r&&r.l(I),I.forEach(Y),this.h()},h(){en(a,A)},m(C,I){et(C,a,I),r&&r.m(a,null),u[7](a),l=!0,m||(g=[un(s=lr.call(null,a,u[0])),un(u[2].call(null,a))],m=!0)},p(C,[I]){r&&r.p&&(!l||I&32)&&Qn(r,v,C,C[5],l?ea(v,C[5],I,null):$n(C[5]),null),en(a,A=aa(T,[I&8&&C[3]])),s&&Ma(s.update)&&I&1&&s.update.call(null,C[0])},i(C){l||(_t(r,C),l=!0)},o(C){It(r,C),l=!1},d(C){C&&Y(a),r&&r.d(C),u[7](null),m=!1,ha(g)}}}function py(u,a,s){const l=["use","getElement"];let m=Ni(a,l),{$$slots:g={},$$scope:v}=a,{use:r=[]}=a;const T=wa(va());let A;function C(){return A}function I(k){Di[k?"unshift":"push"](()=>{A=k,s(1,A)})}return u.$$set=k=>{a=Jt(Jt({},a),xa(k)),s(3,m=Ni(a,l)),"use"in k&&s(0,r=k.use),"$$scope"in k&&s(5,v=k.$$scope)},[r,A,T,m,C,v,g,I]}class fy extends An{constructor(a){super(),kn(this,a,py,dy,Mn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function my(u){let a,s,l,m,g;const v=u[6].default,r=Jn(v,u,u[5],null);let T=[u[3]],A={};for(let C=0;C<T.length;C+=1)A=Jt(A,T[C]);return{c(){a=ge("h2"),r&&r.c(),this.h()},l(C){a=_e(C,"H2",{});var I=Ce(a);r&&r.l(I),I.forEach(Y),this.h()},h(){en(a,A)},m(C,I){et(C,a,I),r&&r.m(a,null),u[7](a),l=!0,m||(g=[un(s=lr.call(null,a,u[0])),un(u[2].call(null,a))],m=!0)},p(C,[I]){r&&r.p&&(!l||I&32)&&Qn(r,v,C,C[5],l?ea(v,C[5],I,null):$n(C[5]),null),en(a,A=aa(T,[I&8&&C[3]])),s&&Ma(s.update)&&I&1&&s.update.call(null,C[0])},i(C){l||(_t(r,C),l=!0)},o(C){It(r,C),l=!1},d(C){C&&Y(a),r&&r.d(C),u[7](null),m=!1,ha(g)}}}function gy(u,a,s){const l=["use","getElement"];let m=Ni(a,l),{$$slots:g={},$$scope:v}=a,{use:r=[]}=a;const T=wa(va());let A;function C(){return A}function I(k){Di[k?"unshift":"push"](()=>{A=k,s(1,A)})}return u.$$set=k=>{a=Jt(Jt({},a),xa(k)),s(3,m=Ni(a,l)),"use"in k&&s(0,r=k.use),"$$scope"in k&&s(5,v=k.$$scope)},[r,A,T,m,C,v,g,I]}class _y extends An{constructor(a){super(),kn(this,a,gy,my,Mn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function yy(u){let a,s,l,m,g;const v=u[6].default,r=Jn(v,u,u[5],null);let T=[u[3]],A={};for(let C=0;C<T.length;C+=1)A=Jt(A,T[C]);return{c(){a=ge("h3"),r&&r.c(),this.h()},l(C){a=_e(C,"H3",{});var I=Ce(a);r&&r.l(I),I.forEach(Y),this.h()},h(){en(a,A)},m(C,I){et(C,a,I),r&&r.m(a,null),u[7](a),l=!0,m||(g=[un(s=lr.call(null,a,u[0])),un(u[2].call(null,a))],m=!0)},p(C,[I]){r&&r.p&&(!l||I&32)&&Qn(r,v,C,C[5],l?ea(v,C[5],I,null):$n(C[5]),null),en(a,A=aa(T,[I&8&&C[3]])),s&&Ma(s.update)&&I&1&&s.update.call(null,C[0])},i(C){l||(_t(r,C),l=!0)},o(C){It(r,C),l=!1},d(C){C&&Y(a),r&&r.d(C),u[7](null),m=!1,ha(g)}}}function by(u,a,s){const l=["use","getElement"];let m=Ni(a,l),{$$slots:g={},$$scope:v}=a,{use:r=[]}=a;const T=wa(va());let A;function C(){return A}function I(k){Di[k?"unshift":"push"](()=>{A=k,s(1,A)})}return u.$$set=k=>{a=Jt(Jt({},a),xa(k)),s(3,m=Ni(a,l)),"use"in k&&s(0,r=k.use),"$$scope"in k&&s(5,v=k.$$scope)},[r,A,T,m,C,v,g,I]}class vy extends An{constructor(a){super(),kn(this,a,by,yy,Mn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function xy(u){let a,s,l,m,g;const v=u[6].default,r=Jn(v,u,u[5],null);let T=[u[3]],A={};for(let C=0;C<T.length;C+=1)A=Jt(A,T[C]);return{c(){a=ge("li"),r&&r.c(),this.h()},l(C){a=_e(C,"LI",{});var I=Ce(a);r&&r.l(I),I.forEach(Y),this.h()},h(){en(a,A)},m(C,I){et(C,a,I),r&&r.m(a,null),u[7](a),l=!0,m||(g=[un(s=lr.call(null,a,u[0])),un(u[2].call(null,a))],m=!0)},p(C,[I]){r&&r.p&&(!l||I&32)&&Qn(r,v,C,C[5],l?ea(v,C[5],I,null):$n(C[5]),null),en(a,A=aa(T,[I&8&&C[3]])),s&&Ma(s.update)&&I&1&&s.update.call(null,C[0])},i(C){l||(_t(r,C),l=!0)},o(C){It(r,C),l=!1},d(C){C&&Y(a),r&&r.d(C),u[7](null),m=!1,ha(g)}}}function wy(u,a,s){const l=["use","getElement"];let m=Ni(a,l),{$$slots:g={},$$scope:v}=a,{use:r=[]}=a;const T=wa(va());let A;function C(){return A}function I(k){Di[k?"unshift":"push"](()=>{A=k,s(1,A)})}return u.$$set=k=>{a=Jt(Jt({},a),xa(k)),s(3,m=Ni(a,l)),"use"in k&&s(0,r=k.use),"$$scope"in k&&s(5,v=k.$$scope)},[r,A,T,m,C,v,g,I]}class Cy extends An{constructor(a){super(),kn(this,a,wy,xy,Mn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Ty(u){let a,s,l,m,g;const v=u[6].default,r=Jn(v,u,u[5],null);let T=[u[3]],A={};for(let C=0;C<T.length;C+=1)A=Jt(A,T[C]);return{c(){a=ge("main"),r&&r.c(),this.h()},l(C){a=_e(C,"MAIN",{});var I=Ce(a);r&&r.l(I),I.forEach(Y),this.h()},h(){en(a,A)},m(C,I){et(C,a,I),r&&r.m(a,null),u[7](a),l=!0,m||(g=[un(s=lr.call(null,a,u[0])),un(u[2].call(null,a))],m=!0)},p(C,[I]){r&&r.p&&(!l||I&32)&&Qn(r,v,C,C[5],l?ea(v,C[5],I,null):$n(C[5]),null),en(a,A=aa(T,[I&8&&C[3]])),s&&Ma(s.update)&&I&1&&s.update.call(null,C[0])},i(C){l||(_t(r,C),l=!0)},o(C){It(r,C),l=!1},d(C){C&&Y(a),r&&r.d(C),u[7](null),m=!1,ha(g)}}}function Sy(u,a,s){const l=["use","getElement"];let m=Ni(a,l),{$$slots:g={},$$scope:v}=a,{use:r=[]}=a;const T=wa(va());let A;function C(){return A}function I(k){Di[k?"unshift":"push"](()=>{A=k,s(1,A)})}return u.$$set=k=>{a=Jt(Jt({},a),xa(k)),s(3,m=Ni(a,l)),"use"in k&&s(0,r=k.use),"$$scope"in k&&s(5,v=k.$$scope)},[r,A,T,m,C,v,g,I]}class Ey extends An{constructor(a){super(),kn(this,a,Sy,Ty,Mn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Iy(u){let a,s,l,m,g;const v=u[6].default,r=Jn(v,u,u[5],null);let T=[u[3]],A={};for(let C=0;C<T.length;C+=1)A=Jt(A,T[C]);return{c(){a=ge("nav"),r&&r.c(),this.h()},l(C){a=_e(C,"NAV",{});var I=Ce(a);r&&r.l(I),I.forEach(Y),this.h()},h(){en(a,A)},m(C,I){et(C,a,I),r&&r.m(a,null),u[7](a),l=!0,m||(g=[un(s=lr.call(null,a,u[0])),un(u[2].call(null,a))],m=!0)},p(C,[I]){r&&r.p&&(!l||I&32)&&Qn(r,v,C,C[5],l?ea(v,C[5],I,null):$n(C[5]),null),en(a,A=aa(T,[I&8&&C[3]])),s&&Ma(s.update)&&I&1&&s.update.call(null,C[0])},i(C){l||(_t(r,C),l=!0)},o(C){It(r,C),l=!1},d(C){C&&Y(a),r&&r.d(C),u[7](null),m=!1,ha(g)}}}function Ay(u,a,s){const l=["use","getElement"];let m=Ni(a,l),{$$slots:g={},$$scope:v}=a,{use:r=[]}=a;const T=wa(va());let A;function C(){return A}function I(k){Di[k?"unshift":"push"](()=>{A=k,s(1,A)})}return u.$$set=k=>{a=Jt(Jt({},a),xa(k)),s(3,m=Ni(a,l)),"use"in k&&s(0,r=k.use),"$$scope"in k&&s(5,v=k.$$scope)},[r,A,T,m,C,v,g,I]}class ky extends An{constructor(a){super(),kn(this,a,Ay,Iy,Mn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function My(u){let a,s,l,m,g;const v=u[6].default,r=Jn(v,u,u[5],null);let T=[u[3]],A={};for(let C=0;C<T.length;C+=1)A=Jt(A,T[C]);return{c(){a=ge("span"),r&&r.c(),this.h()},l(C){a=_e(C,"SPAN",{});var I=Ce(a);r&&r.l(I),I.forEach(Y),this.h()},h(){en(a,A)},m(C,I){et(C,a,I),r&&r.m(a,null),u[7](a),l=!0,m||(g=[un(s=lr.call(null,a,u[0])),un(u[2].call(null,a))],m=!0)},p(C,[I]){r&&r.p&&(!l||I&32)&&Qn(r,v,C,C[5],l?ea(v,C[5],I,null):$n(C[5]),null),en(a,A=aa(T,[I&8&&C[3]])),s&&Ma(s.update)&&I&1&&s.update.call(null,C[0])},i(C){l||(_t(r,C),l=!0)},o(C){It(r,C),l=!1},d(C){C&&Y(a),r&&r.d(C),u[7](null),m=!1,ha(g)}}}function Dy(u,a,s){const l=["use","getElement"];let m=Ni(a,l),{$$slots:g={},$$scope:v}=a,{use:r=[]}=a;const T=wa(va());let A;function C(){return A}function I(k){Di[k?"unshift":"push"](()=>{A=k,s(1,A)})}return u.$$set=k=>{a=Jt(Jt({},a),xa(k)),s(3,m=Ni(a,l)),"use"in k&&s(0,r=k.use),"$$scope"in k&&s(5,v=k.$$scope)},[r,A,T,m,C,v,g,I]}class Py extends An{constructor(a){super(),kn(this,a,Dy,My,Mn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}function Ly(u){let a,s,l,m,g;const v=u[6].default,r=Jn(v,u,u[5],null);let T=[u[3]],A={};for(let C=0;C<T.length;C+=1)A=Jt(A,T[C]);return{c(){a=ge("ul"),r&&r.c(),this.h()},l(C){a=_e(C,"UL",{});var I=Ce(a);r&&r.l(I),I.forEach(Y),this.h()},h(){en(a,A)},m(C,I){et(C,a,I),r&&r.m(a,null),u[7](a),l=!0,m||(g=[un(s=lr.call(null,a,u[0])),un(u[2].call(null,a))],m=!0)},p(C,[I]){r&&r.p&&(!l||I&32)&&Qn(r,v,C,C[5],l?ea(v,C[5],I,null):$n(C[5]),null),en(a,A=aa(T,[I&8&&C[3]])),s&&Ma(s.update)&&I&1&&s.update.call(null,C[0])},i(C){l||(_t(r,C),l=!0)},o(C){It(r,C),l=!1},d(C){C&&Y(a),r&&r.d(C),u[7](null),m=!1,ha(g)}}}function Ry(u,a,s){const l=["use","getElement"];let m=Ni(a,l),{$$slots:g={},$$scope:v}=a,{use:r=[]}=a;const T=wa(va());let A;function C(){return A}function I(k){Di[k?"unshift":"push"](()=>{A=k,s(1,A)})}return u.$$set=k=>{a=Jt(Jt({},a),xa(k)),s(3,m=Ni(a,l)),"use"in k&&s(0,r=k.use),"$$scope"in k&&s(5,v=k.$$scope)},[r,A,T,m,C,v,g,I]}class zy extends An{constructor(a){super(),kn(this,a,Ry,Ly,Mn,{use:0,getElement:4})}get getElement(){return this.$$.ctx[4]}}const hm=ly,By=hy,yc=um,Fy=fy,Oy=_y,Ny=vy,Uy=Cy,Vy=Ey,jy=ky,Ml=Py,Gy=zy,Hy=Hr({class:"mdc-top-app-bar__row",component:yc});function qy(u){let a,s,l,m,g,v;const r=u[9].default,T=Jn(r,u,u[8],null);let A=[{class:s=zn({[u[1]]:!0,"mdc-top-app-bar__section":!0,"mdc-top-app-bar__section--align-start":u[2]==="start","mdc-top-app-bar__section--align-end":u[2]==="end"})},u[3]?{role:"toolbar"}:{},u[6]],C={};for(let I=0;I<A.length;I+=1)C=Jt(C,A[I]);return{c(){a=ge("section"),T&&T.c(),this.h()},l(I){a=_e(I,"SECTION",{class:!0});var k=Ce(a);T&&T.l(k),k.forEach(Y),this.h()},h(){en(a,C)},m(I,k){et(I,a,k),T&&T.m(a,null),u[10](a),m=!0,g||(v=[un(l=lr.call(null,a,u[0])),un(u[5].call(null,a))],g=!0)},p(I,[k]){T&&T.p&&(!m||k&256)&&Qn(T,r,I,I[8],m?ea(r,I[8],k,null):$n(I[8]),null),en(a,C=aa(A,[(!m||k&6&&s!==(s=zn({[I[1]]:!0,"mdc-top-app-bar__section":!0,"mdc-top-app-bar__section--align-start":I[2]==="start","mdc-top-app-bar__section--align-end":I[2]==="end"})))&&{class:s},k&8&&(I[3]?{role:"toolbar"}:{}),k&64&&I[6]])),l&&Ma(l.update)&&k&1&&l.update.call(null,I[0])},i(I){m||(_t(T,I),m=!0)},o(I){It(T,I),m=!1},d(I){I&&Y(a),T&&T.d(I),u[10](null),g=!1,ha(v)}}}function Zy(u,a,s){const l=["use","class","align","toolbar","getElement"];let m=Ni(a,l),{$$slots:g={},$$scope:v}=a;const r=wa(va());let{use:T=[]}=a,{class:A=""}=a,{align:C="start"}=a,{toolbar:I=!1}=a,k;Ja("SMUI:icon-button:context",I?"top-app-bar:action":"top-app-bar:navigation"),Ja("SMUI:button:context",I?"top-app-bar:action":"top-app-bar:navigation");function K(){return k}function $(he){Di[he?"unshift":"push"](()=>{k=he,s(4,k)})}return u.$$set=he=>{a=Jt(Jt({},a),xa(he)),s(6,m=Ni(a,l)),"use"in he&&s(0,T=he.use),"class"in he&&s(1,A=he.class),"align"in he&&s(2,C=he.align),"toolbar"in he&&s(3,I=he.toolbar),"$$scope"in he&&s(8,v=he.$$scope)},[T,A,C,I,k,r,m,K,v,g,$]}class Ky extends An{constructor(a){super(),kn(this,a,Zy,qy,Mn,{use:0,class:1,align:2,toolbar:3,getElement:7})}get getElement(){return this.$$.ctx[7]}}const Wy=Hr({class:"mdc-top-app-bar__title",component:Ml});function Xy(u){let a;const s=u[11].default,l=Jn(s,u,u[13],null);return{c(){l&&l.c()},l(m){l&&l.l(m)},m(m,g){l&&l.m(m,g),a=!0},p(m,g){l&&l.p&&(!a||g&8192)&&Qn(l,s,m,m[13],a?ea(s,m[13],g,null):$n(m[13]),null)},i(m){a||(_t(l,m),a=!0)},o(m){It(l,m),a=!1},d(m){l&&l.d(m)}}}function Yy(u){let a,s,l;const m=[{use:[u[6],...u[0]]},{class:zn({[u[1]]:!0,[u[5]]:!0})},u[7]];var g=u[2];function v(r){let T={$$slots:{default:[Xy]},$$scope:{ctx:r}};for(let A=0;A<m.length;A+=1)T=Jt(T,m[A]);return{props:T}}return g&&(a=new g(v(u)),u[12](a)),{c(){a&&Ei(a.$$.fragment),s=sn()},l(r){a&&qi(a.$$.fragment,r),s=sn()},m(r,T){a&&Ii(a,r,T),et(r,s,T),l=!0},p(r,[T]){const A=T&227?aa(m,[T&65&&{use:[r[6],...r[0]]},T&34&&{class:zn({[r[1]]:!0,[r[5]]:!0})},T&128&&Lr(r[7])]):{};if(T&8192&&(A.$$scope={dirty:T,ctx:r}),g!==(g=r[2])){if(a){es();const C=a;It(C.$$.fragment,1,0,()=>{Ai(C,1)}),$r()}g?(a=new g(v(r)),r[12](a),Ei(a.$$.fragment),_t(a.$$.fragment,1),Ii(a,s.parentNode,s)):a=null}else g&&a.$set(A)},i(r){l||(a&&_t(a.$$.fragment,r),l=!0)},o(r){a&&It(a.$$.fragment,r),l=!1},d(r){u[12](null),r&&Y(s),a&&Ai(a,r)}}}function Jy(u,a,s){let l,m;const g=["use","class","topAppBar","component","getElement"];let v=Ni(a,g),r,T=Ba,A=()=>(T(),T=P_(l,Ue=>s(10,r=Ue)),l);u.$$.on_destroy.push(()=>T());let{$$slots:C={},$$scope:I}=a;const k=wa(va());let{use:K=[]}=a,{class:$=""}=a,{topAppBar:he}=a,we,{component:Te=Vy}=a;function me(){return we.getElement()}function Le(Ue){Di[Ue?"unshift":"push"](()=>{we=Ue,s(4,we)})}return u.$$set=Ue=>{a=Jt(Jt({},a),xa(Ue)),s(7,v=Ni(a,g)),"use"in Ue&&s(0,K=Ue.use),"class"in Ue&&s(1,$=Ue.class),"topAppBar"in Ue&&s(8,he=Ue.topAppBar),"component"in Ue&&s(2,Te=Ue.component),"$$scope"in Ue&&s(13,I=Ue.$$scope)},u.$$.update=()=>{u.$$.dirty&256&&A(s(3,l=he&&he.getPropStore())),u.$$.dirty&1032&&s(5,m=(()=>!l||r.variant==="static"?"":r.variant==="short"?"mdc-top-app-bar--short-fixed-adjust":r.prominent&&r.dense?"mdc-top-app-bar--dense-prominent-fixed-adjust":r.prominent?"mdc-top-app-bar--prominent-fixed-adjust":r.dense?"mdc-top-app-bar--dense-fixed-adjust":"mdc-top-app-bar--fixed-adjust")())},[K,$,Te,l,we,m,k,v,he,me,r,C,Le,I]}class Qy extends An{constructor(a){super(),kn(this,a,Jy,Yy,Mn,{use:0,class:1,topAppBar:8,component:2,getElement:9})}get getElement(){return this.$$.ctx[9]}}const zp=Ky,$y=Qy;/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var yu={ICON_BUTTON_ON:"mdc-icon-button--on",ROOT:"mdc-icon-button"},Xs={ARIA_LABEL:"aria-label",ARIA_PRESSED:"aria-pressed",DATA_ARIA_LABEL_OFF:"data-aria-label-off",DATA_ARIA_LABEL_ON:"data-aria-label-on",CHANGE_EVENT:"MDCIconButtonToggle:change"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var eb=function(u){Is(a,u);function a(s){var l=u.call(this,Cr(Cr({},a.defaultAdapter),s))||this;return l.hasToggledAriaLabel=!1,l}return Object.defineProperty(a,"cssClasses",{get:function(){return yu},enumerable:!1,configurable:!0}),Object.defineProperty(a,"strings",{get:function(){return Xs},enumerable:!1,configurable:!0}),Object.defineProperty(a,"defaultAdapter",{get:function(){return{addClass:function(){},hasClass:function(){return!1},notifyChange:function(){},removeClass:function(){},getAttr:function(){return null},setAttr:function(){}}},enumerable:!1,configurable:!0}),a.prototype.init=function(){var s=this.adapter.getAttr(Xs.DATA_ARIA_LABEL_ON),l=this.adapter.getAttr(Xs.DATA_ARIA_LABEL_OFF);if(s&&l){if(this.adapter.getAttr(Xs.ARIA_PRESSED)!==null)throw new Error("MDCIconButtonToggleFoundation: Button should not set `aria-pressed` if it has a toggled aria label.");this.hasToggledAriaLabel=!0}else this.adapter.setAttr(Xs.ARIA_PRESSED,String(this.isOn()))},a.prototype.handleClick=function(){this.toggle(),this.adapter.notifyChange({isOn:this.isOn()})},a.prototype.isOn=function(){return this.adapter.hasClass(yu.ICON_BUTTON_ON)},a.prototype.toggle=function(s){if(s===void 0&&(s=!this.isOn()),s?this.adapter.addClass(yu.ICON_BUTTON_ON):this.adapter.removeClass(yu.ICON_BUTTON_ON),this.hasToggledAriaLabel){var l=s?this.adapter.getAttr(Xs.DATA_ARIA_LABEL_ON):this.adapter.getAttr(Xs.DATA_ARIA_LABEL_OFF);this.adapter.setAttr(Xs.ARIA_LABEL,l||"")}else this.adapter.setAttr(Xs.ARIA_PRESSED,""+s)},a}(kl);/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Fh="mdc-dom-focus-sentinel",tb=function(){function u(a,s){s===void 0&&(s={}),this.root=a,this.options=s,this.elFocusedBeforeTrapFocus=null}return u.prototype.trapFocus=function(){var a=this.getFocusableElements(this.root);if(a.length===0)throw new Error("FocusTrap: Element must have at least one focusable child.");this.elFocusedBeforeTrapFocus=document.activeElement instanceof HTMLElement?document.activeElement:null,this.wrapTabFocus(this.root),this.options.skipInitialFocus||this.focusInitialElement(a,this.options.initialFocusEl)},u.prototype.releaseFocus=function(){[].slice.call(this.root.querySelectorAll("."+Fh)).forEach(function(a){a.parentElement.removeChild(a)}),!this.options.skipRestoreFocus&&this.elFocusedBeforeTrapFocus&&this.elFocusedBeforeTrapFocus.focus()},u.prototype.wrapTabFocus=function(a){var s=this,l=this.createSentinel(),m=this.createSentinel();l.addEventListener("focus",function(){var g=s.getFocusableElements(a);g.length>0&&g[g.length-1].focus()}),m.addEventListener("focus",function(){var g=s.getFocusableElements(a);g.length>0&&g[0].focus()}),a.insertBefore(l,a.children[0]),a.appendChild(m)},u.prototype.focusInitialElement=function(a,s){var l=0;s&&(l=Math.max(a.indexOf(s),0)),a[l].focus()},u.prototype.getFocusableElements=function(a){var s=[].slice.call(a.querySelectorAll("[autofocus], [tabindex], a, input, textarea, select, button"));return s.filter(function(l){var m=l.getAttribute("aria-disabled")==="true"||l.getAttribute("disabled")!=null||l.getAttribute("hidden")!=null||l.getAttribute("aria-hidden")==="true",g=l.tabIndex>=0&&l.getBoundingClientRect().width>0&&!l.classList.contains(Fh)&&!m,v=!1;if(g){var r=getComputedStyle(l);v=r.display==="none"||r.visibility==="hidden"}return g&&!v})},u.prototype.createSentinel=function(){var a=document.createElement("div");return a.setAttribute("tabindex","0"),a.setAttribute("aria-hidden","true"),a.classList.add(Fh),a},u}();const ib=Object.freeze(Object.defineProperty({__proto__:null,FocusTrap:tb},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var an={UNKNOWN:"Unknown",BACKSPACE:"Backspace",ENTER:"Enter",SPACEBAR:"Spacebar",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",END:"End",HOME:"Home",ARROW_LEFT:"ArrowLeft",ARROW_UP:"ArrowUp",ARROW_RIGHT:"ArrowRight",ARROW_DOWN:"ArrowDown",DELETE:"Delete",ESCAPE:"Escape",TAB:"Tab"},Tr=new Set;Tr.add(an.BACKSPACE);Tr.add(an.ENTER);Tr.add(an.SPACEBAR);Tr.add(an.PAGE_UP);Tr.add(an.PAGE_DOWN);Tr.add(an.END);Tr.add(an.HOME);Tr.add(an.ARROW_LEFT);Tr.add(an.ARROW_UP);Tr.add(an.ARROW_RIGHT);Tr.add(an.ARROW_DOWN);Tr.add(an.DELETE);Tr.add(an.ESCAPE);Tr.add(an.TAB);var zr={BACKSPACE:8,ENTER:13,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ESCAPE:27,TAB:9},Sr=new Map;Sr.set(zr.BACKSPACE,an.BACKSPACE);Sr.set(zr.ENTER,an.ENTER);Sr.set(zr.SPACEBAR,an.SPACEBAR);Sr.set(zr.PAGE_UP,an.PAGE_UP);Sr.set(zr.PAGE_DOWN,an.PAGE_DOWN);Sr.set(zr.END,an.END);Sr.set(zr.HOME,an.HOME);Sr.set(zr.ARROW_LEFT,an.ARROW_LEFT);Sr.set(zr.ARROW_UP,an.ARROW_UP);Sr.set(zr.ARROW_RIGHT,an.ARROW_RIGHT);Sr.set(zr.ARROW_DOWN,an.ARROW_DOWN);Sr.set(zr.DELETE,an.DELETE);Sr.set(zr.ESCAPE,an.ESCAPE);Sr.set(zr.TAB,an.TAB);var Co=new Set;Co.add(an.PAGE_UP);Co.add(an.PAGE_DOWN);Co.add(an.END);Co.add(an.HOME);Co.add(an.ARROW_LEFT);Co.add(an.ARROW_UP);Co.add(an.ARROW_RIGHT);Co.add(an.ARROW_DOWN);function rr(u){var a=u.key;if(Tr.has(a))return a;var s=Sr.get(u.keyCode);return s||an.UNKNOWN}const{applyPassive:bu}=N_,{matches:nb}=lm;function $o(u,{ripple:a=!0,surface:s=!1,unbounded:l=!1,disabled:m=!1,color:g,active:v,rippleElement:r,eventTarget:T,activeTarget:A,addClass:C=$=>u.classList.add($),removeClass:I=$=>u.classList.remove($),addStyle:k=($,he)=>u.style.setProperty($,he),initPromise:K=Promise.resolve()}={}){let $,he=sr("SMUI:addLayoutListener"),we,Te=v,me=T,Le=A;function Ue(){s?(C("mdc-ripple-surface"),g==="primary"?(C("smui-ripple-surface--primary"),I("smui-ripple-surface--secondary")):g==="secondary"?(I("smui-ripple-surface--primary"),C("smui-ripple-surface--secondary")):(I("smui-ripple-surface--primary"),I("smui-ripple-surface--secondary"))):(I("mdc-ripple-surface"),I("smui-ripple-surface--primary"),I("smui-ripple-surface--secondary")),$&&Te!==v&&(Te=v,v?$.activate():v===!1&&$.deactivate()),a&&!$?($=new Z_({addClass:C,browserSupportsCssVars:()=>H_(window),computeBoundingRect:()=>(r||u).getBoundingClientRect(),containsEventTarget:We=>u.contains(We),deregisterDocumentInteractionHandler:(We,Me)=>document.documentElement.removeEventListener(We,Me,bu()),deregisterInteractionHandler:(We,Me)=>(T||u).removeEventListener(We,Me,bu()),deregisterResizeHandler:We=>window.removeEventListener("resize",We),getWindowPageOffset:()=>({x:window.pageXOffset,y:window.pageYOffset}),isSurfaceActive:()=>v==null?nb(A||u,":active"):v,isSurfaceDisabled:()=>!!m,isUnbounded:()=>!!l,registerDocumentInteractionHandler:(We,Me)=>document.documentElement.addEventListener(We,Me,bu()),registerInteractionHandler:(We,Me)=>(T||u).addEventListener(We,Me,bu()),registerResizeHandler:We=>window.addEventListener("resize",We),removeClass:I,updateCssVariable:k}),K.then(()=>{$&&($.init(),$.setUnbounded(l))})):$&&!a&&K.then(()=>{$&&($.destroy(),$=void 0)}),$&&(me!==T||Le!==A)&&(me=T,Le=A,$.destroy(),requestAnimationFrame(()=>{$&&($.init(),$.setUnbounded(l))})),!a&&l&&C("mdc-ripple-upgraded--unbounded")}Ue(),he&&(we=he(Oe));function Oe(){$&&$.layout()}return{update(We){({ripple:a,surface:s,unbounded:l,disabled:m,color:g,active:v,rippleElement:r,eventTarget:T,activeTarget:A,addClass:C,removeClass:I,addStyle:k,initPromise:K}=Object.assign({ripple:!0,surface:!1,unbounded:!1,disabled:!1,color:void 0,active:void 0,rippleElement:void 0,eventTarget:void 0,activeTarget:void 0,addClass:Me=>u.classList.add(Me),removeClass:Me=>u.classList.remove(Me),addStyle:(Me,Ve)=>u.style.setProperty(Me,Ve),initPromise:Promise.resolve()},We)),Ue()},destroy(){$&&($.destroy(),$=void 0,I("mdc-ripple-surface"),I("smui-ripple-surface--primary"),I("smui-ripple-surface--secondary")),we&&we()}}}function Bp(u){let a;return{c(){a=ge("div"),this.h()},l(s){a=_e(s,"DIV",{class:!0}),Ce(a).forEach(Y),this.h()},h(){ve(a,"class","mdc-icon-button__touch")},m(s,l){et(s,a,l)},d(s){s&&Y(a)}}}function ab(u){let a,s,l,m;const g=u[32].default,v=Jn(g,u,u[36],null);let r=u[8]&&Bp();return{c(){a=ge("div"),s=St(),v&&v.c(),r&&r.c(),l=sn(),this.h()},l(T){a=_e(T,"DIV",{class:!0}),Ce(a).forEach(Y),s=Et(T),v&&v.l(T),r&&r.l(T),l=sn(),this.h()},h(){ve(a,"class","mdc-icon-button__ripple")},m(T,A){et(T,a,A),et(T,s,A),v&&v.m(T,A),r&&r.m(T,A),et(T,l,A),m=!0},p(T,A){v&&v.p&&(!m||A[1]&32)&&Qn(v,g,T,T[36],m?ea(g,T[36],A,null):$n(T[36]),null),T[8]?r||(r=Bp(),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null)},i(T){m||(_t(v,T),m=!0)},o(T){It(v,T),m=!1},d(T){T&&Y(a),T&&Y(s),v&&v.d(T),r&&r.d(T),T&&Y(l)}}}function rb(u){let a,s,l;const m=[{use:[[$o,{ripple:u[4],unbounded:!0,color:u[5],disabled:!!u[28].disabled,addClass:u[25],removeClass:u[26],addStyle:u[27]}],u[21],...u[1]]},{class:zn({[u[2]]:!0,"mdc-icon-button":!0,"mdc-icon-button--on":!u[22](u[0])&&u[0],"mdc-icon-button--touch":u[8],"mdc-icon-button--display-flex":u[9],"smui-icon-button--size-button":u[10]==="button","mdc-icon-button--reduced-size":u[10]==="mini"||u[10]==="button","mdc-card__action":u[23]==="card:action","mdc-card__action--icon":u[23]==="card:action","mdc-top-app-bar__navigation-icon":u[23]==="top-app-bar:navigation","mdc-top-app-bar__action-item":u[23]==="top-app-bar:action","mdc-snackbar__dismiss":u[23]==="snackbar:actions","mdc-data-table__pagination-button":u[23]==="data-table:pagination","mdc-data-table__sort-icon-button":u[23]==="data-table:sortable-header-cell","mdc-dialog__close":u[23]==="dialog:header"&&u[12]==="close",...u[17]})},{style:Object.entries(u[18]).map(Fp).concat([u[3]]).join(" ")},{"aria-pressed":u[22](u[0])?null:u[0]?"true":"false"},{"aria-label":u[0]?u[6]:u[7]},{"data-aria-label-on":u[6]},{"data-aria-label-off":u[7]},{"aria-describedby":u[24]},{href:u[11]},u[20],u[19],u[28]];var g=u[13];function v(r){let T={$$slots:{default:[ab]},$$scope:{ctx:r}};for(let A=0;A<m.length;A+=1)T=Jt(T,m[A]);return{props:T}}return g&&(a=new g(v(u)),u[33](a),a.$on("click",u[34]),a.$on("click",u[35])),{c(){a&&Ei(a.$$.fragment),s=sn()},l(r){a&&qi(a.$$.fragment,r),s=sn()},m(r,T){a&&Ii(a,r,T),et(r,s,T),l=!0},p(r,T){const A=T[0]&536748031?aa(m,[T[0]&505413682&&{use:[[$o,{ripple:r[4],unbounded:!0,color:r[5],disabled:!!r[28].disabled,addClass:r[25],removeClass:r[26],addStyle:r[27]}],r[21],...r[1]]},T[0]&12719877&&{class:zn({[r[2]]:!0,"mdc-icon-button":!0,"mdc-icon-button--on":!r[22](r[0])&&r[0],"mdc-icon-button--touch":r[8],"mdc-icon-button--display-flex":r[9],"smui-icon-button--size-button":r[10]==="button","mdc-icon-button--reduced-size":r[10]==="mini"||r[10]==="button","mdc-card__action":r[23]==="card:action","mdc-card__action--icon":r[23]==="card:action","mdc-top-app-bar__navigation-icon":r[23]==="top-app-bar:navigation","mdc-top-app-bar__action-item":r[23]==="top-app-bar:action","mdc-snackbar__dismiss":r[23]==="snackbar:actions","mdc-data-table__pagination-button":r[23]==="data-table:pagination","mdc-data-table__sort-icon-button":r[23]==="data-table:sortable-header-cell","mdc-dialog__close":r[23]==="dialog:header"&&r[12]==="close",...r[17]})},T[0]&262152&&{style:Object.entries(r[18]).map(Fp).concat([r[3]]).join(" ")},T[0]&4194305&&{"aria-pressed":r[22](r[0])?null:r[0]?"true":"false"},T[0]&193&&{"aria-label":r[0]?r[6]:r[7]},T[0]&64&&{"data-aria-label-on":r[6]},T[0]&128&&{"data-aria-label-off":r[7]},T[0]&16777216&&{"aria-describedby":r[24]},T[0]&2048&&{href:r[11]},T[0]&1048576&&Lr(r[20]),T[0]&524288&&Lr(r[19]),T[0]&268435456&&Lr(r[28])]):{};if(T[0]&256|T[1]&32&&(A.$$scope={dirty:T,ctx:r}),g!==(g=r[13])){if(a){es();const C=a;It(C.$$.fragment,1,0,()=>{Ai(C,1)}),$r()}g?(a=new g(v(r)),r[33](a),a.$on("click",r[34]),a.$on("click",r[35]),Ei(a.$$.fragment),_t(a.$$.fragment,1),Ii(a,s.parentNode,s)):a=null}else g&&a.$set(A)},i(r){l||(a&&_t(a.$$.fragment,r),l=!0)},o(r){a&&It(a.$$.fragment,r),l=!1},d(r){u[33](null),r&&Y(s),a&&Ai(a,r)}}}const Fp=([u,a])=>`${u}: ${a};`;function sb(u,a,s){let l;const m=["use","class","style","ripple","color","toggle","pressed","ariaLabelOn","ariaLabelOff","touch","displayFlex","size","href","action","component","getElement"];let g=Ni(a,m),{$$slots:v={},$$scope:r}=a;const T=wa(va());let A=()=>{};function C(ot){return ot===A}let{use:I=[]}=a,{class:k=""}=a,{style:K=""}=a,{ripple:$=!0}=a,{color:he=void 0}=a,{toggle:we=!1}=a,{pressed:Te=A}=a,{ariaLabelOn:me=void 0}=a,{ariaLabelOff:Le=void 0}=a,{touch:Ue=!1}=a,{displayFlex:Oe=!0}=a,{size:We="normal"}=a,{href:Me=void 0}=a,{action:Ve=void 0}=a,tt,it,dt={},Dt={},He={},Xe=sr("SMUI:icon-button:context"),pt=sr("SMUI:icon-button:aria-describedby"),{component:Ne=Me==null?By:hm}=a,Ft=g.disabled;Ja("SMUI:icon:context","icon-button");let ut=null;Al(()=>{it&&it.destroy()});function jt(ot){return ot in dt?dt[ot]:Qt().classList.contains(ot)}function yt(ot){dt[ot]||s(17,dt[ot]=!0,dt)}function mi(ot){(!(ot in dt)||dt[ot])&&s(17,dt[ot]=!1,dt)}function bi(ot,Bi){Dt[ot]!=Bi&&(Bi===""||Bi==null?(delete Dt[ot],s(18,Dt)):s(18,Dt[ot]=Bi,Dt))}function gi(ot){var Bi;return ot in He?(Bi=He[ot])!==null&&Bi!==void 0?Bi:null:Qt().getAttribute(ot)}function Lt(ot,Bi){He[ot]!==Bi&&s(19,He[ot]=Bi,He)}function vi(ot){s(0,Te=ot.isOn)}function Qt(){return tt.getElement()}function ui(ot){Di[ot?"unshift":"push"](()=>{tt=ot,s(15,tt)})}const Ui=()=>it&&it.handleClick(),pi=()=>Xe==="top-app-bar:navigation"&&Rr(Qt(),"SMUITopAppBarIconButton:nav");return u.$$set=ot=>{a=Jt(Jt({},a),xa(ot)),s(28,g=Ni(a,m)),"use"in ot&&s(1,I=ot.use),"class"in ot&&s(2,k=ot.class),"style"in ot&&s(3,K=ot.style),"ripple"in ot&&s(4,$=ot.ripple),"color"in ot&&s(5,he=ot.color),"toggle"in ot&&s(29,we=ot.toggle),"pressed"in ot&&s(0,Te=ot.pressed),"ariaLabelOn"in ot&&s(6,me=ot.ariaLabelOn),"ariaLabelOff"in ot&&s(7,Le=ot.ariaLabelOff),"touch"in ot&&s(8,Ue=ot.touch),"displayFlex"in ot&&s(9,Oe=ot.displayFlex),"size"in ot&&s(10,We=ot.size),"href"in ot&&s(11,Me=ot.href),"action"in ot&&s(12,Ve=ot.action),"component"in ot&&s(13,Ne=ot.component),"$$scope"in ot&&s(36,r=ot.$$scope)},u.$$.update=()=>{if(u.$$.dirty[0]&4096&&s(20,l=(()=>{if(Xe==="data-table:pagination")switch(Ve){case"first-page":return{"data-first-page":"true"};case"prev-page":return{"data-prev-page":"true"};case"next-page":return{"data-next-page":"true"};case"last-page":return{"data-last-page":"true"};default:return{"data-action":"true"}}else return Xe==="dialog:header"?{"data-mdc-dialog-action":Ve}:{action:Ve}})()),Ft!==g.disabled){const ot=Qt();"blur"in ot&&ot.blur(),s(30,Ft=g.disabled)}u.$$.dirty[0]&536969216|u.$$.dirty[1]&1&&tt&&Qt()&&we!==ut&&(we&&!it?(s(16,it=new eb({addClass:yt,hasClass:jt,notifyChange:ot=>{vi(ot),Rr(Qt(),"SMUIIconButtonToggle:change",ot,void 0,!0)},removeClass:mi,getAttr:gi,setAttr:Lt})),it.init()):!we&&it&&(it.destroy(),s(16,it=void 0),s(17,dt={}),s(19,He={})),s(31,ut=we)),u.$$.dirty[0]&65537&&it&&!C(Te)&&it.isOn()!==Te&&it.toggle(Te)},[Te,I,k,K,$,he,me,Le,Ue,Oe,We,Me,Ve,Ne,Qt,tt,it,dt,Dt,He,l,T,C,Xe,pt,yt,mi,bi,g,we,Ft,ut,v,ui,Ui,pi,r]}class dm extends An{constructor(a){super(),kn(this,a,sb,rb,Mn,{use:1,class:2,style:3,ripple:4,color:5,toggle:29,pressed:0,ariaLabelOn:6,ariaLabelOff:7,touch:8,displayFlex:9,size:10,href:11,action:12,component:13,getElement:14},null,[-1,-1])}get getElement(){return this.$$.ctx[14]}}const ps={basePath:"/cactus",url:"http://cactuscosting.com",logo:"/cactus/favicon.png",base_worldbank_api:"https://api.worldbank.org/v2/country",cactus_api:"./all_cactus_datapoint_data.json",attribution:'&copy; <a href="https://cactuscosting.com" target="_blank" rel="noopener">CACTUS project</a>'};function ob(u){let a;return{c(){a=ge("link"),this.h()},l(s){a=_e(s,"LINK",{rel:!0,href:!0}),this.h()},h(){ve(a,"rel","stylesheet"),ve(a,"href",ps.basePath+"/smui.css")},m(s,l){et(s,a,l)},p:Ba,d(s){s&&Y(a)}}}function lb(u){let a,s,l;return{c(){a=ge("link"),s=St(),l=ge("link"),this.h()},l(m){a=_e(m,"LINK",{rel:!0,href:!0,media:!0}),s=Et(m),l=_e(m,"LINK",{rel:!0,href:!0,media:!0}),this.h()},h(){ve(a,"rel","stylesheet"),ve(a,"href",ps.basePath+"/smui.css"),ve(a,"media","print"),ve(l,"rel","stylesheet"),ve(l,"href",ps.basePath+"/smui-dark.css"),ve(l,"media","screen")},m(m,g){et(m,a,g),et(m,s,g),et(m,l,g)},p:Ba,d(m){m&&Y(a),m&&Y(s),m&&Y(l)}}}function cb(u){let a,s,l;return{c(){a=ge("link"),s=St(),l=ge("link"),this.h()},l(m){a=_e(m,"LINK",{rel:!0,href:!0,media:!0}),s=Et(m),l=_e(m,"LINK",{rel:!0,href:!0,media:!0}),this.h()},h(){ve(a,"rel","stylesheet"),ve(a,"href",ps.basePath+"/smui.css"),ve(a,"media","(prefers-color-scheme: light)"),ve(l,"rel","stylesheet"),ve(l,"href",ps.basePath+"/smui-dark.css"),ve(l,"media","screen and (prefers-color-scheme: dark)")},m(m,g){et(m,a,g),et(m,s,g),et(m,l,g)},p:Ba,d(m){m&&Y(a),m&&Y(s),m&&Y(l)}}}function ub(u){let a;return{c(){a=wt("close")},l(s){a=Ct(s,"close")},m(s,l){et(s,a,l)},d(s){s&&Y(a)}}}function hb(u){let a;return{c(){a=wt("menu")},l(s){a=Ct(s,"menu")},m(s,l){et(s,a,l)},d(s){s&&Y(a)}}}function db(u){let a;function s(g,v){return g[0]?ub:hb}let l=s(u),m=l(u);return{c(){m.c(),a=sn()},l(g){m.l(g),a=sn()},m(g,v){m.m(g,v),et(g,a,v)},p(g,v){l!==(l=s(g))&&(m.d(1),m=l(g),m&&(m.c(),m.m(a.parentNode,a)))},d(g){m.d(g),g&&Y(a)}}}function pb(u){let a;return{c(){a=wt("CACTUS project")},l(s){a=Ct(s,"CACTUS project")},m(s,l){et(s,a,l)},d(s){s&&Y(a)}}}function fb(u){let a,s,l,m,g,v,r,T;return a=new dm({props:{class:"material-icons",$$slots:{default:[db]},$$scope:{ctx:u}}}),a.$on("click",u[6]),r=new Wy({props:{$$slots:{default:[pb]},$$scope:{ctx:u}}}),{c(){Ei(a.$$.fragment),s=St(),l=ge("a"),m=ge("img"),v=St(),Ei(r.$$.fragment),this.h()},l(A){qi(a.$$.fragment,A),s=Et(A),l=_e(A,"A",{href:!0});var C=Ce(l);m=_e(C,"IMG",{src:!0,alt:!0,class:!0}),C.forEach(Y),v=Et(A),qi(r.$$.fragment,A),this.h()},h(){R_(m.src,g=ps.logo)||ve(m,"src",g),ve(m,"alt","logo"),ve(m,"class","logo svelte-zjddia"),ve(l,"href","http://cactuscosting.com")},m(A,C){Ii(a,A,C),et(A,s,C),et(A,l,C),ie(l,m),et(A,v,C),Ii(r,A,C),T=!0},p(A,C){const I={};C&257&&(I.$$scope={dirty:C,ctx:A}),a.$set(I);const k={};C&256&&(k.$$scope={dirty:C,ctx:A}),r.$set(k)},i(A){T||(_t(a.$$.fragment,A),_t(r.$$.fragment,A),T=!0)},o(A){It(a.$$.fragment,A),It(r.$$.fragment,A),T=!1},d(A){Ai(a,A),A&&Y(s),A&&Y(l),A&&Y(v),Ai(r,A)}}}function mb(u){let a;return{c(){a=wt(u[3])},l(s){a=Ct(s,u[3])},m(s,l){et(s,a,l)},p(s,l){l&8&&nn(a,s[3])},d(s){s&&Y(a)}}}function gb(u){let a,s;return a=new dm({props:{"aria-label":u[4],class:"material-icons",title:u[4],$$slots:{default:[mb]},$$scope:{ctx:u}}}),a.$on("click",u[5]),{c(){Ei(a.$$.fragment)},l(l){qi(a.$$.fragment,l)},m(l,m){Ii(a,l,m),s=!0},p(l,m){const g={};m&16&&(g["aria-label"]=l[4]),m&16&&(g.title=l[4]),m&264&&(g.$$scope={dirty:m,ctx:l}),a.$set(g)},i(l){s||(_t(a.$$.fragment,l),s=!0)},o(l){It(a.$$.fragment,l),s=!1},d(l){Ai(a,l)}}}function _b(u){let a,s,l,m;return a=new zp({props:{$$slots:{default:[fb]},$$scope:{ctx:u}}}),l=new zp({props:{align:"end",toolbar:!0,$$slots:{default:[gb]},$$scope:{ctx:u}}}),{c(){Ei(a.$$.fragment),s=St(),Ei(l.$$.fragment)},l(g){qi(a.$$.fragment,g),s=Et(g),qi(l.$$.fragment,g)},m(g,v){Ii(a,g,v),et(g,s,v),Ii(l,g,v),m=!0},p(g,v){const r={};v&257&&(r.$$scope={dirty:v,ctx:g}),a.$set(r);const T={};v&280&&(T.$$scope={dirty:v,ctx:g}),l.$set(T)},i(g){m||(_t(a.$$.fragment,g),_t(l.$$.fragment,g),m=!0)},o(g){It(a.$$.fragment,g),It(l.$$.fragment,g),m=!1},d(g){Ai(a,g),g&&Y(s),Ai(l,g)}}}function yb(u){let a,s;return a=new Hy({props:{$$slots:{default:[_b]},$$scope:{ctx:u}}}),{c(){Ei(a.$$.fragment)},l(l){qi(a.$$.fragment,l)},m(l,m){Ii(a,l,m),s=!0},p(l,m){const g={};m&281&&(g.$$scope={dirty:m,ctx:l}),a.$set(g)},i(l){s||(_t(a.$$.fragment,l),s=!0)},o(l){It(a.$$.fragment,l),s=!1},d(l){Ai(a,l)}}}function bb(u){let a,s,l,m,g,v;function r(I,k){return I[1]===void 0?cb:I[1]?lb:ob}let T=r(u),A=T(u),C={variant:"fixed",$$slots:{default:[yb]},$$scope:{ctx:u}};return l=new $_({props:C}),u[7](l),g=new $y({props:{topAppBar:u[2]}}),{c(){A.c(),a=sn(),s=St(),Ei(l.$$.fragment),m=St(),Ei(g.$$.fragment)},l(I){const k=L_('[data-svelte="svelte-7r4yyr"]',document.head);A.l(k),a=sn(),k.forEach(Y),s=Et(I),qi(l.$$.fragment,I),m=Et(I),qi(g.$$.fragment,I)},m(I,k){A.m(document.head,null),ie(document.head,a),et(I,s,k),Ii(l,I,k),et(I,m,k),Ii(g,I,k),v=!0},p(I,[k]){T===(T=r(I))&&A?A.p(I,k):(A.d(1),A=T(I),A&&(A.c(),A.m(a.parentNode,a)));const K={};k&281&&(K.$$scope={dirty:k,ctx:I}),l.$set(K);const $={};k&4&&($.topAppBar=I[2]),g.$set($)},i(I){v||(_t(l.$$.fragment,I),_t(g.$$.fragment,I),v=!0)},o(I){It(l.$$.fragment,I),It(g.$$.fragment,I),v=!1},d(I){A.d(I),Y(a),I&&Y(s),u[7](null),Ai(l,I),I&&Y(m),Ai(g,I)}}}function vb(u,a,s){let l,m,{drawerOpen:g=!1}=a,v,r;fs(async()=>{s(1,v=window.matchMedia("(prefers-color-scheme: dark)").matches)});const T=()=>{s(0,g=!1),s(1,v=!v)},A=()=>s(0,g=!g);function C(I){Di[I?"unshift":"push"](()=>{r=I,s(2,r)})}return u.$$set=I=>{"drawerOpen"in I&&s(0,g=I.drawerOpen)},u.$$.update=()=>{u.$$.dirty&2&&s(4,l=`switch to ${v?"light":"dark"} mode`),u.$$.dirty&2&&s(3,m=v?"light_mode":"dark_mode")},[g,v,r,m,l,T,A,C]}class xb extends An{constructor(a){super(),kn(this,a,vb,bb,Mn,{drawerOpen:0})}}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var mo,Ys,Wi={LIST_ITEM_ACTIVATED_CLASS:"mdc-list-item--activated",LIST_ITEM_CLASS:"mdc-list-item",LIST_ITEM_DISABLED_CLASS:"mdc-list-item--disabled",LIST_ITEM_SELECTED_CLASS:"mdc-list-item--selected",LIST_ITEM_TEXT_CLASS:"mdc-list-item__text",LIST_ITEM_PRIMARY_TEXT_CLASS:"mdc-list-item__primary-text",ROOT:"mdc-list"};mo={},mo[""+Wi.LIST_ITEM_ACTIVATED_CLASS]="mdc-list-item--activated",mo[""+Wi.LIST_ITEM_CLASS]="mdc-list-item",mo[""+Wi.LIST_ITEM_DISABLED_CLASS]="mdc-list-item--disabled",mo[""+Wi.LIST_ITEM_SELECTED_CLASS]="mdc-list-item--selected",mo[""+Wi.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-list-item__primary-text",mo[""+Wi.ROOT]="mdc-list";var wl=(Ys={},Ys[""+Wi.LIST_ITEM_ACTIVATED_CLASS]="mdc-deprecated-list-item--activated",Ys[""+Wi.LIST_ITEM_CLASS]="mdc-deprecated-list-item",Ys[""+Wi.LIST_ITEM_DISABLED_CLASS]="mdc-deprecated-list-item--disabled",Ys[""+Wi.LIST_ITEM_SELECTED_CLASS]="mdc-deprecated-list-item--selected",Ys[""+Wi.LIST_ITEM_TEXT_CLASS]="mdc-deprecated-list-item__text",Ys[""+Wi.LIST_ITEM_PRIMARY_TEXT_CLASS]="mdc-deprecated-list-item__primary-text",Ys[""+Wi.ROOT]="mdc-deprecated-list",Ys),go={ACTION_EVENT:"MDCList:action",ARIA_CHECKED:"aria-checked",ARIA_CHECKED_CHECKBOX_SELECTOR:'[role="checkbox"][aria-checked="true"]',ARIA_CHECKED_RADIO_SELECTOR:'[role="radio"][aria-checked="true"]',ARIA_CURRENT:"aria-current",ARIA_DISABLED:"aria-disabled",ARIA_ORIENTATION:"aria-orientation",ARIA_ORIENTATION_HORIZONTAL:"horizontal",ARIA_ROLE_CHECKBOX_SELECTOR:'[role="checkbox"]',ARIA_SELECTED:"aria-selected",ARIA_INTERACTIVE_ROLES_SELECTOR:'[role="listbox"], [role="menu"]',ARIA_MULTI_SELECTABLE_SELECTOR:'[aria-multiselectable="true"]',CHECKBOX_RADIO_SELECTOR:'input[type="checkbox"], input[type="radio"]',CHECKBOX_SELECTOR:'input[type="checkbox"]',CHILD_ELEMENTS_TO_TOGGLE_TABINDEX:`
    .`+Wi.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+Wi.LIST_ITEM_CLASS+` a,
    .`+wl[Wi.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+wl[Wi.LIST_ITEM_CLASS]+` a
  `,DEPRECATED_SELECTOR:".mdc-deprecated-list",FOCUSABLE_CHILD_ELEMENTS:`
    .`+Wi.LIST_ITEM_CLASS+` button:not(:disabled),
    .`+Wi.LIST_ITEM_CLASS+` a,
    .`+Wi.LIST_ITEM_CLASS+` input[type="radio"]:not(:disabled),
    .`+Wi.LIST_ITEM_CLASS+` input[type="checkbox"]:not(:disabled),
    .`+wl[Wi.LIST_ITEM_CLASS]+` button:not(:disabled),
    .`+wl[Wi.LIST_ITEM_CLASS]+` a,
    .`+wl[Wi.LIST_ITEM_CLASS]+` input[type="radio"]:not(:disabled),
    .`+wl[Wi.LIST_ITEM_CLASS]+` input[type="checkbox"]:not(:disabled)
  `,RADIO_SELECTOR:'input[type="radio"]',SELECTED_ITEM_SELECTOR:'[aria-selected="true"], [aria-current="true"]'},za={UNSET_INDEX:-1,TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS:300};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var wb=["input","button","textarea","select"],Yo=function(u){var a=u.target;if(!!a){var s=(""+a.tagName).toLowerCase();wb.indexOf(s)===-1&&u.preventDefault()}};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function Cb(){var u={bufferClearTimeout:0,currentFirstChar:"",sortedIndexCursor:0,typeaheadBuffer:""};return u}function Tb(u,a){for(var s=new Map,l=0;l<u;l++){var m=a(l).trim();if(!!m){var g=m[0].toLowerCase();s.has(g)||s.set(g,[]),s.get(g).push({text:m.toLowerCase(),index:l})}}return s.forEach(function(v){v.sort(function(r,T){return r.index-T.index})}),s}function Hh(u,a){var s=u.nextChar,l=u.focusItemAtIndex,m=u.sortedIndexByFirstChar,g=u.focusedItemIndex,v=u.skipFocus,r=u.isItemAtIndexDisabled;clearTimeout(a.bufferClearTimeout),a.bufferClearTimeout=setTimeout(function(){fm(a)},za.TYPEAHEAD_BUFFER_CLEAR_TIMEOUT_MS),a.typeaheadBuffer=a.typeaheadBuffer+s;var T;return a.typeaheadBuffer.length===1?T=Sb(m,g,r,a):T=Eb(m,r,a),T!==-1&&!v&&l(T),T}function Sb(u,a,s,l){var m=l.typeaheadBuffer[0],g=u.get(m);if(!g)return-1;if(m===l.currentFirstChar&&g[l.sortedIndexCursor].index===a){l.sortedIndexCursor=(l.sortedIndexCursor+1)%g.length;var v=g[l.sortedIndexCursor].index;if(!s(v))return v}l.currentFirstChar=m;var r=-1,T;for(T=0;T<g.length;T++)if(!s(g[T].index)){r=T;break}for(;T<g.length;T++)if(g[T].index>a&&!s(g[T].index)){r=T;break}return r!==-1?(l.sortedIndexCursor=r,g[l.sortedIndexCursor].index):-1}function Eb(u,a,s){var l=s.typeaheadBuffer[0],m=u.get(l);if(!m)return-1;var g=m[s.sortedIndexCursor];if(g.text.lastIndexOf(s.typeaheadBuffer,0)===0&&!a(g.index))return g.index;for(var v=(s.sortedIndexCursor+1)%m.length,r=-1;v!==s.sortedIndexCursor;){var T=m[v],A=T.text.lastIndexOf(s.typeaheadBuffer,0)===0,C=!a(T.index);if(A&&C){r=v;break}v=(v+1)%m.length}return r!==-1?(s.sortedIndexCursor=r,m[s.sortedIndexCursor].index):-1}function pm(u){return u.typeaheadBuffer.length>0}function fm(u){u.typeaheadBuffer=""}function Op(u,a){var s=u.event,l=u.isTargetListItem,m=u.focusedItemIndex,g=u.focusItemAtIndex,v=u.sortedIndexByFirstChar,r=u.isItemAtIndexDisabled,T=rr(s)==="ArrowLeft",A=rr(s)==="ArrowUp",C=rr(s)==="ArrowRight",I=rr(s)==="ArrowDown",k=rr(s)==="Home",K=rr(s)==="End",$=rr(s)==="Enter",he=rr(s)==="Spacebar";if(s.ctrlKey||s.metaKey||T||A||C||I||k||K||$)return-1;var we=!he&&s.key.length===1;if(we){Yo(s);var Te={focusItemAtIndex:g,focusedItemIndex:m,nextChar:s.key.toLowerCase(),sortedIndexByFirstChar:v,skipFocus:!1,isItemAtIndexDisabled:r};return Hh(Te,a)}if(!he)return-1;l&&Yo(s);var me=l&&pm(a);if(me){var Te={focusItemAtIndex:g,focusedItemIndex:m,nextChar:" ",sortedIndexByFirstChar:v,skipFocus:!1,isItemAtIndexDisabled:r};return Hh(Te,a)}return-1}/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function Ib(u){return u instanceof Array}var Ab=function(u){Is(a,u);function a(s){var l=u.call(this,Cr(Cr({},a.defaultAdapter),s))||this;return l.wrapFocus=!1,l.isVertical=!0,l.isSingleSelectionList=!1,l.selectedIndex=za.UNSET_INDEX,l.focusedItemIndex=za.UNSET_INDEX,l.useActivatedClass=!1,l.useSelectedAttr=!1,l.ariaCurrentAttrValue=null,l.isCheckboxList=!1,l.isRadioList=!1,l.hasTypeahead=!1,l.typeaheadState=Cb(),l.sortedIndexByFirstChar=new Map,l}return Object.defineProperty(a,"strings",{get:function(){return go},enumerable:!1,configurable:!0}),Object.defineProperty(a,"cssClasses",{get:function(){return Wi},enumerable:!1,configurable:!0}),Object.defineProperty(a,"numbers",{get:function(){return za},enumerable:!1,configurable:!0}),Object.defineProperty(a,"defaultAdapter",{get:function(){return{addClassForElementIndex:function(){},focusItemAtIndex:function(){},getAttributeForElementIndex:function(){return null},getFocusedElementIndex:function(){return 0},getListItemCount:function(){return 0},hasCheckboxAtIndex:function(){return!1},hasRadioAtIndex:function(){return!1},isCheckboxCheckedAtIndex:function(){return!1},isFocusInsideList:function(){return!1},isRootFocused:function(){return!1},listItemAtIndexHasClass:function(){return!1},notifyAction:function(){},removeClassForElementIndex:function(){},setAttributeForElementIndex:function(){},setCheckedCheckboxOrRadioAtIndex:function(){},setTabIndexForListItemChildren:function(){},getPrimaryTextAtIndex:function(){return""}}},enumerable:!1,configurable:!0}),a.prototype.layout=function(){this.adapter.getListItemCount()!==0&&(this.adapter.hasCheckboxAtIndex(0)?this.isCheckboxList=!0:this.adapter.hasRadioAtIndex(0)?this.isRadioList=!0:this.maybeInitializeSingleSelection(),this.hasTypeahead&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex()))},a.prototype.getFocusedItemIndex=function(){return this.focusedItemIndex},a.prototype.setWrapFocus=function(s){this.wrapFocus=s},a.prototype.setVerticalOrientation=function(s){this.isVertical=s},a.prototype.setSingleSelection=function(s){this.isSingleSelectionList=s,s&&(this.maybeInitializeSingleSelection(),this.selectedIndex=this.getSelectedIndexFromDOM())},a.prototype.maybeInitializeSingleSelection=function(){var s=this.getSelectedIndexFromDOM();if(s!==za.UNSET_INDEX){var l=this.adapter.listItemAtIndexHasClass(s,Wi.LIST_ITEM_ACTIVATED_CLASS);l&&this.setUseActivatedClass(!0),this.isSingleSelectionList=!0,this.selectedIndex=s}},a.prototype.getSelectedIndexFromDOM=function(){for(var s=za.UNSET_INDEX,l=this.adapter.getListItemCount(),m=0;m<l;m++){var g=this.adapter.listItemAtIndexHasClass(m,Wi.LIST_ITEM_SELECTED_CLASS),v=this.adapter.listItemAtIndexHasClass(m,Wi.LIST_ITEM_ACTIVATED_CLASS);if(!!(g||v)){s=m;break}}return s},a.prototype.setHasTypeahead=function(s){this.hasTypeahead=s,s&&(this.sortedIndexByFirstChar=this.typeaheadInitSortedIndex())},a.prototype.isTypeaheadInProgress=function(){return this.hasTypeahead&&pm(this.typeaheadState)},a.prototype.setUseActivatedClass=function(s){this.useActivatedClass=s},a.prototype.setUseSelectedAttribute=function(s){this.useSelectedAttr=s},a.prototype.getSelectedIndex=function(){return this.selectedIndex},a.prototype.setSelectedIndex=function(s,l){var m=l===void 0?{}:l,g=m.forceUpdate;!this.isIndexValid(s)||(this.isCheckboxList?this.setCheckboxAtIndex(s):this.isRadioList?this.setRadioAtIndex(s):this.setSingleSelectionAtIndex(s,{forceUpdate:g}))},a.prototype.handleFocusIn=function(s){s>=0&&(this.focusedItemIndex=s,this.adapter.setAttributeForElementIndex(s,"tabindex","0"),this.adapter.setTabIndexForListItemChildren(s,"0"))},a.prototype.handleFocusOut=function(s){var l=this;s>=0&&(this.adapter.setAttributeForElementIndex(s,"tabindex","-1"),this.adapter.setTabIndexForListItemChildren(s,"-1")),setTimeout(function(){l.adapter.isFocusInsideList()||l.setTabindexToFirstSelectedOrFocusedItem()},0)},a.prototype.handleKeydown=function(s,l,m){var g=this,v=rr(s)==="ArrowLeft",r=rr(s)==="ArrowUp",T=rr(s)==="ArrowRight",A=rr(s)==="ArrowDown",C=rr(s)==="Home",I=rr(s)==="End",k=rr(s)==="Enter",K=rr(s)==="Spacebar",$=s.key==="A"||s.key==="a";if(this.adapter.isRootFocused()){if(r||I?(s.preventDefault(),this.focusLastElement()):(A||C)&&(s.preventDefault(),this.focusFirstElement()),this.hasTypeahead){var he={event:s,focusItemAtIndex:function(me){g.focusItemAtIndex(me)},focusedItemIndex:-1,isTargetListItem:l,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(me){return g.adapter.listItemAtIndexHasClass(me,Wi.LIST_ITEM_DISABLED_CLASS)}};Op(he,this.typeaheadState)}return}var we=this.adapter.getFocusedElementIndex();if(!(we===-1&&(we=m,we<0))){if(this.isVertical&&A||!this.isVertical&&T)Yo(s),this.focusNextElement(we);else if(this.isVertical&&r||!this.isVertical&&v)Yo(s),this.focusPrevElement(we);else if(C)Yo(s),this.focusFirstElement();else if(I)Yo(s),this.focusLastElement();else if($&&s.ctrlKey&&this.isCheckboxList)s.preventDefault(),this.toggleAll(this.selectedIndex===za.UNSET_INDEX?[]:this.selectedIndex);else if((k||K)&&l){var Te=s.target;if(Te&&Te.tagName==="A"&&k||(Yo(s),this.adapter.listItemAtIndexHasClass(we,Wi.LIST_ITEM_DISABLED_CLASS)))return;this.isTypeaheadInProgress()||(this.isSelectableList()&&this.setSelectedIndexOnAction(we),this.adapter.notifyAction(we))}if(this.hasTypeahead){var he={event:s,focusItemAtIndex:function(Le){g.focusItemAtIndex(Le)},focusedItemIndex:this.focusedItemIndex,isTargetListItem:l,sortedIndexByFirstChar:this.sortedIndexByFirstChar,isItemAtIndexDisabled:function(Le){return g.adapter.listItemAtIndexHasClass(Le,Wi.LIST_ITEM_DISABLED_CLASS)}};Op(he,this.typeaheadState)}}},a.prototype.handleClick=function(s,l){s!==za.UNSET_INDEX&&(this.adapter.listItemAtIndexHasClass(s,Wi.LIST_ITEM_DISABLED_CLASS)||(this.isSelectableList()&&this.setSelectedIndexOnAction(s,l),this.adapter.notifyAction(s)))},a.prototype.focusNextElement=function(s){var l=this.adapter.getListItemCount(),m=s+1;if(m>=l)if(this.wrapFocus)m=0;else return s;return this.focusItemAtIndex(m),m},a.prototype.focusPrevElement=function(s){var l=s-1;if(l<0)if(this.wrapFocus)l=this.adapter.getListItemCount()-1;else return s;return this.focusItemAtIndex(l),l},a.prototype.focusFirstElement=function(){return this.focusItemAtIndex(0),0},a.prototype.focusLastElement=function(){var s=this.adapter.getListItemCount()-1;return this.focusItemAtIndex(s),s},a.prototype.focusInitialElement=function(){var s=this.getFirstSelectedOrFocusedItemIndex();return this.focusItemAtIndex(s),s},a.prototype.setEnabled=function(s,l){!this.isIndexValid(s)||(l?(this.adapter.removeClassForElementIndex(s,Wi.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(s,go.ARIA_DISABLED,"false")):(this.adapter.addClassForElementIndex(s,Wi.LIST_ITEM_DISABLED_CLASS),this.adapter.setAttributeForElementIndex(s,go.ARIA_DISABLED,"true")))},a.prototype.setSingleSelectionAtIndex=function(s,l){var m=l===void 0?{}:l,g=m.forceUpdate;if(!(this.selectedIndex===s&&!g)){var v=Wi.LIST_ITEM_SELECTED_CLASS;this.useActivatedClass&&(v=Wi.LIST_ITEM_ACTIVATED_CLASS),this.selectedIndex!==za.UNSET_INDEX&&this.adapter.removeClassForElementIndex(this.selectedIndex,v),this.setAriaForSingleSelectionAtIndex(s),this.setTabindexAtIndex(s),s!==za.UNSET_INDEX&&this.adapter.addClassForElementIndex(s,v),this.selectedIndex=s}},a.prototype.setAriaForSingleSelectionAtIndex=function(s){this.selectedIndex===za.UNSET_INDEX&&(this.ariaCurrentAttrValue=this.adapter.getAttributeForElementIndex(s,go.ARIA_CURRENT));var l=this.ariaCurrentAttrValue!==null,m=l?go.ARIA_CURRENT:go.ARIA_SELECTED;if(this.selectedIndex!==za.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,m,"false"),s!==za.UNSET_INDEX){var g=l?this.ariaCurrentAttrValue:"true";this.adapter.setAttributeForElementIndex(s,m,g)}},a.prototype.getSelectionAttribute=function(){return this.useSelectedAttr?go.ARIA_SELECTED:go.ARIA_CHECKED},a.prototype.setRadioAtIndex=function(s){var l=this.getSelectionAttribute();this.adapter.setCheckedCheckboxOrRadioAtIndex(s,!0),this.selectedIndex!==za.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(this.selectedIndex,l,"false"),this.adapter.setAttributeForElementIndex(s,l,"true"),this.selectedIndex=s},a.prototype.setCheckboxAtIndex=function(s){for(var l=this.getSelectionAttribute(),m=0;m<this.adapter.getListItemCount();m++){var g=!1;s.indexOf(m)>=0&&(g=!0),this.adapter.setCheckedCheckboxOrRadioAtIndex(m,g),this.adapter.setAttributeForElementIndex(m,l,g?"true":"false")}this.selectedIndex=s},a.prototype.setTabindexAtIndex=function(s){this.focusedItemIndex===za.UNSET_INDEX&&s!==0?this.adapter.setAttributeForElementIndex(0,"tabindex","-1"):this.focusedItemIndex>=0&&this.focusedItemIndex!==s&&this.adapter.setAttributeForElementIndex(this.focusedItemIndex,"tabindex","-1"),!(this.selectedIndex instanceof Array)&&this.selectedIndex!==s&&this.adapter.setAttributeForElementIndex(this.selectedIndex,"tabindex","-1"),s!==za.UNSET_INDEX&&this.adapter.setAttributeForElementIndex(s,"tabindex","0")},a.prototype.isSelectableList=function(){return this.isSingleSelectionList||this.isCheckboxList||this.isRadioList},a.prototype.setTabindexToFirstSelectedOrFocusedItem=function(){var s=this.getFirstSelectedOrFocusedItemIndex();this.setTabindexAtIndex(s)},a.prototype.getFirstSelectedOrFocusedItemIndex=function(){return this.isSelectableList()?typeof this.selectedIndex=="number"&&this.selectedIndex!==za.UNSET_INDEX?this.selectedIndex:Ib(this.selectedIndex)&&this.selectedIndex.length>0?this.selectedIndex.reduce(function(s,l){return Math.min(s,l)}):0:Math.max(this.focusedItemIndex,0)},a.prototype.isIndexValid=function(s){var l=this;if(s instanceof Array){if(!this.isCheckboxList)throw new Error("MDCListFoundation: Array of index is only supported for checkbox based list");return s.length===0?!0:s.some(function(m){return l.isIndexInRange(m)})}else if(typeof s=="number"){if(this.isCheckboxList)throw new Error("MDCListFoundation: Expected array of index for checkbox based list but got number: "+s);return this.isIndexInRange(s)||this.isSingleSelectionList&&s===za.UNSET_INDEX}else return!1},a.prototype.isIndexInRange=function(s){var l=this.adapter.getListItemCount();return s>=0&&s<l},a.prototype.setSelectedIndexOnAction=function(s,l){l===void 0&&(l=!0),this.isCheckboxList?this.toggleCheckboxAtIndex(s,l):this.setSelectedIndex(s)},a.prototype.toggleCheckboxAtIndex=function(s,l){var m=this.getSelectionAttribute(),g=this.adapter.isCheckboxCheckedAtIndex(s);l&&(g=!g,this.adapter.setCheckedCheckboxOrRadioAtIndex(s,g)),this.adapter.setAttributeForElementIndex(s,m,g?"true":"false");var v=this.selectedIndex===za.UNSET_INDEX?[]:this.selectedIndex.slice();g?v.push(s):v=v.filter(function(r){return r!==s}),this.selectedIndex=v},a.prototype.focusItemAtIndex=function(s){this.adapter.focusItemAtIndex(s),this.focusedItemIndex=s},a.prototype.toggleAll=function(s){var l=this.adapter.getListItemCount();if(s.length===l)this.setCheckboxAtIndex([]);else{for(var m=[],g=0;g<l;g++)(!this.adapter.listItemAtIndexHasClass(g,Wi.LIST_ITEM_DISABLED_CLASS)||s.indexOf(g)>-1)&&m.push(g);this.setCheckboxAtIndex(m)}},a.prototype.typeaheadMatchItem=function(s,l,m){var g=this;m===void 0&&(m=!1);var v={focusItemAtIndex:function(r){g.focusItemAtIndex(r)},focusedItemIndex:l||this.focusedItemIndex,nextChar:s,sortedIndexByFirstChar:this.sortedIndexByFirstChar,skipFocus:m,isItemAtIndexDisabled:function(r){return g.adapter.listItemAtIndexHasClass(r,Wi.LIST_ITEM_DISABLED_CLASS)}};return Hh(v,this.typeaheadState)},a.prototype.typeaheadInitSortedIndex=function(){return Tb(this.adapter.getListItemCount(),this.adapter.getPrimaryTextAtIndex)},a.prototype.clearTypeaheadBuffer=function(){fm(this.typeaheadState)},a}(kl);/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Dr={ANIMATE:"mdc-drawer--animate",CLOSING:"mdc-drawer--closing",DISMISSIBLE:"mdc-drawer--dismissible",MODAL:"mdc-drawer--modal",OPEN:"mdc-drawer--open",OPENING:"mdc-drawer--opening",ROOT:"mdc-drawer"},kb={APP_CONTENT_SELECTOR:".mdc-drawer-app-content",CLOSE_EVENT:"MDCDrawer:closed",OPEN_EVENT:"MDCDrawer:opened",SCRIM_SELECTOR:".mdc-drawer-scrim",LIST_SELECTOR:".mdc-list,.mdc-deprecated-list",LIST_ITEM_ACTIVATED_SELECTOR:".mdc-list-item--activated,.mdc-deprecated-list-item--activated"};/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var mm=function(u){Is(a,u);function a(s){var l=u.call(this,Cr(Cr({},a.defaultAdapter),s))||this;return l.animationFrame=0,l.animationTimer=0,l}return Object.defineProperty(a,"strings",{get:function(){return kb},enumerable:!1,configurable:!0}),Object.defineProperty(a,"cssClasses",{get:function(){return Dr},enumerable:!1,configurable:!0}),Object.defineProperty(a,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},elementHasClass:function(){return!1},notifyClose:function(){},notifyOpen:function(){},saveFocus:function(){},restoreFocus:function(){},focusActiveNavigationItem:function(){},trapFocus:function(){},releaseFocus:function(){}}},enumerable:!1,configurable:!0}),a.prototype.destroy=function(){this.animationFrame&&cancelAnimationFrame(this.animationFrame),this.animationTimer&&clearTimeout(this.animationTimer)},a.prototype.open=function(){var s=this;this.isOpen()||this.isOpening()||this.isClosing()||(this.adapter.addClass(Dr.OPEN),this.adapter.addClass(Dr.ANIMATE),this.runNextAnimationFrame(function(){s.adapter.addClass(Dr.OPENING)}),this.adapter.saveFocus())},a.prototype.close=function(){!this.isOpen()||this.isOpening()||this.isClosing()||this.adapter.addClass(Dr.CLOSING)},a.prototype.isOpen=function(){return this.adapter.hasClass(Dr.OPEN)},a.prototype.isOpening=function(){return this.adapter.hasClass(Dr.OPENING)||this.adapter.hasClass(Dr.ANIMATE)},a.prototype.isClosing=function(){return this.adapter.hasClass(Dr.CLOSING)},a.prototype.handleKeydown=function(s){var l=s.keyCode,m=s.key,g=m==="Escape"||l===27;g&&this.close()},a.prototype.handleTransitionEnd=function(s){var l=Dr.OPENING,m=Dr.CLOSING,g=Dr.OPEN,v=Dr.ANIMATE,r=Dr.ROOT,T=this.isElement(s.target)&&this.adapter.elementHasClass(s.target,r);!T||(this.isClosing()?(this.adapter.removeClass(g),this.closed(),this.adapter.restoreFocus(),this.adapter.notifyClose()):(this.adapter.focusActiveNavigationItem(),this.opened(),this.adapter.notifyOpen()),this.adapter.removeClass(v),this.adapter.removeClass(l),this.adapter.removeClass(m))},a.prototype.opened=function(){},a.prototype.closed=function(){},a.prototype.runNextAnimationFrame=function(s){var l=this;cancelAnimationFrame(this.animationFrame),this.animationFrame=requestAnimationFrame(function(){l.animationFrame=0,clearTimeout(l.animationTimer),l.animationTimer=setTimeout(s,0)})},a.prototype.isElement=function(s){return Boolean(s.classList)},a}(kl);/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Mb=function(u){Is(a,u);function a(){return u!==null&&u.apply(this,arguments)||this}return a.prototype.handleScrimClick=function(){this.close()},a.prototype.opened=function(){this.adapter.trapFocus()},a.prototype.closed=function(){this.adapter.releaseFocus()},a}(mm);function Db(u){let a,s,l,m,g,v;const r=u[15].default,T=Jn(r,u,u[14],null);let A=[{class:s=zn({[u[1]]:!0,"mdc-drawer":!0,"mdc-drawer--dismissible":u[2]==="dismissible","mdc-drawer--modal":u[2]==="modal","smui-drawer__absolute":u[2]==="modal"&&!u[3],...u[6]})},u[8]],C={};for(let I=0;I<A.length;I+=1)C=Jt(C,A[I]);return{c(){a=ge("aside"),T&&T.c(),this.h()},l(I){a=_e(I,"ASIDE",{class:!0});var k=Ce(a);T&&T.l(k),k.forEach(Y),this.h()},h(){en(a,C)},m(I,k){et(I,a,k),T&&T.m(a,null),u[16](a),m=!0,g||(v=[un(l=lr.call(null,a,u[0])),un(u[7].call(null,a)),Ri(a,"keydown",u[17]),Ri(a,"transitionend",u[18])],g=!0)},p(I,[k]){T&&T.p&&(!m||k&16384)&&Qn(T,r,I,I[14],m?ea(r,I[14],k,null):$n(I[14]),null),en(a,C=aa(A,[(!m||k&78&&s!==(s=zn({[I[1]]:!0,"mdc-drawer":!0,"mdc-drawer--dismissible":I[2]==="dismissible","mdc-drawer--modal":I[2]==="modal","smui-drawer__absolute":I[2]==="modal"&&!I[3],...I[6]})))&&{class:s},k&256&&I[8]])),l&&Ma(l.update)&&k&1&&l.update.call(null,I[0])},i(I){m||(_t(T,I),m=!0)},o(I){It(T,I),m=!1},d(I){I&&Y(a),T&&T.d(I),u[16](null),g=!1,ha(v)}}}function Pb(u,a,s){const l=["use","class","variant","open","fixed","setOpen","isOpen","getElement"];let m=Ni(a,l),{$$slots:g={},$$scope:v}=a;const{FocusTrap:r}=ib,T=wa(va());let{use:A=[]}=a,{class:C=""}=a,{variant:I=void 0}=a,{open:k=!1}=a,{fixed:K=!0}=a,$,he,we={},Te=null,me,Le=!1;Ja("SMUI:list:nav",!0),Ja("SMUI:list:item:nav",!0),Ja("SMUI:list:wrapFocus",!0);let Ue=I;fs(()=>{me=new r($,{skipInitialFocus:!0}),s(4,he=Oe()),he&&he.init()}),Al(()=>{he&&he.destroy(),Le&&Le.removeEventListener("SMUIDrawerScrim:click",tt)});function Oe(){var Ne,Ft;Le&&Le.removeEventListener("SMUIDrawerScrim:click",tt),I==="modal"&&(Le=(Ft=(Ne=$.parentNode)===null||Ne===void 0?void 0:Ne.querySelector(".mdc-drawer-scrim"))!==null&&Ft!==void 0?Ft:!1,Le&&Le.addEventListener("SMUIDrawerScrim:click",tt));const ut=I==="dismissible"?mm:I==="modal"?Mb:void 0;return ut?new ut({addClass:Me,removeClass:Ve,hasClass:We,elementHasClass:(jt,yt)=>jt.classList.contains(yt),saveFocus:()=>Te=document.activeElement,restoreFocus:()=>{Te&&"focus"in Te&&$.contains(document.activeElement)&&Te.focus()},focusActiveNavigationItem:()=>{const jt=$.querySelector(".mdc-list-item--activated,.mdc-deprecated-list-item--activated");jt&&jt.focus()},notifyClose:()=>{s(9,k=!1),Rr($,"SMUIDrawer:closed",void 0,void 0,!0)},notifyOpen:()=>{s(9,k=!0),Rr($,"SMUIDrawer:opened",void 0,void 0,!0)},trapFocus:()=>me.trapFocus(),releaseFocus:()=>me.releaseFocus()}):void 0}function We(Ne){return Ne in we?we[Ne]:Dt().classList.contains(Ne)}function Me(Ne){we[Ne]||s(6,we[Ne]=!0,we)}function Ve(Ne){(!(Ne in we)||we[Ne])&&s(6,we[Ne]=!1,we)}function tt(){he&&"handleScrimClick"in he&&he.handleScrimClick()}function it(Ne){s(9,k=Ne)}function dt(){return k}function Dt(){return $}function He(Ne){Di[Ne?"unshift":"push"](()=>{$=Ne,s(5,$)})}const Xe=Ne=>he&&he.handleKeydown(Ne),pt=Ne=>he&&he.handleTransitionEnd(Ne);return u.$$set=Ne=>{a=Jt(Jt({},a),xa(Ne)),s(8,m=Ni(a,l)),"use"in Ne&&s(0,A=Ne.use),"class"in Ne&&s(1,C=Ne.class),"variant"in Ne&&s(2,I=Ne.variant),"open"in Ne&&s(9,k=Ne.open),"fixed"in Ne&&s(3,K=Ne.fixed),"$$scope"in Ne&&s(14,v=Ne.$$scope)},u.$$.update=()=>{u.$$.dirty&8212&&Ue!==I&&(s(13,Ue=I),he&&he.destroy(),s(6,we={}),s(4,he=Oe()),he&&he.init()),u.$$.dirty&528&&he&&he.isOpen()!==k&&(k?he.open():he.close())},[A,C,I,K,he,$,we,T,m,k,it,dt,Dt,Ue,v,g,He,Xe,pt]}class Lb extends An{constructor(a){super(),kn(this,a,Pb,Db,Mn,{use:0,class:1,variant:2,open:9,fixed:3,setOpen:10,isOpen:11,getElement:12})}get setOpen(){return this.$$.ctx[10]}get isOpen(){return this.$$.ctx[11]}get getElement(){return this.$$.ctx[12]}}const Rb=Hr({class:"mdc-drawer-app-content",component:yc}),zb=Hr({class:"mdc-drawer__content",component:yc});Hr({class:"mdc-drawer__header",component:yc});Hr({class:"mdc-drawer__title",component:Fy});Hr({class:"mdc-drawer__subtitle",component:Oy});function Bb(u){let a;const s=u[37].default,l=Jn(s,u,u[43],null);return{c(){l&&l.c()},l(m){l&&l.l(m)},m(m,g){l&&l.m(m,g),a=!0},p(m,g){l&&l.p&&(!a||g[1]&4096)&&Qn(l,s,m,m[43],a?ea(s,m[43],g,null):$n(m[43]),null)},i(m){a||(_t(l,m),a=!0)},o(m){It(l,m),a=!1},d(m){l&&l.d(m)}}}function Fb(u){let a,s,l;const m=[{use:[u[17],...u[0]]},{class:zn({[u[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":u[2],"mdc-deprecated-list--dense":u[3],"mdc-deprecated-list--textual-list":u[4],"mdc-deprecated-list--avatar-list":u[5]||u[18],"mdc-deprecated-list--icon-list":u[6],"mdc-deprecated-list--image-list":u[7],"mdc-deprecated-list--thumbnail-list":u[8],"mdc-deprecated-list--video-list":u[9],"mdc-deprecated-list--two-line":u[10],"smui-list--three-line":u[11]&&!u[10]})},{role:u[15]},u[23]];var g=u[12];function v(r){let T={$$slots:{default:[Bb]},$$scope:{ctx:r}};for(let A=0;A<m.length;A+=1)T=Jt(T,m[A]);return{props:T}}return g&&(a=new g(v(u)),u[38](a),a.$on("keydown",u[39]),a.$on("focusin",u[40]),a.$on("focusout",u[41]),a.$on("click",u[42]),a.$on("SMUIListItem:mount",u[19]),a.$on("SMUIListItem:unmount",u[20]),a.$on("SMUI:action",u[21])),{c(){a&&Ei(a.$$.fragment),s=sn()},l(r){a&&qi(a.$$.fragment,r),s=sn()},m(r,T){a&&Ii(a,r,T),et(r,s,T),l=!0},p(r,T){const A=T[0]&8818687?aa(m,[T[0]&131073&&{use:[r[17],...r[0]]},T[0]&266238&&{class:zn({[r[1]]:!0,"mdc-deprecated-list":!0,"mdc-deprecated-list--non-interactive":r[2],"mdc-deprecated-list--dense":r[3],"mdc-deprecated-list--textual-list":r[4],"mdc-deprecated-list--avatar-list":r[5]||r[18],"mdc-deprecated-list--icon-list":r[6],"mdc-deprecated-list--image-list":r[7],"mdc-deprecated-list--thumbnail-list":r[8],"mdc-deprecated-list--video-list":r[9],"mdc-deprecated-list--two-line":r[10],"smui-list--three-line":r[11]&&!r[10]})},T[0]&32768&&{role:r[15]},T[0]&8388608&&Lr(r[23])]):{};if(T[1]&4096&&(A.$$scope={dirty:T,ctx:r}),g!==(g=r[12])){if(a){es();const C=a;It(C.$$.fragment,1,0,()=>{Ai(C,1)}),$r()}g?(a=new g(v(r)),r[38](a),a.$on("keydown",r[39]),a.$on("focusin",r[40]),a.$on("focusout",r[41]),a.$on("click",r[42]),a.$on("SMUIListItem:mount",r[19]),a.$on("SMUIListItem:unmount",r[20]),a.$on("SMUI:action",r[21]),Ei(a.$$.fragment),_t(a.$$.fragment,1),Ii(a,s.parentNode,s)):a=null}else g&&a.$set(A)},i(r){l||(a&&_t(a.$$.fragment,r),l=!0)},o(r){a&&It(a.$$.fragment,r),l=!1},d(r){u[38](null),r&&Y(s),a&&Ai(a,r)}}}function Ob(u,a,s){const l=["use","class","nonInteractive","dense","textualList","avatarList","iconList","imageList","thumbnailList","videoList","twoLine","threeLine","vertical","wrapFocus","singleSelection","selectedIndex","radioList","checkList","hasTypeahead","component","layout","setEnabled","getTypeaheadInProgress","getSelectedIndex","getFocusedItemIndex","getElement"];let m=Ni(a,l),{$$slots:g={},$$scope:v}=a;var r;const{closest:T,matches:A}=lm,C=wa(va());let{use:I=[]}=a,{class:k=""}=a,{nonInteractive:K=!1}=a,{dense:$=!1}=a,{textualList:he=!1}=a,{avatarList:we=!1}=a,{iconList:Te=!1}=a,{imageList:me=!1}=a,{thumbnailList:Le=!1}=a,{videoList:Ue=!1}=a,{twoLine:Oe=!1}=a,{threeLine:We=!1}=a,{vertical:Me=!0}=a,{wrapFocus:Ve=(r=sr("SMUI:list:wrapFocus"))!==null&&r!==void 0?r:!1}=a,{singleSelection:tt=!1}=a,{selectedIndex:it=-1}=a,{radioList:dt=!1}=a,{checkList:Dt=!1}=a,{hasTypeahead:He=!1}=a,Xe,pt,Ne=[],Ft=sr("SMUI:list:role"),ut=sr("SMUI:list:nav");const jt=new WeakMap;let yt=sr("SMUI:dialog:selection"),mi=sr("SMUI:addLayoutListener"),bi,{component:gi=ut?jy:Gy}=a;Ja("SMUI:list:nonInteractive",K),Ja("SMUI:separator:context","list"),Ft||(tt?(Ft="listbox",Ja("SMUI:list:item:role","option")):dt?(Ft="radiogroup",Ja("SMUI:list:item:role","radio")):Dt?(Ft="group",Ja("SMUI:list:item:role","checkbox")):(Ft="list",Ja("SMUI:list:item:role",void 0))),mi&&(bi=mi(fn)),fs(()=>{s(13,pt=new Ab({addClassForElementIndex:ot,focusItemAtIndex:Ui,getAttributeForElementIndex:(Ie,mt)=>{var li,$t;return($t=(li=ui()[Ie])===null||li===void 0?void 0:li.getAttr(mt))!==null&&$t!==void 0?$t:null},getFocusedElementIndex:()=>document.activeElement?ui().map(Ie=>Ie.element).indexOf(document.activeElement):-1,getListItemCount:()=>Ne.length,getPrimaryTextAtIndex:ki,hasCheckboxAtIndex:Ie=>{var mt,li;return(li=(mt=ui()[Ie])===null||mt===void 0?void 0:mt.hasCheckbox)!==null&&li!==void 0?li:!1},hasRadioAtIndex:Ie=>{var mt,li;return(li=(mt=ui()[Ie])===null||mt===void 0?void 0:mt.hasRadio)!==null&&li!==void 0?li:!1},isCheckboxCheckedAtIndex:Ie=>{var mt;const li=ui()[Ie];return(mt=(li==null?void 0:li.hasCheckbox)&&li.checked)!==null&&mt!==void 0?mt:!1},isFocusInsideList:()=>Xe!=null&&ei()!==document.activeElement&&ei().contains(document.activeElement),isRootFocused:()=>Xe!=null&&document.activeElement===ei(),listItemAtIndexHasClass:pi,notifyAction:Ie=>{s(24,it=Ie),Xe!=null&&Rr(ei(),"SMUIList:action",{index:Ie},void 0,!0)},removeClassForElementIndex:Bi,setAttributeForElementIndex:wi,setCheckedCheckboxOrRadioAtIndex:(Ie,mt)=>{ui()[Ie].checked=mt},setTabIndexForListItemChildren:(Ie,mt)=>{const li=ui()[Ie],$t="button:not(:disabled), a";Array.prototype.forEach.call(li.element.querySelectorAll($t),di=>{di.setAttribute("tabindex",mt)})}}));const se={get element(){return ei()},get items(){return Ne},get typeaheadInProgress(){return pt.isTypeaheadInProgress()},typeaheadMatchItem(Ie,mt){return pt.typeaheadMatchItem(Ie,mt,!0)},getOrderedList:ui,focusItemAtIndex:Ui,addClassForElementIndex:ot,removeClassForElementIndex:Bi,setAttributeForElementIndex:wi,removeAttributeForElementIndex:Qe,getAttributeFromElementIndex:Nt,getPrimaryTextAtIndex:ki};return Rr(ei(),"SMUIList:mount",se),pt.init(),()=>{pt.destroy()}}),Al(()=>{bi&&bi()});function Lt(se){Ne.push(se.detail),jt.set(se.detail.element,se.detail),tt&&se.detail.selected&&s(24,it=Vi(se.detail.element)),se.stopPropagation()}function vi(se){var Ie;const mt=(Ie=se.detail&&Ne.indexOf(se.detail))!==null&&Ie!==void 0?Ie:-1;mt!==-1&&(Ne.splice(mt,1),Ne=Ne,jt.delete(se.detail.element)),se.stopPropagation()}function Qt(se){if(dt||Dt){const Ie=Vi(se.target);if(Ie!==-1){const mt=ui()[Ie];mt&&(dt&&!mt.checked||Dt)&&(mt.checked=!mt.checked,mt.activateRipple(),window.requestAnimationFrame(()=>{mt.deactivateRipple()}))}}}function ui(){return Xe==null?[]:[...ei().children].map(se=>jt.get(se)).filter(se=>se&&se._smui_list_item_accessor)}function Ui(se){const Ie=ui()[se];Ie&&"focus"in Ie.element&&Ie.element.focus()}function pi(se,Ie){var mt;const li=ui()[se];return(mt=li&&li.hasClass(Ie))!==null&&mt!==void 0?mt:!1}function ot(se,Ie){const mt=ui()[se];mt&&mt.addClass(Ie)}function Bi(se,Ie){const mt=ui()[se];mt&&mt.removeClass(Ie)}function wi(se,Ie,mt){const li=ui()[se];li&&li.addAttr(Ie,mt)}function Qe(se,Ie){const mt=ui()[se];mt&&mt.removeAttr(Ie)}function Nt(se,Ie){const mt=ui()[se];return mt?mt.getAttr(Ie):null}function ki(se){var Ie;const mt=ui()[se];return(Ie=mt&&mt.getPrimaryText())!==null&&Ie!==void 0?Ie:""}function Vi(se){const Ie=T(se,".mdc-deprecated-list-item, .mdc-deprecated-list");return Ie&&A(Ie,".mdc-deprecated-list-item")?ui().map(mt=>mt==null?void 0:mt.element).indexOf(Ie):-1}function fn(){return pt.layout()}function Mi(se,Ie){return pt.setEnabled(se,Ie)}function ni(){return pt.isTypeaheadInProgress()}function si(){return pt.getSelectedIndex()}function Dn(){return pt.getFocusedItemIndex()}function ei(){return Xe.getElement()}function qt(se){Di[se?"unshift":"push"](()=>{Xe=se,s(14,Xe)})}const Xi=se=>pt&&pt.handleKeydown(se,se.target.classList.contains("mdc-deprecated-list-item"),Vi(se.target)),ti=se=>pt&&pt.handleFocusIn(Vi(se.target)),mn=se=>pt&&pt.handleFocusOut(Vi(se.target)),xn=se=>pt&&pt.handleClick(Vi(se.target),!A(se.target,'input[type="checkbox"], input[type="radio"]'));return u.$$set=se=>{a=Jt(Jt({},a),xa(se)),s(23,m=Ni(a,l)),"use"in se&&s(0,I=se.use),"class"in se&&s(1,k=se.class),"nonInteractive"in se&&s(2,K=se.nonInteractive),"dense"in se&&s(3,$=se.dense),"textualList"in se&&s(4,he=se.textualList),"avatarList"in se&&s(5,we=se.avatarList),"iconList"in se&&s(6,Te=se.iconList),"imageList"in se&&s(7,me=se.imageList),"thumbnailList"in se&&s(8,Le=se.thumbnailList),"videoList"in se&&s(9,Ue=se.videoList),"twoLine"in se&&s(10,Oe=se.twoLine),"threeLine"in se&&s(11,We=se.threeLine),"vertical"in se&&s(25,Me=se.vertical),"wrapFocus"in se&&s(26,Ve=se.wrapFocus),"singleSelection"in se&&s(27,tt=se.singleSelection),"selectedIndex"in se&&s(24,it=se.selectedIndex),"radioList"in se&&s(28,dt=se.radioList),"checkList"in se&&s(29,Dt=se.checkList),"hasTypeahead"in se&&s(30,He=se.hasTypeahead),"component"in se&&s(12,gi=se.component),"$$scope"in se&&s(43,v=se.$$scope)},u.$$.update=()=>{u.$$.dirty[0]&33562624&&pt&&pt.setVerticalOrientation(Me),u.$$.dirty[0]&67117056&&pt&&pt.setWrapFocus(Ve),u.$$.dirty[0]&1073750016&&pt&&pt.setHasTypeahead(He),u.$$.dirty[0]&134225920&&pt&&pt.setSingleSelection(tt),u.$$.dirty[0]&151003136&&pt&&tt&&si()!==it&&pt.setSelectedIndex(it)},[I,k,K,$,he,we,Te,me,Le,Ue,Oe,We,gi,pt,Xe,Ft,A,C,yt,Lt,vi,Qt,Vi,m,it,Me,Ve,tt,dt,Dt,He,fn,Mi,ni,si,Dn,ei,g,qt,Xi,ti,mn,xn,v]}class Nb extends An{constructor(a){super(),kn(this,a,Ob,Fb,Mn,{use:0,class:1,nonInteractive:2,dense:3,textualList:4,avatarList:5,iconList:6,imageList:7,thumbnailList:8,videoList:9,twoLine:10,threeLine:11,vertical:25,wrapFocus:26,singleSelection:27,selectedIndex:24,radioList:28,checkList:29,hasTypeahead:30,component:12,layout:31,setEnabled:32,getTypeaheadInProgress:33,getSelectedIndex:34,getFocusedItemIndex:35,getElement:36},null,[-1,-1])}get layout(){return this.$$.ctx[31]}get setEnabled(){return this.$$.ctx[32]}get getTypeaheadInProgress(){return this.$$.ctx[33]}get getSelectedIndex(){return this.$$.ctx[34]}get getFocusedItemIndex(){return this.$$.ctx[35]}get getElement(){return this.$$.ctx[36]}}function Np(u){let a;return{c(){a=ge("span"),this.h()},l(s){a=_e(s,"SPAN",{class:!0}),Ce(a).forEach(Y),this.h()},h(){ve(a,"class","mdc-deprecated-list-item__ripple")},m(s,l){et(s,a,l)},d(s){s&&Y(a)}}}function Ub(u){let a,s,l=u[7]&&Np();const m=u[32].default,g=Jn(m,u,u[35],null);return{c(){l&&l.c(),a=sn(),g&&g.c()},l(v){l&&l.l(v),a=sn(),g&&g.l(v)},m(v,r){l&&l.m(v,r),et(v,a,r),g&&g.m(v,r),s=!0},p(v,r){v[7]?l||(l=Np(),l.c(),l.m(a.parentNode,a)):l&&(l.d(1),l=null),g&&g.p&&(!s||r[1]&16)&&Qn(g,m,v,v[35],s?ea(m,v[35],r,null):$n(v[35]),null)},i(v){s||(_t(g,v),s=!0)},o(v){It(g,v),s=!1},d(v){l&&l.d(v),v&&Y(a),g&&g.d(v)}}}function Vb(u){let a,s,l;const m=[{use:[...u[6]?[]:[[$o,{ripple:!u[14],unbounded:!1,color:(u[1]||u[0])&&u[5]==null?"primary":u[5],disabled:u[9],addClass:u[22],removeClass:u[23],addStyle:u[24]}]],u[20],...u[2]]},{class:zn({[u[3]]:!0,"mdc-deprecated-list-item":!0,"mdc-deprecated-list-item--activated":u[1],"mdc-deprecated-list-item--selected":u[0],"mdc-deprecated-list-item--disabled":u[9],"mdc-menu-item--selected":!u[21]&&u[8]==="menuitem"&&u[0],"smui-menu-item--non-interactive":u[6],...u[16]})},{style:Object.entries(u[17]).map(Up).concat([u[4]]).join(" ")},u[21]&&u[1]?{"aria-current":"page"}:{},u[21]?{}:{role:u[8]},!u[21]&&u[8]==="option"?{"aria-selected":u[0]?"true":"false"}:{},!u[21]&&(u[8]==="radio"||u[8]==="checkbox")?{"aria-checked":u[14]&&u[14].checked?"true":"false"}:{},u[21]?{}:{"aria-disabled":u[9]?"true":"false"},{"data-menu-item-skip-restore-focus":u[10]||void 0},{tabindex:u[19]},{href:u[11]},u[18],u[27]];var g=u[12];function v(r){let T={$$slots:{default:[Ub]},$$scope:{ctx:r}};for(let A=0;A<m.length;A+=1)T=Jt(T,m[A]);return{props:T}}return g&&(a=new g(v(u)),u[33](a),a.$on("click",u[13]),a.$on("keydown",u[25]),a.$on("SMUIGenericInput:mount",u[26]),a.$on("SMUIGenericInput:unmount",u[34])),{c(){a&&Ei(a.$$.fragment),s=sn()},l(r){a&&qi(a.$$.fragment,r),s=sn()},m(r,T){a&&Ii(a,r,T),et(r,s,T),l=!0},p(r,T){const A=T[0]&167726975?aa(m,[T[0]&30425703&&{use:[...r[6]?[]:[[$o,{ripple:!r[14],unbounded:!1,color:(r[1]||r[0])&&r[5]==null?"primary":r[5],disabled:r[9],addClass:r[22],removeClass:r[23],addStyle:r[24]}]],r[20],...r[2]]},T[0]&2163531&&{class:zn({[r[3]]:!0,"mdc-deprecated-list-item":!0,"mdc-deprecated-list-item--activated":r[1],"mdc-deprecated-list-item--selected":r[0],"mdc-deprecated-list-item--disabled":r[9],"mdc-menu-item--selected":!r[21]&&r[8]==="menuitem"&&r[0],"smui-menu-item--non-interactive":r[6],...r[16]})},T[0]&131088&&{style:Object.entries(r[17]).map(Up).concat([r[4]]).join(" ")},T[0]&2097154&&Lr(r[21]&&r[1]?{"aria-current":"page"}:{}),T[0]&2097408&&Lr(r[21]?{}:{role:r[8]}),T[0]&2097409&&Lr(!r[21]&&r[8]==="option"?{"aria-selected":r[0]?"true":"false"}:{}),T[0]&2113792&&Lr(!r[21]&&(r[8]==="radio"||r[8]==="checkbox")?{"aria-checked":r[14]&&r[14].checked?"true":"false"}:{}),T[0]&2097664&&Lr(r[21]?{}:{"aria-disabled":r[9]?"true":"false"}),T[0]&1024&&{"data-menu-item-skip-restore-focus":r[10]||void 0},T[0]&524288&&{tabindex:r[19]},T[0]&2048&&{href:r[11]},T[0]&262144&&Lr(r[18]),T[0]&134217728&&Lr(r[27])]):{};if(T[0]&128|T[1]&16&&(A.$$scope={dirty:T,ctx:r}),g!==(g=r[12])){if(a){es();const C=a;It(C.$$.fragment,1,0,()=>{Ai(C,1)}),$r()}g?(a=new g(v(r)),r[33](a),a.$on("click",r[13]),a.$on("keydown",r[25]),a.$on("SMUIGenericInput:mount",r[26]),a.$on("SMUIGenericInput:unmount",r[34]),Ei(a.$$.fragment),_t(a.$$.fragment,1),Ii(a,s.parentNode,s)):a=null}else g&&a.$set(A)},i(r){l||(a&&_t(a.$$.fragment,r),l=!0)},o(r){a&&It(a.$$.fragment,r),l=!1},d(r){u[33](null),r&&Y(s),a&&Ai(a,r)}}}let jb=0;const Up=([u,a])=>`${u}: ${a};`;function Gb(u,a,s){let l;const m=["use","class","style","color","nonInteractive","ripple","activated","role","selected","disabled","skipRestoreFocus","tabindex","inputId","href","component","action","getPrimaryText","getElement"];let g=Ni(a,m),{$$slots:v={},$$scope:r}=a;var T;const A=wa(va());let C=()=>{};function I(Qe){return Qe===C}let{use:k=[]}=a,{class:K=""}=a,{style:$=""}=a,{color:he=void 0}=a,{nonInteractive:we=(T=sr("SMUI:list:nonInteractive"))!==null&&T!==void 0?T:!1}=a;Ja("SMUI:list:nonInteractive",void 0);let{ripple:Te=!we}=a,{activated:me=!1}=a,{role:Le=sr("SMUI:list:item:role")}=a;Ja("SMUI:list:item:role",void 0);let{selected:Ue=!1}=a,{disabled:Oe=!1}=a,{skipRestoreFocus:We=!1}=a,{tabindex:Me=C}=a,{inputId:Ve="SMUI-form-field-list-"+jb++}=a,{href:tt=void 0}=a,it,dt={},Dt={},He={},Xe,pt,Ne=sr("SMUI:list:item:nav"),{component:Ft=Ne?tt?hm:Ml:Uy}=a;Ja("SMUI:generic:input:props",{id:Ve}),Ja("SMUI:separator:context",void 0),fs(()=>{if(!Ue&&!we){let Nt=!0,ki=it;for(;ki.previousSibling;)if(ki=ki.previousSibling,ki.nodeType===1&&ki.classList.contains("mdc-deprecated-list-item")&&!ki.classList.contains("mdc-deprecated-list-item--disabled")){Nt=!1;break}Nt&&(pt=window.requestAnimationFrame(vi))}const Qe={_smui_list_item_accessor:!0,get element(){return ot()},get selected(){return Ue},set selected(Nt){s(0,Ue=Nt)},hasClass:ut,addClass:jt,removeClass:yt,getAttr:bi,addAttr:gi,removeAttr:Lt,getPrimaryText:pi,get checked(){var Nt;return(Nt=Xe&&Xe.checked)!==null&&Nt!==void 0?Nt:!1},set checked(Nt){Xe&&s(14,Xe.checked=!!Nt,Xe)},get hasCheckbox(){return!!(Xe&&"_smui_checkbox_accessor"in Xe)},get hasRadio(){return!!(Xe&&"_smui_radio_accessor"in Xe)},activateRipple(){Xe&&Xe.activateRipple()},deactivateRipple(){Xe&&Xe.deactivateRipple()},getValue(){return g.value},action:Ui,get tabindex(){return l},set tabindex(Nt){s(28,Me=Nt)},get disabled(){return Oe},get activated(){return me},set activated(Nt){s(1,me=Nt)}};return Rr(ot(),"SMUIListItem:mount",Qe),()=>{Rr(ot(),"SMUIListItem:unmount",Qe)}}),Al(()=>{pt&&window.cancelAnimationFrame(pt)});function ut(Qe){return Qe in dt?dt[Qe]:ot().classList.contains(Qe)}function jt(Qe){dt[Qe]||s(16,dt[Qe]=!0,dt)}function yt(Qe){(!(Qe in dt)||dt[Qe])&&s(16,dt[Qe]=!1,dt)}function mi(Qe,Nt){Dt[Qe]!=Nt&&(Nt===""||Nt==null?(delete Dt[Qe],s(17,Dt)):s(17,Dt[Qe]=Nt,Dt))}function bi(Qe){var Nt;return Qe in He?(Nt=He[Qe])!==null&&Nt!==void 0?Nt:null:ot().getAttribute(Qe)}function gi(Qe,Nt){He[Qe]!==Nt&&s(18,He[Qe]=Nt,He)}function Lt(Qe){(!(Qe in He)||He[Qe]!=null)&&s(18,He[Qe]=void 0,He)}function vi(){let Qe=!0,Nt=it.getElement();for(;Nt.nextElementSibling;)if(Nt=Nt.nextElementSibling,Nt.nodeType===1&&Nt.classList.contains("mdc-deprecated-list-item")){const ki=Nt.attributes.getNamedItem("tabindex");if(ki&&ki.value==="0"){Qe=!1;break}}Qe&&s(19,l=0)}function Qt(Qe){const Nt=Qe.key==="Enter",ki=Qe.key==="Space";(Nt||ki)&&Ui(Qe)}function ui(Qe){("_smui_checkbox_accessor"in Qe.detail||"_smui_radio_accessor"in Qe.detail)&&s(14,Xe=Qe.detail)}function Ui(Qe){Oe||Rr(ot(),"SMUI:action",Qe)}function pi(){var Qe,Nt,ki;const Vi=ot(),fn=Vi.querySelector(".mdc-deprecated-list-item__primary-text");if(fn)return(Qe=fn.textContent)!==null&&Qe!==void 0?Qe:"";const Mi=Vi.querySelector(".mdc-deprecated-list-item__text");return Mi?(Nt=Mi.textContent)!==null&&Nt!==void 0?Nt:"":(ki=Vi.textContent)!==null&&ki!==void 0?ki:""}function ot(){return it.getElement()}function Bi(Qe){Di[Qe?"unshift":"push"](()=>{it=Qe,s(15,it)})}const wi=()=>s(14,Xe=void 0);return u.$$set=Qe=>{a=Jt(Jt({},a),xa(Qe)),s(27,g=Ni(a,m)),"use"in Qe&&s(2,k=Qe.use),"class"in Qe&&s(3,K=Qe.class),"style"in Qe&&s(4,$=Qe.style),"color"in Qe&&s(5,he=Qe.color),"nonInteractive"in Qe&&s(6,we=Qe.nonInteractive),"ripple"in Qe&&s(7,Te=Qe.ripple),"activated"in Qe&&s(1,me=Qe.activated),"role"in Qe&&s(8,Le=Qe.role),"selected"in Qe&&s(0,Ue=Qe.selected),"disabled"in Qe&&s(9,Oe=Qe.disabled),"skipRestoreFocus"in Qe&&s(10,We=Qe.skipRestoreFocus),"tabindex"in Qe&&s(28,Me=Qe.tabindex),"inputId"in Qe&&s(29,Ve=Qe.inputId),"href"in Qe&&s(11,tt=Qe.href),"component"in Qe&&s(12,Ft=Qe.component),"$$scope"in Qe&&s(35,r=Qe.$$scope)},u.$$.update=()=>{u.$$.dirty[0]&268452417&&s(19,l=I(Me)?!we&&!Oe&&(Ue||Xe&&Xe.checked)?0:-1:Me)},[Ue,me,k,K,$,he,we,Te,Le,Oe,We,tt,Ft,Ui,Xe,it,dt,Dt,He,l,A,Ne,jt,yt,mi,Qt,ui,g,Me,Ve,pi,ot,v,Bi,wi,r]}class Hb extends An{constructor(a){super(),kn(this,a,Gb,Vb,Mn,{use:2,class:3,style:4,color:5,nonInteractive:6,ripple:7,activated:1,role:8,selected:0,disabled:9,skipRestoreFocus:10,tabindex:28,inputId:29,href:11,component:12,action:13,getPrimaryText:30,getElement:31},null,[-1,-1])}get action(){return this.$$.ctx[13]}get getPrimaryText(){return this.$$.ctx[30]}get getElement(){return this.$$.ctx[31]}}const zu=Hr({class:"mdc-deprecated-list-item__text",component:Ml});Hr({class:"mdc-deprecated-list-item__primary-text",component:Ml});Hr({class:"mdc-deprecated-list-item__secondary-text",component:Ml});function qb(u){let a,s,l,m,g,v;const r=u[8].default,T=Jn(r,u,u[7],null);let A=[{class:s=zn({[u[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":u[4]})},u[5]],C={};for(let I=0;I<A.length;I+=1)C=Jt(C,A[I]);return{c(){a=ge("span"),T&&T.c(),this.h()},l(I){a=_e(I,"SPAN",{class:!0});var k=Ce(a);T&&T.l(k),k.forEach(Y),this.h()},h(){en(a,C)},m(I,k){et(I,a,k),T&&T.m(a,null),u[9](a),m=!0,g||(v=[un(l=lr.call(null,a,u[0])),un(u[3].call(null,a))],g=!0)},p(I,[k]){T&&T.p&&(!m||k&128)&&Qn(T,r,I,I[7],m?ea(r,I[7],k,null):$n(I[7]),null),en(a,C=aa(A,[(!m||k&2&&s!==(s=zn({[I[1]]:!0,"mdc-deprecated-list-item__graphic":!0,"mdc-menu__selection-group-icon":I[4]})))&&{class:s},k&32&&I[5]])),l&&Ma(l.update)&&k&1&&l.update.call(null,I[0])},i(I){m||(_t(T,I),m=!0)},o(I){It(T,I),m=!1},d(I){I&&Y(a),T&&T.d(I),u[9](null),g=!1,ha(v)}}}function Zb(u,a,s){const l=["use","class","getElement"];let m=Ni(a,l),{$$slots:g={},$$scope:v}=a;const r=wa(va());let{use:T=[]}=a,{class:A=""}=a,C,I=sr("SMUI:list:graphic:menu-selection-group");function k(){return C}function K($){Di[$?"unshift":"push"](()=>{C=$,s(2,C)})}return u.$$set=$=>{a=Jt(Jt({},a),xa($)),s(5,m=Ni(a,l)),"use"in $&&s(0,T=$.use),"class"in $&&s(1,A=$.class),"$$scope"in $&&s(7,v=$.$$scope)},[T,A,C,r,I,m,k,v,g,K]}class Kb extends An{constructor(a){super(),kn(this,a,Zb,qb,Mn,{use:0,class:1,getElement:6})}get getElement(){return this.$$.ctx[6]}}Hr({class:"mdc-deprecated-list-item__meta",component:Ml});Hr({class:"mdc-deprecated-list-group",component:yc});Hr({class:"mdc-deprecated-list-group__subheader",component:Ny});const vu=Hb,Bu=Kb,Wb=async()=>(await(await fetch(`${ps.base_worldbank_api}/all?format=json&per_page=500`)).json())[1];var Cl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gm={},Fu={exports:{}};(function(u,a){(function(s,l){u.exports=l()})(Cl,function(){var s="1.13.4",l=typeof self=="object"&&self.self===self&&self||typeof Cl=="object"&&Cl.global===Cl&&Cl||Function("return this")()||{},m=Array.prototype,g=Object.prototype,v=typeof Symbol<"u"?Symbol.prototype:null,r=m.push,T=m.slice,A=g.toString,C=g.hasOwnProperty,I=typeof ArrayBuffer<"u",k=typeof DataView<"u",K=Array.isArray,$=Object.keys,he=Object.create,we=I&&ArrayBuffer.isView,Te=isNaN,me=isFinite,Le=!{toString:null}.propertyIsEnumerable("toString"),Ue=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Oe=Math.pow(2,53)-1;function We(O,Z){return Z=Z==null?O.length-1:+Z,function(){for(var le=Math.max(arguments.length-Z,0),de=Array(le),ke=0;ke<le;ke++)de[ke]=arguments[ke+Z];switch(Z){case 0:return O.call(this,de);case 1:return O.call(this,arguments[0],de);case 2:return O.call(this,arguments[0],arguments[1],de)}var ye=Array(Z+1);for(ke=0;ke<Z;ke++)ye[ke]=arguments[ke];return ye[Z]=de,O.apply(this,ye)}}function Me(O){var Z=typeof O;return Z==="function"||Z==="object"&&!!O}function Ve(O){return O===void 0}function tt(O){return O===!0||O===!1||A.call(O)==="[object Boolean]"}function it(O){var Z="[object "+O+"]";return function(le){return A.call(le)===Z}}var dt=it("String"),Dt=it("Number"),He=it("Date"),Xe=it("RegExp"),pt=it("Error"),Ne=it("Symbol"),Ft=it("ArrayBuffer"),ut=it("Function"),jt=l.document&&l.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof jt!="function"&&(ut=function(O){return typeof O=="function"||!1});var yt=ut,mi=it("Object"),bi=k&&mi(new DataView(new ArrayBuffer(8))),gi=typeof Map<"u"&&mi(new Map),Lt=it("DataView"),vi=bi?function(O){return O!=null&&yt(O.getInt8)&&Ft(O.buffer)}:Lt,Qt=K||it("Array");function ui(O,Z){return O!=null&&C.call(O,Z)}var Ui=it("Arguments");(function(){Ui(arguments)||(Ui=function(O){return ui(O,"callee")})})();var pi=Ui;function ot(O){return Dt(O)&&Te(O)}function Bi(O){return function(){return O}}function wi(O){return function(Z){var le=O(Z);return typeof le=="number"&&le>=0&&le<=Oe}}function Qe(O){return function(Z){return Z==null?void 0:Z[O]}}var Nt=Qe("byteLength"),ki=wi(Nt),Vi=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/,fn=I?function(O){return we?we(O)&&!vi(O):ki(O)&&Vi.test(A.call(O))}:Bi(!1),Mi=Qe("length");function ni(O,Z){Z=function(je){for(var at={},hi=je.length,_i=0;_i<hi;++_i)at[je[_i]]=!0;return{contains:function(Rn){return at[Rn]===!0},push:function(Rn){return at[Rn]=!0,je.push(Rn)}}}(Z);var le=Ue.length,de=O.constructor,ke=yt(de)&&de.prototype||g,ye="constructor";for(ui(O,ye)&&!Z.contains(ye)&&Z.push(ye);le--;)(ye=Ue[le])in O&&O[ye]!==ke[ye]&&!Z.contains(ye)&&Z.push(ye)}function si(O){if(!Me(O))return[];if($)return $(O);var Z=[];for(var le in O)ui(O,le)&&Z.push(le);return Le&&ni(O,Z),Z}function Dn(O,Z){var le=si(Z),de=le.length;if(O==null)return!de;for(var ke=Object(O),ye=0;ye<de;ye++){var je=le[ye];if(Z[je]!==ke[je]||!(je in ke))return!1}return!0}function ei(O){return O instanceof ei?O:this instanceof ei?void(this._wrapped=O):new ei(O)}function qt(O){return new Uint8Array(O.buffer||O,O.byteOffset||0,Nt(O))}ei.VERSION=s,ei.prototype.value=function(){return this._wrapped},ei.prototype.valueOf=ei.prototype.toJSON=ei.prototype.value,ei.prototype.toString=function(){return String(this._wrapped)};var Xi="[object DataView]";function ti(O,Z,le,de){if(O===Z)return O!==0||1/O==1/Z;if(O==null||Z==null)return!1;if(O!=O)return Z!=Z;var ke=typeof O;return(ke==="function"||ke==="object"||typeof Z=="object")&&function ye(je,at,hi,_i){je instanceof ei&&(je=je._wrapped),at instanceof ei&&(at=at._wrapped);var Rn=A.call(je);if(Rn!==A.call(at))return!1;if(bi&&Rn=="[object Object]"&&vi(je)){if(!vi(at))return!1;Rn=Xi}switch(Rn){case"[object RegExp]":case"[object String]":return""+je==""+at;case"[object Number]":return+je!=+je?+at!=+at:+je==0?1/+je==1/at:+je==+at;case"[object Date]":case"[object Boolean]":return+je==+at;case"[object Symbol]":return v.valueOf.call(je)===v.valueOf.call(at);case"[object ArrayBuffer]":case Xi:return ye(qt(je),qt(at),hi,_i)}var Pa=Rn==="[object Array]";if(!Pa&&fn(je)){if(Nt(je)!==Nt(at))return!1;if(je.buffer===at.buffer&&je.byteOffset===at.byteOffset)return!0;Pa=!0}if(!Pa){if(typeof je!="object"||typeof at!="object")return!1;var ns=je.constructor,as=at.constructor;if(ns!==as&&!(yt(ns)&&ns instanceof ns&&yt(as)&&as instanceof as)&&"constructor"in je&&"constructor"in at)return!1}_i=_i||[];for(var pr=(hi=hi||[]).length;pr--;)if(hi[pr]===je)return _i[pr]===at;if(hi.push(je),_i.push(at),Pa){if((pr=je.length)!==at.length)return!1;for(;pr--;)if(!ti(je[pr],at[pr],hi,_i))return!1}else{var _s,zs=si(je);if(pr=zs.length,si(at).length!==pr)return!1;for(;pr--;)if(_s=zs[pr],!ui(at,_s)||!ti(je[_s],at[_s],hi,_i))return!1}return hi.pop(),_i.pop(),!0}(O,Z,le,de)}function mn(O){if(!Me(O))return[];var Z=[];for(var le in O)Z.push(le);return Le&&ni(O,Z),Z}function xn(O){var Z=Mi(O);return function(le){if(le==null)return!1;var de=mn(le);if(Mi(de))return!1;for(var ke=0;ke<Z;ke++)if(!yt(le[O[ke]]))return!1;return O!==di||!yt(le[se])}}var se="forEach",Ie="has",mt=["clear","delete"],li=["get",Ie,"set"],$t=mt.concat(se,li),di=mt.concat(li),Pi=["add"].concat(mt,se,Ie),tn=gi?xn($t):it("Map"),xi=gi?xn(di):it("WeakMap"),nt=gi?xn(Pi):it("Set"),ii=it("WeakSet");function Ut(O){for(var Z=si(O),le=Z.length,de=Array(le),ke=0;ke<le;ke++)de[ke]=O[Z[ke]];return de}function Yi(O){for(var Z={},le=si(O),de=0,ke=le.length;de<ke;de++)Z[O[le[de]]]=le[de];return Z}function wn(O){var Z=[];for(var le in O)yt(O[le])&&Z.push(le);return Z.sort()}function Vt(O,Z){return function(le){var de=arguments.length;if(Z&&(le=Object(le)),de<2||le==null)return le;for(var ke=1;ke<de;ke++)for(var ye=arguments[ke],je=O(ye),at=je.length,hi=0;hi<at;hi++){var _i=je[hi];Z&&le[_i]!==void 0||(le[_i]=ye[_i])}return le}}var Cn=Vt(mn),Zi=Vt(si),sa=Vt(mn,!0);function Fi(O){if(!Me(O))return{};if(he)return he(O);var Z=function(){};Z.prototype=O;var le=new Z;return Z.prototype=null,le}function on(O){return Qt(O)?O:[O]}function fi(O){return ei.toPath(O)}function Bn(O,Z){for(var le=Z.length,de=0;de<le;de++){if(O==null)return;O=O[Z[de]]}return le?O:void 0}function gn(O,Z,le){var de=Bn(O,fi(Z));return Ve(de)?le:de}function _n(O){return O}function Sn(O){return O=Zi({},O),function(Z){return Dn(Z,O)}}function Zn(O){return O=fi(O),function(Z){return Bn(Z,O)}}function hn(O,Z,le){if(Z===void 0)return O;switch(le==null?3:le){case 1:return function(de){return O.call(Z,de)};case 3:return function(de,ke,ye){return O.call(Z,de,ke,ye)};case 4:return function(de,ke,ye,je){return O.call(Z,de,ke,ye,je)}}return function(){return O.apply(Z,arguments)}}function W(O,Z,le){return O==null?_n:yt(O)?hn(O,Z,le):Me(O)&&!Qt(O)?Sn(O):Zn(O)}function L(O,Z){return W(O,Z,1/0)}function B(O,Z,le){return ei.iteratee!==L?ei.iteratee(O,Z):W(O,Z,le)}function R(){}function U(O,Z){return Z==null&&(Z=O,O=0),O+Math.floor(Math.random()*(Z-O+1))}ei.toPath=on,ei.iteratee=L;var X=Date.now||function(){return new Date().getTime()};function ce(O){var Z=function(ye){return O[ye]},le="(?:"+si(O).join("|")+")",de=RegExp(le),ke=RegExp(le,"g");return function(ye){return ye=ye==null?"":""+ye,de.test(ye)?ye.replace(ke,Z):ye}}var ne={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},oe=ce(ne),fe=ce(Yi(ne)),Be=ei.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Ye=/(.)^/,Re={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ht=/\\|'|\r|\n|\u2028|\u2029/g;function ft(O){return"\\"+Re[O]}var Ee=/^\s*(\w|\$)+\s*$/,rt=0;function lt(O,Z,le,de,ke){if(!(de instanceof Z))return O.apply(le,ke);var ye=Fi(O.prototype),je=O.apply(ye,ke);return Me(je)?je:ye}var bt=We(function(O,Z){var le=bt.placeholder,de=function(){for(var ke=0,ye=Z.length,je=Array(ye),at=0;at<ye;at++)je[at]=Z[at]===le?arguments[ke++]:Z[at];for(;ke<arguments.length;)je.push(arguments[ke++]);return lt(O,de,this,this,je)};return de});bt.placeholder=ei;var Zt=We(function(O,Z,le){if(!yt(O))throw new TypeError("Bind must be called on a function");var de=We(function(ke){return lt(O,de,Z,this,le.concat(ke))});return de}),Rt=wi(Mi);function oi(O,Z,le,de){if(de=de||[],Z||Z===0){if(Z<=0)return de.concat(O)}else Z=1/0;for(var ke=de.length,ye=0,je=Mi(O);ye<je;ye++){var at=O[ye];if(Rt(at)&&(Qt(at)||pi(at)))if(Z>1)oi(at,Z-1,le,de),ke=de.length;else for(var hi=0,_i=at.length;hi<_i;)de[ke++]=at[hi++];else le||(de[ke++]=at)}return de}var ji=We(function(O,Z){var le=(Z=oi(Z,!1,!1)).length;if(le<1)throw new Error("bindAll must be passed function names");for(;le--;){var de=Z[le];O[de]=Zt(O[de],O)}return O}),yn=We(function(O,Z,le){return setTimeout(function(){return O.apply(null,le)},Z)}),Ji=bt(yn,ei,1);function Pn(O){return function(){return!O.apply(this,arguments)}}function Da(O,Z){var le;return function(){return--O>0&&(le=Z.apply(this,arguments)),O<=1&&(Z=null),le}}var Fa=bt(Da,2);function ee(O,Z,le){Z=B(Z,le);for(var de,ke=si(O),ye=0,je=ke.length;ye<je;ye++)if(Z(O[de=ke[ye]],de,O))return de}function Gt(O){return function(Z,le,de){le=B(le,de);for(var ke=Mi(Z),ye=O>0?0:ke-1;ye>=0&&ye<ke;ye+=O)if(le(Z[ye],ye,Z))return ye;return-1}}var Wt=Gt(1),Ci=Gt(-1);function Ln(O,Z,le,de){for(var ke=(le=B(le,de,1))(Z),ye=0,je=Mi(O);ye<je;){var at=Math.floor((ye+je)/2);le(O[at])<ke?ye=at+1:je=at}return ye}function En(O,Z,le){return function(de,ke,ye){var je=0,at=Mi(de);if(typeof ye=="number")O>0?je=ye>=0?ye:Math.max(ye+at,je):at=ye>=0?Math.min(ye+1,at):ye+at+1;else if(le&&ye&&at)return de[ye=le(de,ke)]===ke?ye:-1;if(ke!=ke)return(ye=Z(T.call(de,je,at),ot))>=0?ye+je:-1;for(ye=O>0?je:at-1;ye>=0&&ye<at;ye+=O)if(de[ye]===ke)return ye;return-1}}var Oa=En(1,Wt,Ln),ga=En(-1,Ci);function oa(O,Z,le){var de=(Rt(O)?Wt:ee)(O,Z,le);if(de!==void 0&&de!==-1)return O[de]}function dn(O,Z,le){var de,ke;if(Z=hn(Z,le),Rt(O))for(de=0,ke=O.length;de<ke;de++)Z(O[de],de,O);else{var ye=si(O);for(de=0,ke=ye.length;de<ke;de++)Z(O[ye[de]],ye[de],O)}return O}function Wn(O,Z,le){Z=B(Z,le);for(var de=!Rt(O)&&si(O),ke=(de||O).length,ye=Array(ke),je=0;je<ke;je++){var at=de?de[je]:je;ye[je]=Z(O[at],at,O)}return ye}function On(O){var Z=function(le,de,ke,ye){var je=!Rt(le)&&si(le),at=(je||le).length,hi=O>0?0:at-1;for(ye||(ke=le[je?je[hi]:hi],hi+=O);hi>=0&&hi<at;hi+=O){var _i=je?je[hi]:hi;ke=de(ke,le[_i],_i,le)}return ke};return function(le,de,ke,ye){var je=arguments.length>=3;return Z(le,hn(de,ye,4),ke,je)}}var ta=On(1),Ca=On(-1);function la(O,Z,le){var de=[];return Z=B(Z,le),dn(O,function(ke,ye,je){Z(ke,ye,je)&&de.push(ke)}),de}function ur(O,Z,le){Z=B(Z,le);for(var de=!Rt(O)&&si(O),ke=(de||O).length,ye=0;ye<ke;ye++){var je=de?de[ye]:ye;if(!Z(O[je],je,O))return!1}return!0}function hr(O,Z,le){Z=B(Z,le);for(var de=!Rt(O)&&si(O),ke=(de||O).length,ye=0;ye<ke;ye++){var je=de?de[ye]:ye;if(Z(O[je],je,O))return!0}return!1}function Nn(O,Z,le,de){return Rt(O)||(O=Ut(O)),(typeof le!="number"||de)&&(le=0),Oa(O,Z,le)>=0}var Br=We(function(O,Z,le){var de,ke;return yt(Z)?ke=Z:(Z=fi(Z),de=Z.slice(0,-1),Z=Z[Z.length-1]),Wn(O,function(ye){var je=ke;if(!je){if(de&&de.length&&(ye=Bn(ye,de)),ye==null)return;je=ye[Z]}return je==null?je:je.apply(ye,le)})});function Na(O,Z){return Wn(O,Zn(Z))}function Za(O,Z,le){var de,ke,ye=-1/0,je=-1/0;if(Z==null||typeof Z=="number"&&typeof O[0]!="object"&&O!=null)for(var at=0,hi=(O=Rt(O)?O:Ut(O)).length;at<hi;at++)(de=O[at])!=null&&de>ye&&(ye=de);else Z=B(Z,le),dn(O,function(_i,Rn,Pa){((ke=Z(_i,Rn,Pa))>je||ke===-1/0&&ye===-1/0)&&(ye=_i,je=ke)});return ye}var ln=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Qa(O){return O?Qt(O)?T.call(O):dt(O)?O.match(ln):Rt(O)?Wn(O,_n):Ut(O):[]}function Er(O,Z,le){if(Z==null||le)return Rt(O)||(O=Ut(O)),O[U(O.length-1)];var de=Qa(O),ke=Mi(de);Z=Math.max(Math.min(Z,ke),0);for(var ye=ke-1,je=0;je<Z;je++){var at=U(je,ye),hi=de[je];de[je]=de[at],de[at]=hi}return de.slice(0,Z)}function dr(O,Z){return function(le,de,ke){var ye=Z?[[],[]]:{};return de=B(de,ke),dn(le,function(je,at){var hi=de(je,at,le);O(ye,je,hi)}),ye}}var Fr=dr(function(O,Z,le){ui(O,le)?O[le].push(Z):O[le]=[Z]}),$a=dr(function(O,Z,le){O[le]=Z}),ks=dr(function(O,Z,le){ui(O,le)?O[le]++:O[le]=1}),Js=dr(function(O,Z,le){O[le?0:1].push(Z)},!0);function Ms(O,Z,le){return Z in le}var ts=We(function(O,Z){var le={},de=Z[0];if(O==null)return le;yt(de)?(Z.length>1&&(de=hn(de,Z[1])),Z=mn(O)):(de=Ms,Z=oi(Z,!1,!1),O=Object(O));for(var ke=0,ye=Z.length;ke<ye;ke++){var je=Z[ke],at=O[je];de(at,je,O)&&(le[je]=at)}return le}),ms=We(function(O,Z){var le,de=Z[0];return yt(de)?(de=Pn(de),Z.length>1&&(le=Z[1])):(Z=Wn(oi(Z,!1,!1),String),de=function(ke,ye){return!Nn(Z,ye)}),ts(O,de,le)});function Qs(O,Z,le){return T.call(O,0,Math.max(0,O.length-(Z==null||le?1:Z)))}function Ds(O,Z,le){return O==null||O.length<1?Z==null||le?void 0:[]:Z==null||le?O[0]:Qs(O,O.length-Z)}function Hi(O,Z,le){return T.call(O,Z==null||le?1:Z)}var So=We(function(O,Z){return Z=oi(Z,!0,!0),la(O,function(le){return!Nn(Z,le)})}),Dl=We(function(O,Z){return So(O,Z)});function is(O,Z,le,de){tt(Z)||(de=le,le=Z,Z=!1),le!=null&&(le=B(le,de));for(var ke=[],ye=[],je=0,at=Mi(O);je<at;je++){var hi=O[je],_i=le?le(hi,je,O):hi;Z&&!le?(je&&ye===_i||ke.push(hi),ye=_i):le?Nn(ye,_i)||(ye.push(_i),ke.push(hi)):Nn(ke,hi)||ke.push(hi)}return ke}var Ps=We(function(O){return is(oi(O,!0,!0))});function $s(O){for(var Z=O&&Za(O,Mi).length||0,le=Array(Z),de=0;de<Z;de++)le[de]=Na(O,de);return le}var Ka=We($s);function Ls(O,Z){return O._chain?ei(Z).chain():Z}function Rs(O){return dn(wn(O),function(Z){var le=ei[Z]=O[Z];ei.prototype[Z]=function(){var de=[this._wrapped];return r.apply(de,arguments),Ls(this,le.apply(ei,de))}}),ei}dn(["pop","push","reverse","shift","sort","splice","unshift"],function(O){var Z=m[O];ei.prototype[O]=function(){var le=this._wrapped;return le!=null&&(Z.apply(le,arguments),O!=="shift"&&O!=="splice"||le.length!==0||delete le[0]),Ls(this,le)}}),dn(["concat","join","slice"],function(O){var Z=m[O];ei.prototype[O]=function(){var le=this._wrapped;return le!=null&&(le=Z.apply(le,arguments)),Ls(this,le)}});var gs=Rs({__proto__:null,VERSION:s,restArguments:We,isObject:Me,isNull:function(O){return O===null},isUndefined:Ve,isBoolean:tt,isElement:function(O){return!(!O||O.nodeType!==1)},isString:dt,isNumber:Dt,isDate:He,isRegExp:Xe,isError:pt,isSymbol:Ne,isArrayBuffer:Ft,isDataView:vi,isArray:Qt,isFunction:yt,isArguments:pi,isFinite:function(O){return!Ne(O)&&me(O)&&!isNaN(parseFloat(O))},isNaN:ot,isTypedArray:fn,isEmpty:function(O){if(O==null)return!0;var Z=Mi(O);return typeof Z=="number"&&(Qt(O)||dt(O)||pi(O))?Z===0:Mi(si(O))===0},isMatch:Dn,isEqual:function(O,Z){return ti(O,Z)},isMap:tn,isWeakMap:xi,isSet:nt,isWeakSet:ii,keys:si,allKeys:mn,values:Ut,pairs:function(O){for(var Z=si(O),le=Z.length,de=Array(le),ke=0;ke<le;ke++)de[ke]=[Z[ke],O[Z[ke]]];return de},invert:Yi,functions:wn,methods:wn,extend:Cn,extendOwn:Zi,assign:Zi,defaults:sa,create:function(O,Z){var le=Fi(O);return Z&&Zi(le,Z),le},clone:function(O){return Me(O)?Qt(O)?O.slice():Cn({},O):O},tap:function(O,Z){return Z(O),O},get:gn,has:function(O,Z){for(var le=(Z=fi(Z)).length,de=0;de<le;de++){var ke=Z[de];if(!ui(O,ke))return!1;O=O[ke]}return!!le},mapObject:function(O,Z,le){Z=B(Z,le);for(var de=si(O),ke=de.length,ye={},je=0;je<ke;je++){var at=de[je];ye[at]=Z(O[at],at,O)}return ye},identity:_n,constant:Bi,noop:R,toPath:on,property:Zn,propertyOf:function(O){return O==null?R:function(Z){return gn(O,Z)}},matcher:Sn,matches:Sn,times:function(O,Z,le){var de=Array(Math.max(0,O));Z=hn(Z,le,1);for(var ke=0;ke<O;ke++)de[ke]=Z(ke);return de},random:U,now:X,escape:oe,unescape:fe,templateSettings:Be,template:function(O,Z,le){!Z&&le&&(Z=le),Z=sa({},Z,ei.templateSettings);var de=RegExp([(Z.escape||Ye).source,(Z.interpolate||Ye).source,(Z.evaluate||Ye).source].join("|")+"|$","g"),ke=0,ye="__p+='";O.replace(de,function(_i,Rn,Pa,ns,as){return ye+=O.slice(ke,as).replace(ht,ft),ke=as+_i.length,Rn?ye+=`'+
((__t=(`+Rn+`))==null?'':_.escape(__t))+
'`:Pa?ye+=`'+
((__t=(`+Pa+`))==null?'':__t)+
'`:ns&&(ye+=`';
`+ns+`
__p+='`),_i}),ye+=`';
`;var je,at=Z.variable;if(at){if(!Ee.test(at))throw new Error("variable is not a bare identifier: "+at)}else ye=`with(obj||{}){
`+ye+`}
`,at="obj";ye=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+ye+`return __p;
`;try{je=new Function(at,"_",ye)}catch(_i){throw _i.source=ye,_i}var hi=function(_i){return je.call(this,_i,ei)};return hi.source="function("+at+`){
`+ye+"}",hi},result:function(O,Z,le){var de=(Z=fi(Z)).length;if(!de)return yt(le)?le.call(O):le;for(var ke=0;ke<de;ke++){var ye=O==null?void 0:O[Z[ke]];ye===void 0&&(ye=le,ke=de),O=yt(ye)?ye.call(O):ye}return O},uniqueId:function(O){var Z=++rt+"";return O?O+Z:Z},chain:function(O){var Z=ei(O);return Z._chain=!0,Z},iteratee:L,partial:bt,bind:Zt,bindAll:ji,memoize:function(O,Z){var le=function(de){var ke=le.cache,ye=""+(Z?Z.apply(this,arguments):de);return ui(ke,ye)||(ke[ye]=O.apply(this,arguments)),ke[ye]};return le.cache={},le},delay:yn,defer:Ji,throttle:function(O,Z,le){var de,ke,ye,je,at=0;le||(le={});var hi=function(){at=le.leading===!1?0:X(),de=null,je=O.apply(ke,ye),de||(ke=ye=null)},_i=function(){var Rn=X();at||le.leading!==!1||(at=Rn);var Pa=Z-(Rn-at);return ke=this,ye=arguments,Pa<=0||Pa>Z?(de&&(clearTimeout(de),de=null),at=Rn,je=O.apply(ke,ye),de||(ke=ye=null)):de||le.trailing===!1||(de=setTimeout(hi,Pa)),je};return _i.cancel=function(){clearTimeout(de),at=0,de=ke=ye=null},_i},debounce:function(O,Z,le){var de,ke,ye,je,at,hi=function(){var Rn=X()-ke;Z>Rn?de=setTimeout(hi,Z-Rn):(de=null,le||(je=O.apply(at,ye)),de||(ye=at=null))},_i=We(function(Rn){return at=this,ye=Rn,ke=X(),de||(de=setTimeout(hi,Z),le&&(je=O.apply(at,ye))),je});return _i.cancel=function(){clearTimeout(de),de=ye=at=null},_i},wrap:function(O,Z){return bt(Z,O)},negate:Pn,compose:function(){var O=arguments,Z=O.length-1;return function(){for(var le=Z,de=O[Z].apply(this,arguments);le--;)de=O[le].call(this,de);return de}},after:function(O,Z){return function(){if(--O<1)return Z.apply(this,arguments)}},before:Da,once:Fa,findKey:ee,findIndex:Wt,findLastIndex:Ci,sortedIndex:Ln,indexOf:Oa,lastIndexOf:ga,find:oa,detect:oa,findWhere:function(O,Z){return oa(O,Sn(Z))},each:dn,forEach:dn,map:Wn,collect:Wn,reduce:ta,foldl:ta,inject:ta,reduceRight:Ca,foldr:Ca,filter:la,select:la,reject:function(O,Z,le){return la(O,Pn(B(Z)),le)},every:ur,all:ur,some:hr,any:hr,contains:Nn,includes:Nn,include:Nn,invoke:Br,pluck:Na,where:function(O,Z){return la(O,Sn(Z))},max:Za,min:function(O,Z,le){var de,ke,ye=1/0,je=1/0;if(Z==null||typeof Z=="number"&&typeof O[0]!="object"&&O!=null)for(var at=0,hi=(O=Rt(O)?O:Ut(O)).length;at<hi;at++)(de=O[at])!=null&&de<ye&&(ye=de);else Z=B(Z,le),dn(O,function(_i,Rn,Pa){((ke=Z(_i,Rn,Pa))<je||ke===1/0&&ye===1/0)&&(ye=_i,je=ke)});return ye},shuffle:function(O){return Er(O,1/0)},sample:Er,sortBy:function(O,Z,le){var de=0;return Z=B(Z,le),Na(Wn(O,function(ke,ye,je){return{value:ke,index:de++,criteria:Z(ke,ye,je)}}).sort(function(ke,ye){var je=ke.criteria,at=ye.criteria;if(je!==at){if(je>at||je===void 0)return 1;if(je<at||at===void 0)return-1}return ke.index-ye.index}),"value")},groupBy:Fr,indexBy:$a,countBy:ks,partition:Js,toArray:Qa,size:function(O){return O==null?0:Rt(O)?O.length:si(O).length},pick:ts,omit:ms,first:Ds,head:Ds,take:Ds,initial:Qs,last:function(O,Z,le){return O==null||O.length<1?Z==null||le?void 0:[]:Z==null||le?O[O.length-1]:Hi(O,Math.max(0,O.length-Z))},rest:Hi,tail:Hi,drop:Hi,compact:function(O){return la(O,Boolean)},flatten:function(O,Z){return oi(O,Z,!1)},without:Dl,uniq:is,unique:is,union:Ps,intersection:function(O){for(var Z=[],le=arguments.length,de=0,ke=Mi(O);de<ke;de++){var ye=O[de];if(!Nn(Z,ye)){var je;for(je=1;je<le&&Nn(arguments[je],ye);je++);je===le&&Z.push(ye)}}return Z},difference:So,unzip:$s,transpose:$s,zip:Ka,object:function(O,Z){for(var le={},de=0,ke=Mi(O);de<ke;de++)Z?le[O[de]]=Z[de]:le[O[de][0]]=O[de][1];return le},range:function(O,Z,le){Z==null&&(Z=O||0,O=0),le||(le=Z<O?-1:1);for(var de=Math.max(Math.ceil((Z-O)/le),0),ke=Array(de),ye=0;ye<de;ye++,O+=le)ke[ye]=O;return ke},chunk:function(O,Z){if(Z==null||Z<1)return[];for(var le=[],de=0,ke=O.length;de<ke;)le.push(T.call(O,de,de+=Z));return le},mixin:Rs,default:ei});return gs._=gs,gs})})(Fu);var ra={};ra.centralAsia={name:"Central Asia",countries:["KZ","KG","TJ","TM","UZ"]};ra.southernAsia={name:"Southern Asia",countries:["AF","BD","BT","IO","IN","IR","MV","NP","PK","LK"]};ra.southeastAsia={name:"Southeast Asia",countries:["BN","KH","CX","CC","TL","ID","LA","MY","MM","PH","SG","TH","VN"]};ra.eastAsia={name:"East Asia",countries:["CN","HK","JP","KP","KR","MO","MN","TW"]};ra.westernAsia={name:"Western Asia",countries:["AM","AZ","BH","IQ","IL","JO","KW","LB","OM","PS","QA","SA","SY","TR","AE","YE"]};ra.centralAfrica={name:"Central Aftrica",countries:["AO","CM","CF","TD","CG","CD","GQ","GA","ST"]};ra.northAfrica={name:"North Africa",countries:["DZ","EG","LY","MA","SD","TN","EH"]};ra.southernAfrica={name:"Southern Africa",countries:["BW","LS","NA","ZA","SZ"]};ra.eastAfrica={name:"East Africa",countries:["BI","KM","DJ","ER","ET","KE","MG","MW","MU","YT","MZ","RE","RW","SC","SO","SS","TZ","UG","ZM","ZW"]};ra.westAfrica={name:"West Africa",countries:["BJ","BF","CV","CI","GM","GH","GN","GW","LR","ML","MR","NE","NG","SH","SN","SL","TG"]};ra.centralAmerica={name:"Central America",countries:["BZ","CR","SV","GT","HN","NI","PA"]};ra.northernAmerica={name:"Northern America",countries:["BM","CA","GL","MX","PM","US"]};ra.caribbean={name:"Caribbean",countries:["AI","AG","AW","BS","BB","BQ","VG","KY","CU","CW","DM","DO","GD","GP","HT","JM","MQ","MS","PR","BL","KN","LC","MF","VC","SX","TT","TC","VI"]};ra.southAmerica={name:"South America",countries:["AR","BO","BR","CL","CO","EC","FK","GF","GY","PY","PE","SR","UY","VE"]};ra.antartica={name:"Antartica",countries:["AQ","BV","TF","HM","GS"]};ra.northernEurope={name:"Northern Europe",countries:["AX","DK","EE","FO","FI","GG","IS","IE","JE","IM","LV","LT","NO","SJ","SE","GB"]};ra.southernEurope={name:"Southern Europe",countries:["AL","AD","BA","HR","CY","GI","GR","IT","MK","VA","MT","ME","PT","SM","RS","SI","ES"]};ra.easternEurope={name:"Eastern Europe",countries:["BY","BG","CZ","GE","HU","MD","PL","RO","RU","SK","UA"]};ra.westernEurope={name:"Western Europe",countries:["AT","BE","FR","DE","LI","LU","MC","NL","CH"]};ra.australia={name:"Australia",countries:["AU","NF","NZ"]};ra.melanesia={name:"Melanesia",countries:["FJ","NC","PG","SB","VU"]};ra.micronesia={name:"Micronesia",countries:["GU","KI","MH","FM","NR","MP","PW","UM"]};ra.polynesia={name:"Polynesia",countries:["AS","CK","PF","NU","PN","WS","TK","TO","TV","WF"]};var _m=ra,tl=Fu.exports,ua=_m,To={};To.asia={name:"Asia",regions:["centralAsia","southernAsia","southeastAsia","eastAsia","westernAsia"],countries:tl.flatten([ua.centralAsia.countries,ua.southernAsia.countries,ua.southeastAsia.countries,ua.eastAsia.countries,ua.westernAsia.countries]).sort()};To.africa={name:"Africa",regions:["centralAfrica","northAfrica","southernAfrica","eastAfrica","westAfrica"],countries:tl.flatten([ua.centralAfrica.countries,ua.northAfrica.countries,ua.southernAfrica.countries,ua.eastAfrica.countries,ua.westAfrica.countries]).sort()};To.northAmerica={name:"North America",regions:["centralAmerica","northernAmerica","caribbean"],countries:tl.flatten([ua.centralAmerica.countries,ua.northernAmerica.countries,ua.caribbean.countries]).sort()};To.southAmerica={name:"South America",regions:["southAmerica"],countries:tl.flatten([ua.southAmerica.countries]).sort()};To.antartica={name:"Antartica",regions:["antartica"],countries:tl.flatten([ua.antartica.countries]).sort()};To.europe={name:"Europe",regions:["northernEurope","southernEurope","easternEurope","westernEurope"],countries:tl.flatten([ua.northernEurope.countries,ua.southernEurope.countries,ua.easternEurope.countries,ua.westernEurope.countries]).sort()};To.oceania={name:"Oceania",regions:["australia","melanesia","micronesia","polynesia"],countries:tl.flatten([ua.australia.countries,ua.melanesia.countries,ua.micronesia.countries,ua.polynesia.countries]).sort()};var Xb=To;const Yb=[{alpha2:"AC",alpha3:"",countryCallingCodes:["+247"],currencies:["USD"],emoji:"",ioc:"SHP",languages:["eng"],name:"Ascension Island",status:"reserved"},{alpha2:"AD",alpha3:"AND",countryCallingCodes:["+376"],currencies:["EUR"],emoji:"\u{1F1E6}\u{1F1E9}",ioc:"AND",languages:["cat"],name:"Andorra",status:"assigned"},{alpha2:"AE",alpha3:"ARE",countryCallingCodes:["+971"],currencies:["AED"],emoji:"\u{1F1E6}\u{1F1EA}",ioc:"UAE",languages:["ara"],name:"United Arab Emirates",status:"assigned"},{alpha2:"AF",alpha3:"AFG",countryCallingCodes:["+93"],currencies:["AFN"],emoji:"\u{1F1E6}\u{1F1EB}",ioc:"AFG",languages:["pus"],name:"Afghanistan",status:"assigned"},{alpha2:"AG",alpha3:"ATG",countryCallingCodes:["+1 268"],currencies:["XCD"],emoji:"\u{1F1E6}\u{1F1EC}",ioc:"ANT",languages:["eng"],name:"Antigua And Barbuda",status:"assigned"},{alpha2:"AI",alpha3:"AIA",countryCallingCodes:["+1 264"],currencies:["XCD"],emoji:"\u{1F1E6}\u{1F1EE}",ioc:"",languages:["eng"],name:"Anguilla",status:"assigned"},{alpha2:"AI",alpha3:"AFI",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"French Afar and Issas",status:"deleted"},{alpha2:"AL",alpha3:"ALB",countryCallingCodes:["+355"],currencies:["ALL"],emoji:"\u{1F1E6}\u{1F1F1}",ioc:"ALB",languages:["sqi"],name:"Albania",status:"assigned"},{alpha2:"AM",alpha3:"ARM",countryCallingCodes:["+374"],currencies:["AMD"],emoji:"\u{1F1E6}\u{1F1F2}",ioc:"ARM",languages:["hye","rus"],name:"Armenia",status:"assigned"},{alpha2:"AN",alpha3:"ANT",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"Netherlands Antilles",status:"deleted"},{alpha2:"AO",alpha3:"AGO",countryCallingCodes:["+244"],currencies:["AOA"],emoji:"\u{1F1E6}\u{1F1F4}",ioc:"ANG",languages:["por"],name:"Angola",status:"assigned"},{alpha2:"AQ",alpha3:"ATA",countryCallingCodes:["+672"],currencies:[],emoji:"\u{1F1E6}\u{1F1F6}",ioc:"",languages:[],name:"Antarctica",status:"assigned"},{alpha2:"AR",alpha3:"ARG",countryCallingCodes:["+54"],currencies:["ARS"],emoji:"\u{1F1E6}\u{1F1F7}",ioc:"ARG",languages:["spa"],name:"Argentina",status:"assigned"},{alpha2:"AS",alpha3:"ASM",countryCallingCodes:["+1 684"],currencies:["USD"],emoji:"\u{1F1E6}\u{1F1F8}",ioc:"ASA",languages:["eng","smo"],name:"American Samoa",status:"assigned"},{alpha2:"AT",alpha3:"AUT",countryCallingCodes:["+43"],currencies:["EUR"],emoji:"\u{1F1E6}\u{1F1F9}",ioc:"AUT",languages:["deu"],name:"Austria",status:"assigned"},{alpha2:"AU",alpha3:"AUS",countryCallingCodes:["+61"],currencies:["AUD"],emoji:"\u{1F1E6}\u{1F1FA}",ioc:"AUS",languages:["eng"],name:"Australia",status:"assigned"},{alpha2:"AW",alpha3:"ABW",countryCallingCodes:["+297"],currencies:["AWG"],emoji:"\u{1F1E6}\u{1F1FC}",ioc:"ARU",languages:["nld"],name:"Aruba",status:"assigned"},{alpha2:"AX",alpha3:"ALA",countryCallingCodes:["+358"],currencies:["EUR"],emoji:"\u{1F1E6}\u{1F1FD}",ioc:"",languages:["swe"],name:"\xC5land Islands",status:"assigned"},{alpha2:"AZ",alpha3:"AZE",countryCallingCodes:["+994"],currencies:["AZN"],emoji:"\u{1F1E6}\u{1F1FF}",ioc:"AZE",languages:["aze"],name:"Azerbaijan",status:"assigned"},{alpha2:"BA",alpha3:"BIH",countryCallingCodes:["+387"],currencies:["BAM"],emoji:"\u{1F1E7}\u{1F1E6}",ioc:"BIH",languages:["bos","cre","srp"],name:"Bosnia & Herzegovina",status:"assigned"},{alpha2:"BB",alpha3:"BRB",countryCallingCodes:["+1 246"],currencies:["BBD"],emoji:"\u{1F1E7}\u{1F1E7}",ioc:"BAR",languages:["eng"],name:"Barbados",status:"assigned"},{alpha2:"BD",alpha3:"BGD",countryCallingCodes:["+880"],currencies:["BDT"],emoji:"\u{1F1E7}\u{1F1E9}",ioc:"BAN",languages:["ben"],name:"Bangladesh",status:"assigned"},{alpha2:"BE",alpha3:"BEL",countryCallingCodes:["+32"],currencies:["EUR"],emoji:"\u{1F1E7}\u{1F1EA}",ioc:"BEL",languages:["nld","fra","deu"],name:"Belgium",status:"assigned"},{alpha2:"BF",alpha3:"BFA",countryCallingCodes:["+226"],currencies:["XOF"],emoji:"\u{1F1E7}\u{1F1EB}",ioc:"BUR",languages:["fra"],name:"Burkina Faso",status:"assigned"},{alpha2:"BG",alpha3:"BGR",countryCallingCodes:["+359"],currencies:["BGN"],emoji:"\u{1F1E7}\u{1F1EC}",ioc:"BUL",languages:["bul"],name:"Bulgaria",status:"assigned"},{alpha2:"BH",alpha3:"BHR",countryCallingCodes:["+973"],currencies:["BHD"],emoji:"\u{1F1E7}\u{1F1ED}",ioc:"BRN",languages:["ara"],name:"Bahrain",status:"assigned"},{alpha2:"BI",alpha3:"BDI",countryCallingCodes:["+257"],currencies:["BIF"],emoji:"\u{1F1E7}\u{1F1EE}",ioc:"BDI",languages:["fra"],name:"Burundi",status:"assigned"},{alpha2:"BJ",alpha3:"BEN",countryCallingCodes:["+229"],currencies:["XOF"],emoji:"\u{1F1E7}\u{1F1EF}",ioc:"BEN",languages:["fra"],name:"Benin",status:"assigned"},{alpha2:"BL",alpha3:"BLM",countryCallingCodes:["+590"],currencies:["EUR"],emoji:"\u{1F1E7}\u{1F1F1}",ioc:"",languages:["fra"],name:"Saint Barth\xE9lemy",status:"assigned"},{alpha2:"BM",alpha3:"BMU",countryCallingCodes:["+1 441"],currencies:["BMD"],emoji:"\u{1F1E7}\u{1F1F2}",ioc:"BER",languages:["eng"],name:"Bermuda",status:"assigned"},{alpha2:"BN",alpha3:"BRN",countryCallingCodes:["+673"],currencies:["BND"],emoji:"\u{1F1E7}\u{1F1F3}",ioc:"BRU",languages:["msa","eng"],name:"Brunei Darussalam",status:"assigned"},{alpha2:"BO",alpha3:"BOL",countryCallingCodes:["+591"],currencies:["BOB","BOV"],emoji:"\u{1F1E7}\u{1F1F4}",ioc:"BOL",languages:["spa","aym","que"],name:"Bolivia, Plurinational State Of",status:"assigned"},{alpha2:"BQ",alpha3:"BES",countryCallingCodes:["+599"],currencies:["USD"],emoji:"\u{1F1E7}\u{1F1F6}",ioc:"",languages:["nld"],name:"Bonaire, Saint Eustatius And Saba",status:"assigned"},{alpha2:"BQ",alpha3:"ATB",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"British Antarctic Territory",status:"deleted"},{alpha2:"BR",alpha3:"BRA",countryCallingCodes:["+55"],currencies:["BRL"],emoji:"\u{1F1E7}\u{1F1F7}",ioc:"BRA",languages:["por"],name:"Brazil",status:"assigned"},{alpha2:"BS",alpha3:"BHS",countryCallingCodes:["+1 242"],currencies:["BSD"],emoji:"\u{1F1E7}\u{1F1F8}",ioc:"BAH",languages:["eng"],name:"Bahamas",status:"assigned"},{alpha2:"BT",alpha3:"BTN",countryCallingCodes:["+975"],currencies:["INR","BTN"],emoji:"\u{1F1E7}\u{1F1F9}",ioc:"BHU",languages:["dzo"],name:"Bhutan",status:"assigned"},{alpha2:"BU",alpha3:"BUR",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"Burma",status:"deleted"},{alpha2:"BV",alpha3:"BVT",countryCallingCodes:[],currencies:["NOK"],emoji:"\u{1F1E7}\u{1F1FB}",ioc:"",languages:[],name:"Bouvet Island",status:"assigned"},{alpha2:"BW",alpha3:"BWA",countryCallingCodes:["+267"],currencies:["BWP"],emoji:"\u{1F1E7}\u{1F1FC}",ioc:"BOT",languages:["eng","tsn"],name:"Botswana",status:"assigned"},{alpha2:"BY",alpha3:"BLR",countryCallingCodes:["+375"],currencies:["BYR"],emoji:"\u{1F1E7}\u{1F1FE}",ioc:"BLR",languages:["bel","rus"],name:"Belarus",status:"assigned"},{alpha2:"BY",alpha3:"BYS",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"Byelorussian SSR",status:"deleted"},{alpha2:"BZ",alpha3:"BLZ",countryCallingCodes:["+501"],currencies:["BZD"],emoji:"\u{1F1E7}\u{1F1FF}",ioc:"BIZ",languages:["eng"],name:"Belize",status:"assigned"},{alpha2:"CA",alpha3:"CAN",countryCallingCodes:["+1"],currencies:["CAD"],emoji:"\u{1F1E8}\u{1F1E6}",ioc:"CAN",languages:["eng","fra"],name:"Canada",status:"assigned"},{alpha2:"CC",alpha3:"CCK",countryCallingCodes:["+61"],currencies:["AUD"],emoji:"\u{1F1E8}\u{1F1E8}",ioc:"",languages:["eng"],name:"Cocos (Keeling) Islands",status:"assigned"},{alpha2:"CD",alpha3:"COD",countryCallingCodes:["+243"],currencies:["CDF"],emoji:"\u{1F1E8}\u{1F1E9}",ioc:"COD",languages:["fra","lin","kon","swa"],name:"Democratic Republic Of Congo",status:"assigned"},{alpha2:"CF",alpha3:"CAF",countryCallingCodes:["+236"],currencies:["XAF"],emoji:"\u{1F1E8}\u{1F1EB}",ioc:"CAF",languages:["fra","sag"],name:"Central African Republic",status:"assigned"},{alpha2:"CG",alpha3:"COG",countryCallingCodes:["+242"],currencies:["XAF"],emoji:"\u{1F1E8}\u{1F1EC}",ioc:"CGO",languages:["fra","lin"],name:"Republic Of Congo",status:"assigned"},{alpha2:"CH",alpha3:"CHE",countryCallingCodes:["+41"],currencies:["CHF","CHE","CHW"],emoji:"\u{1F1E8}\u{1F1ED}",ioc:"SUI",languages:["deu","fra","ita","roh"],name:"Switzerland",status:"assigned"},{alpha2:"CI",alpha3:"CIV",countryCallingCodes:["+225"],currencies:["XOF"],emoji:"\u{1F1E8}\u{1F1EE}",ioc:"CIV",languages:["fra"],name:"C\xF4te d'Ivoire",status:"assigned"},{alpha2:"CK",alpha3:"COK",countryCallingCodes:["+682"],currencies:["NZD"],emoji:"\u{1F1E8}\u{1F1F0}",ioc:"COK",languages:["eng","mri"],name:"Cook Islands",status:"assigned"},{alpha2:"CL",alpha3:"CHL",countryCallingCodes:["+56"],currencies:["CLP","CLF"],emoji:"\u{1F1E8}\u{1F1F1}",ioc:"CHI",languages:["spa"],name:"Chile",status:"assigned"},{alpha2:"CM",alpha3:"CMR",countryCallingCodes:["+237"],currencies:["XAF"],emoji:"\u{1F1E8}\u{1F1F2}",ioc:"CMR",languages:["eng","fra"],name:"Cameroon",status:"assigned"},{alpha2:"CN",alpha3:"CHN",countryCallingCodes:["+86"],currencies:["CNY"],emoji:"\u{1F1E8}\u{1F1F3}",ioc:"CHN",languages:["zho"],name:"China",status:"assigned"},{alpha2:"CO",alpha3:"COL",countryCallingCodes:["+57"],currencies:["COP","COU"],emoji:"\u{1F1E8}\u{1F1F4}",ioc:"COL",languages:["spa"],name:"Colombia",status:"assigned"},{alpha2:"CP",alpha3:"",countryCallingCodes:[],currencies:["EUR"],emoji:"",ioc:"",languages:[],name:"Clipperton Island",status:"reserved"},{alpha2:"CR",alpha3:"CRI",countryCallingCodes:["+506"],currencies:["CRC"],emoji:"\u{1F1E8}\u{1F1F7}",ioc:"CRC",languages:["spa"],name:"Costa Rica",status:"assigned"},{alpha2:"CS",alpha3:"CSK",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"Czechoslovakia",status:"deleted"},{alpha2:"CS",alpha3:"SCG",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"Serbia and Montenegro",status:"deleted"},{alpha2:"CT",alpha3:"CTE",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"Canton and Enderbury Islands",status:"deleted"},{alpha2:"CU",alpha3:"CUB",countryCallingCodes:["+53"],currencies:["CUP","CUC"],emoji:"\u{1F1E8}\u{1F1FA}",ioc:"CUB",languages:["spa"],name:"Cuba",status:"assigned"},{alpha2:"CV",alpha3:"CPV",countryCallingCodes:["+238"],currencies:["CVE"],emoji:"\u{1F1E8}\u{1F1FB}",ioc:"CPV",languages:["por"],name:"Cabo Verde",status:"assigned"},{alpha2:"CW",alpha3:"CUW",countryCallingCodes:["+599"],currencies:["ANG"],emoji:"\u{1F1E8}\u{1F1FC}",ioc:"",languages:["nld"],name:"Curacao",status:"assigned"},{alpha2:"CX",alpha3:"CXR",countryCallingCodes:["+61"],currencies:["AUD"],emoji:"\u{1F1E8}\u{1F1FD}",ioc:"",languages:["eng"],name:"Christmas Island",status:"assigned"},{alpha2:"CY",alpha3:"CYP",countryCallingCodes:["+357"],currencies:["EUR"],emoji:"\u{1F1E8}\u{1F1FE}",ioc:"CYP",languages:["ell","tur"],name:"Cyprus",status:"assigned"},{alpha2:"CZ",alpha3:"CZE",countryCallingCodes:["+420"],currencies:["CZK"],emoji:"\u{1F1E8}\u{1F1FF}",ioc:"CZE",languages:["ces"],name:"Czech Republic",status:"assigned"},{alpha2:"DD",alpha3:"DDR",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"German Democratic Republic",status:"deleted"},{alpha2:"DE",alpha3:"DEU",countryCallingCodes:["+49"],currencies:["EUR"],emoji:"\u{1F1E9}\u{1F1EA}",ioc:"GER",languages:["deu"],name:"Germany",status:"assigned"},{alpha2:"DG",alpha3:"",countryCallingCodes:[],currencies:["USD"],emoji:"",ioc:"",languages:[],name:"Diego Garcia",status:"reserved"},{alpha2:"DJ",alpha3:"DJI",countryCallingCodes:["+253"],currencies:["DJF"],emoji:"\u{1F1E9}\u{1F1EF}",ioc:"DJI",languages:["ara","fra"],name:"Djibouti",status:"assigned"},{alpha2:"DK",alpha3:"DNK",countryCallingCodes:["+45"],currencies:["DKK"],emoji:"\u{1F1E9}\u{1F1F0}",ioc:"DEN",languages:["dan"],name:"Denmark",status:"assigned"},{alpha2:"DM",alpha3:"DMA",countryCallingCodes:["+1 767"],currencies:["XCD"],emoji:"\u{1F1E9}\u{1F1F2}",ioc:"DMA",languages:["eng"],name:"Dominica",status:"assigned"},{alpha2:"DO",alpha3:"DOM",countryCallingCodes:["+1 809","+1 829","+1 849"],currencies:["DOP"],emoji:"\u{1F1E9}\u{1F1F4}",ioc:"DOM",languages:["spa"],name:"Dominican Republic",status:"assigned"},{alpha2:"DY",alpha3:"DHY",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"Dahomey",status:"deleted"},{alpha2:"DZ",alpha3:"DZA",countryCallingCodes:["+213"],currencies:["DZD"],emoji:"\u{1F1E9}\u{1F1FF}",ioc:"ALG",languages:["ara"],name:"Algeria",status:"assigned"},{alpha2:"EA",alpha3:"",countryCallingCodes:[],currencies:["EUR"],emoji:"",ioc:"",languages:[],name:"Ceuta, Mulilla",status:"reserved"},{alpha2:"EC",alpha3:"ECU",countryCallingCodes:["+593"],currencies:["USD"],emoji:"\u{1F1EA}\u{1F1E8}",ioc:"ECU",languages:["spa","que"],name:"Ecuador",status:"assigned"},{alpha2:"EE",alpha3:"EST",countryCallingCodes:["+372"],currencies:["EUR"],emoji:"\u{1F1EA}\u{1F1EA}",ioc:"EST",languages:["est"],name:"Estonia",status:"assigned"},{alpha2:"EG",alpha3:"EGY",countryCallingCodes:["+20"],currencies:["EGP"],emoji:"\u{1F1EA}\u{1F1EC}",ioc:"EGY",languages:["ara"],name:"Egypt",status:"assigned"},{alpha2:"EH",alpha3:"ESH",countryCallingCodes:["+212"],currencies:["MAD"],emoji:"\u{1F1EA}\u{1F1ED}",ioc:"",languages:[],name:"Western Sahara",status:"assigned"},{alpha2:"ER",alpha3:"ERI",countryCallingCodes:["+291"],currencies:["ERN"],emoji:"\u{1F1EA}\u{1F1F7}",ioc:"ERI",languages:["eng","ara","tir"],name:"Eritrea",status:"assigned"},{alpha2:"ES",alpha3:"ESP",countryCallingCodes:["+34"],currencies:["EUR"],emoji:"\u{1F1EA}\u{1F1F8}",ioc:"ESP",languages:["spa"],name:"Spain",status:"assigned"},{alpha2:"ET",alpha3:"ETH",countryCallingCodes:["+251"],currencies:["ETB"],emoji:"\u{1F1EA}\u{1F1F9}",ioc:"ETH",languages:["amh"],name:"Ethiopia",status:"assigned"},{alpha2:"EU",alpha3:"",countryCallingCodes:["+388"],currencies:["EUR"],emoji:"\u{1F1EA}\u{1F1FA}",ioc:"",languages:[],name:"European Union",status:"reserved"},{alpha2:"FI",alpha3:"FIN",countryCallingCodes:["+358"],currencies:["EUR"],emoji:"\u{1F1EB}\u{1F1EE}",ioc:"FIN",languages:["fin","swe"],name:"Finland",status:"assigned"},{alpha2:"FJ",alpha3:"FJI",countryCallingCodes:["+679"],currencies:["FJD"],emoji:"\u{1F1EB}\u{1F1EF}",ioc:"FIJ",languages:["eng","fij"],name:"Fiji",status:"assigned"},{alpha2:"FK",alpha3:"FLK",countryCallingCodes:["+500"],currencies:["FKP"],emoji:"\u{1F1EB}\u{1F1F0}",ioc:"",languages:["eng"],name:"Falkland Islands",status:"assigned"},{alpha2:"FM",alpha3:"FSM",countryCallingCodes:["+691"],currencies:["USD"],emoji:"\u{1F1EB}\u{1F1F2}",ioc:"FSM",languages:["eng"],name:"Micronesia, Federated States Of",status:"assigned"},{alpha2:"FO",alpha3:"FRO",countryCallingCodes:["+298"],currencies:["DKK"],emoji:"\u{1F1EB}\u{1F1F4}",ioc:"FAI",languages:["fao","dan"],name:"Faroe Islands",status:"assigned"},{alpha2:"FQ",alpha3:"ATF",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"French Southern and Antarctic Territories",status:"deleted"},{alpha2:"FR",alpha3:"FRA",countryCallingCodes:["+33"],currencies:["EUR"],emoji:"\u{1F1EB}\u{1F1F7}",ioc:"FRA",languages:["fra"],name:"France",status:"assigned"},{alpha2:"FX",alpha3:"",countryCallingCodes:["+241"],currencies:["EUR"],emoji:"",ioc:"",languages:["fra"],name:"France, Metropolitan",status:"reserved"},{alpha2:"GA",alpha3:"GAB",countryCallingCodes:["+241"],currencies:["XAF"],emoji:"\u{1F1EC}\u{1F1E6}",ioc:"GAB",languages:["fra"],name:"Gabon",status:"assigned"},{alpha2:"GB",alpha3:"GBR",countryCallingCodes:["+44"],currencies:["GBP"],emoji:"\u{1F1EC}\u{1F1E7}",ioc:"GBR",languages:["eng","cor","gle","gla","cym"],name:"United Kingdom",status:"assigned"},{alpha2:"GD",alpha3:"GRD",countryCallingCodes:["+473"],currencies:["XCD"],emoji:"\u{1F1EC}\u{1F1E9}",ioc:"GRN",languages:["eng"],name:"Grenada",status:"assigned"},{alpha2:"GE",alpha3:"GEO",countryCallingCodes:["+995"],currencies:["GEL"],emoji:"\u{1F1EC}\u{1F1EA}",ioc:"GEO",languages:["kat"],name:"Georgia",status:"assigned"},{alpha2:"GE",alpha3:"GEL",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"Gilbert and Ellice Islands",status:"deleted"},{alpha2:"GF",alpha3:"GUF",countryCallingCodes:["+594"],currencies:["EUR"],emoji:"\u{1F1EC}\u{1F1EB}",ioc:"",languages:["fra"],name:"French Guiana",status:"assigned"},{alpha2:"GG",alpha3:"GGY",countryCallingCodes:["+44"],currencies:["GBP"],emoji:"\u{1F1EC}\u{1F1EC}",ioc:"GCI",languages:["fra"],name:"Guernsey",status:"assigned"},{alpha2:"GH",alpha3:"GHA",countryCallingCodes:["+233"],currencies:["GHS"],emoji:"\u{1F1EC}\u{1F1ED}",ioc:"GHA",languages:["eng"],name:"Ghana",status:"assigned"},{alpha2:"GI",alpha3:"GIB",countryCallingCodes:["+350"],currencies:["GIP"],emoji:"\u{1F1EC}\u{1F1EE}",ioc:"",languages:["eng"],name:"Gibraltar",status:"assigned"},{alpha2:"GL",alpha3:"GRL",countryCallingCodes:["+299"],currencies:["DKK"],emoji:"\u{1F1EC}\u{1F1F1}",ioc:"",languages:["kal"],name:"Greenland",status:"assigned"},{alpha2:"GM",alpha3:"GMB",countryCallingCodes:["+220"],currencies:["GMD"],emoji:"\u{1F1EC}\u{1F1F2}",ioc:"GAM",languages:["eng"],name:"Gambia",status:"assigned"},{alpha2:"GN",alpha3:"GIN",countryCallingCodes:["+224"],currencies:["GNF"],emoji:"\u{1F1EC}\u{1F1F3}",ioc:"GUI",languages:["fra"],name:"Guinea",status:"assigned"},{alpha2:"GP",alpha3:"GLP",countryCallingCodes:["+590"],currencies:["EUR"],emoji:"\u{1F1EC}\u{1F1F5}",ioc:"",languages:["fra"],name:"Guadeloupe",status:"assigned"},{alpha2:"GQ",alpha3:"GNQ",countryCallingCodes:["+240"],currencies:["XAF"],emoji:"\u{1F1EC}\u{1F1F6}",ioc:"GEQ",languages:["spa","fra","por"],name:"Equatorial Guinea",status:"assigned"},{alpha2:"GR",alpha3:"GRC",countryCallingCodes:["+30"],currencies:["EUR"],emoji:"\u{1F1EC}\u{1F1F7}",ioc:"GRE",languages:["ell"],name:"Greece",status:"assigned"},{alpha2:"GS",alpha3:"SGS",countryCallingCodes:[],currencies:["GBP"],emoji:"\u{1F1EC}\u{1F1F8}",ioc:"",languages:["eng"],name:"South Georgia And The South Sandwich Islands",status:"assigned"},{alpha2:"GT",alpha3:"GTM",countryCallingCodes:["+502"],currencies:["GTQ"],emoji:"\u{1F1EC}\u{1F1F9}",ioc:"GUA",languages:["spa"],name:"Guatemala",status:"assigned"},{alpha2:"GU",alpha3:"GUM",countryCallingCodes:["+1 671"],currencies:["USD"],emoji:"\u{1F1EC}\u{1F1FA}",ioc:"GUM",languages:["eng"],name:"Guam",status:"assigned"},{alpha2:"GW",alpha3:"GNB",countryCallingCodes:["+245"],currencies:["XOF"],emoji:"\u{1F1EC}\u{1F1FC}",ioc:"GBS",languages:["por"],name:"Guinea-bissau",status:"assigned"},{alpha2:"GY",alpha3:"GUY",countryCallingCodes:["+592"],currencies:["GYD"],emoji:"\u{1F1EC}\u{1F1FE}",ioc:"GUY",languages:["eng"],name:"Guyana",status:"assigned"},{alpha2:"HK",alpha3:"HKG",countryCallingCodes:["+852"],currencies:["HKD"],emoji:"\u{1F1ED}\u{1F1F0}",ioc:"HKG",languages:["zho","eng"],name:"Hong Kong",status:"assigned"},{alpha2:"HM",alpha3:"HMD",countryCallingCodes:[],currencies:["AUD"],emoji:"\u{1F1ED}\u{1F1F2}",ioc:"",languages:[],name:"Heard Island And McDonald Islands",status:"assigned"},{alpha2:"HN",alpha3:"HND",countryCallingCodes:["+504"],currencies:["HNL"],emoji:"\u{1F1ED}\u{1F1F3}",ioc:"HON",languages:["spa"],name:"Honduras",status:"assigned"},{alpha2:"HR",alpha3:"HRV",countryCallingCodes:["+385"],currencies:["HRK"],emoji:"\u{1F1ED}\u{1F1F7}",ioc:"CRO",languages:["hrv"],name:"Croatia",status:"assigned"},{alpha2:"HT",alpha3:"HTI",countryCallingCodes:["+509"],currencies:["HTG","USD"],emoji:"\u{1F1ED}\u{1F1F9}",ioc:"HAI",languages:["fra","hat"],name:"Haiti",status:"assigned"},{alpha2:"HU",alpha3:"HUN",countryCallingCodes:["+36"],currencies:["HUF"],emoji:"\u{1F1ED}\u{1F1FA}",ioc:"HUN",languages:["hun"],name:"Hungary",status:"assigned"},{alpha2:"HV",alpha3:"HVO",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"Upper Volta",status:"deleted"},{alpha2:"IC",alpha3:"",countryCallingCodes:[],currencies:["EUR"],emoji:"",ioc:"",languages:[],name:"Canary Islands",status:"reserved"},{alpha2:"ID",alpha3:"IDN",countryCallingCodes:["+62"],currencies:["IDR"],emoji:"\u{1F1EE}\u{1F1E9}",ioc:"INA",languages:["ind"],name:"Indonesia",status:"assigned"},{alpha2:"IE",alpha3:"IRL",countryCallingCodes:["+353"],currencies:["EUR"],emoji:"\u{1F1EE}\u{1F1EA}",ioc:"IRL",languages:["eng","gle"],name:"Ireland",status:"assigned"},{alpha2:"IL",alpha3:"ISR",countryCallingCodes:["+972"],currencies:["ILS"],emoji:"\u{1F1EE}\u{1F1F1}",ioc:"ISR",languages:["heb","ara","eng"],name:"Israel",status:"assigned"},{alpha2:"IM",alpha3:"IMN",countryCallingCodes:["+44"],currencies:["GBP"],emoji:"\u{1F1EE}\u{1F1F2}",ioc:"",languages:["eng","glv"],name:"Isle Of Man",status:"assigned"},{alpha2:"IN",alpha3:"IND",countryCallingCodes:["+91"],currencies:["INR"],emoji:"\u{1F1EE}\u{1F1F3}",ioc:"IND",languages:["eng","hin"],name:"India",status:"assigned"},{alpha2:"IO",alpha3:"IOT",countryCallingCodes:["+246"],currencies:["USD"],emoji:"\u{1F1EE}\u{1F1F4}",ioc:"",languages:["eng"],name:"British Indian Ocean Territory",status:"assigned"},{alpha2:"IQ",alpha3:"IRQ",countryCallingCodes:["+964"],currencies:["IQD"],emoji:"\u{1F1EE}\u{1F1F6}",ioc:"IRQ",languages:["ara","kur"],name:"Iraq",status:"assigned"},{alpha2:"IR",alpha3:"IRN",countryCallingCodes:["+98"],currencies:["IRR"],emoji:"\u{1F1EE}\u{1F1F7}",ioc:"IRI",languages:["fas"],name:"Iran, Islamic Republic Of",status:"assigned"},{alpha2:"IS",alpha3:"ISL",countryCallingCodes:["+354"],currencies:["ISK"],emoji:"\u{1F1EE}\u{1F1F8}",ioc:"ISL",languages:["isl"],name:"Iceland",status:"assigned"},{alpha2:"IT",alpha3:"ITA",countryCallingCodes:["+39"],currencies:["EUR"],emoji:"\u{1F1EE}\u{1F1F9}",ioc:"ITA",languages:["ita"],name:"Italy",status:"assigned"},{alpha2:"JE",alpha3:"JEY",countryCallingCodes:["+44"],currencies:["GBP"],emoji:"\u{1F1EF}\u{1F1EA}",ioc:"JCI",languages:["eng","fra"],name:"Jersey",status:"assigned"},{alpha2:"JM",alpha3:"JAM",countryCallingCodes:["+1 876"],currencies:["JMD"],emoji:"\u{1F1EF}\u{1F1F2}",ioc:"JAM",languages:["eng"],name:"Jamaica",status:"assigned"},{alpha2:"JO",alpha3:"JOR",countryCallingCodes:["+962"],currencies:["JOD"],emoji:"\u{1F1EF}\u{1F1F4}",ioc:"JOR",languages:["ara"],name:"Jordan",status:"assigned"},{alpha2:"JP",alpha3:"JPN",countryCallingCodes:["+81"],currencies:["JPY"],emoji:"\u{1F1EF}\u{1F1F5}",ioc:"JPN",languages:["jpn"],name:"Japan",status:"assigned"},{alpha2:"JT",alpha3:"JTN",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"Johnston Island",status:"deleted"},{alpha2:"KE",alpha3:"KEN",countryCallingCodes:["+254"],currencies:["KES"],emoji:"\u{1F1F0}\u{1F1EA}",ioc:"KEN",languages:["eng","swa"],name:"Kenya",status:"assigned"},{alpha2:"KG",alpha3:"KGZ",countryCallingCodes:["+996"],currencies:["KGS"],emoji:"\u{1F1F0}\u{1F1EC}",ioc:"KGZ",languages:["rus"],name:"Kyrgyzstan",status:"assigned"},{alpha2:"KH",alpha3:"KHM",countryCallingCodes:["+855"],currencies:["KHR"],emoji:"\u{1F1F0}\u{1F1ED}",ioc:"CAM",languages:["khm"],name:"Cambodia",status:"assigned"},{alpha2:"KI",alpha3:"KIR",countryCallingCodes:["+686"],currencies:["AUD"],emoji:"\u{1F1F0}\u{1F1EE}",ioc:"KIR",languages:["eng"],name:"Kiribati",status:"assigned"},{alpha2:"KM",alpha3:"COM",countryCallingCodes:["+269"],currencies:["KMF"],emoji:"\u{1F1F0}\u{1F1F2}",ioc:"COM",languages:["ara","fra"],name:"Comoros",status:"assigned"},{alpha2:"KN",alpha3:"KNA",countryCallingCodes:["+1 869"],currencies:["XCD"],emoji:"\u{1F1F0}\u{1F1F3}",ioc:"SKN",languages:["eng"],name:"Saint Kitts And Nevis",status:"assigned"},{alpha2:"KP",alpha3:"PRK",countryCallingCodes:["+850"],currencies:["KPW"],emoji:"\u{1F1F0}\u{1F1F5}",ioc:"PRK",languages:["kor"],name:"Korea, Democratic People's Republic Of",status:"assigned"},{alpha2:"KR",alpha3:"KOR",countryCallingCodes:["+82"],currencies:["KRW"],emoji:"\u{1F1F0}\u{1F1F7}",ioc:"KOR",languages:["kor"],name:"Korea, Republic Of",status:"assigned"},{alpha2:"KW",alpha3:"KWT",countryCallingCodes:["+965"],currencies:["KWD"],emoji:"\u{1F1F0}\u{1F1FC}",ioc:"KUW",languages:["ara"],name:"Kuwait",status:"assigned"},{alpha2:"KY",alpha3:"CYM",countryCallingCodes:["+1 345"],currencies:["KYD"],emoji:"\u{1F1F0}\u{1F1FE}",ioc:"CAY",languages:["eng"],name:"Cayman Islands",status:"assigned"},{alpha2:"KZ",alpha3:"KAZ",countryCallingCodes:["+7","+7 6","+7 7"],currencies:["KZT"],emoji:"\u{1F1F0}\u{1F1FF}",ioc:"KAZ",languages:["kaz","rus"],name:"Kazakhstan",status:"assigned"},{alpha2:"LA",alpha3:"LAO",countryCallingCodes:["+856"],currencies:["LAK"],emoji:"\u{1F1F1}\u{1F1E6}",ioc:"LAO",languages:["lao"],name:"Lao People's Democratic Republic",status:"assigned"},{alpha2:"LB",alpha3:"LBN",countryCallingCodes:["+961"],currencies:["LBP"],emoji:"\u{1F1F1}\u{1F1E7}",ioc:"LIB",languages:["ara","hye"],name:"Lebanon",status:"assigned"},{alpha2:"LC",alpha3:"LCA",countryCallingCodes:["+1 758"],currencies:["XCD"],emoji:"\u{1F1F1}\u{1F1E8}",ioc:"LCA",languages:["eng"],name:"Saint Lucia",status:"assigned"},{alpha2:"LI",alpha3:"LIE",countryCallingCodes:["+423"],currencies:["CHF"],emoji:"\u{1F1F1}\u{1F1EE}",ioc:"LIE",languages:["deu"],name:"Liechtenstein",status:"assigned"},{alpha2:"LK",alpha3:"LKA",countryCallingCodes:["+94"],currencies:["LKR"],emoji:"\u{1F1F1}\u{1F1F0}",ioc:"SRI",languages:["sin","tam"],name:"Sri Lanka",status:"assigned"},{alpha2:"LR",alpha3:"LBR",countryCallingCodes:["+231"],currencies:["LRD"],emoji:"\u{1F1F1}\u{1F1F7}",ioc:"LBR",languages:["eng"],name:"Liberia",status:"assigned"},{alpha2:"LS",alpha3:"LSO",countryCallingCodes:["+266"],currencies:["LSL","ZAR"],emoji:"\u{1F1F1}\u{1F1F8}",ioc:"LES",languages:["eng","sot"],name:"Lesotho",status:"assigned"},{alpha2:"LT",alpha3:"LTU",countryCallingCodes:["+370"],currencies:["EUR"],emoji:"\u{1F1F1}\u{1F1F9}",ioc:"LTU",languages:["lit"],name:"Lithuania",status:"assigned"},{alpha2:"LU",alpha3:"LUX",countryCallingCodes:["+352"],currencies:["EUR"],emoji:"\u{1F1F1}\u{1F1FA}",ioc:"LUX",languages:["fra","deu","ltz"],name:"Luxembourg",status:"assigned"},{alpha2:"LV",alpha3:"LVA",countryCallingCodes:["+371"],currencies:["EUR"],emoji:"\u{1F1F1}\u{1F1FB}",ioc:"LAT",languages:["lav"],name:"Latvia",status:"assigned"},{alpha2:"LY",alpha3:"LBY",countryCallingCodes:["+218"],currencies:["LYD"],emoji:"\u{1F1F1}\u{1F1FE}",ioc:"LBA",languages:["ara"],name:"Libya",status:"assigned"},{alpha2:"MA",alpha3:"MAR",countryCallingCodes:["+212"],currencies:["MAD"],emoji:"\u{1F1F2}\u{1F1E6}",ioc:"MAR",languages:["ara"],name:"Morocco",status:"assigned"},{alpha2:"MC",alpha3:"MCO",countryCallingCodes:["+377"],currencies:["EUR"],emoji:"\u{1F1F2}\u{1F1E8}",ioc:"MON",languages:["fra"],name:"Monaco",status:"assigned"},{alpha2:"MD",alpha3:"MDA",countryCallingCodes:["+373"],currencies:["MDL"],emoji:"\u{1F1F2}\u{1F1E9}",ioc:"MDA",languages:["ron"],name:"Moldova",status:"assigned"},{alpha2:"ME",alpha3:"MNE",countryCallingCodes:["+382"],currencies:["EUR"],emoji:"\u{1F1F2}\u{1F1EA}",ioc:"MNE",languages:["mot"],name:"Montenegro",status:"assigned"},{alpha2:"MF",alpha3:"MAF",countryCallingCodes:["+590"],currencies:["EUR"],emoji:"\u{1F1F2}\u{1F1EB}",ioc:"",languages:["fra"],name:"Saint Martin",status:"assigned"},{alpha2:"MG",alpha3:"MDG",countryCallingCodes:["+261"],currencies:["MGA"],emoji:"\u{1F1F2}\u{1F1EC}",ioc:"MAD",languages:["fra","mlg"],name:"Madagascar",status:"assigned"},{alpha2:"MH",alpha3:"MHL",countryCallingCodes:["+692"],currencies:["USD"],emoji:"\u{1F1F2}\u{1F1ED}",ioc:"MHL",languages:["eng","mah"],name:"Marshall Islands",status:"assigned"},{alpha2:"MI",alpha3:"MID",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"Midway Islands",status:"deleted"},{alpha2:"MK",alpha3:"MKD",countryCallingCodes:["+389"],currencies:["MKD"],emoji:"\u{1F1F2}\u{1F1F0}",ioc:"MKD",languages:["mkd"],name:"Macedonia, The Former Yugoslav Republic Of",status:"assigned"},{alpha2:"ML",alpha3:"MLI",countryCallingCodes:["+223"],currencies:["XOF"],emoji:"\u{1F1F2}\u{1F1F1}",ioc:"MLI",languages:["fra"],name:"Mali",status:"assigned"},{alpha2:"MM",alpha3:"MMR",countryCallingCodes:["+95"],currencies:["MMK"],emoji:"\u{1F1F2}\u{1F1F2}",ioc:"MYA",languages:["mya"],name:"Myanmar",status:"assigned"},{alpha2:"MN",alpha3:"MNG",countryCallingCodes:["+976"],currencies:["MNT"],emoji:"\u{1F1F2}\u{1F1F3}",ioc:"MGL",languages:["mon"],name:"Mongolia",status:"assigned"},{alpha2:"MO",alpha3:"MAC",countryCallingCodes:["+853"],currencies:["MOP"],emoji:"\u{1F1F2}\u{1F1F4}",ioc:"MAC",languages:["zho","por"],name:"Macao",status:"assigned"},{alpha2:"MP",alpha3:"MNP",countryCallingCodes:["+1 670"],currencies:["USD"],emoji:"\u{1F1F2}\u{1F1F5}",ioc:"",languages:["eng"],name:"Northern Mariana Islands",status:"assigned"},{alpha2:"MQ",alpha3:"MTQ",countryCallingCodes:["+596"],currencies:["EUR"],emoji:"\u{1F1F2}\u{1F1F6}",ioc:"",languages:[],name:"Martinique",status:"assigned"},{alpha2:"MR",alpha3:"MRT",countryCallingCodes:["+222"],currencies:["MRO"],emoji:"\u{1F1F2}\u{1F1F7}",ioc:"MTN",languages:["ara","fra"],name:"Mauritania",status:"assigned"},{alpha2:"MS",alpha3:"MSR",countryCallingCodes:["+1 664"],currencies:["XCD"],emoji:"\u{1F1F2}\u{1F1F8}",ioc:"",languages:[],name:"Montserrat",status:"assigned"},{alpha2:"MT",alpha3:"MLT",countryCallingCodes:["+356"],currencies:["EUR"],emoji:"\u{1F1F2}\u{1F1F9}",ioc:"MLT",languages:["mlt","eng"],name:"Malta",status:"assigned"},{alpha2:"MU",alpha3:"MUS",countryCallingCodes:["+230"],currencies:["MUR"],emoji:"\u{1F1F2}\u{1F1FA}",ioc:"MRI",languages:["eng","fra"],name:"Mauritius",status:"assigned"},{alpha2:"MV",alpha3:"MDV",countryCallingCodes:["+960"],currencies:["MVR"],emoji:"\u{1F1F2}\u{1F1FB}",ioc:"MDV",languages:["div"],name:"Maldives",status:"assigned"},{alpha2:"MW",alpha3:"MWI",countryCallingCodes:["+265"],currencies:["MWK"],emoji:"\u{1F1F2}\u{1F1FC}",ioc:"MAW",languages:["eng","nya"],name:"Malawi",status:"assigned"},{alpha2:"MX",alpha3:"MEX",countryCallingCodes:["+52"],currencies:["MXN","MXV"],emoji:"\u{1F1F2}\u{1F1FD}",ioc:"MEX",languages:["spa"],name:"Mexico",status:"assigned"},{alpha2:"MY",alpha3:"MYS",countryCallingCodes:["+60"],currencies:["MYR"],emoji:"\u{1F1F2}\u{1F1FE}",ioc:"MAS",languages:["msa","eng"],name:"Malaysia",status:"assigned"},{alpha2:"MZ",alpha3:"MOZ",countryCallingCodes:["+258"],currencies:["MZN"],emoji:"\u{1F1F2}\u{1F1FF}",ioc:"MOZ",languages:["por"],name:"Mozambique",status:"assigned"},{alpha2:"NA",alpha3:"NAM",countryCallingCodes:["+264"],currencies:["NAD","ZAR"],emoji:"\u{1F1F3}\u{1F1E6}",ioc:"NAM",languages:["eng"],name:"Namibia",status:"assigned"},{alpha2:"NC",alpha3:"NCL",countryCallingCodes:["+687"],currencies:["XPF"],emoji:"\u{1F1F3}\u{1F1E8}",ioc:"",languages:["fra"],name:"New Caledonia",status:"assigned"},{alpha2:"NE",alpha3:"NER",countryCallingCodes:["+227"],currencies:["XOF"],emoji:"\u{1F1F3}\u{1F1EA}",ioc:"NIG",languages:["fra"],name:"Niger",status:"assigned"},{alpha2:"NF",alpha3:"NFK",countryCallingCodes:["+672"],currencies:["AUD"],emoji:"\u{1F1F3}\u{1F1EB}",ioc:"",languages:["eng"],name:"Norfolk Island",status:"assigned"},{alpha2:"NG",alpha3:"NGA",countryCallingCodes:["+234"],currencies:["NGN"],emoji:"\u{1F1F3}\u{1F1EC}",ioc:"NGR",languages:["eng"],name:"Nigeria",status:"assigned"},{alpha2:"NH",alpha3:"NHB",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"New Hebrides",status:"deleted"},{alpha2:"NI",alpha3:"NIC",countryCallingCodes:["+505"],currencies:["NIO"],emoji:"\u{1F1F3}\u{1F1EE}",ioc:"NCA",languages:["spa"],name:"Nicaragua",status:"assigned"},{alpha2:"NL",alpha3:"NLD",countryCallingCodes:["+31"],currencies:["EUR"],emoji:"\u{1F1F3}\u{1F1F1}",ioc:"NED",languages:["nld"],name:"Netherlands",status:"assigned"},{alpha2:"NO",alpha3:"NOR",countryCallingCodes:["+47"],currencies:["NOK"],emoji:"\u{1F1F3}\u{1F1F4}",ioc:"NOR",languages:["nor"],name:"Norway",status:"assigned"},{alpha2:"NP",alpha3:"NPL",countryCallingCodes:["+977"],currencies:["NPR"],emoji:"\u{1F1F3}\u{1F1F5}",ioc:"NEP",languages:["nep"],name:"Nepal",status:"assigned"},{alpha2:"NQ",alpha3:"ATN",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"Dronning Maud Land",status:"deleted"},{alpha2:"NR",alpha3:"NRU",countryCallingCodes:["+674"],currencies:["AUD"],emoji:"\u{1F1F3}\u{1F1F7}",ioc:"NRU",languages:["eng","nau"],name:"Nauru",status:"assigned"},{alpha2:"NT",alpha3:"NTZ",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"Neutral Zone",status:"deleted"},{alpha2:"NU",alpha3:"NIU",countryCallingCodes:["+683"],currencies:["NZD"],emoji:"\u{1F1F3}\u{1F1FA}",ioc:"",languages:["eng"],name:"Niue",status:"assigned"},{alpha2:"NZ",alpha3:"NZL",countryCallingCodes:["+64"],currencies:["NZD"],emoji:"\u{1F1F3}\u{1F1FF}",ioc:"NZL",languages:["eng"],name:"New Zealand",status:"assigned"},{alpha2:"OM",alpha3:"OMN",countryCallingCodes:["+968"],currencies:["OMR"],emoji:"\u{1F1F4}\u{1F1F2}",ioc:"OMA",languages:["ara"],name:"Oman",status:"assigned"},{alpha2:"PA",alpha3:"PAN",countryCallingCodes:["+507"],currencies:["PAB","USD"],emoji:"\u{1F1F5}\u{1F1E6}",ioc:"PAN",languages:["spa"],name:"Panama",status:"assigned"},{alpha2:"PC",alpha3:"PCI",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"Pacific Islands, Trust Territory of the",status:"deleted"},{alpha2:"PE",alpha3:"PER",countryCallingCodes:["+51"],currencies:["PEN"],emoji:"\u{1F1F5}\u{1F1EA}",ioc:"PER",languages:["spa","aym","que"],name:"Peru",status:"assigned"},{alpha2:"PF",alpha3:"PYF",countryCallingCodes:["+689"],currencies:["XPF"],emoji:"\u{1F1F5}\u{1F1EB}",ioc:"",languages:["fra"],name:"French Polynesia",status:"assigned"},{alpha2:"PG",alpha3:"PNG",countryCallingCodes:["+675"],currencies:["PGK"],emoji:"\u{1F1F5}\u{1F1EC}",ioc:"PNG",languages:["eng"],name:"Papua New Guinea",status:"assigned"},{alpha2:"PH",alpha3:"PHL",countryCallingCodes:["+63"],currencies:["PHP"],emoji:"\u{1F1F5}\u{1F1ED}",ioc:"PHI",languages:["eng"],name:"Philippines",status:"assigned"},{alpha2:"PK",alpha3:"PAK",countryCallingCodes:["+92"],currencies:["PKR"],emoji:"\u{1F1F5}\u{1F1F0}",ioc:"PAK",languages:["urd","eng"],name:"Pakistan",status:"assigned"},{alpha2:"PL",alpha3:"POL",countryCallingCodes:["+48"],currencies:["PLN"],emoji:"\u{1F1F5}\u{1F1F1}",ioc:"POL",languages:["pol"],name:"Poland",status:"assigned"},{alpha2:"PM",alpha3:"SPM",countryCallingCodes:["+508"],currencies:["EUR"],emoji:"\u{1F1F5}\u{1F1F2}",ioc:"",languages:["eng"],name:"Saint Pierre And Miquelon",status:"assigned"},{alpha2:"PN",alpha3:"PCN",countryCallingCodes:["+872"],currencies:["NZD"],emoji:"\u{1F1F5}\u{1F1F3}",ioc:"",languages:["eng"],name:"Pitcairn",status:"assigned"},{alpha2:"PR",alpha3:"PRI",countryCallingCodes:["+1 787","+1 939"],currencies:["USD"],emoji:"\u{1F1F5}\u{1F1F7}",ioc:"PUR",languages:["spa","eng"],name:"Puerto Rico",status:"assigned"},{alpha2:"PS",alpha3:"PSE",countryCallingCodes:["+970"],currencies:["JOD","EGP","ILS"],emoji:"\u{1F1F5}\u{1F1F8}",ioc:"PLE",languages:["ara"],name:"Palestinian Territory, Occupied",status:"assigned"},{alpha2:"PT",alpha3:"PRT",countryCallingCodes:["+351"],currencies:["EUR"],emoji:"\u{1F1F5}\u{1F1F9}",ioc:"POR",languages:["por"],name:"Portugal",status:"assigned"},{alpha2:"PU",alpha3:"PUS",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"U.S. Miscellaneous Pacific Islands",status:"deleted"},{alpha2:"PW",alpha3:"PLW",countryCallingCodes:["+680"],currencies:["USD"],emoji:"\u{1F1F5}\u{1F1FC}",ioc:"PLW",languages:["eng"],name:"Palau",status:"assigned"},{alpha2:"PY",alpha3:"PRY",countryCallingCodes:["+595"],currencies:["PYG"],emoji:"\u{1F1F5}\u{1F1FE}",ioc:"PAR",languages:["spa"],name:"Paraguay",status:"assigned"},{alpha2:"PZ",alpha3:"PCZ",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"Panama Canal Zone",status:"deleted"},{alpha2:"QA",alpha3:"QAT",countryCallingCodes:["+974"],currencies:["QAR"],emoji:"\u{1F1F6}\u{1F1E6}",ioc:"QAT",languages:["ara"],name:"Qatar",status:"assigned"},{alpha2:"RE",alpha3:"REU",countryCallingCodes:["+262"],currencies:["EUR"],emoji:"\u{1F1F7}\u{1F1EA}",ioc:"",languages:["fra"],name:"Reunion",status:"assigned"},{alpha2:"RH",alpha3:"RHO",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"Southern Rhodesia",status:"deleted"},{alpha2:"RO",alpha3:"ROU",countryCallingCodes:["+40"],currencies:["RON"],emoji:"\u{1F1F7}\u{1F1F4}",ioc:"ROU",languages:["ron"],name:"Romania",status:"assigned"},{alpha2:"RS",alpha3:"SRB",countryCallingCodes:["+381"],currencies:["RSD"],emoji:"\u{1F1F7}\u{1F1F8}",ioc:"SRB",languages:["srp"],name:"Serbia",status:"assigned"},{alpha2:"RU",alpha3:"RUS",countryCallingCodes:["+7","+7 3","+7 4","+7 8"],currencies:["RUB"],emoji:"\u{1F1F7}\u{1F1FA}",ioc:"RUS",languages:["rus"],name:"Russian Federation",status:"assigned"},{alpha2:"RW",alpha3:"RWA",countryCallingCodes:["+250"],currencies:["RWF"],emoji:"\u{1F1F7}\u{1F1FC}",ioc:"RWA",languages:["eng","fra","kin"],name:"Rwanda",status:"assigned"},{alpha2:"SA",alpha3:"SAU",countryCallingCodes:["+966"],currencies:["SAR"],emoji:"\u{1F1F8}\u{1F1E6}",ioc:"KSA",languages:["ara"],name:"Saudi Arabia",status:"assigned"},{alpha2:"SB",alpha3:"SLB",countryCallingCodes:["+677"],currencies:["SBD"],emoji:"\u{1F1F8}\u{1F1E7}",ioc:"SOL",languages:["eng"],name:"Solomon Islands",status:"assigned"},{alpha2:"SC",alpha3:"SYC",countryCallingCodes:["+248"],currencies:["SCR"],emoji:"\u{1F1F8}\u{1F1E8}",ioc:"SEY",languages:["eng","fra"],name:"Seychelles",status:"assigned"},{alpha2:"SD",alpha3:"SDN",countryCallingCodes:["+249"],currencies:["SDG"],emoji:"\u{1F1F8}\u{1F1E9}",ioc:"SUD",languages:["ara","eng"],name:"Sudan",status:"assigned"},{alpha2:"SE",alpha3:"SWE",countryCallingCodes:["+46"],currencies:["SEK"],emoji:"\u{1F1F8}\u{1F1EA}",ioc:"SWE",languages:["swe"],name:"Sweden",status:"assigned"},{alpha2:"SG",alpha3:"SGP",countryCallingCodes:["+65"],currencies:["SGD"],emoji:"\u{1F1F8}\u{1F1EC}",ioc:"SIN",languages:["eng","zho","msa","tam"],name:"Singapore",status:"assigned"},{alpha2:"SH",alpha3:"SHN",countryCallingCodes:["+290"],currencies:["SHP"],emoji:"\u{1F1F8}\u{1F1ED}",ioc:"",languages:["eng"],name:"Saint Helena, Ascension And Tristan Da Cunha",status:"assigned"},{alpha2:"SI",alpha3:"SVN",countryCallingCodes:["+386"],currencies:["EUR"],emoji:"\u{1F1F8}\u{1F1EE}",ioc:"SLO",languages:["slv"],name:"Slovenia",status:"assigned"},{alpha2:"SJ",alpha3:"SJM",countryCallingCodes:["+47"],currencies:["NOK"],emoji:"\u{1F1F8}\u{1F1EF}",ioc:"",languages:[],name:"Svalbard And Jan Mayen",status:"assigned"},{alpha2:"SK",alpha3:"SVK",countryCallingCodes:["+421"],currencies:["EUR"],emoji:"\u{1F1F8}\u{1F1F0}",ioc:"SVK",languages:["slk"],name:"Slovakia",status:"assigned"},{alpha2:"SK",alpha3:"SKM",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"Sikkim",status:"deleted"},{alpha2:"SL",alpha3:"SLE",countryCallingCodes:["+232"],currencies:["SLL"],emoji:"\u{1F1F8}\u{1F1F1}",ioc:"SLE",languages:["eng"],name:"Sierra Leone",status:"assigned"},{alpha2:"SM",alpha3:"SMR",countryCallingCodes:["+378"],currencies:["EUR"],emoji:"\u{1F1F8}\u{1F1F2}",ioc:"SMR",languages:["ita"],name:"San Marino",status:"assigned"},{alpha2:"SN",alpha3:"SEN",countryCallingCodes:["+221"],currencies:["XOF"],emoji:"\u{1F1F8}\u{1F1F3}",ioc:"SEN",languages:["fra"],name:"Senegal",status:"assigned"},{alpha2:"SO",alpha3:"SOM",countryCallingCodes:["+252"],currencies:["SOS"],emoji:"\u{1F1F8}\u{1F1F4}",ioc:"SOM",languages:["som"],name:"Somalia",status:"assigned"},{alpha2:"SR",alpha3:"SUR",countryCallingCodes:["+597"],currencies:["SRD"],emoji:"\u{1F1F8}\u{1F1F7}",ioc:"SUR",languages:["nld"],name:"Suriname",status:"assigned"},{alpha2:"SS",alpha3:"SSD",countryCallingCodes:["+211"],currencies:["SSP"],emoji:"\u{1F1F8}\u{1F1F8}",ioc:"SSD",languages:["eng"],name:"South Sudan",status:"assigned"},{alpha2:"ST",alpha3:"STP",countryCallingCodes:["+239"],currencies:["STD"],emoji:"\u{1F1F8}\u{1F1F9}",ioc:"STP",languages:["por"],name:"Sao Tome and Principe",status:"assigned"},{alpha2:"SU",alpha3:"",countryCallingCodes:[],currencies:["RUB"],emoji:"",ioc:"",languages:["rus"],name:"USSR",status:"reserved"},{alpha2:"SV",alpha3:"SLV",countryCallingCodes:["+503"],currencies:["USD"],emoji:"\u{1F1F8}\u{1F1FB}",ioc:"ESA",languages:["spa"],name:"El Salvador",status:"assigned"},{alpha2:"SX",alpha3:"SXM",countryCallingCodes:["+1 721"],currencies:["ANG"],emoji:"\u{1F1F8}\u{1F1FD}",ioc:"",languages:["nld"],name:"Sint Maarten",status:"assigned"},{alpha2:"SY",alpha3:"SYR",countryCallingCodes:["+963"],currencies:["SYP"],emoji:"\u{1F1F8}\u{1F1FE}",ioc:"SYR",languages:["ara"],name:"Syrian Arab Republic",status:"assigned"},{alpha2:"SZ",alpha3:"SWZ",countryCallingCodes:["+268"],currencies:["SZL"],emoji:"\u{1F1F8}\u{1F1FF}",ioc:"SWZ",languages:["eng","ssw"],name:"Swaziland",status:"assigned"},{alpha2:"TA",alpha3:"",countryCallingCodes:["+290"],currencies:["GBP"],emoji:"",ioc:"",languages:[],name:"Tristan de Cunha",status:"reserved"},{alpha2:"TC",alpha3:"TCA",countryCallingCodes:["+1 649"],currencies:["USD"],emoji:"\u{1F1F9}\u{1F1E8}",ioc:"",languages:["eng"],name:"Turks And Caicos Islands",status:"assigned"},{alpha2:"TD",alpha3:"TCD",countryCallingCodes:["+235"],currencies:["XAF"],emoji:"\u{1F1F9}\u{1F1E9}",ioc:"CHA",languages:["ara","fra"],name:"Chad",status:"assigned"},{alpha2:"TF",alpha3:"ATF",countryCallingCodes:[],currencies:["EUR"],emoji:"\u{1F1F9}\u{1F1EB}",ioc:"",languages:["fra"],name:"French Southern Territories",status:"assigned"},{alpha2:"TG",alpha3:"TGO",countryCallingCodes:["+228"],currencies:["XOF"],emoji:"\u{1F1F9}\u{1F1EC}",ioc:"TOG",languages:["fra"],name:"Togo",status:"assigned"},{alpha2:"TH",alpha3:"THA",countryCallingCodes:["+66"],currencies:["THB"],emoji:"\u{1F1F9}\u{1F1ED}",ioc:"THA",languages:["tha"],name:"Thailand",status:"assigned"},{alpha2:"TJ",alpha3:"TJK",countryCallingCodes:["+992"],currencies:["TJS"],emoji:"\u{1F1F9}\u{1F1EF}",ioc:"TJK",languages:["tgk","rus"],name:"Tajikistan",status:"assigned"},{alpha2:"TK",alpha3:"TKL",countryCallingCodes:["+690"],currencies:["NZD"],emoji:"\u{1F1F9}\u{1F1F0}",ioc:"",languages:["eng"],name:"Tokelau",status:"assigned"},{alpha2:"TL",alpha3:"TLS",countryCallingCodes:["+670"],currencies:["USD"],emoji:"\u{1F1F9}\u{1F1F1}",ioc:"TLS",languages:["por"],name:"Timor-Leste, Democratic Republic of",status:"assigned"},{alpha2:"TM",alpha3:"TKM",countryCallingCodes:["+993"],currencies:["TMT"],emoji:"\u{1F1F9}\u{1F1F2}",ioc:"TKM",languages:["tuk","rus"],name:"Turkmenistan",status:"assigned"},{alpha2:"TN",alpha3:"TUN",countryCallingCodes:["+216"],currencies:["TND"],emoji:"\u{1F1F9}\u{1F1F3}",ioc:"TUN",languages:["ara"],name:"Tunisia",status:"assigned"},{alpha2:"TO",alpha3:"TON",countryCallingCodes:["+676"],currencies:["TOP"],emoji:"\u{1F1F9}\u{1F1F4}",ioc:"TGA",languages:["eng"],name:"Tonga",status:"assigned"},{alpha2:"TP",alpha3:"TMP",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"East Timor",status:"deleted"},{alpha2:"TR",alpha3:"TUR",countryCallingCodes:["+90"],currencies:["TRY"],emoji:"\u{1F1F9}\u{1F1F7}",ioc:"TUR",languages:["tur"],name:"Turkey",status:"assigned"},{alpha2:"TT",alpha3:"TTO",countryCallingCodes:["+1 868"],currencies:["TTD"],emoji:"\u{1F1F9}\u{1F1F9}",ioc:"TTO",languages:["eng"],name:"Trinidad And Tobago",status:"assigned"},{alpha2:"TV",alpha3:"TUV",countryCallingCodes:["+688"],currencies:["AUD"],emoji:"\u{1F1F9}\u{1F1FB}",ioc:"TUV",languages:["eng"],name:"Tuvalu",status:"assigned"},{alpha2:"TW",alpha3:"TWN",countryCallingCodes:["+886"],currencies:["TWD"],emoji:"\u{1F1F9}\u{1F1FC}",ioc:"TPE",languages:["zho"],name:"Taiwan",status:"assigned"},{alpha2:"TZ",alpha3:"TZA",countryCallingCodes:["+255"],currencies:["TZS"],emoji:"\u{1F1F9}\u{1F1FF}",ioc:"TAN",languages:["swa","eng"],name:"Tanzania, United Republic Of",status:"assigned"},{alpha2:"UA",alpha3:"UKR",countryCallingCodes:["+380"],currencies:["UAH"],emoji:"\u{1F1FA}\u{1F1E6}",ioc:"UKR",languages:["ukr","rus"],name:"Ukraine",status:"assigned"},{alpha2:"UG",alpha3:"UGA",countryCallingCodes:["+256"],currencies:["UGX"],emoji:"\u{1F1FA}\u{1F1EC}",ioc:"UGA",languages:["eng","swa"],name:"Uganda",status:"assigned"},{alpha2:"UK",alpha3:"",countryCallingCodes:[],currencies:["GBP"],emoji:"",ioc:"",languages:["eng","cor","gle","gla","cym"],name:"United Kingdom",status:"reserved"},{alpha2:"UM",alpha3:"UMI",countryCallingCodes:["+1"],currencies:["USD"],emoji:"\u{1F1FA}\u{1F1F2}",ioc:"",languages:["eng"],name:"United States Minor Outlying Islands",status:"assigned"},{alpha2:"US",alpha3:"USA",countryCallingCodes:["+1"],currencies:["USD"],emoji:"\u{1F1FA}\u{1F1F8}",ioc:"USA",languages:["eng"],name:"United States",status:"assigned"},{alpha2:"UY",alpha3:"URY",countryCallingCodes:["+598"],currencies:["UYU","UYI"],emoji:"\u{1F1FA}\u{1F1FE}",ioc:"URU",languages:["spa"],name:"Uruguay",status:"assigned"},{alpha2:"UZ",alpha3:"UZB",countryCallingCodes:["+998"],currencies:["UZS"],emoji:"\u{1F1FA}\u{1F1FF}",ioc:"UZB",languages:["uzb","rus"],name:"Uzbekistan",status:"assigned"},{alpha2:"VA",alpha3:"VAT",countryCallingCodes:["+379","+39"],currencies:["EUR"],emoji:"\u{1F1FB}\u{1F1E6}",ioc:"",languages:["ita"],name:"Vatican City State",status:"assigned"},{alpha2:"VC",alpha3:"VCT",countryCallingCodes:["+1 784"],currencies:["XCD"],emoji:"\u{1F1FB}\u{1F1E8}",ioc:"VIN",languages:["eng"],name:"Saint Vincent And The Grenadines",status:"assigned"},{alpha2:"VD",alpha3:"VDR",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"Viet-Nam, Democratic Republic of",status:"deleted"},{alpha2:"VE",alpha3:"VEN",countryCallingCodes:["+58"],currencies:["VEF"],emoji:"\u{1F1FB}\u{1F1EA}",ioc:"VEN",languages:["spa"],name:"Venezuela, Bolivarian Republic Of",status:"assigned"},{alpha2:"VG",alpha3:"VGB",countryCallingCodes:["+1 284"],currencies:["USD"],emoji:"\u{1F1FB}\u{1F1EC}",ioc:"IVB",languages:["eng"],name:"Virgin Islands (British)",status:"assigned"},{alpha2:"VI",alpha3:"VIR",countryCallingCodes:["+1 340"],currencies:["USD"],emoji:"\u{1F1FB}\u{1F1EE}",ioc:"ISV",languages:["eng"],name:"Virgin Islands (US)",status:"assigned"},{alpha2:"VN",alpha3:"VNM",countryCallingCodes:["+84"],currencies:["VND"],emoji:"\u{1F1FB}\u{1F1F3}",ioc:"VIE",languages:["vie"],name:"Viet Nam",status:"assigned"},{alpha2:"VU",alpha3:"VUT",countryCallingCodes:["+678"],currencies:["VUV"],emoji:"\u{1F1FB}\u{1F1FA}",ioc:"VAN",languages:["bis","eng","fra"],name:"Vanuatu",status:"assigned"},{alpha2:"WF",alpha3:"WLF",countryCallingCodes:["+681"],currencies:["XPF"],emoji:"\u{1F1FC}\u{1F1EB}",ioc:"",languages:["fra"],name:"Wallis And Futuna",status:"assigned"},{alpha2:"WK",alpha3:"WAK",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"Wake Island",status:"deleted"},{alpha2:"WS",alpha3:"WSM",countryCallingCodes:["+685"],currencies:["WST"],emoji:"\u{1F1FC}\u{1F1F8}",ioc:"SAM",languages:["eng","smo"],name:"Samoa",status:"assigned"},{alpha2:"XK",alpha3:"",countryCallingCodes:["+383"],currencies:["EUR"],emoji:"",ioc:"KOS",languages:["sqi","srp","bos","tur","rom"],name:"Kosovo",status:"user assigned"},{alpha2:"YD",alpha3:"YMD",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"Yemen, Democratic",status:"deleted"},{alpha2:"YE",alpha3:"YEM",countryCallingCodes:["+967"],currencies:["YER"],emoji:"\u{1F1FE}\u{1F1EA}",ioc:"YEM",languages:["ara"],name:"Yemen",status:"assigned"},{alpha2:"YT",alpha3:"MYT",countryCallingCodes:["+262"],currencies:["EUR"],emoji:"\u{1F1FE}\u{1F1F9}",ioc:"",languages:["fra"],name:"Mayotte",status:"assigned"},{alpha2:"YU",alpha3:"YUG",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"Yugoslavia",status:"deleted"},{alpha2:"ZA",alpha3:"ZAF",countryCallingCodes:["+27"],currencies:["ZAR"],emoji:"\u{1F1FF}\u{1F1E6}",ioc:"RSA",languages:["afr","eng","nbl","som","tso","ven","xho","zul"],name:"South Africa",status:"assigned"},{alpha2:"ZM",alpha3:"ZMB",countryCallingCodes:["+260"],currencies:["ZMW"],emoji:"\u{1F1FF}\u{1F1F2}",ioc:"ZAM",languages:["eng"],name:"Zambia",status:"assigned"},{alpha2:"ZR",alpha3:"ZAR",countryCallingCodes:[],currencies:[],ioc:"",languages:[],name:"Zaire",status:"deleted"},{alpha2:"ZW",alpha3:"ZWE",countryCallingCodes:["+263"],currencies:["USD","ZAR","BWP","GBP","EUR"],emoji:"\u{1F1FF}\u{1F1FC}",ioc:"ZIM",languages:["eng","sna","nde"],name:"Zimbabwe",status:"assigned"}],Jb=[{code:"AED",decimals:2,name:"United Arab Emirates dirham",number:"784"},{code:"AFN",decimals:2,name:"Afghan afghani",number:"971"},{code:"ALL",decimals:2,name:"Albanian lek",number:"8"},{code:"AMD",decimals:2,name:"Armenian dram",number:"51"},{code:"ANG",decimals:2,name:"Netherlands Antillean guilder",number:"532"},{code:"AOA",decimals:2,name:"Angolan kwanza",number:"973"},{code:"ARS",decimals:2,name:"Argentine peso",number:"32"},{code:"AUD",decimals:2,name:"Australian dollar",number:"36"},{code:"AWG",decimals:2,name:"Aruban florin",number:"533"},{code:"AZN",decimals:2,name:"Azerbaijani manat",number:"944"},{code:"BAM",decimals:2,name:"Bosnia and Herzegovina convertible mark",number:"977"},{code:"BBD",decimals:2,name:"Barbados dollar",number:"52"},{code:"BDT",decimals:2,name:"Bangladeshi taka",number:"50"},{code:"BGN",decimals:2,name:"Bulgarian lev",number:"975"},{code:"BHD",decimals:3,name:"Bahraini dinar",number:"48"},{code:"BIF",decimals:0,name:"Burundian franc",number:"108"},{code:"BMD",decimals:2,name:"Bermudian dollar (customarily known as Bermuda dollar)",number:"60"},{code:"BND",decimals:2,name:"Brunei dollar",number:"96"},{code:"BOB",decimals:2,name:"Boliviano",number:"68"},{code:"BOV",decimals:2,name:"Bolivian Mvdol (funds code)",number:"984"},{code:"BRL",decimals:2,name:"Brazilian real",number:"986"},{code:"BSD",decimals:2,name:"Bahamian dollar",number:"44"},{code:"BTN",decimals:2,name:"Bhutanese ngultrum",number:"64"},{code:"BWP",decimals:2,name:"Botswana pula",number:"72"},{code:"BYR",decimals:0,name:"Belarusian ruble",number:"974"},{code:"BZD",decimals:2,name:"Belize dollar",number:"84"},{code:"CAD",decimals:2,name:"Canadian dollar",number:"124"},{code:"CDF",decimals:2,name:"Congolese franc",number:"976"},{code:"CHE",decimals:2,name:"WIR Euro (complementary currency)",number:"947"},{code:"CHF",decimals:2,name:"Swiss franc",number:"756"},{code:"CHW",decimals:2,name:"WIR Franc (complementary currency)",number:"948"},{code:"CLF",decimals:0,name:"Unidad de Fomento (funds code)",number:"990"},{code:"CLP",decimals:0,name:"Chilean peso",number:"152"},{code:"CNY",decimals:2,name:"Chinese yuan",number:"156"},{code:"COP",decimals:2,name:"Colombian peso",number:"170"},{code:"COU",decimals:2,name:"Unidad de Valor Real",number:"970"},{code:"CRC",decimals:2,name:"Costa Rican colon",number:"188"},{code:"CUC",decimals:2,name:"Cuban convertible peso",number:"931"},{code:"CUP",decimals:2,name:"Cuban peso",number:"192"},{code:"CVE",decimals:0,name:"Cape Verde escudo",number:"132"},{code:"CZK",decimals:2,name:"Czech koruna",number:"203"},{code:"DJF",decimals:0,name:"Djiboutian franc",number:"262"},{code:"DKK",decimals:2,name:"Danish krone",number:"208"},{code:"DOP",decimals:2,name:"Dominican peso",number:"214"},{code:"DZD",decimals:2,name:"Algerian dinar",number:"12"},{code:"EGP",decimals:2,name:"Egyptian pound",number:"818"},{code:"ERN",decimals:2,name:"Eritrean nakfa",number:"232"},{code:"ETB",decimals:2,name:"Ethiopian birr",number:"230"},{code:"EUR",decimals:2,name:"Euro",number:"978"},{code:"FJD",decimals:2,name:"Fiji dollar",number:"242"},{code:"FKP",decimals:2,name:"Falkland Islands pound",number:"238"},{code:"GBP",decimals:2,name:"Pound sterling",number:"826"},{code:"GEL",decimals:2,name:"Georgian lari",number:"981"},{code:"GHS",decimals:2,name:"Ghanaian cedi",number:"936"},{code:"GIP",decimals:2,name:"Gibraltar pound",number:"292"},{code:"GMD",decimals:2,name:"Gambian dalasi",number:"270"},{code:"GNF",decimals:0,name:"Guinean franc",number:"324"},{code:"GTQ",decimals:2,name:"Guatemalan quetzal",number:"320"},{code:"GYD",decimals:2,name:"Guyanese dollar",number:"328"},{code:"HKD",decimals:2,name:"Hong Kong dollar",number:"344"},{code:"HNL",decimals:2,name:"Honduran lempira",number:"340"},{code:"HRK",decimals:2,name:"Croatian kuna",number:"191"},{code:"HTG",decimals:2,name:"Haitian gourde",number:"332"},{code:"HUF",decimals:2,name:"Hungarian forint",number:"348"},{code:"IDR",decimals:2,name:"Indonesian rupiah",number:"360"},{code:"ILS",decimals:2,name:"Israeli new shekel",number:"376"},{code:"INR",decimals:2,name:"Indian rupee",number:"356"},{code:"IQD",decimals:3,name:"Iraqi dinar",number:"368"},{code:"IRR",decimals:0,name:"Iranian rial",number:"364"},{code:"ISK",decimals:0,name:"Icelandic kr\xF3na",number:"352"},{code:"JMD",decimals:2,name:"Jamaican dollar",number:"388"},{code:"JOD",decimals:3,name:"Jordanian dinar",number:"400"},{code:"JPY",decimals:0,name:"Japanese yen",number:"392"},{code:"KES",decimals:2,name:"Kenyan shilling",number:"404"},{code:"KGS",decimals:2,name:"Kyrgyzstani som",number:"417"},{code:"KHR",decimals:2,name:"Cambodian riel",number:"116"},{code:"KMF",decimals:0,name:"Comoro franc",number:"174"},{code:"KPW",decimals:0,name:"North Korean won",number:"408"},{code:"KRW",decimals:0,name:"South Korean won",number:"410"},{code:"KWD",decimals:3,name:"Kuwaiti dinar",number:"414"},{code:"KYD",decimals:2,name:"Cayman Islands dollar",number:"136"},{code:"KZT",decimals:2,name:"Kazakhstani tenge",number:"398"},{code:"LAK",decimals:0,name:"Lao kip",number:"418"},{code:"LBP",decimals:0,name:"Lebanese pound",number:"422"},{code:"LKR",decimals:2,name:"Sri Lankan rupee",number:"144"},{code:"LRD",decimals:2,name:"Liberian dollar",number:"430"},{code:"LSL",decimals:2,name:"Lesotho loti",number:"426"},{code:"LTL",decimals:2,name:"Lithuanian litas",number:"440"},{code:"LVL",decimals:2,name:"Latvian lats",number:"428"},{code:"LYD",decimals:3,name:"Libyan dinar",number:"434"},{code:"MAD",decimals:2,name:"Moroccan dirham",number:"504"},{code:"MDL",decimals:2,name:"Moldovan leu",number:"498"},{code:"MGA",decimals:0,name:"Malagasy ariary",number:"969"},{code:"MKD",decimals:0,name:"Macedonian denar",number:"807"},{code:"MMK",decimals:0,name:"Myanma kyat",number:"104"},{code:"MNT",decimals:2,name:"Mongolian tugrik",number:"496"},{code:"MOP",decimals:2,name:"Macanese pataca",number:"446"},{code:"MRO",decimals:0,name:"Mauritanian ouguiya",number:"478"},{code:"MUR",decimals:2,name:"Mauritian rupee",number:"480"},{code:"MVR",decimals:2,name:"Maldivian rufiyaa",number:"462"},{code:"MWK",decimals:2,name:"Malawian kwacha",number:"454"},{code:"MXN",decimals:2,name:"Mexican peso",number:"484"},{code:"MXV",decimals:2,name:"Mexican Unidad de Inversion (UDI) (funds code)",number:"979"},{code:"MYR",decimals:2,name:"Malaysian ringgit",number:"458"},{code:"MZN",decimals:2,name:"Mozambican metical",number:"943"},{code:"NAD",decimals:2,name:"Namibian dollar",number:"516"},{code:"NGN",decimals:2,name:"Nigerian naira",number:"566"},{code:"NIO",decimals:2,name:"Nicaraguan c\xF3rdoba",number:"558"},{code:"NOK",decimals:2,name:"Norwegian krone",number:"578"},{code:"NPR",decimals:2,name:"Nepalese rupee",number:"524"},{code:"NZD",decimals:2,name:"New Zealand dollar",number:"554"},{code:"OMR",decimals:3,name:"Omani rial",number:"512"},{code:"PAB",decimals:2,name:"Panamanian balboa",number:"590"},{code:"PEN",decimals:2,name:"Peruvian nuevo sol",number:"604"},{code:"PGK",decimals:2,name:"Papua New Guinean kina",number:"598"},{code:"PHP",decimals:2,name:"Philippine peso",number:"608"},{code:"PKR",decimals:2,name:"Pakistani rupee",number:"586"},{code:"PLN",decimals:2,name:"Polish z\u0142oty",number:"985"},{code:"PYG",decimals:0,name:"Paraguayan guaran\xED",number:"600"},{code:"QAR",decimals:2,name:"Qatari riyal",number:"634"},{code:"RON",decimals:2,name:"Romanian new leu",number:"946"},{code:"RSD",decimals:2,name:"Serbian dinar",number:"941"},{code:"RUB",decimals:2,name:"Russian rouble",number:"643"},{code:"RWF",decimals:0,name:"Rwandan franc",number:"646"},{code:"SAR",decimals:2,name:"Saudi riyal",number:"682"},{code:"SBD",decimals:2,name:"Solomon Islands dollar",number:"90"},{code:"SCR",decimals:2,name:"Seychelles rupee",number:"690"},{code:"SDG",decimals:2,name:"Sudanese pound",number:"938"},{code:"SEK",decimals:2,name:"Swedish krona/kronor",number:"752"},{code:"SGD",decimals:2,name:"Singapore dollar",number:"702"},{code:"SHP",decimals:2,name:"Saint Helena pound",number:"654"},{code:"SLL",decimals:0,name:"Sierra Leonean leone",number:"694"},{code:"SOS",decimals:2,name:"Somali shilling",number:"706"},{code:"SRD",decimals:2,name:"Surinamese dollar",number:"968"},{code:"SSP",decimals:2,name:"South Sudanese pound",number:"728"},{code:"STD",decimals:0,name:"S\xE3o Tom\xE9 and Pr\xEDncipe dobra",number:"678"},{code:"SYP",decimals:2,name:"Syrian pound",number:"760"},{code:"SZL",decimals:2,name:"Swazi lilangeni",number:"748"},{code:"THB",decimals:2,name:"Thai baht",number:"764"},{code:"TJS",decimals:2,name:"Tajikistani somoni",number:"972"},{code:"TMT",decimals:2,name:"Turkmenistani manat",number:"934"},{code:"TND",decimals:3,name:"Tunisian dinar",number:"788"},{code:"TOP",decimals:2,name:"Tongan pa\u02BBanga",number:"776"},{code:"TRY",decimals:2,name:"Turkish lira",number:"949"},{code:"TTD",decimals:2,name:"Trinidad and Tobago dollar",number:"780"},{code:"TWD",decimals:2,name:"New Taiwan dollar",number:"901"},{code:"TZS",decimals:2,name:"Tanzanian shilling",number:"834"},{code:"UAH",decimals:2,name:"Ukrainian hryvnia",number:"980"},{code:"UGX",decimals:2,name:"Ugandan shilling",number:"800"},{code:"USD",decimals:2,name:"United States dollar",number:"840"},{code:"USN",decimals:2,name:"United States dollar (next day) (funds code)",number:"997"},{code:"USS",decimals:2,name:"United States dollar (same day) (funds code) (one source[who?] claims it is no longer used, but it is still on the ISO 4217-MA list)",number:"998"},{code:"UYI",decimals:0,name:"Uruguay Peso en Unidades Indexadas (URUIURUI) (funds code)",number:"940"},{code:"UYU",decimals:2,name:"Uruguayan peso",number:"858"},{code:"UZS",decimals:2,name:"Uzbekistan som",number:"860"},{code:"VEF",decimals:2,name:"Venezuelan bol\xEDvar fuerte",number:"937"},{code:"VND",decimals:0,name:"Vietnamese dong",number:"704"},{code:"VUV",decimals:0,name:"Vanuatu vatu",number:"548"},{code:"WST",decimals:2,name:"Samoan tala",number:"882"},{code:"XAF",decimals:0,name:"CFA franc BEAC",number:"950"},{code:"XAG",decimals:null,name:"Silver (one troy ounce)",number:"961"},{code:"XAU",decimals:null,name:"Gold (one troy ounce)",number:"959"},{code:"XBA",decimals:null,name:"European Composite Unit (EURCO) (bond market unit)",number:"955"},{code:"XBB",decimals:null,name:"European Monetary Unit (E.M.U.-6) (bond market unit)",number:"956"},{code:"XBC",decimals:null,name:"European Unit of Account 9 (E.U.A.-9) (bond market unit)",number:"957"},{code:"XBD",decimals:null,name:"European Unit of Account 17 (E.U.A.-17) (bond market unit)",number:"958"},{code:"XCD",decimals:2,name:"East Caribbean dollar",number:"951"},{code:"XDR",decimals:null,name:"Special drawing rights",number:"960"},{code:"XFU",decimals:null,name:"UIC franc (special settlement currency)",number:"Nil"},{code:"XOF",decimals:0,name:"CFA franc BCEAO",number:"952"},{code:"XPD",decimals:null,name:"Palladium (one troy ounce)",number:"964"},{code:"XPF",decimals:0,name:"CFP franc",number:"953"},{code:"XPT",decimals:null,name:"Platinum (one troy ounce)",number:"962"},{code:"XTS",decimals:null,name:"Code reserved for testing purposes",number:"963"},{code:"XXX",decimals:null,name:"No currency",number:"999"},{code:"YER",decimals:2,name:"Yemeni rial",number:"886"},{code:"ZAR",decimals:2,name:"South African rand",number:"710"},{code:"ZMW",decimals:2,name:"Zambian kwacha",number:"967"}],Qb=[{alpha2:"aa",alpha3:"aar",bibliographic:"",name:"Afar"},{alpha2:"ab",alpha3:"abk",bibliographic:"",name:"Abkhazian"},{alpha2:"",alpha3:"ace",bibliographic:"",name:"Achinese"},{alpha2:"",alpha3:"ach",bibliographic:"",name:"Acoli"},{alpha2:"",alpha3:"ada",bibliographic:"",name:"Adangme"},{alpha2:"",alpha3:"ady",bibliographic:"",name:"Adygei"},{alpha2:"",alpha3:"ady",bibliographic:"",name:"Adyghe"},{alpha2:"",alpha3:"afa",bibliographic:"",name:"Afro-Asiatic languages"},{alpha2:"",alpha3:"afh",bibliographic:"",name:"Afrihili"},{alpha2:"af",alpha3:"afr",bibliographic:"",name:"Afrikaans"},{alpha2:"",alpha3:"ain",bibliographic:"",name:"Ainu"},{alpha2:"ak",alpha3:"aka",bibliographic:"",name:"Akan"},{alpha2:"",alpha3:"akk",bibliographic:"",name:"Akkadian"},{alpha2:"",alpha3:"ale",bibliographic:"",name:"Aleut"},{alpha2:"",alpha3:"alg",bibliographic:"",name:"Algonquian languages"},{alpha2:"",alpha3:"alt",bibliographic:"",name:"Southern Altai"},{alpha2:"am",alpha3:"amh",bibliographic:"",name:"Amharic"},{alpha2:"",alpha3:"ang",bibliographic:"",name:"English, Old (ca.450-1100)"},{alpha2:"",alpha3:"anp",bibliographic:"",name:"Angika"},{alpha2:"",alpha3:"apa",bibliographic:"",name:"Apache languages"},{alpha2:"ar",alpha3:"ara",bibliographic:"",name:"Arabic"},{alpha2:"",alpha3:"arc",bibliographic:"",name:"Imperial Aramaic (700-300 BCE)"},{alpha2:"",alpha3:"arc",bibliographic:"",name:"Official Aramaic (700-300 BCE)"},{alpha2:"an",alpha3:"arg",bibliographic:"",name:"Aragonese"},{alpha2:"",alpha3:"arn",bibliographic:"",name:"Mapuche"},{alpha2:"",alpha3:"arn",bibliographic:"",name:"Mapudungun"},{alpha2:"",alpha3:"arp",bibliographic:"",name:"Arapaho"},{alpha2:"",alpha3:"art",bibliographic:"",name:"Artificial languages"},{alpha2:"",alpha3:"arw",bibliographic:"",name:"Arawak"},{alpha2:"as",alpha3:"asm",bibliographic:"",name:"Assamese"},{alpha2:"",alpha3:"ast",bibliographic:"",name:"Asturian"},{alpha2:"",alpha3:"ast",bibliographic:"",name:"Asturleonese"},{alpha2:"",alpha3:"ast",bibliographic:"",name:"Bable"},{alpha2:"",alpha3:"ast",bibliographic:"",name:"Leonese"},{alpha2:"",alpha3:"ath",bibliographic:"",name:"Athapascan languages"},{alpha2:"",alpha3:"aus",bibliographic:"",name:"Australian languages"},{alpha2:"av",alpha3:"ava",bibliographic:"",name:"Avaric"},{alpha2:"ae",alpha3:"ave",bibliographic:"",name:"Avestan"},{alpha2:"",alpha3:"awa",bibliographic:"",name:"Awadhi"},{alpha2:"ay",alpha3:"aym",bibliographic:"",name:"Aymara"},{alpha2:"az",alpha3:"aze",bibliographic:"",name:"Azerbaijani"},{alpha2:"",alpha3:"bad",bibliographic:"",name:"Banda languages"},{alpha2:"",alpha3:"bai",bibliographic:"",name:"Bamileke languages"},{alpha2:"ba",alpha3:"bak",bibliographic:"",name:"Bashkir"},{alpha2:"",alpha3:"bal",bibliographic:"",name:"Baluchi"},{alpha2:"bm",alpha3:"bam",bibliographic:"",name:"Bambara"},{alpha2:"",alpha3:"ban",bibliographic:"",name:"Balinese"},{alpha2:"",alpha3:"bas",bibliographic:"",name:"Basa"},{alpha2:"",alpha3:"bat",bibliographic:"",name:"Baltic languages"},{alpha2:"",alpha3:"bej",bibliographic:"",name:"Bedawiyet"},{alpha2:"",alpha3:"bej",bibliographic:"",name:"Beja"},{alpha2:"be",alpha3:"bel",bibliographic:"",name:"Belarusian"},{alpha2:"",alpha3:"bem",bibliographic:"",name:"Bemba"},{alpha2:"bn",alpha3:"ben",bibliographic:"",name:"Bengali"},{alpha2:"",alpha3:"ber",bibliographic:"",name:"Berber languages"},{alpha2:"",alpha3:"bho",bibliographic:"",name:"Bhojpuri"},{alpha2:"bh",alpha3:"bih",bibliographic:"",name:"Bihari languages"},{alpha2:"",alpha3:"bik",bibliographic:"",name:"Bikol"},{alpha2:"",alpha3:"bin",bibliographic:"",name:"Bini"},{alpha2:"",alpha3:"bin",bibliographic:"",name:"Edo"},{alpha2:"bi",alpha3:"bis",bibliographic:"",name:"Bislama"},{alpha2:"",alpha3:"bla",bibliographic:"",name:"Siksika"},{alpha2:"",alpha3:"bnt",bibliographic:"",name:"Bantu languages"},{alpha2:"bo",alpha3:"bod",bibliographic:"tib",name:"Tibetan"},{alpha2:"bs",alpha3:"bos",bibliographic:"",name:"Bosnian"},{alpha2:"",alpha3:"bra",bibliographic:"",name:"Braj"},{alpha2:"br",alpha3:"bre",bibliographic:"",name:"Breton"},{alpha2:"",alpha3:"btk",bibliographic:"",name:"Batak languages"},{alpha2:"",alpha3:"bua",bibliographic:"",name:"Buriat"},{alpha2:"",alpha3:"bug",bibliographic:"",name:"Buginese"},{alpha2:"bg",alpha3:"bul",bibliographic:"",name:"Bulgarian"},{alpha2:"",alpha3:"byn",bibliographic:"",name:"Bilin"},{alpha2:"",alpha3:"byn",bibliographic:"",name:"Blin"},{alpha2:"",alpha3:"cad",bibliographic:"",name:"Caddo"},{alpha2:"",alpha3:"cai",bibliographic:"",name:"Central American Indian languages"},{alpha2:"",alpha3:"car",bibliographic:"",name:"Galibi Carib"},{alpha2:"ca",alpha3:"cat",bibliographic:"",name:"Catalan"},{alpha2:"ca",alpha3:"cat",bibliographic:"",name:"Valencian"},{alpha2:"",alpha3:"cau",bibliographic:"",name:"Caucasian languages"},{alpha2:"",alpha3:"ceb",bibliographic:"",name:"Cebuano"},{alpha2:"",alpha3:"cel",bibliographic:"",name:"Celtic languages"},{alpha2:"cs",alpha3:"ces",bibliographic:"cze",name:"Czech"},{alpha2:"ch",alpha3:"cha",bibliographic:"",name:"Chamorro"},{alpha2:"",alpha3:"chb",bibliographic:"",name:"Chibcha"},{alpha2:"ce",alpha3:"che",bibliographic:"",name:"Chechen"},{alpha2:"",alpha3:"chg",bibliographic:"",name:"Chagatai"},{alpha2:"",alpha3:"chk",bibliographic:"",name:"Chuukese"},{alpha2:"",alpha3:"chm",bibliographic:"",name:"Mari"},{alpha2:"",alpha3:"chn",bibliographic:"",name:"Chinook jargon"},{alpha2:"",alpha3:"cho",bibliographic:"",name:"Choctaw"},{alpha2:"",alpha3:"chp",bibliographic:"",name:"Chipewyan"},{alpha2:"",alpha3:"chp",bibliographic:"",name:"Dene Suline"},{alpha2:"",alpha3:"chr",bibliographic:"",name:"Cherokee"},{alpha2:"cu",alpha3:"chu",bibliographic:"",name:"Church Slavic"},{alpha2:"cu",alpha3:"chu",bibliographic:"",name:"Church Slavonic"},{alpha2:"cu",alpha3:"chu",bibliographic:"",name:"Old Bulgarian"},{alpha2:"cu",alpha3:"chu",bibliographic:"",name:"Old Church Slavonic"},{alpha2:"cu",alpha3:"chu",bibliographic:"",name:"Old Slavonic"},{alpha2:"cv",alpha3:"chv",bibliographic:"",name:"Chuvash"},{alpha2:"",alpha3:"chy",bibliographic:"",name:"Cheyenne"},{alpha2:"",alpha3:"cmc",bibliographic:"",name:"Chamic languages"},{alpha2:"",alpha3:"cop",bibliographic:"",name:"Coptic"},{alpha2:"kw",alpha3:"cor",bibliographic:"",name:"Cornish"},{alpha2:"co",alpha3:"cos",bibliographic:"",name:"Corsican"},{alpha2:"",alpha3:"cpe",bibliographic:"",name:"Creoles and pidgins, English based"},{alpha2:"",alpha3:"cpf",bibliographic:"",name:"Creoles and pidgins, French-based"},{alpha2:"",alpha3:"cpp",bibliographic:"",name:"Creoles and pidgins, Portuguese-based"},{alpha2:"cr",alpha3:"cre",bibliographic:"",name:"Cree"},{alpha2:"",alpha3:"crh",bibliographic:"",name:"Crimean Tatar"},{alpha2:"",alpha3:"crh",bibliographic:"",name:"Crimean Turkish"},{alpha2:"",alpha3:"crp",bibliographic:"",name:"Creoles and pidgins"},{alpha2:"",alpha3:"csb",bibliographic:"",name:"Kashubian"},{alpha2:"",alpha3:"cus",bibliographic:"",name:"Cushitic languages"},{alpha2:"cy",alpha3:"cym",bibliographic:"wel",name:"Welsh"},{alpha2:"",alpha3:"dak",bibliographic:"",name:"Dakota"},{alpha2:"da",alpha3:"dan",bibliographic:"",name:"Danish"},{alpha2:"",alpha3:"dar",bibliographic:"",name:"Dargwa"},{alpha2:"",alpha3:"day",bibliographic:"",name:"Land Dayak languages"},{alpha2:"",alpha3:"del",bibliographic:"",name:"Delaware"},{alpha2:"",alpha3:"den",bibliographic:"",name:"Slave (Athapascan)"},{alpha2:"de",alpha3:"deu",bibliographic:"ger",name:"German"},{alpha2:"",alpha3:"dgr",bibliographic:"",name:"Dogrib"},{alpha2:"",alpha3:"din",bibliographic:"",name:"Dinka"},{alpha2:"dv",alpha3:"div",bibliographic:"",name:"Dhivehi"},{alpha2:"dv",alpha3:"div",bibliographic:"",name:"Divehi"},{alpha2:"dv",alpha3:"div",bibliographic:"",name:"Maldivian"},{alpha2:"",alpha3:"doi",bibliographic:"",name:"Dogri"},{alpha2:"",alpha3:"dra",bibliographic:"",name:"Dravidian languages"},{alpha2:"",alpha3:"dsb",bibliographic:"",name:"Lower Sorbian"},{alpha2:"",alpha3:"dua",bibliographic:"",name:"Duala"},{alpha2:"",alpha3:"dum",bibliographic:"",name:"Dutch, Middle (ca.1050-1350)"},{alpha2:"",alpha3:"dyu",bibliographic:"",name:"Dyula"},{alpha2:"dz",alpha3:"dzo",bibliographic:"",name:"Dzongkha"},{alpha2:"",alpha3:"efi",bibliographic:"",name:"Efik"},{alpha2:"",alpha3:"egy",bibliographic:"",name:"Egyptian (Ancient)"},{alpha2:"",alpha3:"eka",bibliographic:"",name:"Ekajuk"},{alpha2:"el",alpha3:"ell",bibliographic:"gre",name:"Greek, Modern (1453-)"},{alpha2:"",alpha3:"elx",bibliographic:"",name:"Elamite"},{alpha2:"en",alpha3:"eng",bibliographic:"",name:"English"},{alpha2:"",alpha3:"enm",bibliographic:"",name:"English, Middle (1100-1500)"},{alpha2:"eo",alpha3:"epo",bibliographic:"",name:"Esperanto"},{alpha2:"et",alpha3:"est",bibliographic:"",name:"Estonian"},{alpha2:"eu",alpha3:"eus",bibliographic:"baq",name:"Basque"},{alpha2:"ee",alpha3:"ewe",bibliographic:"",name:"Ewe"},{alpha2:"",alpha3:"ewo",bibliographic:"",name:"Ewondo"},{alpha2:"",alpha3:"fan",bibliographic:"",name:"Fang"},{alpha2:"fo",alpha3:"fao",bibliographic:"",name:"Faroese"},{alpha2:"fa",alpha3:"fas",bibliographic:"per",name:"Persian"},{alpha2:"",alpha3:"fat",bibliographic:"",name:"Fanti"},{alpha2:"fj",alpha3:"fij",bibliographic:"",name:"Fijian"},{alpha2:"",alpha3:"fil",bibliographic:"",name:"Filipino"},{alpha2:"",alpha3:"fil",bibliographic:"",name:"Pilipino"},{alpha2:"fi",alpha3:"fin",bibliographic:"",name:"Finnish"},{alpha2:"",alpha3:"fiu",bibliographic:"",name:"Finno-Ugrian languages"},{alpha2:"",alpha3:"fon",bibliographic:"",name:"Fon"},{alpha2:"fr",alpha3:"fra",bibliographic:"fre",name:"French"},{alpha2:"",alpha3:"frm",bibliographic:"",name:"French, Middle (ca.1400-1600)"},{alpha2:"",alpha3:"fro",bibliographic:"",name:"French, Old (842-ca.1400)"},{alpha2:"",alpha3:"frr",bibliographic:"",name:"Northern Frisian"},{alpha2:"",alpha3:"frs",bibliographic:"",name:"Eastern Frisian"},{alpha2:"fy",alpha3:"fry",bibliographic:"",name:"Western Frisian"},{alpha2:"ff",alpha3:"ful",bibliographic:"",name:"Fulah"},{alpha2:"",alpha3:"fur",bibliographic:"",name:"Friulian"},{alpha2:"",alpha3:"gaa",bibliographic:"",name:"Ga"},{alpha2:"",alpha3:"gay",bibliographic:"",name:"Gayo"},{alpha2:"",alpha3:"gba",bibliographic:"",name:"Gbaya"},{alpha2:"",alpha3:"gem",bibliographic:"",name:"Germanic languages"},{alpha2:"",alpha3:"gez",bibliographic:"",name:"Geez"},{alpha2:"",alpha3:"gil",bibliographic:"",name:"Gilbertese"},{alpha2:"gd",alpha3:"gla",bibliographic:"",name:"Gaelic"},{alpha2:"gd",alpha3:"gla",bibliographic:"",name:"Scottish Gaelic"},{alpha2:"ga",alpha3:"gle",bibliographic:"",name:"Irish"},{alpha2:"gl",alpha3:"glg",bibliographic:"",name:"Galician"},{alpha2:"gv",alpha3:"glv",bibliographic:"",name:"Manx"},{alpha2:"",alpha3:"gmh",bibliographic:"",name:"German, Middle High (ca.1050-1500)"},{alpha2:"",alpha3:"goh",bibliographic:"",name:"German, Old High (ca.750-1050)"},{alpha2:"",alpha3:"gon",bibliographic:"",name:"Gondi"},{alpha2:"",alpha3:"gor",bibliographic:"",name:"Gorontalo"},{alpha2:"",alpha3:"got",bibliographic:"",name:"Gothic"},{alpha2:"",alpha3:"grb",bibliographic:"",name:"Grebo"},{alpha2:"",alpha3:"grc",bibliographic:"",name:"Greek, Ancient (to 1453)"},{alpha2:"gn",alpha3:"grn",bibliographic:"",name:"Guarani"},{alpha2:"",alpha3:"gsw",bibliographic:"",name:"Alemannic"},{alpha2:"",alpha3:"gsw",bibliographic:"",name:"Alsatian"},{alpha2:"",alpha3:"gsw",bibliographic:"",name:"Swiss German"},{alpha2:"gu",alpha3:"guj",bibliographic:"",name:"Gujarati"},{alpha2:"",alpha3:"gwi",bibliographic:"",name:"Gwich'in"},{alpha2:"",alpha3:"hai",bibliographic:"",name:"Haida"},{alpha2:"ht",alpha3:"hat",bibliographic:"",name:"Haitian"},{alpha2:"ht",alpha3:"hat",bibliographic:"",name:"Haitian Creole"},{alpha2:"ha",alpha3:"hau",bibliographic:"",name:"Hausa"},{alpha2:"",alpha3:"haw",bibliographic:"",name:"Hawaiian"},{alpha2:"he",alpha3:"heb",bibliographic:"",name:"Hebrew"},{alpha2:"hz",alpha3:"her",bibliographic:"",name:"Herero"},{alpha2:"",alpha3:"hil",bibliographic:"",name:"Hiligaynon"},{alpha2:"",alpha3:"him",bibliographic:"",name:"Himachali languages"},{alpha2:"",alpha3:"him",bibliographic:"",name:"Western Pahari languages"},{alpha2:"hi",alpha3:"hin",bibliographic:"",name:"Hindi"},{alpha2:"",alpha3:"hit",bibliographic:"",name:"Hittite"},{alpha2:"",alpha3:"hmn",bibliographic:"",name:"Hmong"},{alpha2:"",alpha3:"hmn",bibliographic:"",name:"Mong"},{alpha2:"ho",alpha3:"hmo",bibliographic:"",name:"Hiri Motu"},{alpha2:"hr",alpha3:"hrv",bibliographic:"",name:"Croatian"},{alpha2:"",alpha3:"hsb",bibliographic:"",name:"Upper Sorbian"},{alpha2:"hu",alpha3:"hun",bibliographic:"",name:"Hungarian"},{alpha2:"",alpha3:"hup",bibliographic:"",name:"Hupa"},{alpha2:"hy",alpha3:"hye",bibliographic:"arm",name:"Armenian"},{alpha2:"",alpha3:"iba",bibliographic:"",name:"Iban"},{alpha2:"ig",alpha3:"ibo",bibliographic:"",name:"Igbo"},{alpha2:"io",alpha3:"ido",bibliographic:"",name:"Ido"},{alpha2:"ii",alpha3:"iii",bibliographic:"",name:"Nuosu"},{alpha2:"ii",alpha3:"iii",bibliographic:"",name:"Sichuan Yi"},{alpha2:"",alpha3:"ijo",bibliographic:"",name:"Ijo languages"},{alpha2:"iu",alpha3:"iku",bibliographic:"",name:"Inuktitut"},{alpha2:"ie",alpha3:"ile",bibliographic:"",name:"Interlingue"},{alpha2:"ie",alpha3:"ile",bibliographic:"",name:"Occidental"},{alpha2:"",alpha3:"ilo",bibliographic:"",name:"Iloko"},{alpha2:"ia",alpha3:"ina",bibliographic:"",name:"Interlingua (International Auxiliary Language Association)"},{alpha2:"",alpha3:"inc",bibliographic:"",name:"Indic languages"},{alpha2:"id",alpha3:"ind",bibliographic:"",name:"Indonesian"},{alpha2:"",alpha3:"ine",bibliographic:"",name:"Indo-European languages"},{alpha2:"",alpha3:"inh",bibliographic:"",name:"Ingush"},{alpha2:"ik",alpha3:"ipk",bibliographic:"",name:"Inupiaq"},{alpha2:"",alpha3:"ira",bibliographic:"",name:"Iranian languages"},{alpha2:"",alpha3:"iro",bibliographic:"",name:"Iroquoian languages"},{alpha2:"is",alpha3:"isl",bibliographic:"ice",name:"Icelandic"},{alpha2:"it",alpha3:"ita",bibliographic:"",name:"Italian"},{alpha2:"jv",alpha3:"jav",bibliographic:"",name:"Javanese"},{alpha2:"",alpha3:"jbo",bibliographic:"",name:"Lojban"},{alpha2:"ja",alpha3:"jpn",bibliographic:"",name:"Japanese"},{alpha2:"",alpha3:"jpr",bibliographic:"",name:"Judeo-Persian"},{alpha2:"",alpha3:"jrb",bibliographic:"",name:"Judeo-Arabic"},{alpha2:"",alpha3:"kaa",bibliographic:"",name:"Kara-Kalpak"},{alpha2:"",alpha3:"kab",bibliographic:"",name:"Kabyle"},{alpha2:"",alpha3:"kac",bibliographic:"",name:"Jingpho"},{alpha2:"",alpha3:"kac",bibliographic:"",name:"Kachin"},{alpha2:"kl",alpha3:"kal",bibliographic:"",name:"Greenlandic"},{alpha2:"kl",alpha3:"kal",bibliographic:"",name:"Kalaallisut"},{alpha2:"",alpha3:"kam",bibliographic:"",name:"Kamba"},{alpha2:"kn",alpha3:"kan",bibliographic:"",name:"Kannada"},{alpha2:"",alpha3:"kar",bibliographic:"",name:"Karen languages"},{alpha2:"ks",alpha3:"kas",bibliographic:"",name:"Kashmiri"},{alpha2:"ka",alpha3:"kat",bibliographic:"geo",name:"Georgian"},{alpha2:"kr",alpha3:"kau",bibliographic:"",name:"Kanuri"},{alpha2:"",alpha3:"kaw",bibliographic:"",name:"Kawi"},{alpha2:"kk",alpha3:"kaz",bibliographic:"",name:"Kazakh"},{alpha2:"",alpha3:"kbd",bibliographic:"",name:"Kabardian"},{alpha2:"",alpha3:"kha",bibliographic:"",name:"Khasi"},{alpha2:"",alpha3:"khi",bibliographic:"",name:"Khoisan languages"},{alpha2:"km",alpha3:"khm",bibliographic:"",name:"Central Khmer"},{alpha2:"",alpha3:"kho",bibliographic:"",name:"Khotanese"},{alpha2:"",alpha3:"kho",bibliographic:"",name:"Sakan"},{alpha2:"ki",alpha3:"kik",bibliographic:"",name:"Gikuyu"},{alpha2:"ki",alpha3:"kik",bibliographic:"",name:"Kikuyu"},{alpha2:"rw",alpha3:"kin",bibliographic:"",name:"Kinyarwanda"},{alpha2:"ky",alpha3:"kir",bibliographic:"",name:"Kirghiz"},{alpha2:"ky",alpha3:"kir",bibliographic:"",name:"Kyrgyz"},{alpha2:"",alpha3:"kmb",bibliographic:"",name:"Kimbundu"},{alpha2:"",alpha3:"kok",bibliographic:"",name:"Konkani"},{alpha2:"kv",alpha3:"kom",bibliographic:"",name:"Komi"},{alpha2:"kg",alpha3:"kon",bibliographic:"",name:"Kongo"},{alpha2:"ko",alpha3:"kor",bibliographic:"",name:"Korean"},{alpha2:"",alpha3:"kos",bibliographic:"",name:"Kosraean"},{alpha2:"",alpha3:"kpe",bibliographic:"",name:"Kpelle"},{alpha2:"",alpha3:"krc",bibliographic:"",name:"Karachay-Balkar"},{alpha2:"",alpha3:"krl",bibliographic:"",name:"Karelian"},{alpha2:"",alpha3:"kro",bibliographic:"",name:"Kru languages"},{alpha2:"",alpha3:"kru",bibliographic:"",name:"Kurukh"},{alpha2:"kj",alpha3:"kua",bibliographic:"",name:"Kuanyama"},{alpha2:"kj",alpha3:"kua",bibliographic:"",name:"Kwanyama"},{alpha2:"",alpha3:"kum",bibliographic:"",name:"Kumyk"},{alpha2:"ku",alpha3:"kur",bibliographic:"",name:"Kurdish"},{alpha2:"",alpha3:"kut",bibliographic:"",name:"Kutenai"},{alpha2:"",alpha3:"lad",bibliographic:"",name:"Ladino"},{alpha2:"",alpha3:"lah",bibliographic:"",name:"Lahnda"},{alpha2:"",alpha3:"lam",bibliographic:"",name:"Lamba"},{alpha2:"lo",alpha3:"lao",bibliographic:"",name:"Lao"},{alpha2:"la",alpha3:"lat",bibliographic:"",name:"Latin"},{alpha2:"lv",alpha3:"lav",bibliographic:"",name:"Latvian"},{alpha2:"",alpha3:"lez",bibliographic:"",name:"Lezghian"},{alpha2:"li",alpha3:"lim",bibliographic:"",name:"Limburgan"},{alpha2:"li",alpha3:"lim",bibliographic:"",name:"Limburger"},{alpha2:"li",alpha3:"lim",bibliographic:"",name:"Limburgish"},{alpha2:"ln",alpha3:"lin",bibliographic:"",name:"Lingala"},{alpha2:"lt",alpha3:"lit",bibliographic:"",name:"Lithuanian"},{alpha2:"",alpha3:"lol",bibliographic:"",name:"Mongo"},{alpha2:"",alpha3:"loz",bibliographic:"",name:"Lozi"},{alpha2:"lb",alpha3:"ltz",bibliographic:"",name:"Letzeburgesch"},{alpha2:"lb",alpha3:"ltz",bibliographic:"",name:"Luxembourgish"},{alpha2:"",alpha3:"lua",bibliographic:"",name:"Luba-Lulua"},{alpha2:"lu",alpha3:"lub",bibliographic:"",name:"Luba-Katanga"},{alpha2:"lg",alpha3:"lug",bibliographic:"",name:"Ganda"},{alpha2:"",alpha3:"lui",bibliographic:"",name:"Luiseno"},{alpha2:"",alpha3:"lun",bibliographic:"",name:"Lunda"},{alpha2:"",alpha3:"luo",bibliographic:"",name:"Luo (Kenya and Tanzania)"},{alpha2:"",alpha3:"lus",bibliographic:"",name:"Lushai"},{alpha2:"",alpha3:"mad",bibliographic:"",name:"Madurese"},{alpha2:"",alpha3:"mag",bibliographic:"",name:"Magahi"},{alpha2:"mh",alpha3:"mah",bibliographic:"",name:"Marshallese"},{alpha2:"",alpha3:"mai",bibliographic:"",name:"Maithili"},{alpha2:"",alpha3:"mak",bibliographic:"",name:"Makasar"},{alpha2:"ml",alpha3:"mal",bibliographic:"",name:"Malayalam"},{alpha2:"",alpha3:"man",bibliographic:"",name:"Mandingo"},{alpha2:"",alpha3:"map",bibliographic:"",name:"Austronesian languages"},{alpha2:"mr",alpha3:"mar",bibliographic:"",name:"Marathi"},{alpha2:"",alpha3:"mas",bibliographic:"",name:"Masai"},{alpha2:"",alpha3:"mdf",bibliographic:"",name:"Moksha"},{alpha2:"",alpha3:"mdr",bibliographic:"",name:"Mandar"},{alpha2:"",alpha3:"men",bibliographic:"",name:"Mende"},{alpha2:"",alpha3:"mga",bibliographic:"",name:"Irish, Middle (900-1200)"},{alpha2:"",alpha3:"mic",bibliographic:"",name:"Mi'kmaq"},{alpha2:"",alpha3:"mic",bibliographic:"",name:"Micmac"},{alpha2:"",alpha3:"min",bibliographic:"",name:"Minangkabau"},{alpha2:"",alpha3:"mis",bibliographic:"",name:"Uncoded languages"},{alpha2:"mk",alpha3:"mkd",bibliographic:"mac",name:"Macedonian"},{alpha2:"",alpha3:"mkh",bibliographic:"",name:"Mon-Khmer languages"},{alpha2:"mg",alpha3:"mlg",bibliographic:"",name:"Malagasy"},{alpha2:"mt",alpha3:"mlt",bibliographic:"",name:"Maltese"},{alpha2:"",alpha3:"mnc",bibliographic:"",name:"Manchu"},{alpha2:"",alpha3:"mni",bibliographic:"",name:"Manipuri"},{alpha2:"",alpha3:"mno",bibliographic:"",name:"Manobo languages"},{alpha2:"",alpha3:"moh",bibliographic:"",name:"Mohawk"},{alpha2:"mn",alpha3:"mon",bibliographic:"",name:"Mongolian"},{alpha2:"",alpha3:"mos",bibliographic:"",name:"Mossi"},{alpha2:"",alpha3:"mot",bibliographic:"",name:"Montenegrin"},{alpha2:"mi",alpha3:"mri",bibliographic:"mao",name:"Maori"},{alpha2:"ms",alpha3:"msa",bibliographic:"may",name:"Malay"},{alpha2:"",alpha3:"mul",bibliographic:"",name:"Multiple languages"},{alpha2:"",alpha3:"mun",bibliographic:"",name:"Munda languages"},{alpha2:"",alpha3:"mus",bibliographic:"",name:"Creek"},{alpha2:"",alpha3:"mwl",bibliographic:"",name:"Mirandese"},{alpha2:"",alpha3:"mwr",bibliographic:"",name:"Marwari"},{alpha2:"my",alpha3:"mya",bibliographic:"bur",name:"Burmese"},{alpha2:"",alpha3:"myn",bibliographic:"",name:"Mayan languages"},{alpha2:"",alpha3:"myv",bibliographic:"",name:"Erzya"},{alpha2:"",alpha3:"nah",bibliographic:"",name:"Nahuatl languages"},{alpha2:"",alpha3:"nai",bibliographic:"",name:"North American Indian languages"},{alpha2:"",alpha3:"nap",bibliographic:"",name:"Neapolitan"},{alpha2:"na",alpha3:"nau",bibliographic:"",name:"Nauru"},{alpha2:"nv",alpha3:"nav",bibliographic:"",name:"Navaho"},{alpha2:"nv",alpha3:"nav",bibliographic:"",name:"Navajo"},{alpha2:"nr",alpha3:"nbl",bibliographic:"",name:"Ndebele, South"},{alpha2:"nr",alpha3:"nbl",bibliographic:"",name:"South Ndebele"},{alpha2:"nd",alpha3:"nde",bibliographic:"",name:"Ndebele, North"},{alpha2:"nd",alpha3:"nde",bibliographic:"",name:"North Ndebele"},{alpha2:"ng",alpha3:"ndo",bibliographic:"",name:"Ndonga"},{alpha2:"",alpha3:"nds",bibliographic:"",name:"German, Low"},{alpha2:"",alpha3:"nds",bibliographic:"",name:"Low German"},{alpha2:"",alpha3:"nds",bibliographic:"",name:"Low Saxon"},{alpha2:"",alpha3:"nds",bibliographic:"",name:"Saxon, Low"},{alpha2:"ne",alpha3:"nep",bibliographic:"",name:"Nepali"},{alpha2:"",alpha3:"new",bibliographic:"",name:"Nepal Bhasa"},{alpha2:"",alpha3:"new",bibliographic:"",name:"Newari"},{alpha2:"",alpha3:"nia",bibliographic:"",name:"Nias"},{alpha2:"",alpha3:"nic",bibliographic:"",name:"Niger-Kordofanian languages"},{alpha2:"",alpha3:"niu",bibliographic:"",name:"Niuean"},{alpha2:"nl",alpha3:"nld",bibliographic:"dut",name:"Dutch"},{alpha2:"nl",alpha3:"nld",bibliographic:"dut",name:"Flemish"},{alpha2:"nn",alpha3:"nno",bibliographic:"",name:"Norwegian Nynorsk"},{alpha2:"nn",alpha3:"nno",bibliographic:"",name:"Nynorsk, Norwegian"},{alpha2:"nb",alpha3:"nob",bibliographic:"",name:"Bokm\xE5l, Norwegian"},{alpha2:"nb",alpha3:"nob",bibliographic:"",name:"Norwegian Bokm\xE5l"},{alpha2:"",alpha3:"nog",bibliographic:"",name:"Nogai"},{alpha2:"",alpha3:"non",bibliographic:"",name:"Norse, Old"},{alpha2:"no",alpha3:"nor",bibliographic:"",name:"Norwegian"},{alpha2:"",alpha3:"nqo",bibliographic:"",name:"N'Ko"},{alpha2:"",alpha3:"nso",bibliographic:"",name:"Northern Sotho"},{alpha2:"",alpha3:"nso",bibliographic:"",name:"Pedi"},{alpha2:"",alpha3:"nso",bibliographic:"",name:"Sepedi"},{alpha2:"",alpha3:"nso",bibliographic:"",name:"Sotho, Northern"},{alpha2:"",alpha3:"nub",bibliographic:"",name:"Nubian languages"},{alpha2:"",alpha3:"nwc",bibliographic:"",name:"Classical Nepal Bhasa"},{alpha2:"",alpha3:"nwc",bibliographic:"",name:"Classical Newari"},{alpha2:"",alpha3:"nwc",bibliographic:"",name:"Old Newari"},{alpha2:"ny",alpha3:"nya",bibliographic:"",name:"Chewa"},{alpha2:"ny",alpha3:"nya",bibliographic:"",name:"Chichewa"},{alpha2:"ny",alpha3:"nya",bibliographic:"",name:"Nyanja"},{alpha2:"",alpha3:"nym",bibliographic:"",name:"Nyamwezi"},{alpha2:"",alpha3:"nyn",bibliographic:"",name:"Nyankole"},{alpha2:"",alpha3:"nyo",bibliographic:"",name:"Nyoro"},{alpha2:"",alpha3:"nzi",bibliographic:"",name:"Nzima"},{alpha2:"oc",alpha3:"oci",bibliographic:"",name:"Occitan (post 1500)"},{alpha2:"oj",alpha3:"oji",bibliographic:"",name:"Ojibwa"},{alpha2:"or",alpha3:"ori",bibliographic:"",name:"Oriya"},{alpha2:"om",alpha3:"orm",bibliographic:"",name:"Oromo"},{alpha2:"",alpha3:"osa",bibliographic:"",name:"Osage"},{alpha2:"os",alpha3:"oss",bibliographic:"",name:"Ossetian"},{alpha2:"os",alpha3:"oss",bibliographic:"",name:"Ossetic"},{alpha2:"",alpha3:"ota",bibliographic:"",name:"Turkish, Ottoman (1500-1928)"},{alpha2:"",alpha3:"oto",bibliographic:"",name:"Otomian languages"},{alpha2:"",alpha3:"paa",bibliographic:"",name:"Papuan languages"},{alpha2:"",alpha3:"pag",bibliographic:"",name:"Pangasinan"},{alpha2:"",alpha3:"pal",bibliographic:"",name:"Pahlavi"},{alpha2:"",alpha3:"pam",bibliographic:"",name:"Kapampangan"},{alpha2:"",alpha3:"pam",bibliographic:"",name:"Pampanga"},{alpha2:"pa",alpha3:"pan",bibliographic:"",name:"Panjabi"},{alpha2:"pa",alpha3:"pan",bibliographic:"",name:"Punjabi"},{alpha2:"",alpha3:"pap",bibliographic:"",name:"Papiamento"},{alpha2:"",alpha3:"pau",bibliographic:"",name:"Palauan"},{alpha2:"",alpha3:"peo",bibliographic:"",name:"Persian, Old (ca.600-400 B.C.)"},{alpha2:"",alpha3:"phi",bibliographic:"",name:"Philippine languages"},{alpha2:"",alpha3:"phn",bibliographic:"",name:"Phoenician"},{alpha2:"pi",alpha3:"pli",bibliographic:"",name:"Pali"},{alpha2:"pl",alpha3:"pol",bibliographic:"",name:"Polish"},{alpha2:"",alpha3:"pon",bibliographic:"",name:"Pohnpeian"},{alpha2:"pt",alpha3:"por",bibliographic:"",name:"Portuguese"},{alpha2:"",alpha3:"pra",bibliographic:"",name:"Prakrit languages"},{alpha2:"",alpha3:"pro",bibliographic:"",name:"Occitan, Old (to 1500)"},{alpha2:"",alpha3:"pro",bibliographic:"",name:"Proven\xE7al, Old (to 1500)"},{alpha2:"ps",alpha3:"pus",bibliographic:"",name:"Pashto"},{alpha2:"ps",alpha3:"pus",bibliographic:"",name:"Pushto"},{alpha2:"qu",alpha3:"que",bibliographic:"",name:"Quechua"},{alpha2:"",alpha3:"raj",bibliographic:"",name:"Rajasthani"},{alpha2:"",alpha3:"rap",bibliographic:"",name:"Rapanui"},{alpha2:"",alpha3:"rar",bibliographic:"",name:"Cook Islands Maori"},{alpha2:"",alpha3:"rar",bibliographic:"",name:"Rarotongan"},{alpha2:"",alpha3:"roa",bibliographic:"",name:"Romance languages"},{alpha2:"rm",alpha3:"roh",bibliographic:"",name:"Romansh"},{alpha2:"",alpha3:"rom",bibliographic:"",name:"Romany"},{alpha2:"ro",alpha3:"ron",bibliographic:"rum",name:"Moldavian"},{alpha2:"ro",alpha3:"ron",bibliographic:"rum",name:"Romanian"},{alpha2:"rn",alpha3:"run",bibliographic:"",name:"Rundi"},{alpha2:"",alpha3:"rup",bibliographic:"",name:"Aromanian"},{alpha2:"",alpha3:"rup",bibliographic:"",name:"Arumanian"},{alpha2:"",alpha3:"rup",bibliographic:"",name:"Macedo-Romanian"},{alpha2:"ru",alpha3:"rus",bibliographic:"",name:"Russian"},{alpha2:"",alpha3:"sad",bibliographic:"",name:"Sandawe"},{alpha2:"sg",alpha3:"sag",bibliographic:"",name:"Sango"},{alpha2:"",alpha3:"sah",bibliographic:"",name:"Yakut"},{alpha2:"",alpha3:"sai",bibliographic:"",name:"South American Indian languages"},{alpha2:"",alpha3:"sal",bibliographic:"",name:"Salishan languages"},{alpha2:"",alpha3:"sam",bibliographic:"",name:"Samaritan Aramaic"},{alpha2:"sa",alpha3:"san",bibliographic:"",name:"Sanskrit"},{alpha2:"",alpha3:"sas",bibliographic:"",name:"Sasak"},{alpha2:"",alpha3:"sat",bibliographic:"",name:"Santali"},{alpha2:"",alpha3:"scn",bibliographic:"",name:"Sicilian"},{alpha2:"",alpha3:"sco",bibliographic:"",name:"Scots"},{alpha2:"",alpha3:"sel",bibliographic:"",name:"Selkup"},{alpha2:"",alpha3:"sem",bibliographic:"",name:"Semitic languages"},{alpha2:"",alpha3:"sga",bibliographic:"",name:"Irish, Old (to 900)"},{alpha2:"",alpha3:"sgn",bibliographic:"",name:"Sign Languages"},{alpha2:"",alpha3:"shn",bibliographic:"",name:"Shan"},{alpha2:"",alpha3:"sid",bibliographic:"",name:"Sidamo"},{alpha2:"si",alpha3:"sin",bibliographic:"",name:"Sinhala"},{alpha2:"si",alpha3:"sin",bibliographic:"",name:"Sinhalese"},{alpha2:"",alpha3:"sio",bibliographic:"",name:"Siouan languages"},{alpha2:"",alpha3:"sit",bibliographic:"",name:"Sino-Tibetan languages"},{alpha2:"",alpha3:"sla",bibliographic:"",name:"Slavic languages"},{alpha2:"sk",alpha3:"slk",bibliographic:"slo",name:"Slovak"},{alpha2:"sl",alpha3:"slv",bibliographic:"",name:"Slovenian"},{alpha2:"",alpha3:"sma",bibliographic:"",name:"Southern Sami"},{alpha2:"se",alpha3:"sme",bibliographic:"",name:"Northern Sami"},{alpha2:"",alpha3:"smi",bibliographic:"",name:"Sami languages"},{alpha2:"",alpha3:"smj",bibliographic:"",name:"Lule Sami"},{alpha2:"",alpha3:"smn",bibliographic:"",name:"Inari Sami"},{alpha2:"sm",alpha3:"smo",bibliographic:"",name:"Samoan"},{alpha2:"",alpha3:"sms",bibliographic:"",name:"Skolt Sami"},{alpha2:"sn",alpha3:"sna",bibliographic:"",name:"Shona"},{alpha2:"sd",alpha3:"snd",bibliographic:"",name:"Sindhi"},{alpha2:"",alpha3:"snk",bibliographic:"",name:"Soninke"},{alpha2:"",alpha3:"sog",bibliographic:"",name:"Sogdian"},{alpha2:"so",alpha3:"som",bibliographic:"",name:"Somali"},{alpha2:"",alpha3:"son",bibliographic:"",name:"Songhai languages"},{alpha2:"st",alpha3:"sot",bibliographic:"",name:"Sotho, Southern"},{alpha2:"es",alpha3:"spa",bibliographic:"",name:"Castilian"},{alpha2:"es",alpha3:"spa",bibliographic:"",name:"Spanish"},{alpha2:"sq",alpha3:"sqi",bibliographic:"alb",name:"Albanian"},{alpha2:"sc",alpha3:"srd",bibliographic:"",name:"Sardinian"},{alpha2:"",alpha3:"srn",bibliographic:"",name:"Sranan Tongo"},{alpha2:"sr",alpha3:"srp",bibliographic:"",name:"Serbian"},{alpha2:"",alpha3:"srr",bibliographic:"",name:"Serer"},{alpha2:"",alpha3:"ssa",bibliographic:"",name:"Nilo-Saharan languages"},{alpha2:"ss",alpha3:"ssw",bibliographic:"",name:"Swati"},{alpha2:"",alpha3:"suk",bibliographic:"",name:"Sukuma"},{alpha2:"su",alpha3:"sun",bibliographic:"",name:"Sundanese"},{alpha2:"",alpha3:"sus",bibliographic:"",name:"Susu"},{alpha2:"",alpha3:"sux",bibliographic:"",name:"Sumerian"},{alpha2:"sw",alpha3:"swa",bibliographic:"",name:"Swahili"},{alpha2:"sv",alpha3:"swe",bibliographic:"",name:"Swedish"},{alpha2:"",alpha3:"syc",bibliographic:"",name:"Classical Syriac"},{alpha2:"",alpha3:"syr",bibliographic:"",name:"Syriac"},{alpha2:"ty",alpha3:"tah",bibliographic:"",name:"Tahitian"},{alpha2:"",alpha3:"tai",bibliographic:"",name:"Tai languages"},{alpha2:"ta",alpha3:"tam",bibliographic:"",name:"Tamil"},{alpha2:"tt",alpha3:"tat",bibliographic:"",name:"Tatar"},{alpha2:"te",alpha3:"tel",bibliographic:"",name:"Telugu"},{alpha2:"",alpha3:"tem",bibliographic:"",name:"Timne"},{alpha2:"",alpha3:"ter",bibliographic:"",name:"Tereno"},{alpha2:"",alpha3:"tet",bibliographic:"",name:"Tetum"},{alpha2:"tg",alpha3:"tgk",bibliographic:"",name:"Tajik"},{alpha2:"tl",alpha3:"tgl",bibliographic:"",name:"Tagalog"},{alpha2:"th",alpha3:"tha",bibliographic:"",name:"Thai"},{alpha2:"",alpha3:"tig",bibliographic:"",name:"Tigre"},{alpha2:"ti",alpha3:"tir",bibliographic:"",name:"Tigrinya"},{alpha2:"",alpha3:"tiv",bibliographic:"",name:"Tiv"},{alpha2:"",alpha3:"tkl",bibliographic:"",name:"Tokelau"},{alpha2:"",alpha3:"tlh",bibliographic:"",name:"Klingon"},{alpha2:"",alpha3:"tlh",bibliographic:"",name:"tlhIngan-Hol"},{alpha2:"",alpha3:"tli",bibliographic:"",name:"Tlingit"},{alpha2:"",alpha3:"tmh",bibliographic:"",name:"Tamashek"},{alpha2:"",alpha3:"tog",bibliographic:"",name:"Tonga (Nyasa)"},{alpha2:"to",alpha3:"ton",bibliographic:"",name:"Tonga (Tonga Islands)"},{alpha2:"",alpha3:"tpi",bibliographic:"",name:"Tok Pisin"},{alpha2:"",alpha3:"tsi",bibliographic:"",name:"Tsimshian"},{alpha2:"tn",alpha3:"tsn",bibliographic:"",name:"Tswana"},{alpha2:"ts",alpha3:"tso",bibliographic:"",name:"Tsonga"},{alpha2:"tk",alpha3:"tuk",bibliographic:"",name:"Turkmen"},{alpha2:"",alpha3:"tum",bibliographic:"",name:"Tumbuka"},{alpha2:"",alpha3:"tup",bibliographic:"",name:"Tupi languages"},{alpha2:"tr",alpha3:"tur",bibliographic:"",name:"Turkish"},{alpha2:"",alpha3:"tut",bibliographic:"",name:"Altaic languages"},{alpha2:"",alpha3:"tvl",bibliographic:"",name:"Tuvalu"},{alpha2:"tw",alpha3:"twi",bibliographic:"",name:"Twi"},{alpha2:"",alpha3:"tyv",bibliographic:"",name:"Tuvinian"},{alpha2:"",alpha3:"udm",bibliographic:"",name:"Udmurt"},{alpha2:"",alpha3:"uga",bibliographic:"",name:"Ugaritic"},{alpha2:"ug",alpha3:"uig",bibliographic:"",name:"Uighur"},{alpha2:"ug",alpha3:"uig",bibliographic:"",name:"Uyghur"},{alpha2:"uk",alpha3:"ukr",bibliographic:"",name:"Ukrainian"},{alpha2:"",alpha3:"umb",bibliographic:"",name:"Umbundu"},{alpha2:"",alpha3:"und",bibliographic:"",name:"Undetermined"},{alpha2:"ur",alpha3:"urd",bibliographic:"",name:"Urdu"},{alpha2:"uz",alpha3:"uzb",bibliographic:"",name:"Uzbek"},{alpha2:"",alpha3:"vai",bibliographic:"",name:"Vai"},{alpha2:"ve",alpha3:"ven",bibliographic:"",name:"Venda"},{alpha2:"vi",alpha3:"vie",bibliographic:"",name:"Vietnamese"},{alpha2:"vo",alpha3:"vol",bibliographic:"",name:"Volap\xFCk"},{alpha2:"",alpha3:"vot",bibliographic:"",name:"Votic"},{alpha2:"",alpha3:"wak",bibliographic:"",name:"Wakashan languages"},{alpha2:"",alpha3:"wal",bibliographic:"",name:"Wolaitta"},{alpha2:"",alpha3:"wal",bibliographic:"",name:"Wolaytta"},{alpha2:"",alpha3:"war",bibliographic:"",name:"Waray"},{alpha2:"",alpha3:"was",bibliographic:"",name:"Washo"},{alpha2:"",alpha3:"wen",bibliographic:"",name:"Sorbian languages"},{alpha2:"wa",alpha3:"wln",bibliographic:"",name:"Walloon"},{alpha2:"wo",alpha3:"wol",bibliographic:"",name:"Wolof"},{alpha2:"",alpha3:"xal",bibliographic:"",name:"Kalmyk"},{alpha2:"",alpha3:"xal",bibliographic:"",name:"Oirat"},{alpha2:"xh",alpha3:"xho",bibliographic:"",name:"Xhosa"},{alpha2:"",alpha3:"yao",bibliographic:"",name:"Yao"},{alpha2:"",alpha3:"yap",bibliographic:"",name:"Yapese"},{alpha2:"yi",alpha3:"yid",bibliographic:"",name:"Yiddish"},{alpha2:"yo",alpha3:"yor",bibliographic:"",name:"Yoruba"},{alpha2:"",alpha3:"ypk",bibliographic:"",name:"Yupik languages"},{alpha2:"",alpha3:"zap",bibliographic:"",name:"Zapotec"},{alpha2:"",alpha3:"zbl",bibliographic:"",name:"Bliss"},{alpha2:"",alpha3:"zbl",bibliographic:"",name:"Blissymbolics"},{alpha2:"",alpha3:"zbl",bibliographic:"",name:"Blissymbols"},{alpha2:"",alpha3:"zen",bibliographic:"",name:"Zenaga"},{alpha2:"",alpha3:"zgh",bibliographic:"",name:"Standard Moroccan Tamazight"},{alpha2:"za",alpha3:"zha",bibliographic:"",name:"Chuang"},{alpha2:"za",alpha3:"zha",bibliographic:"",name:"Zhuang"},{alpha2:"zh",alpha3:"zho",bibliographic:"chi",name:"Chinese"},{alpha2:"",alpha3:"znd",bibliographic:"",name:"Zande languages"},{alpha2:"zu",alpha3:"zul",bibliographic:"",name:"Zulu"},{alpha2:"",alpha3:"zun",bibliographic:"",name:"Zuni"},{alpha2:"",alpha3:"zxx",bibliographic:"",name:"No linguistic content"},{alpha2:"",alpha3:"zxx",bibliographic:"",name:"Not applicable"},{alpha2:"",alpha3:"zza",bibliographic:"",name:"Dimili"},{alpha2:"",alpha3:"zza",bibliographic:"",name:"Dimli"},{alpha2:"",alpha3:"zza",bibliographic:"",name:"Kirdki"},{alpha2:"",alpha3:"zza",bibliographic:"",name:"Kirmanjki"},{alpha2:"",alpha3:"zza",bibliographic:"",name:"Zaza"},{alpha2:"",alpha3:"zza",bibliographic:"",name:"Zazaki"}];var Vp=Fu.exports,$b=ev;function ev(u){return{countries:Oh.bind(null,u.countries),currencies:Oh.bind(null,u.currencies),languages:Oh.bind(null,u.languages)}}function Oh(u,a){var s=Vp.pairs(a);return u.filter(function(l){return s.filter(function(m){var g=l[m[0]];return Vp.isArray(g)?g.indexOf(m[1])>=0:g==m[1]}).length==s.length})}var tv={ALL:"L",AFN:"\u060B",ARS:"$",AWG:"\u0192",AUD:"$",AZN:"\u20BC",BSD:"$",BBD:"$",BYR:"p.",BZD:"BZ$",BMD:"$",BOB:"Bs.",BAM:"KM",BWP:"P",BGN:"\u043B\u0432",BRL:"R$",BND:"$",KHR:"\u17DB",CAD:"$",KYD:"$",CLP:"$",CNY:"\xA5",COP:"$",CRC:"\u20A1",HRK:"kn",CUP:"\u20B1",CZK:"K\u010D",DKK:"kr",DOP:"RD$",XCD:"$",EGP:"\xA3",SVC:"$",EEK:"kr",EUR:"\u20AC",FKP:"\xA3",FJD:"$",GHC:"\xA2",GIP:"\xA3",GTQ:"Q",GGP:"\xA3",GYD:"$",HNL:"L",HKD:"$",HUF:"Ft",ISK:"kr",INR:"\u20B9",IDR:"Rp",IRR:"\uFDFC",IMP:"\xA3",ILS:"\u20AA",JMD:"J$",JPY:"\xA5",JEP:"\xA3",KES:"KSh",KZT:"\u043B\u0432",KPW:"\u20A9",KRW:"\u20A9",KGS:"\u043B\u0432",LAK:"\u20AD",LVL:"Ls",LBP:"\xA3",LRD:"$",LTL:"Lt",MKD:"\u0434\u0435\u043D",MYR:"RM",MUR:"\u20A8",MXN:"$",MNT:"\u20AE",MZN:"MT",NAD:"$",NPR:"\u20A8",ANG:"\u0192",NZD:"$",NIO:"C$",NGN:"\u20A6",NOK:"kr",OMR:"\uFDFC",PKR:"\u20A8",PAB:"B/.",PYG:"Gs",PEN:"S/.",PHP:"\u20B1",PLN:"z\u0142",QAR:"\uFDFC",RON:"lei",RUB:"\u20BD",SHP:"\xA3",SAR:"\uFDFC",RSD:"\u0414\u0438\u043D.",SCR:"\u20A8",SGD:"$",SBD:"$",SOS:"S",ZAR:"R",LKR:"\u20A8",SEK:"kr",CHF:"CHF",SRD:"$",SYP:"\xA3",TZS:"TSh",TWD:"NT$",THB:"\u0E3F",TTD:"TT$",TRY:"",TRL:"\u20A4",TVD:"$",UGX:"USh",UAH:"\u20B4",GBP:"\xA3",USD:"$",UYU:"$U",UZS:"\u043B\u0432",VEF:"Bs",VND:"\u20AB",YER:"\uFDFC",ZWD:"Z$"},iv=nv,jp=tv;function nv(u){return jp.hasOwnProperty(u)?jp[u]:"?"}(function(u){var a=Fu.exports,s=Xb,l=_m,m=Yb,g=Jb,v=Qb,r=$b,T=iv;u.continents=s,u.regions=l,u.countries={all:m},a.each(m,function(I){var k=u.countries[I.alpha2];(!k||k.status==="deleted")&&(u.countries[I.alpha2]=I);var K=u.countries[I.alpha3];(!K||K.status==="deleted")&&(u.countries[I.alpha3]=I)}),u.currencies={all:g},a.each(g,function(I){var k=T(I.code);k=="?"&&(k=I.code),I.symbol=k,u.currencies[I.code]=I}),u.languages={all:v},a.each(v,function(I){u.languages[I.alpha2]=I,u.languages[I.bibliographic]=I,u.languages[I.alpha3]=I}),u.lookup=r({countries:m,currencies:g,languages:v});var A={all:[]},C=a.reduce(m,function(I,k){return k.countryCallingCodes&&k.countryCallingCodes.length&&(A.all.push(k),A[k.alpha2]=k,A[k.alpha3]=k,a.each(k.countryCallingCodes,function(K){I.indexOf(K)==-1&&I.push(K)})),I},[]);delete A[""],u.callingCountries=A,C.sort(function(I,k){var K=function(we){return parseInt(we)},$=a.map(I.split(" "),K),he=a.map(k.split(" "),K);return $[0]<he[0]?-1:$[0]>he[0]?1:$[1]===void 0&&he[1]!==void 0?-1:$[1]!==void 0&&he[1]===void 0?1:$[1]<he[1]?-1:$[1]>he[1]?1:0}),u.callingCodes={all:C}})(gm);const av=async()=>{const a=await(await fetch("https://openexchangerates.org/api/currencies.json")).json();return Object.keys(a).map(s=>{const l={code:s,name:a[s],iso2:[],iso3:[]};return gm.countries.all.forEach(m=>{m.currencies.includes(l.code)&&(l.iso2.push(m.alpha2),m.alpha3!==""&&l.iso3.push(m.alpha3))}),l})},rv=async(u,a)=>{const l=await(await fetch(`${ps.base_worldbank_api}/${u}/indicator/PA.NUS.PPP/?format=json&date=${a}`)).json();if(l[1])return l[1][0]},Gp=async(u,a)=>{const l=await(await fetch(`${ps.base_worldbank_api}/${u}/indicator/FP.CPI.TOTL/?format=json&date=${a}`)).json();if(l[1])return l[1][0]},ym=async()=>(await(await fetch(ps.cactus_api)).json()).study_data;class sv{constructor(a,s){this.min=a,this.max=s}_boundCheck(a,s){if(typeof a!="number"||Number.isNaN(a))throw new Error(`The ${s}imal value of the range must be a numerical value`);if(s==="min"?a<this._max:this._min>a)throw new Error("The maximal value cannot be smaller than the minimal value")}_boundParse(a,s){const l=Number(a);return this._boundCheck(l,s),l}enumerate(a=1){if(typeof a!="number")throw new Error("The step must be a number");if(a<=0)throw new Error("The step must be a positive number");const s=a.toString().split(".")[1],l=s?s.length:0,m=10**l;return Array.from({length:Math.floor((this._max-this._min+a)/a)},(g,v)=>{const r=this._min+v*a;return l>0?Math.round(r*m)/m:r})}includes(a){if(typeof a!="number")throw new Error("The search number must be a number");return a>=this._min&&a<=this._max}incorporate(a){if(typeof a!="number")throw new Error("The number to incorporate must be a number");return Math.min(Math.max(this._min,a),this._max)}get max(){return this._max}set max(a){this._max=this._boundParse(a,"max")}get min(){return this._min}set min(a){this._min=this._boundParse(a,"min")}}var ov=sv;function Hp(u,a,s){const l=u.slice();return l[4]=a[s],l}function qp(u){let a,s=`${u[4]}`,l;return{c(){a=ge("option"),l=wt(s),this.h()},l(m){a=_e(m,"OPTION",{});var g=Ce(a);l=Ct(g,s),g.forEach(Y),this.h()},h(){a.__value=u[4],a.value=a.__value},m(m,g){et(m,a,g),ie(a,l)},p:Ba,d(m){m&&Y(a)}}}function lv(u){let a,s,l,m,g=u[1],v=[];for(let r=0;r<g.length;r+=1)v[r]=qp(Hp(u,g,r));return{c(){a=ge("div"),s=ge("select");for(let r=0;r<v.length;r+=1)v[r].c();this.h()},l(r){a=_e(r,"DIV",{class:!0});var T=Ce(a);s=_e(T,"SELECT",{});var A=Ce(s);for(let C=0;C<v.length;C+=1)v[C].l(A);A.forEach(Y),T.forEach(Y),this.h()},h(){u[0]===void 0&&Ru(()=>u[2].call(s)),ve(a,"class","select is-primary is-medium")},m(r,T){et(r,a,T),ie(a,s);for(let A=0;A<v.length;A+=1)v[A].m(s,null);xo(s,u[0]),l||(m=Ri(s,"change",u[2]),l=!0)},p(r,[T]){if(T&2){g=r[1];let A;for(A=0;A<g.length;A+=1){const C=Hp(r,g,A);v[A]?v[A].p(C,T):(v[A]=qp(C),v[A].c(),v[A].m(s,null))}for(;A<v.length;A+=1)v[A].d(1);v.length=g.length}T&3&&xo(s,r[0])},i:Ba,o:Ba,d(r){r&&Y(a),wo(v,r),l=!1,m()}}}function cv(u,a,s){let l=new Date().getFullYear(),{selectedYear:m=l}=a,g=new ov(1960,l).enumerate().reverse();function v(){m=Au(this),s(0,m),s(1,g)}return u.$$set=r=>{"selectedYear"in r&&s(0,m=r.selectedYear)},[m,g,v]}class Zp extends An{constructor(a){super(),kn(this,a,cv,lv,Mn,{selectedYear:0})}}Su=void 0;function uv(u){return u.replace(/[-[\]/{}()*+?.\\^$]/g,"\\$&")}function hv(u,a){var s=a===void 0?{}:a,l=s.decimalMark,m=l===void 0?".":l;if(typeof u=="number")return u.toString();if(typeof u!="string")return"NaN";var g=uv(m),v=u.trim(),r=v.match(/^\(.*\)$|^-/),T=new RegExp("[^\\d"+g+"]|"+g+"(?=.*"+g+")|^\\D*"+g+"\\D*$","g");return v=v.replace(T,"").replace(m,"."),v===""?v="NaN":r&&(v="-"+v),v}function dv(u,a){var s=a===void 0?{}:a,l=s.decimalMark,m=l===void 0?".":l,g=hv(u,{decimalMark:m});return g==="NaN"?NaN:Number(g)}var Su=dv;/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ka={DISABLED:"mdc-slider--disabled",DISCRETE:"mdc-slider--discrete",INPUT:"mdc-slider__input",RANGE:"mdc-slider--range",THUMB:"mdc-slider__thumb",THUMB_FOCUSED:"mdc-slider__thumb--focused",THUMB_KNOB:"mdc-slider__thumb-knob",THUMB_TOP:"mdc-slider__thumb--top",THUMB_WITH_INDICATOR:"mdc-slider__thumb--with-indicator",TICK_MARKS:"mdc-slider--tick-marks",TICK_MARKS_CONTAINER:"mdc-slider__tick-marks",TICK_MARK_ACTIVE:"mdc-slider__tick-mark--active",TICK_MARK_INACTIVE:"mdc-slider__tick-mark--inactive",TRACK:"mdc-slider__track",TRACK_ACTIVE:"mdc-slider__track--active_fill",VALUE_INDICATOR_TEXT:"mdc-slider__value-indicator-text"},Kp={STEP_SIZE:1,THUMB_UPDATE_MIN_PX:5},Ha={ARIA_VALUETEXT:"aria-valuetext",INPUT_DISABLED:"disabled",INPUT_MIN:"min",INPUT_MAX:"max",INPUT_VALUE:"value",INPUT_STEP:"step"};/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var pv=function(){function u(){this.rafIDs=new Map}return u.prototype.request=function(a,s){var l=this;this.cancel(a);var m=requestAnimationFrame(function(g){l.rafIDs.delete(a),s(g)});this.rafIDs.set(a,m)},u.prototype.cancel=function(a){var s=this.rafIDs.get(a);s&&(cancelAnimationFrame(s),this.rafIDs.delete(a))},u.prototype.cancelAll=function(){var a=this;this.rafIDs.forEach(function(s,l){a.cancel(l)})},u.prototype.getQueue=function(){var a=[];return this.rafIDs.forEach(function(s,l){a.push(l)}),a},u}();/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Wp={animation:{prefixed:"-webkit-animation",standard:"animation"},transform:{prefixed:"-webkit-transform",standard:"transform"},transition:{prefixed:"-webkit-transition",standard:"transition"}};function fv(u){return Boolean(u.document)&&typeof u.document.createElement=="function"}function Xp(u,a){if(fv(u)&&a in Wp){var s=u.document.createElement("div"),l=Wp[a],m=l.standard,g=l.prefixed,v=m in s.style;return v?m:g}return a}/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Jr;(function(u){u[u.ACTIVE=0]="ACTIVE",u[u.INACTIVE=1]="INACTIVE"})(Jr||(Jr={}));var Ke;(function(u){u[u.START=1]="START",u[u.END=2]="END"})(Ke||(Ke={}));/**
 * @license
 * Copyright 2020 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Mu;(function(u){u.SLIDER_UPDATE="slider_update"})(Mu||(Mu={}));var Nh=typeof window<"u",mv=function(u){Is(a,u);function a(s){var l=u.call(this,Cr(Cr({},a.defaultAdapter),s))||this;return l.initialStylesRemoved=!1,l.isDisabled=!1,l.isDiscrete=!1,l.step=Kp.STEP_SIZE,l.hasTickMarks=!1,l.isRange=!1,l.thumb=null,l.downEventClientX=null,l.startThumbKnobWidth=0,l.endThumbKnobWidth=0,l.animFrame=new pv,l}return Object.defineProperty(a,"defaultAdapter",{get:function(){return{hasClass:function(){return!1},addClass:function(){},removeClass:function(){},addThumbClass:function(){},removeThumbClass:function(){},getAttribute:function(){return null},getInputValue:function(){return""},setInputValue:function(){},getInputAttribute:function(){return null},setInputAttribute:function(){return null},removeInputAttribute:function(){return null},focusInput:function(){},isInputFocused:function(){return!1},getThumbKnobWidth:function(){return 0},getThumbBoundingClientRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},getBoundingClientRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},isRTL:function(){return!1},setThumbStyleProperty:function(){},removeThumbStyleProperty:function(){},setTrackActiveStyleProperty:function(){},removeTrackActiveStyleProperty:function(){},setValueIndicatorText:function(){},getValueToAriaValueTextFn:function(){return null},updateTickMarks:function(){},setPointerCapture:function(){},emitChangeEvent:function(){},emitInputEvent:function(){},emitDragStartEvent:function(){},emitDragEndEvent:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){},registerThumbEventHandler:function(){},deregisterThumbEventHandler:function(){},registerInputEventHandler:function(){},deregisterInputEventHandler:function(){},registerBodyEventHandler:function(){},deregisterBodyEventHandler:function(){},registerWindowEventHandler:function(){},deregisterWindowEventHandler:function(){}}},enumerable:!1,configurable:!0}),a.prototype.init=function(){var s=this;this.isDisabled=this.adapter.hasClass(ka.DISABLED),this.isDiscrete=this.adapter.hasClass(ka.DISCRETE),this.hasTickMarks=this.adapter.hasClass(ka.TICK_MARKS),this.isRange=this.adapter.hasClass(ka.RANGE);var l=this.convertAttributeValueToNumber(this.adapter.getInputAttribute(Ha.INPUT_MIN,this.isRange?Ke.START:Ke.END),Ha.INPUT_MIN),m=this.convertAttributeValueToNumber(this.adapter.getInputAttribute(Ha.INPUT_MAX,Ke.END),Ha.INPUT_MAX),g=this.convertAttributeValueToNumber(this.adapter.getInputAttribute(Ha.INPUT_VALUE,Ke.END),Ha.INPUT_VALUE),v=this.isRange?this.convertAttributeValueToNumber(this.adapter.getInputAttribute(Ha.INPUT_VALUE,Ke.START),Ha.INPUT_VALUE):l,r=this.adapter.getInputAttribute(Ha.INPUT_STEP,Ke.END),T=r?this.convertAttributeValueToNumber(r,Ha.INPUT_STEP):this.step;this.validateProperties({min:l,max:m,value:g,valueStart:v,step:T}),this.min=l,this.max=m,this.value=g,this.valueStart=v,this.step=T,this.numDecimalPlaces=Yp(this.step),this.valueBeforeDownEvent=g,this.valueStartBeforeDownEvent=v,this.mousedownOrTouchstartListener=this.handleMousedownOrTouchstart.bind(this),this.moveListener=this.handleMove.bind(this),this.pointerdownListener=this.handlePointerdown.bind(this),this.pointerupListener=this.handlePointerup.bind(this),this.thumbMouseenterListener=this.handleThumbMouseenter.bind(this),this.thumbMouseleaveListener=this.handleThumbMouseleave.bind(this),this.inputStartChangeListener=function(){s.handleInputChange(Ke.START)},this.inputEndChangeListener=function(){s.handleInputChange(Ke.END)},this.inputStartFocusListener=function(){s.handleInputFocus(Ke.START)},this.inputEndFocusListener=function(){s.handleInputFocus(Ke.END)},this.inputStartBlurListener=function(){s.handleInputBlur(Ke.START)},this.inputEndBlurListener=function(){s.handleInputBlur(Ke.END)},this.resizeListener=this.handleResize.bind(this),this.registerEventHandlers()},a.prototype.destroy=function(){this.deregisterEventHandlers()},a.prototype.setMin=function(s){this.min=s,this.isRange||(this.valueStart=s),this.updateUI()},a.prototype.setMax=function(s){this.max=s,this.updateUI()},a.prototype.getMin=function(){return this.min},a.prototype.getMax=function(){return this.max},a.prototype.getValue=function(){return this.value},a.prototype.setValue=function(s){if(this.isRange&&s<this.valueStart)throw new Error("end thumb value ("+s+") must be >= start thumb "+("value ("+this.valueStart+")"));this.updateValue(s,Ke.END)},a.prototype.getValueStart=function(){if(!this.isRange)throw new Error("`valueStart` is only applicable for range sliders.");return this.valueStart},a.prototype.setValueStart=function(s){if(!this.isRange)throw new Error("`valueStart` is only applicable for range sliders.");if(this.isRange&&s>this.value)throw new Error("start thumb value ("+s+") must be <= end thumb "+("value ("+this.value+")"));this.updateValue(s,Ke.START)},a.prototype.setStep=function(s){this.step=s,this.numDecimalPlaces=Yp(s),this.updateUI()},a.prototype.setIsDiscrete=function(s){this.isDiscrete=s,this.updateValueIndicatorUI(),this.updateTickMarksUI()},a.prototype.getStep=function(){return this.step},a.prototype.setHasTickMarks=function(s){this.hasTickMarks=s,this.updateTickMarksUI()},a.prototype.getDisabled=function(){return this.isDisabled},a.prototype.setDisabled=function(s){this.isDisabled=s,s?(this.adapter.addClass(ka.DISABLED),this.isRange&&this.adapter.setInputAttribute(Ha.INPUT_DISABLED,"",Ke.START),this.adapter.setInputAttribute(Ha.INPUT_DISABLED,"",Ke.END)):(this.adapter.removeClass(ka.DISABLED),this.isRange&&this.adapter.removeInputAttribute(Ha.INPUT_DISABLED,Ke.START),this.adapter.removeInputAttribute(Ha.INPUT_DISABLED,Ke.END))},a.prototype.getIsRange=function(){return this.isRange},a.prototype.layout=function(s){var l=s===void 0?{}:s,m=l.skipUpdateUI;this.rect=this.adapter.getBoundingClientRect(),this.isRange&&(this.startThumbKnobWidth=this.adapter.getThumbKnobWidth(Ke.START),this.endThumbKnobWidth=this.adapter.getThumbKnobWidth(Ke.END)),m||this.updateUI()},a.prototype.handleResize=function(){this.layout()},a.prototype.handleDown=function(s){if(!this.isDisabled){this.valueStartBeforeDownEvent=this.valueStart,this.valueBeforeDownEvent=this.value;var l=s.clientX!=null?s.clientX:s.targetTouches[0].clientX;this.downEventClientX=l;var m=this.mapClientXOnSliderScale(l);this.thumb=this.getThumbFromDownEvent(l,m),this.thumb!==null&&(this.handleDragStart(s,m,this.thumb),this.updateValue(m,this.thumb,{emitInputEvent:!0}))}},a.prototype.handleMove=function(s){if(!this.isDisabled){s.preventDefault();var l=s.clientX!=null?s.clientX:s.targetTouches[0].clientX,m=this.thumb!=null;if(this.thumb=this.getThumbFromMoveEvent(l),this.thumb!==null){var g=this.mapClientXOnSliderScale(l);m||(this.handleDragStart(s,g,this.thumb),this.adapter.emitDragStartEvent(g,this.thumb)),this.updateValue(g,this.thumb,{emitInputEvent:!0})}}},a.prototype.handleUp=function(){if(!(this.isDisabled||this.thumb===null)){var s=this.thumb===Ke.START?this.valueStartBeforeDownEvent:this.valueBeforeDownEvent,l=this.thumb===Ke.START?this.valueStart:this.value;s!==l&&this.adapter.emitChangeEvent(l,this.thumb),this.adapter.emitDragEndEvent(l,this.thumb),this.thumb=null}},a.prototype.handleThumbMouseenter=function(){!this.isDiscrete||!this.isRange||(this.adapter.addThumbClass(ka.THUMB_WITH_INDICATOR,Ke.START),this.adapter.addThumbClass(ka.THUMB_WITH_INDICATOR,Ke.END))},a.prototype.handleThumbMouseleave=function(){!this.isDiscrete||!this.isRange||this.adapter.isInputFocused(Ke.START)||this.adapter.isInputFocused(Ke.END)||(this.adapter.removeThumbClass(ka.THUMB_WITH_INDICATOR,Ke.START),this.adapter.removeThumbClass(ka.THUMB_WITH_INDICATOR,Ke.END))},a.prototype.handleMousedownOrTouchstart=function(s){var l=this,m=s.type==="mousedown"?"mousemove":"touchmove";this.adapter.registerBodyEventHandler(m,this.moveListener);var g=function(){l.handleUp(),l.adapter.deregisterBodyEventHandler(m,l.moveListener),l.adapter.deregisterEventHandler("mouseup",g),l.adapter.deregisterEventHandler("touchend",g)};this.adapter.registerBodyEventHandler("mouseup",g),this.adapter.registerBodyEventHandler("touchend",g),this.handleDown(s)},a.prototype.handlePointerdown=function(s){this.adapter.setPointerCapture(s.pointerId),this.adapter.registerEventHandler("pointermove",this.moveListener),this.handleDown(s)},a.prototype.handleInputChange=function(s){var l=Number(this.adapter.getInputValue(s));s===Ke.START?this.setValueStart(l):this.setValue(l),this.adapter.emitChangeEvent(s===Ke.START?this.valueStart:this.value,s),this.adapter.emitInputEvent(s===Ke.START?this.valueStart:this.value,s)},a.prototype.handleInputFocus=function(s){if(this.adapter.addThumbClass(ka.THUMB_FOCUSED,s),!!this.isDiscrete&&(this.adapter.addThumbClass(ka.THUMB_WITH_INDICATOR,s),this.isRange)){var l=s===Ke.START?Ke.END:Ke.START;this.adapter.addThumbClass(ka.THUMB_WITH_INDICATOR,l)}},a.prototype.handleInputBlur=function(s){if(this.adapter.removeThumbClass(ka.THUMB_FOCUSED,s),!!this.isDiscrete&&(this.adapter.removeThumbClass(ka.THUMB_WITH_INDICATOR,s),this.isRange)){var l=s===Ke.START?Ke.END:Ke.START;this.adapter.removeThumbClass(ka.THUMB_WITH_INDICATOR,l)}},a.prototype.handleDragStart=function(s,l,m){this.adapter.emitDragStartEvent(l,m),this.adapter.focusInput(m),s.preventDefault()},a.prototype.getThumbFromDownEvent=function(s,l){if(!this.isRange)return Ke.END;var m=this.adapter.getThumbBoundingClientRect(Ke.START),g=this.adapter.getThumbBoundingClientRect(Ke.END),v=s>=m.left&&s<=m.right,r=s>=g.left&&s<=g.right;return v&&r?null:v?Ke.START:r?Ke.END:l<this.valueStart?Ke.START:l>this.value?Ke.END:l-this.valueStart<=this.value-l?Ke.START:Ke.END},a.prototype.getThumbFromMoveEvent=function(s){if(this.thumb!==null)return this.thumb;if(this.downEventClientX===null)throw new Error("`downEventClientX` is null after move event.");var l=Math.abs(this.downEventClientX-s)<Kp.THUMB_UPDATE_MIN_PX;if(l)return this.thumb;var m=s<this.downEventClientX;return m?this.adapter.isRTL()?Ke.END:Ke.START:this.adapter.isRTL()?Ke.START:Ke.END},a.prototype.updateUI=function(s){this.updateThumbAndInputAttributes(s),this.updateThumbAndTrackUI(s),this.updateValueIndicatorUI(s),this.updateTickMarksUI()},a.prototype.updateThumbAndInputAttributes=function(s){if(!!s){var l=this.isRange&&s===Ke.START?this.valueStart:this.value,m=String(l);this.adapter.setInputAttribute(Ha.INPUT_VALUE,m,s),this.isRange&&s===Ke.START?this.adapter.setInputAttribute(Ha.INPUT_MIN,m,Ke.END):this.isRange&&s===Ke.END&&this.adapter.setInputAttribute(Ha.INPUT_MAX,m,Ke.START),this.adapter.getInputValue(s)!==m&&this.adapter.setInputValue(m,s);var g=this.adapter.getValueToAriaValueTextFn();g&&this.adapter.setInputAttribute(Ha.ARIA_VALUETEXT,g(l),s)}},a.prototype.updateValueIndicatorUI=function(s){if(!!this.isDiscrete){var l=this.isRange&&s===Ke.START?this.valueStart:this.value;this.adapter.setValueIndicatorText(l,s===Ke.START?Ke.START:Ke.END),!s&&this.isRange&&this.adapter.setValueIndicatorText(this.valueStart,Ke.START)}},a.prototype.updateTickMarksUI=function(){if(!(!this.isDiscrete||!this.hasTickMarks)){var s=(this.valueStart-this.min)/this.step,l=(this.value-this.valueStart)/this.step+1,m=(this.max-this.value)/this.step,g=Array.from({length:s}).fill(Jr.INACTIVE),v=Array.from({length:l}).fill(Jr.ACTIVE),r=Array.from({length:m}).fill(Jr.INACTIVE);this.adapter.updateTickMarks(g.concat(v).concat(r))}},a.prototype.mapClientXOnSliderScale=function(s){var l=s-this.rect.left,m=l/this.rect.width;this.adapter.isRTL()&&(m=1-m);var g=this.min+m*(this.max-this.min);return g===this.max||g===this.min?g:Number(this.quantize(g).toFixed(this.numDecimalPlaces))},a.prototype.quantize=function(s){var l=Math.round((s-this.min)/this.step);return this.min+l*this.step},a.prototype.updateValue=function(s,l,m){var g=m===void 0?{}:m,v=g.emitInputEvent;if(s=this.clampValue(s,l),this.isRange&&l===Ke.START){if(this.valueStart===s)return;this.valueStart=s}else{if(this.value===s)return;this.value=s}this.updateUI(l),v&&this.adapter.emitInputEvent(l===Ke.START?this.valueStart:this.value,l)},a.prototype.clampValue=function(s,l){s=Math.min(Math.max(s,this.min),this.max);var m=this.isRange&&l===Ke.START&&s>this.value;if(m)return this.value;var g=this.isRange&&l===Ke.END&&s<this.valueStart;return g?this.valueStart:s},a.prototype.updateThumbAndTrackUI=function(s){var l=this,m=this,g=m.max,v=m.min,r=(this.value-this.valueStart)/(g-v),T=r*this.rect.width,A=this.adapter.isRTL(),C=Nh?Xp(window,"transform"):"transform";if(this.isRange){var I=this.adapter.isRTL()?(g-this.value)/(g-v)*this.rect.width:(this.valueStart-v)/(g-v)*this.rect.width,k=I+T;this.animFrame.request(Mu.SLIDER_UPDATE,function(){var K=!A&&s===Ke.START||A&&s!==Ke.START;K?(l.adapter.setTrackActiveStyleProperty("transform-origin","right"),l.adapter.setTrackActiveStyleProperty("left","unset"),l.adapter.setTrackActiveStyleProperty("right",l.rect.width-k+"px")):(l.adapter.setTrackActiveStyleProperty("transform-origin","left"),l.adapter.setTrackActiveStyleProperty("right","unset"),l.adapter.setTrackActiveStyleProperty("left",I+"px")),l.adapter.setTrackActiveStyleProperty(C,"scaleX("+r+")");var $=A?k:I,he=l.adapter.isRTL()?I:k;(s===Ke.START||!s||!l.initialStylesRemoved)&&l.adapter.setThumbStyleProperty(C,"translateX("+$+"px)",Ke.START),(s===Ke.END||!s||!l.initialStylesRemoved)&&l.adapter.setThumbStyleProperty(C,"translateX("+he+"px)",Ke.END),l.removeInitialStyles(A),l.updateOverlappingThumbsUI($,he,s)})}else this.animFrame.request(Mu.SLIDER_UPDATE,function(){var K=A?l.rect.width-T:T;l.adapter.setThumbStyleProperty(C,"translateX("+K+"px)",Ke.END),l.adapter.setTrackActiveStyleProperty(C,"scaleX("+r+")"),l.removeInitialStyles(A)})},a.prototype.removeInitialStyles=function(s){if(!this.initialStylesRemoved){var l=s?"right":"left";this.adapter.removeThumbStyleProperty(l,Ke.END),this.isRange&&this.adapter.removeThumbStyleProperty(l,Ke.START),this.initialStylesRemoved=!0,this.resetTrackAndThumbAnimation()}},a.prototype.resetTrackAndThumbAnimation=function(){var s=this;if(!!this.isDiscrete){var l=Nh?Xp(window,"transition"):"transition",m="all 0s ease 0s";this.adapter.setThumbStyleProperty(l,m,Ke.END),this.isRange&&this.adapter.setThumbStyleProperty(l,m,Ke.START),this.adapter.setTrackActiveStyleProperty(l,m),requestAnimationFrame(function(){s.adapter.removeThumbStyleProperty(l,Ke.END),s.adapter.removeTrackActiveStyleProperty(l),s.isRange&&s.adapter.removeThumbStyleProperty(l,Ke.START)})}},a.prototype.updateOverlappingThumbsUI=function(s,l,m){var g=!1;if(this.adapter.isRTL()){var v=s-this.startThumbKnobWidth/2,r=l+this.endThumbKnobWidth/2;g=r>=v}else{var T=s+this.startThumbKnobWidth/2,A=l-this.endThumbKnobWidth/2;g=T>=A}g?(this.adapter.addThumbClass(ka.THUMB_TOP,m||Ke.END),this.adapter.removeThumbClass(ka.THUMB_TOP,m===Ke.START?Ke.END:Ke.START)):(this.adapter.removeThumbClass(ka.THUMB_TOP,Ke.START),this.adapter.removeThumbClass(ka.THUMB_TOP,Ke.END))},a.prototype.convertAttributeValueToNumber=function(s,l){if(s===null)throw new Error("MDCSliderFoundation: `"+l+"` must be non-null.");var m=Number(s);if(isNaN(m))throw new Error("MDCSliderFoundation: `"+l+"` value is "+("`"+s+"`, but must be a number."));return m},a.prototype.validateProperties=function(s){var l=s.min,m=s.max,g=s.value,v=s.valueStart,r=s.step;if(l>=m)throw new Error("MDCSliderFoundation: min must be strictly less than max. "+("Current: [min: "+l+", max: "+m+"]"));if(r<=0)throw new Error("MDCSliderFoundation: step must be a positive number. "+("Current step: "+this.step));if(this.isRange){if(g<l||g>m||v<l||v>m)throw new Error("MDCSliderFoundation: values must be in [min, max] range. "+("Current values: [start value: "+v+", end value: "+g+"]"));if(v>g)throw new Error("MDCSliderFoundation: start value must be <= end value. "+("Current values: [start value: "+v+", end value: "+g+"]"));var T=(v-l)/r,A=(g-l)/r;if(T%1!==0||A%1!==0)throw new Error("MDCSliderFoundation: Slider values must be valid based on the "+("step value. Current values: [start value: "+v+", ")+("end value: "+g+"]"))}else{if(g<l||g>m)throw new Error("MDCSliderFoundation: value must be in [min, max] range. "+("Current value: "+g));var A=(g-l)/r;if(A%1!==0)throw new Error("MDCSliderFoundation: Slider value must be valid based on the "+("step value. Current value: "+g))}},a.prototype.registerEventHandlers=function(){this.adapter.registerWindowEventHandler("resize",this.resizeListener),a.SUPPORTS_POINTER_EVENTS?(this.adapter.registerEventHandler("pointerdown",this.pointerdownListener),this.adapter.registerEventHandler("pointerup",this.pointerupListener)):(this.adapter.registerEventHandler("mousedown",this.mousedownOrTouchstartListener),this.adapter.registerEventHandler("touchstart",this.mousedownOrTouchstartListener)),this.isRange&&(this.adapter.registerThumbEventHandler(Ke.START,"mouseenter",this.thumbMouseenterListener),this.adapter.registerThumbEventHandler(Ke.START,"mouseleave",this.thumbMouseleaveListener),this.adapter.registerInputEventHandler(Ke.START,"change",this.inputStartChangeListener),this.adapter.registerInputEventHandler(Ke.START,"focus",this.inputStartFocusListener),this.adapter.registerInputEventHandler(Ke.START,"blur",this.inputStartBlurListener)),this.adapter.registerThumbEventHandler(Ke.END,"mouseenter",this.thumbMouseenterListener),this.adapter.registerThumbEventHandler(Ke.END,"mouseleave",this.thumbMouseleaveListener),this.adapter.registerInputEventHandler(Ke.END,"change",this.inputEndChangeListener),this.adapter.registerInputEventHandler(Ke.END,"focus",this.inputEndFocusListener),this.adapter.registerInputEventHandler(Ke.END,"blur",this.inputEndBlurListener)},a.prototype.deregisterEventHandlers=function(){this.adapter.deregisterWindowEventHandler("resize",this.resizeListener),a.SUPPORTS_POINTER_EVENTS?(this.adapter.deregisterEventHandler("pointerdown",this.pointerdownListener),this.adapter.deregisterEventHandler("pointerup",this.pointerupListener)):(this.adapter.deregisterEventHandler("mousedown",this.mousedownOrTouchstartListener),this.adapter.deregisterEventHandler("touchstart",this.mousedownOrTouchstartListener)),this.isRange&&(this.adapter.deregisterThumbEventHandler(Ke.START,"mouseenter",this.thumbMouseenterListener),this.adapter.deregisterThumbEventHandler(Ke.START,"mouseleave",this.thumbMouseleaveListener),this.adapter.deregisterInputEventHandler(Ke.START,"change",this.inputStartChangeListener),this.adapter.deregisterInputEventHandler(Ke.START,"focus",this.inputStartFocusListener),this.adapter.deregisterInputEventHandler(Ke.START,"blur",this.inputStartBlurListener)),this.adapter.deregisterThumbEventHandler(Ke.END,"mouseenter",this.thumbMouseenterListener),this.adapter.deregisterThumbEventHandler(Ke.END,"mouseleave",this.thumbMouseleaveListener),this.adapter.deregisterInputEventHandler(Ke.END,"change",this.inputEndChangeListener),this.adapter.deregisterInputEventHandler(Ke.END,"focus",this.inputEndFocusListener),this.adapter.deregisterInputEventHandler(Ke.END,"blur",this.inputEndBlurListener)},a.prototype.handlePointerup=function(){this.handleUp(),this.adapter.deregisterEventHandler("pointermove",this.moveListener)},a.SUPPORTS_POINTER_EVENTS=Nh&&Boolean(window.PointerEvent)&&!gv(),a}(kl);function gv(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Yp(u){var a=/(?:\.(\d+))?(?:[eE]([+\-]?\d+))?$/.exec(String(u));if(!a)return 0;var s=a[1]||"",l=a[2]||0;return Math.max(0,(s==="0"?0:s.length)-Number(l))}function Jp(u,a,s){const l=u.slice();return l[90]=a[s],l}function _v(u){let a,s,l,m,g=[{class:s=zn({[u[12]]:!0,"mdc-slider__input":!0})},{type:"range"},{disabled:u[5]},{step:u[9]},{min:u[10]},{max:u[11]},u[32],u[23],Sl(u[36],"input$")],v={};for(let r=0;r<g.length;r+=1)v=Jt(v,g[r]);return{c(){a=ge("input"),this.h()},l(r){a=_e(r,"INPUT",{class:!0,type:!0,step:!0,min:!0,max:!0}),this.h()},h(){en(a,v)},m(r,T){et(r,a,T),a.autofocus&&a.focus(),u[60](a),ma(a,u[0]),l||(m=[Ri(a,"change",u[61]),Ri(a,"input",u[61]),Ri(a,"blur",u[54]),Ri(a,"focus",u[55])],l=!0)},p(r,T){en(a,v=aa(g,[T[0]&4096&&s!==(s=zn({[r[12]]:!0,"mdc-slider__input":!0}))&&{class:s},{type:"range"},T[0]&32&&{disabled:r[5]},T[0]&512&&{step:r[9]},T[0]&1024&&{min:r[10]},T[0]&2048&&{max:r[11]},r[32],T[0]&8388608&&r[23],T[1]&32&&Sl(r[36],"input$")])),T[0]&1&&ma(a,r[0])},d(r){r&&Y(a),u[60](null),l=!1,ha(m)}}}function yv(u){let a,s,l,m,g,v,r,T=[{class:s=zn({[u[12]]:!0,"mdc-slider__input":!0})},{type:"range"},{disabled:u[5]},{step:u[9]},{min:u[10]},{max:u[2]},u[24],Sl(u[36],"input$")],A={};for(let k=0;k<T.length;k+=1)A=Jt(A,T[k]);let C=[{class:g=zn({[u[12]]:!0,"mdc-slider__input":!0})},{type:"range"},{disabled:u[5]},{step:u[9]},{min:u[1]},{max:u[11]},u[32],u[23],Sl(u[36],"input$")],I={};for(let k=0;k<C.length;k+=1)I=Jt(I,C[k]);return{c(){a=ge("input"),l=St(),m=ge("input"),this.h()},l(k){a=_e(k,"INPUT",{class:!0,type:!0,step:!0,min:!0,max:!0}),l=Et(k),m=_e(k,"INPUT",{class:!0,type:!0,step:!0,min:!0,max:!0}),this.h()},h(){en(a,A),en(m,I)},m(k,K){et(k,a,K),a.autofocus&&a.focus(),u[56](a),ma(a,u[1]),et(k,l,K),et(k,m,K),m.autofocus&&m.focus(),u[58](m),ma(m,u[2]),v||(r=[Ri(a,"change",u[57]),Ri(a,"input",u[57]),Ri(a,"blur",u[52]),Ri(a,"focus",u[53]),Ri(m,"change",u[59]),Ri(m,"input",u[59]),Ri(m,"blur",u[50]),Ri(m,"focus",u[51])],v=!0)},p(k,K){en(a,A=aa(T,[K[0]&4096&&s!==(s=zn({[k[12]]:!0,"mdc-slider__input":!0}))&&{class:s},{type:"range"},K[0]&32&&{disabled:k[5]},K[0]&512&&{step:k[9]},K[0]&1024&&{min:k[10]},K[0]&4&&{max:k[2]},K[0]&16777216&&k[24],K[1]&32&&Sl(k[36],"input$")])),K[0]&2&&ma(a,k[1]),en(m,I=aa(C,[K[0]&4096&&g!==(g=zn({[k[12]]:!0,"mdc-slider__input":!0}))&&{class:g},{type:"range"},K[0]&32&&{disabled:k[5]},K[0]&512&&{step:k[9]},K[0]&2&&{min:k[1]},K[0]&2048&&{max:k[11]},k[32],K[0]&8388608&&k[23],K[1]&32&&Sl(k[36],"input$")])),K[0]&4&&ma(m,k[2])},d(k){k&&Y(a),u[56](null),k&&Y(l),k&&Y(m),u[58](null),v=!1,ha(r)}}}function Qp(u){let a,s=u[30],l=[];for(let m=0;m<s.length;m+=1)l[m]=$p(Jp(u,s,m));return{c(){a=ge("div");for(let m=0;m<l.length;m+=1)l[m].c();this.h()},l(m){a=_e(m,"DIV",{class:!0});var g=Ce(a);for(let v=0;v<l.length;v+=1)l[v].l(g);g.forEach(Y),this.h()},h(){ve(a,"class","mdc-slider__tick-marks")},m(m,g){et(m,a,g);for(let v=0;v<l.length;v+=1)l[v].m(a,null)},p(m,g){if(g[0]&1073741824){s=m[30];let v;for(v=0;v<s.length;v+=1){const r=Jp(m,s,v);l[v]?l[v].p(r,g):(l[v]=$p(r),l[v].c(),l[v].m(a,null))}for(;v<l.length;v+=1)l[v].d(1);l.length=s.length}},d(m){m&&Y(a),wo(l,m)}}}function $p(u){let a,s;return{c(){a=ge("div"),this.h()},l(l){a=_e(l,"DIV",{class:!0}),Ce(a).forEach(Y),this.h()},h(){ve(a,"class",s=u[90]===Jr.ACTIVE?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive")},m(l,m){et(l,a,m)},p(l,m){m[0]&1073741824&&s!==(s=l[90]===Jr.ACTIVE?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive")&&ve(a,"class",s)},d(l){l&&Y(a)}}}function bv(u){let a,s,l,m,g,v,r,T,A=u[7]&&ef(u);return{c(){a=ge("div"),A&&A.c(),s=St(),l=ge("div"),this.h()},l(C){a=_e(C,"DIV",{class:!0,style:!0});var I=Ce(a);A&&A.l(I),s=Et(I),l=_e(I,"DIV",{class:!0}),Ce(l).forEach(Y),I.forEach(Y),this.h()},h(){ve(l,"class","mdc-slider__thumb-knob"),ve(a,"class",m=zn({"mdc-slider__thumb":!0,...u[22]})),ve(a,"style",g=Object.entries(u[26]).map(of).join(" "))},m(C,I){et(C,a,I),A&&A.m(a,null),ie(a,s),ie(a,l),u[72](l),u[73](a),r||(T=un(v=$o.call(null,a,{unbounded:!0,disabled:u[5],active:u[28],eventTarget:u[14],activeTarget:u[14],addClass:u[74],removeClass:u[75],addStyle:u[76]})),r=!0)},p(C,I){C[7]?A?A.p(C,I):(A=ef(C),A.c(),A.m(a,s)):A&&(A.d(1),A=null),I[0]&4194304&&m!==(m=zn({"mdc-slider__thumb":!0,...C[22]}))&&ve(a,"class",m),I[0]&67108864&&g!==(g=Object.entries(C[26]).map(of).join(" "))&&ve(a,"style",g),v&&Ma(v.update)&&I[0]&268451872&&v.update.call(null,{unbounded:!0,disabled:C[5],active:C[28],eventTarget:C[14],activeTarget:C[14],addClass:C[74],removeClass:C[75],addStyle:C[76]})},d(C){C&&Y(a),A&&A.d(),u[72](null),u[73](null),r=!1,T()}}}function vv(u){let a,s,l,m,g,v,r,T,A,C,I,k,K,$,he,we=u[7]&&tf(u),Te=u[7]&&nf(u);return{c(){a=ge("div"),we&&we.c(),s=St(),l=ge("div"),r=St(),T=ge("div"),Te&&Te.c(),A=St(),C=ge("div"),this.h()},l(me){a=_e(me,"DIV",{class:!0,style:!0});var Le=Ce(a);we&&we.l(Le),s=Et(Le),l=_e(Le,"DIV",{class:!0}),Ce(l).forEach(Y),Le.forEach(Y),r=Et(me),T=_e(me,"DIV",{class:!0,style:!0});var Ue=Ce(T);Te&&Te.l(Ue),A=Et(Ue),C=_e(Ue,"DIV",{class:!0}),Ce(C).forEach(Y),Ue.forEach(Y),this.h()},h(){ve(l,"class","mdc-slider__thumb-knob"),ve(a,"class",m=zn({"mdc-slider__thumb":!0,...u[21]})),ve(a,"style",g=Object.entries(u[27]).map(rf).join(" ")),ve(C,"class","mdc-slider__thumb-knob"),ve(T,"class",I=zn({"mdc-slider__thumb":!0,...u[22]})),ve(T,"style",k=Object.entries(u[26]).map(sf).join(" "))},m(me,Le){et(me,a,Le),we&&we.m(a,null),ie(a,s),ie(a,l),u[62](l),u[63](a),et(me,r,Le),et(me,T,Le),Te&&Te.m(T,null),ie(T,A),ie(T,C),u[67](C),u[68](T),$||(he=[un(v=$o.call(null,a,{unbounded:!0,disabled:u[5],active:u[29],eventTarget:u[15],activeTarget:u[15],addClass:u[64],removeClass:u[65],addStyle:u[66]})),un(K=$o.call(null,T,{unbounded:!0,disabled:u[5],active:u[28],eventTarget:u[14],activeTarget:u[14],addClass:u[69],removeClass:u[70],addStyle:u[71]}))],$=!0)},p(me,Le){me[7]?we?we.p(me,Le):(we=tf(me),we.c(),we.m(a,s)):we&&(we.d(1),we=null),Le[0]&2097152&&m!==(m=zn({"mdc-slider__thumb":!0,...me[21]}))&&ve(a,"class",m),Le[0]&134217728&&g!==(g=Object.entries(me[27]).map(rf).join(" "))&&ve(a,"style",g),v&&Ma(v.update)&&Le[0]&536903712&&v.update.call(null,{unbounded:!0,disabled:me[5],active:me[29],eventTarget:me[15],activeTarget:me[15],addClass:me[64],removeClass:me[65],addStyle:me[66]}),me[7]?Te?Te.p(me,Le):(Te=nf(me),Te.c(),Te.m(T,A)):Te&&(Te.d(1),Te=null),Le[0]&4194304&&I!==(I=zn({"mdc-slider__thumb":!0,...me[22]}))&&ve(T,"class",I),Le[0]&67108864&&k!==(k=Object.entries(me[26]).map(sf).join(" "))&&ve(T,"style",k),K&&Ma(K.update)&&Le[0]&268451872&&K.update.call(null,{unbounded:!0,disabled:me[5],active:me[28],eventTarget:me[14],activeTarget:me[14],addClass:me[69],removeClass:me[70],addStyle:me[71]})},d(me){me&&Y(a),we&&we.d(),u[62](null),u[63](null),me&&Y(r),me&&Y(T),Te&&Te.d(),u[67](null),u[68](null),$=!1,ha(he)}}}function ef(u){let a,s,l,m;return{c(){a=ge("div"),s=ge("div"),l=ge("span"),m=wt(u[0]),this.h()},l(g){a=_e(g,"DIV",{class:!0,"aria-hidden":!0});var v=Ce(a);s=_e(v,"DIV",{class:!0});var r=Ce(s);l=_e(r,"SPAN",{class:!0});var T=Ce(l);m=Ct(T,u[0]),T.forEach(Y),r.forEach(Y),v.forEach(Y),this.h()},h(){ve(l,"class","mdc-slider__value-indicator-text"),ve(s,"class","mdc-slider__value-indicator"),ve(a,"class","mdc-slider__value-indicator-container"),ve(a,"aria-hidden","true")},m(g,v){et(g,a,v),ie(a,s),ie(s,l),ie(l,m)},p(g,v){v[0]&1&&nn(m,g[0])},d(g){g&&Y(a)}}}function tf(u){let a,s,l,m;return{c(){a=ge("div"),s=ge("div"),l=ge("span"),m=wt(u[1]),this.h()},l(g){a=_e(g,"DIV",{class:!0,"aria-hidden":!0});var v=Ce(a);s=_e(v,"DIV",{class:!0});var r=Ce(s);l=_e(r,"SPAN",{class:!0});var T=Ce(l);m=Ct(T,u[1]),T.forEach(Y),r.forEach(Y),v.forEach(Y),this.h()},h(){ve(l,"class","mdc-slider__value-indicator-text"),ve(s,"class","mdc-slider__value-indicator"),ve(a,"class","mdc-slider__value-indicator-container"),ve(a,"aria-hidden","true")},m(g,v){et(g,a,v),ie(a,s),ie(s,l),ie(l,m)},p(g,v){v[0]&2&&nn(m,g[1])},d(g){g&&Y(a)}}}function nf(u){let a,s,l,m;return{c(){a=ge("div"),s=ge("div"),l=ge("span"),m=wt(u[2]),this.h()},l(g){a=_e(g,"DIV",{class:!0,"aria-hidden":!0});var v=Ce(a);s=_e(v,"DIV",{class:!0});var r=Ce(s);l=_e(r,"SPAN",{class:!0});var T=Ce(l);m=Ct(T,u[2]),T.forEach(Y),r.forEach(Y),v.forEach(Y),this.h()},h(){ve(l,"class","mdc-slider__value-indicator-text"),ve(s,"class","mdc-slider__value-indicator"),ve(a,"class","mdc-slider__value-indicator-container"),ve(a,"aria-hidden","true")},m(g,v){et(g,a,v),ie(a,s),ie(s,l),ie(l,m)},p(g,v){v[0]&4&&nn(m,g[2])},d(g){g&&Y(a)}}}function xv(u){let a,s,l,m,g,v,r,T,A,C,I,k,K,$;function he(Ve,tt){return Ve[6]?yv:_v}let we=he(u),Te=we(u),me=u[7]&&u[8]&&u[9]>0&&Qp(u);function Le(Ve,tt){return Ve[6]?vv:bv}let Ue=Le(u),Oe=Ue(u),We=[{class:I=Object.entries({[u[4]]:!0,"mdc-slider":!0,"mdc-slider--range":u[6],"mdc-slider--discrete":u[7],"mdc-slider--tick-marks":u[7]&&u[8],"mdc-slider--disabled":u[5],...u[20]}).filter(lf).map(cf).join(" ")},Mp(u[36],["input$"])],Me={};for(let Ve=0;Ve<We.length;Ve+=1)Me=Jt(Me,We[Ve]);return{c(){a=ge("div"),Te.c(),s=St(),l=ge("div"),m=ge("div"),g=St(),v=ge("div"),r=ge("div"),A=St(),me&&me.c(),C=St(),Oe.c(),this.h()},l(Ve){a=_e(Ve,"DIV",{class:!0});var tt=Ce(a);Te.l(tt),s=Et(tt),l=_e(tt,"DIV",{class:!0});var it=Ce(l);m=_e(it,"DIV",{class:!0}),Ce(m).forEach(Y),g=Et(it),v=_e(it,"DIV",{class:!0});var dt=Ce(v);r=_e(dt,"DIV",{class:!0,style:!0}),Ce(r).forEach(Y),dt.forEach(Y),A=Et(it),me&&me.l(it),it.forEach(Y),C=Et(tt),Oe.l(tt),tt.forEach(Y),this.h()},h(){ve(m,"class","mdc-slider__track--inactive"),ve(r,"class","mdc-slider__track--active_fill"),ve(r,"style",T=Object.entries(u[25]).map(af).join(" ")),ve(v,"class","mdc-slider__track--active"),ve(l,"class","mdc-slider__track"),en(a,Me)},m(Ve,tt){et(Ve,a,tt),Te.m(a,null),ie(a,s),ie(a,l),ie(l,m),ie(l,g),ie(l,v),ie(v,r),ie(l,A),me&&me.m(l,null),ie(a,C),Oe.m(a,null),u[77](a),K||($=[un(k=lr.call(null,a,u[3])),un(u[31].call(null,a))],K=!0)},p(Ve,tt){we===(we=he(Ve))&&Te?Te.p(Ve,tt):(Te.d(1),Te=we(Ve),Te&&(Te.c(),Te.m(a,s))),tt[0]&33554432&&T!==(T=Object.entries(Ve[25]).map(af).join(" "))&&ve(r,"style",T),Ve[7]&&Ve[8]&&Ve[9]>0?me?me.p(Ve,tt):(me=Qp(Ve),me.c(),me.m(l,null)):me&&(me.d(1),me=null),Ue===(Ue=Le(Ve))&&Oe?Oe.p(Ve,tt):(Oe.d(1),Oe=Ue(Ve),Oe&&(Oe.c(),Oe.m(a,null))),en(a,Me=aa(We,[tt[0]&1049072&&I!==(I=Object.entries({[Ve[4]]:!0,"mdc-slider":!0,"mdc-slider--range":Ve[6],"mdc-slider--discrete":Ve[7],"mdc-slider--tick-marks":Ve[7]&&Ve[8],"mdc-slider--disabled":Ve[5],...Ve[20]}).filter(lf).map(cf).join(" "))&&{class:I},tt[1]&32&&Mp(Ve[36],["input$"])])),k&&Ma(k.update)&&tt[0]&8&&k.update.call(null,Ve[3])},i:Ba,o:Ba,d(Ve){Ve&&Y(a),Te.d(),me&&me.d(),Oe.d(),u[77](null),K=!1,ha($)}}}const af=([u,a])=>`${u}: ${a};`,rf=([u,a])=>`${u}: ${a};`,sf=([u,a])=>`${u}: ${a};`,of=([u,a])=>`${u}: ${a};`,lf=([u,a])=>u!==""&&a,cf=([u])=>u;function wv(u,a,s){const l=["use","class","disabled","range","discrete","tickMarks","step","min","max","value","start","end","valueToAriaValueTextFn","input$class","layout","getId","getElement"];let m=Ni(a,l);var g;const v=wa(va());let{use:r=[]}=a,{class:T=""}=a,{disabled:A=!1}=a,{range:C=!1}=a,{discrete:I=!1}=a,{tickMarks:k=!1}=a,{step:K=1}=a,{min:$=0}=a,{max:he=100}=a,{value:we=void 0}=a,{start:Te=void 0}=a,{end:me=void 0}=a,{valueToAriaValueTextFn:Le=R=>`${R}`}=a,{input$class:Ue=""}=a,Oe,We,Me,Ve,tt,it,dt,Dt,He={},Xe={},pt={},Ne={},Ft={},ut={},jt={},yt={},mi=!1,bi=!1,gi,Lt=(g=sr("SMUI:generic:input:props"))!==null&&g!==void 0?g:{},vi=sr("SMUI:addLayoutListener"),Qt,ui=$,Ui=he,pi=K,ot=I,Bi=k;if(k&&K>0){const R=he+Math.abs($);if(C&&typeof Te=="number"&&typeof me=="number"){const U=Te+Math.abs($),X=me+Math.abs($);gi=[...Array(U/K).map(()=>Jr.INACTIVE),...Array(R/K-U/K-(R-X)/K+1).map(()=>Jr.ACTIVE),...Array((R-X)/K).map(()=>Jr.INACTIVE)]}else if(typeof we=="number"){const U=we+Math.abs($);gi=[...Array(U/K+1).map(()=>Jr.ACTIVE),...Array((R-U)/K).map(()=>Jr.INACTIVE)]}}if(C&&typeof Te=="number"&&typeof me=="number"){const R=(me-Te)/(he-$),U=Te/(he-$),X=me/(he-$);ut.transform=`scaleX(${R})`,jt.left=`calc(${X*100}% -24px)`,yt.left=`calc(${U*100}% -24px)`}else if(typeof we=="number"){const R=we/(he-$);ut.transform=`scaleX(${R})`,jt.left=`calc(${R*100}% -24px)`}vi&&(Qt=vi(xn));let wi=we,Qe=Te,Nt=me;fs(()=>{s(41,We=new mv({hasClass:ki,addClass:Vi,removeClass:fn,addThumbClass:Mi,removeThumbClass:ni,getAttribute:U=>Ie().getAttribute(U),getInputValue:U=>{var X;return`${(X=C?U===Ke.START?Te:me:we)!==null&&X!==void 0?X:0}`},setInputValue:(U,X)=>{C?X===Ke.START?(s(1,Te=Number(U)),s(48,Qe=Te)):(s(2,me=Number(U)),s(49,Nt=me)):(s(0,we=Number(U)),s(47,wi=we))},getInputAttribute:ei,setInputAttribute:qt,removeInputAttribute:Xi,focusInput:U=>{C&&U===Ke.START&&Ve?Ve.focus():Me.focus()},isInputFocused:U=>(C&&U===Ke.START?Ve:Me)===document.activeElement,getThumbKnobWidth:U=>{var X;return((X=C&&U===Ke.START?Dt:dt)!==null&&X!==void 0?X:dt).getBoundingClientRect().width},getThumbBoundingClientRect:U=>{var X;return((X=C&&U===Ke.START?it:tt)!==null&&X!==void 0?X:tt).getBoundingClientRect()},getBoundingClientRect:()=>Ie().getBoundingClientRect(),isRTL:()=>getComputedStyle(Ie()).direction==="rtl",setThumbStyleProperty:si,removeThumbStyleProperty:Dn,setTrackActiveStyleProperty:ti,removeTrackActiveStyleProperty:mn,setValueIndicatorText:(U,X)=>{},getValueToAriaValueTextFn:()=>Le,updateTickMarks:U=>{s(30,gi=U)},setPointerCapture:U=>{Ie().setPointerCapture(U)},emitChangeEvent:(U,X)=>{Rr(Ie(),"SMUISlider:change",{value:U,thumb:X},void 0,!0)},emitInputEvent:(U,X)=>{Rr(Ie(),"SMUISlider:input",{value:U,thumb:X},void 0,!0)},emitDragStartEvent:(U,X)=>{C&&X===Ke.START?s(29,bi=!0):s(28,mi=!0)},emitDragEndEvent:(U,X)=>{C&&X===Ke.START?s(29,bi=!1):s(28,mi=!1)},registerEventHandler:(U,X)=>{Ie().addEventListener(U,X)},deregisterEventHandler:(U,X)=>{Ie().removeEventListener(U,X)},registerThumbEventHandler:(U,X,ce)=>{var ne;(ne=C&&U===Ke.START?it:tt)===null||ne===void 0||ne.addEventListener(X,ce)},deregisterThumbEventHandler:(U,X,ce)=>{var ne;(ne=C&&U===Ke.START?it:tt)===null||ne===void 0||ne.removeEventListener(X,ce)},registerInputEventHandler:(U,X,ce)=>{var ne;(ne=C&&U===Ke.START?Ve:Me)===null||ne===void 0||ne.addEventListener(X,ce)},deregisterInputEventHandler:(U,X,ce)=>{var ne;(ne=C&&U===Ke.START?Ve:Me)===null||ne===void 0||ne.removeEventListener(X,ce)},registerBodyEventHandler:(U,X)=>{document.body.addEventListener(U,X)},deregisterBodyEventHandler:(U,X)=>{document.body.removeEventListener(U,X)},registerWindowEventHandler:(U,X)=>{window.addEventListener(U,X)},deregisterWindowEventHandler:(U,X)=>{window.removeEventListener(U,X)}}));const R={get element(){return Ie()},activateRipple(){A||s(28,mi=!0)},deactivateRipple(){s(28,mi=!1)}};return Rr(Oe,"SMUIGenericInput:mount",R),We.init(),We.layout({skipUpdateUI:!0}),()=>{Rr(Oe,"SMUIGenericInput:unmount",R),We.destroy()}}),Al(()=>{Qt&&Qt()});function ki(R){return R in He?He[R]:Ie().classList.contains(R)}function Vi(R){He[R]||s(20,He[R]=!0,He)}function fn(R){(!(R in He)||He[R])&&s(20,He[R]=!1,He)}function Mi(R,U){C&&U===Ke.START?Xe[R]||s(21,Xe[R]=!0,Xe):pt[R]||s(22,pt[R]=!0,pt)}function ni(R,U){C&&U===Ke.START?(!(R in Xe)||Xe[R])&&s(21,Xe[R]=!1,Xe):(!(R in pt)||pt[R])&&s(22,pt[R]=!1,pt)}function si(R,U,X){C&&X===Ke.START?yt[R]!=U&&(U===""||U==null?(delete yt[R],s(27,yt)):s(27,yt[R]=U,yt)):jt[R]!=U&&(U===""||U==null?(delete jt[R],s(26,jt)):s(26,jt[R]=U,jt))}function Dn(R,U){C&&U===Ke.START?R in yt&&(delete yt[R],s(27,yt)):R in jt&&(delete jt[R],s(26,jt))}function ei(R,U){var X,ce,ne;return C&&U===Ke.START?R==="value"?`${Te}`:R in Ft?(X=Ft[R])!==null&&X!==void 0?X:null:(ce=Ve==null?void 0:Ve.getAttribute(R))!==null&&ce!==void 0?ce:null:R==="value"?`${C?me:we}`:R in Ne?(ne=Ne[R])!==null&&ne!==void 0?ne:null:Me.getAttribute(R)}function qt(R,U,X){C&&X===Ke.START?Ft[R]!==U&&s(24,Ft[R]=U,Ft):Ne[R]!==U&&s(23,Ne[R]=U,Ne)}function Xi(R,U){C&&U===Ke.START?(!(R in Ft)||Ft[R]!=null)&&s(24,Ft[R]=void 0,Ft):(!(R in Ne)||Ne[R]!=null)&&s(23,Ne[R]=void 0,Ne)}function ti(R,U){ut[R]!=U&&(U===""||U==null?(delete ut[R],s(25,ut)):s(25,ut[R]=U,ut))}function mn(R){R in ut&&(delete ut[R],s(25,ut))}function xn(){return We.layout()}function se(){return Lt&&Lt.id}function Ie(){return Oe}function mt(R){Xo.call(this,u,R)}function li(R){Xo.call(this,u,R)}function $t(R){Xo.call(this,u,R)}function di(R){Xo.call(this,u,R)}function Pi(R){Xo.call(this,u,R)}function tn(R){Xo.call(this,u,R)}function xi(R){Di[R?"unshift":"push"](()=>{Ve=R,s(15,Ve)})}function nt(){Te=Bh(this.value),s(1,Te)}function ii(R){Di[R?"unshift":"push"](()=>{Me=R,s(14,Me)})}function Ut(){me=Bh(this.value),s(2,me)}function Yi(R){Di[R?"unshift":"push"](()=>{Me=R,s(14,Me)})}function wn(){we=Bh(this.value),s(0,we)}function Vt(R){Di[R?"unshift":"push"](()=>{Dt=R,s(19,Dt)})}function Cn(R){Di[R?"unshift":"push"](()=>{it=R,s(17,it)})}const Zi=R=>Mi(R,Ke.START),sa=R=>ni(R,Ke.START),Fi=(R,U)=>si(R,U,Ke.START);function on(R){Di[R?"unshift":"push"](()=>{dt=R,s(18,dt)})}function fi(R){Di[R?"unshift":"push"](()=>{tt=R,s(16,tt)})}const Bn=R=>Mi(R,Ke.END),gn=R=>ni(R,Ke.END),_n=(R,U)=>si(R,U,Ke.END);function Sn(R){Di[R?"unshift":"push"](()=>{dt=R,s(18,dt)})}function Zn(R){Di[R?"unshift":"push"](()=>{tt=R,s(16,tt)})}const hn=R=>Mi(R,Ke.END),W=R=>ni(R,Ke.END),L=(R,U)=>si(R,U,Ke.END);function B(R){Di[R?"unshift":"push"](()=>{Oe=R,s(13,Oe)})}return u.$$set=R=>{a=Jt(Jt({},a),xa(R)),s(36,m=Ni(a,l)),"use"in R&&s(3,r=R.use),"class"in R&&s(4,T=R.class),"disabled"in R&&s(5,A=R.disabled),"range"in R&&s(6,C=R.range),"discrete"in R&&s(7,I=R.discrete),"tickMarks"in R&&s(8,k=R.tickMarks),"step"in R&&s(9,K=R.step),"min"in R&&s(10,$=R.min),"max"in R&&s(11,he=R.max),"value"in R&&s(0,we=R.value),"start"in R&&s(1,Te=R.start),"end"in R&&s(2,me=R.end),"valueToAriaValueTextFn"in R&&s(37,Le=R.valueToAriaValueTextFn),"input$class"in R&&s(12,Ue=R.input$class)},u.$$.update=()=>{u.$$.dirty[0]&1024|u.$$.dirty[1]&3072&&$!==ui&&(We&&We.setMin($),s(42,ui=$)),u.$$.dirty[0]&2048|u.$$.dirty[1]&5120&&he!==Ui&&(We&&We.setMax(he),s(43,Ui=he)),u.$$.dirty[0]&512|u.$$.dirty[1]&9216&&K!==pi&&(We&&We.setStep(K),s(44,pi=K)),u.$$.dirty[0]&128|u.$$.dirty[1]&17408&&I!==ot&&(We&&We.setIsDiscrete(I),s(45,ot=I)),u.$$.dirty[0]&256|u.$$.dirty[1]&33792&&k!==Bi&&(We&&We.setHasTickMarks(k),s(46,Bi=k)),u.$$.dirty[0]&7|u.$$.dirty[1]&459776&&We&&(wi!==we&&typeof we=="number"&&We.setValue(we),Qe!==Te&&typeof Te=="number"&&We.setValueStart(Te),Nt!==me&&typeof me=="number"&&We.setValue(me),s(47,wi=we),s(48,Qe=Te),s(49,Nt=me),We.layout())},[we,Te,me,r,T,A,C,I,k,K,$,he,Ue,Oe,Me,Ve,tt,it,dt,Dt,He,Xe,pt,Ne,Ft,ut,jt,yt,mi,bi,gi,v,Lt,Mi,ni,si,m,Le,xn,se,Ie,We,ui,Ui,pi,ot,Bi,wi,Qe,Nt,mt,li,$t,di,Pi,tn,xi,nt,ii,Ut,Yi,wn,Vt,Cn,Zi,sa,Fi,on,fi,Bn,gn,_n,Sn,Zn,hn,W,L,B]}class Cv extends An{constructor(a){super(),kn(this,a,wv,xv,Mn,{use:3,class:4,disabled:5,range:6,discrete:7,tickMarks:8,step:9,min:10,max:11,value:0,start:1,end:2,valueToAriaValueTextFn:37,input$class:12,layout:38,getId:39,getElement:40},null,[-1,-1,-1])}get layout(){return this.$$.ctx[38]}get getId(){return this.$$.ctx[39]}get getElement(){return this.$$.ctx[40]}}const Tv=u=>({noResultsText:u[0]&2048}),uf=u=>({noResultsText:u[11]}),Sv=u=>({createText:u[0]&16384}),hf=u=>({createText:u[14]}),Ev=u=>({loadingText:u[0]&4096}),df=u=>({loadingText:u[12]});function pf(u,a,s){const l=u.slice();return l[116]=a[s],l[118]=s,l}const Iv=u=>({item:u[1]&1,label:u[1]&1}),ff=u=>({item:u[116].item,label:u[116].highlighted?u[116].highlighted:u[116].label});function mf(u,a,s){const l=u.slice();return l[119]=a[s],l}const Av=u=>({label:u[0]&2,item:u[0]&2}),gf=u=>({label:u[38](u[119]),item:u[119],unselectItem:u[45]});function _f(u,a,s){const l=u.slice();return l[118]=a[s],l}function kv(u){let a,s=u[1],l=[];for(let m=0;m<s.length;m+=1)l[m]=yf(_f(u,s,m));return{c(){for(let m=0;m<l.length;m+=1)l[m].c();a=sn()},l(m){for(let g=0;g<l.length;g+=1)l[g].l(m);a=sn()},m(m,g){for(let v=0;v<l.length;v+=1)l[v].m(m,g);et(m,a,g)},p(m,g){if(g[0]&18|g[1]&128){s=m[1];let v;for(v=0;v<s.length;v+=1){const r=_f(m,s,v);l[v]?l[v].p(r,g):(l[v]=yf(r),l[v].c(),l[v].m(a.parentNode,a))}for(;v<l.length;v+=1)l[v].d(1);l.length=s.length}},d(m){wo(l,m),m&&Y(a)}}}function Mv(u){let a,s;return{c(){a=ge("option"),s=wt(u[3]),this.h()},l(l){a=_e(l,"OPTION",{class:!0});var m=Ce(a);s=Ct(m,u[3]),m.forEach(Y),this.h()},h(){a.__value=u[2],a.value=a.__value,a.selected=!0,ve(a,"class","svelte-1nqq7zl")},m(l,m){et(l,a,m),ie(a,s)},p(l,m){m[0]&8&&nn(s,l[3]),m[0]&4&&(a.__value=l[2],a.value=a.__value)},d(l){l&&Y(a)}}}function yf(u){let a,s=u[38](u[118])+"",l,m,g;return{c(){a=ge("option"),l=wt(s),m=St(),this.h()},l(v){a=_e(v,"OPTION",{class:!0});var r=Ce(a);l=Ct(r,s),m=Et(r),r.forEach(Y),this.h()},h(){a.__value=g=u[4](u[118],!0),a.value=a.__value,a.selected=!0,ve(a,"class","svelte-1nqq7zl")},m(v,r){et(v,a,r),ie(a,l),ie(a,m)},p(v,r){r[0]&2&&s!==(s=v[38](v[118])+"")&&nn(l,s),r[0]&18&&g!==(g=v[4](v[118],!0))&&(a.__value=g,a.value=a.__value)},d(v){v&&Y(a)}}}function bf(u){let a,s,l=u[1],m=[];for(let v=0;v<l.length;v+=1)m[v]=vf(mf(u,l,v));const g=v=>It(m[v],1,1,()=>{m[v]=null});return{c(){for(let v=0;v<m.length;v+=1)m[v].c();a=sn()},l(v){for(let r=0;r<m.length;r+=1)m[r].l(v);a=sn()},m(v,r){for(let T=0;T<m.length;T+=1)m[T].m(v,r);et(v,a,r),s=!0},p(v,r){if(r[0]&2|r[1]&16512|r[2]&1048576){l=v[1];let T;for(T=0;T<l.length;T+=1){const A=mf(v,l,T);m[T]?(m[T].p(A,r),_t(m[T],1)):(m[T]=vf(A),m[T].c(),_t(m[T],1),m[T].m(a.parentNode,a))}for(es(),T=l.length;T<m.length;T+=1)g(T);$r()}},i(v){if(!s){for(let r=0;r<l.length;r+=1)_t(m[r]);s=!0}},o(v){m=m.filter(Boolean);for(let r=0;r<m.length;r+=1)It(m[r]);s=!1},d(v){wo(m,v),v&&Y(a)}}}function Dv(u){let a,s,l=u[38](u[119])+"",m,g,v,r,T,A;return{c(){a=ge("div"),s=ge("span"),m=wt(l),g=St(),v=ge("span"),r=St(),this.h()},l(C){a=_e(C,"DIV",{class:!0});var I=Ce(a);s=_e(I,"SPAN",{class:!0});var k=Ce(s);m=Ct(k,l),k.forEach(Y),g=Et(I),v=_e(I,"SPAN",{class:!0}),Ce(v).forEach(Y),I.forEach(Y),r=Et(C),this.h()},h(){ve(s,"class","tag svelte-1nqq7zl"),ve(v,"class","tag is-delete svelte-1nqq7zl"),ve(a,"class","tags has-addons svelte-1nqq7zl")},m(C,I){et(C,a,I),ie(a,s),ie(s,m),ie(a,g),ie(a,v),et(C,r,I),T||(A=Ri(v,"click",nm(function(){Ma(u[45](u[119]))&&u[45](u[119]).apply(this,arguments)})),T=!0)},p(C,I){u=C,I[0]&2&&l!==(l=u[38](u[119])+"")&&nn(m,l)},d(C){C&&Y(a),C&&Y(r),T=!1,A()}}}function vf(u){let a;const s=u[83].tag,l=Jn(s,u,u[82],gf),m=l||Dv(u);return{c(){m&&m.c()},l(g){m&&m.l(g)},m(g,v){m&&m.m(g,v),a=!0},p(g,v){l?l.p&&(!a||v[0]&2|v[2]&1048576)&&Qn(l,s,g,g[82],a?ea(s,g[82],v,Av):$n(g[82]),gf):m&&m.p&&(!a||v[0]&2)&&m.p(g,a?v:[-1,-1,-1,-1])},i(g){a||(_t(m,g),a=!0)},o(g){It(m,g),a=!1},d(g){m&&m.d(g)}}}function xf(u){let a,s,l,m;return{c(){a=ge("span"),s=wt("\u2716"),this.h()},l(g){a=_e(g,"SPAN",{class:!0});var v=Ce(a);s=Ct(v,"\u2716"),v.forEach(Y),this.h()},h(){ve(a,"class","autocomplete-clear-button svelte-1nqq7zl")},m(g,v){et(g,a,v),ie(a,s),l||(m=Ri(a,"click",u[49]),l=!0)},p:Ba,d(g){g&&Y(a),l=!1,m()}}}function Pv(u){let a,s;const l=u[83]["no-results"],m=Jn(l,u,u[82],uf),g=m||Bv(u);return{c(){a=ge("div"),g&&g.c(),this.h()},l(v){a=_e(v,"DIV",{class:!0});var r=Ce(a);g&&g.l(r),r.forEach(Y),this.h()},h(){ve(a,"class","autocomplete-list-item-no-results svelte-1nqq7zl")},m(v,r){et(v,a,r),g&&g.m(a,null),s=!0},p(v,r){m?m.p&&(!s||r[0]&2048|r[2]&1048576)&&Qn(m,l,v,v[82],s?ea(l,v[82],r,Tv):$n(v[82]),uf):g&&g.p&&(!s||r[0]&2048)&&g.p(v,s?r:[-1,-1,-1,-1])},i(v){s||(_t(g,v),s=!0)},o(v){It(g,v),s=!1},d(v){v&&Y(a),g&&g.d(v)}}}function Lv(u){let a,s,l,m;const g=u[83].create,v=Jn(g,u,u[82],hf),r=v||Fv(u);return{c(){a=ge("div"),r&&r.c(),this.h()},l(T){a=_e(T,"DIV",{class:!0});var A=Ce(a);r&&r.l(A),A.forEach(Y),this.h()},h(){ve(a,"class","autocomplete-list-item-create svelte-1nqq7zl")},m(T,A){et(T,a,A),r&&r.m(a,null),s=!0,l||(m=Ri(a,"click",u[39]),l=!0)},p(T,A){v?v.p&&(!s||A[0]&16384|A[2]&1048576)&&Qn(v,g,T,T[82],s?ea(g,T[82],A,Sv):$n(T[82]),hf):r&&r.p&&(!s||A[0]&16384)&&r.p(T,s?A:[-1,-1,-1,-1])},i(T){s||(_t(r,T),s=!0)},o(T){It(r,T),s=!1},d(T){T&&Y(a),r&&r.d(T),l=!1,m()}}}function Rv(u){let a,s;const l=u[83].loading,m=Jn(l,u,u[82],df),g=m||Ov(u);return{c(){a=ge("div"),g&&g.c(),this.h()},l(v){a=_e(v,"DIV",{class:!0});var r=Ce(a);g&&g.l(r),r.forEach(Y),this.h()},h(){ve(a,"class","autocomplete-list-item-loading svelte-1nqq7zl")},m(v,r){et(v,a,r),g&&g.m(a,null),s=!0},p(v,r){m?m.p&&(!s||r[0]&4096|r[2]&1048576)&&Qn(m,l,v,v[82],s?ea(l,v[82],r,Ev):$n(v[82]),df):g&&g.p&&(!s||r[0]&4096)&&g.p(v,s?r:[-1,-1,-1,-1])},i(v){s||(_t(g,v),s=!0)},o(v){It(g,v),s=!1},d(v){v&&Y(a),g&&g.d(v)}}}function zv(u){let a,s,l,m=u[31],g=[];for(let T=0;T<m.length;T+=1)g[T]=Cf(pf(u,m,T));const v=T=>It(g[T],1,1,()=>{g[T]=null});let r=u[5]>0&&u[31].length>u[5]&&Tf(u);return{c(){for(let T=0;T<g.length;T+=1)g[T].c();a=St(),r&&r.c(),s=sn()},l(T){for(let A=0;A<g.length;A+=1)g[A].l(T);a=Et(T),r&&r.l(T),s=sn()},m(T,A){for(let C=0;C<g.length;C+=1)g[C].m(T,A);et(T,a,A),r&&r.m(T,A),et(T,s,A),l=!0},p(T,A){if(A[0]&1073741856|A[1]&524801|A[2]&1048576){m=T[31];let C;for(C=0;C<m.length;C+=1){const I=pf(T,m,C);g[C]?(g[C].p(I,A),_t(g[C],1)):(g[C]=Cf(I),g[C].c(),_t(g[C],1),g[C].m(a.parentNode,a))}for(es(),C=m.length;C<g.length;C+=1)v(C);$r()}T[5]>0&&T[31].length>T[5]?r?r.p(T,A):(r=Tf(T),r.c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null)},i(T){if(!l){for(let A=0;A<m.length;A+=1)_t(g[A]);l=!0}},o(T){g=g.filter(Boolean);for(let A=0;A<g.length;A+=1)It(g[A]);l=!1},d(T){wo(g,T),T&&Y(a),r&&r.d(T),T&&Y(s)}}}function Bv(u){let a;return{c(){a=wt(u[11])},l(s){a=Ct(s,u[11])},m(s,l){et(s,a,l)},p(s,l){l[0]&2048&&nn(a,s[11])},d(s){s&&Y(a)}}}function Fv(u){let a;return{c(){a=wt(u[14])},l(s){a=Ct(s,u[14])},m(s,l){et(s,a,l)},p(s,l){l[0]&16384&&nn(a,s[14])},d(s){s&&Y(a)}}}function Ov(u){let a;return{c(){a=wt(u[12])},l(s){a=Ct(s,u[12])},m(s,l){et(s,a,l)},p(s,l){l[0]&4096&&nn(a,s[12])},d(s){s&&Y(a)}}}function wf(u){let a,s,l,m,g;const v=u[83].item,r=Jn(v,u,u[82],ff),T=r||Vv(u);function A(){return u[86](u[116])}function C(){return u[87](u[118])}return{c(){a=ge("div"),T&&T.c(),this.h()},l(I){a=_e(I,"DIV",{class:!0});var k=Ce(a);T&&T.l(k),k.forEach(Y),this.h()},h(){ve(a,"class",s="autocomplete-list-item "+(u[118]===u[30]?"selected":"")+" svelte-1nqq7zl"),Tl(a,"confirmed",u[50](u[116].item))},m(I,k){et(I,a,k),T&&T.m(a,null),l=!0,m||(g=[Ri(a,"click",A),Ri(a,"pointerenter",C)],m=!0)},p(I,k){u=I,r?r.p&&(!l||k[1]&1|k[2]&1048576)&&Qn(r,v,u,u[82],l?ea(v,u[82],k,Iv):$n(u[82]),ff):T&&T.p&&(!l||k[1]&1)&&T.p(u,l?k:[-1,-1,-1,-1]),(!l||k[0]&1073741824&&s!==(s="autocomplete-list-item "+(u[118]===u[30]?"selected":"")+" svelte-1nqq7zl"))&&ve(a,"class",s),k[0]&1073741824|k[1]&524289&&Tl(a,"confirmed",u[50](u[116].item))},i(I){l||(_t(T,I),l=!0)},o(I){It(T,I),l=!1},d(I){I&&Y(a),T&&T.d(I),m=!1,ha(g)}}}function Nv(u){let a,s=u[116].label+"",l;return{c(){a=new am(!1),l=sn(),this.h()},l(m){a=rm(m,!1),l=sn(),this.h()},h(){a.a=l},m(m,g){a.m(s,m,g),et(m,l,g)},p(m,g){g[1]&1&&s!==(s=m[116].label+"")&&a.p(s)},d(m){m&&Y(l),m&&a.d()}}}function Uv(u){let a,s=u[116].highlighted+"",l;return{c(){a=new am(!1),l=sn(),this.h()},l(m){a=rm(m,!1),l=sn(),this.h()},h(){a.a=l},m(m,g){a.m(s,m,g),et(m,l,g)},p(m,g){g[1]&1&&s!==(s=m[116].highlighted+"")&&a.p(s)},d(m){m&&Y(l),m&&a.d()}}}function Vv(u){let a;function s(g,v){return g[116].highlighted?Uv:Nv}let l=s(u),m=l(u);return{c(){m.c(),a=sn()},l(g){m.l(g),a=sn()},m(g,v){m.m(g,v),et(g,a,v)},p(g,v){l===(l=s(g))&&m?m.p(g,v):(m.d(1),m=l(g),m&&(m.c(),m.m(a.parentNode,a)))},d(g){m.d(g),g&&Y(a)}}}function Cf(u){let a,s,l=u[116]&&(u[5]<=0||u[118]<u[5])&&wf(u);return{c(){l&&l.c(),a=sn()},l(m){l&&l.l(m),a=sn()},m(m,g){l&&l.m(m,g),et(m,a,g),s=!0},p(m,g){m[116]&&(m[5]<=0||m[118]<m[5])?l?(l.p(m,g),g[0]&32|g[1]&1&&_t(l,1)):(l=wf(m),l.c(),_t(l,1),l.m(a.parentNode,a)):l&&(es(),It(l,1,1,()=>{l=null}),$r())},i(m){s||(_t(l),s=!0)},o(m){It(l),s=!1},d(m){l&&l.d(m),m&&Y(a)}}}function Tf(u){let a,s=u[13]&&Sf(u);return{c(){s&&s.c(),a=sn()},l(l){s&&s.l(l),a=sn()},m(l,m){s&&s.m(l,m),et(l,a,m)},p(l,m){l[13]?s?s.p(l,m):(s=Sf(l),s.c(),s.m(a.parentNode,a)):s&&(s.d(1),s=null)},d(l){s&&s.d(l),l&&Y(a)}}}function Sf(u){let a,s,l=u[31].length-u[5]+"",m,g,v;return{c(){a=ge("div"),s=wt("..."),m=wt(l),g=St(),v=wt(u[13]),this.h()},l(r){a=_e(r,"DIV",{class:!0});var T=Ce(a);s=Ct(T,"..."),m=Ct(T,l),g=Et(T),v=Ct(T,u[13]),T.forEach(Y),this.h()},h(){ve(a,"class","autocomplete-list-item-no-results svelte-1nqq7zl")},m(r,T){et(r,a,T),ie(a,s),ie(a,m),ie(a,g),ie(a,v)},p(r,T){T[0]&32|T[1]&1&&l!==(l=r[31].length-r[5]+"")&&nn(m,l),T[0]&8192&&nn(v,r[13])},d(r){r&&Y(a)}}}function jv(u){let a,s,l,m,g,v,r,T,A,C,I,k,K,$,he,we,Te,me,Le,Ue;function Oe(He,Xe){if(!He[6]&&He[2])return Mv;if(He[6]&&He[1])return kv}let We=Oe(u),Me=We&&We(u),Ve=u[6]&&u[1]&&bf(u),tt=u[35]&&xf(u);const it=[zv,Rv,Lv,Pv],dt=[];function Dt(He,Xe){return He[31]&&He[31].length>0?0:He[34]&&He[12]?1:He[7]?2:He[11]?3:-1}return~($=Dt(u))&&(he=dt[$]=it[$](u)),{c(){a=ge("div"),s=ge("select"),Me&&Me.c(),l=St(),m=ge("div"),Ve&&Ve.c(),g=St(),v=ge("input"),I=St(),tt&&tt.c(),k=St(),K=ge("div"),he&&he.c(),this.h()},l(He){a=_e(He,"DIV",{class:!0});var Xe=Ce(a);s=_e(Xe,"SELECT",{name:!0,id:!0,class:!0});var pt=Ce(s);Me&&Me.l(pt),pt.forEach(Y),l=Et(Xe),m=_e(Xe,"DIV",{class:!0});var Ne=Ce(m);Ve&&Ve.l(Ne),g=Et(Ne),v=_e(Ne,"INPUT",{type:!0,class:!0,id:!0,autocomplete:!0,placeholder:!0,name:!0,title:!0,tabindex:!0}),I=Et(Ne),tt&&tt.l(Ne),Ne.forEach(Y),k=Et(Xe),K=_e(Xe,"DIV",{class:!0});var Ft=Ce(K);he&&he.l(Ft),Ft.forEach(Y),Xe.forEach(Y),this.h()},h(){ve(s,"name",u[20]),ve(s,"id",u[21]),s.multiple=u[6],ve(s,"class","svelte-1nqq7zl"),ve(v,"type","text"),ve(v,"class",r=(u[17]?u[17]:"")+" "+(u[27]?"":"input autocomplete-input")+" svelte-1nqq7zl"),ve(v,"id",T=u[18]?u[18]:""),ve(v,"autocomplete",A=u[23]?"on":"off"),ve(v,"placeholder",u[15]),ve(v,"name",u[19]),v.disabled=u[26],v.required=u[28],ve(v,"title",u[22]),v.readOnly=C=u[24]||u[8]&&u[1],ve(v,"tabindex",u[29]),ve(m,"class","input-container svelte-1nqq7zl"),ve(K,"class",we=(u[25]?u[25]:"")+" autocomplete-list "+(u[36]?"":"hidden")+" is-fullwidth svelte-1nqq7zl"),ve(a,"class",Te=(u[16]?u[16]:"")+" "+(u[9]||!u[0].length?"hide-arrow":"")+" "+(u[6]?"is-multiple":"")+" autocomplete select is-fullwidth "+u[37]+" svelte-1nqq7zl"),Tl(a,"show-clear",u[35]),Tl(a,"is-loading",u[10]&&u[34])},m(He,Xe){et(He,a,Xe),ie(a,s),Me&&Me.m(s,null),ie(a,l),ie(a,m),Ve&&Ve.m(m,null),ie(m,g),ie(m,v),u[84](v),ma(v,u[3]),ie(m,I),tt&&tt.m(m,null),ie(a,k),ie(a,K),~$&&dt[$].m(K,null),u[88](K),me=!0,Le||(Ue=[Ri(window,"click",u[41]),Ri(v,"input",u[85]),Ri(v,"input",u[44]),Ri(v,"focus",u[47]),Ri(v,"blur",u[48]),Ri(v,"keydown",u[42]),Ri(v,"click",u[46]),Ri(v,"keypress",u[43])],Le=!0)},p(He,Xe){We===(We=Oe(He))&&Me?Me.p(He,Xe):(Me&&Me.d(1),Me=We&&We(He),Me&&(Me.c(),Me.m(s,null))),(!me||Xe[0]&1048576)&&ve(s,"name",He[20]),(!me||Xe[0]&2097152)&&ve(s,"id",He[21]),(!me||Xe[0]&64)&&(s.multiple=He[6]),He[6]&&He[1]?Ve?(Ve.p(He,Xe),Xe[0]&66&&_t(Ve,1)):(Ve=bf(He),Ve.c(),_t(Ve,1),Ve.m(m,g)):Ve&&(es(),It(Ve,1,1,()=>{Ve=null}),$r()),(!me||Xe[0]&134348800&&r!==(r=(He[17]?He[17]:"")+" "+(He[27]?"":"input autocomplete-input")+" svelte-1nqq7zl"))&&ve(v,"class",r),(!me||Xe[0]&262144&&T!==(T=He[18]?He[18]:""))&&ve(v,"id",T),(!me||Xe[0]&8388608&&A!==(A=He[23]?"on":"off"))&&ve(v,"autocomplete",A),(!me||Xe[0]&32768)&&ve(v,"placeholder",He[15]),(!me||Xe[0]&524288)&&ve(v,"name",He[19]),(!me||Xe[0]&67108864)&&(v.disabled=He[26]),(!me||Xe[0]&268435456)&&(v.required=He[28]),(!me||Xe[0]&4194304)&&ve(v,"title",He[22]),(!me||Xe[0]&16777474&&C!==(C=He[24]||He[8]&&He[1]))&&(v.readOnly=C),(!me||Xe[0]&536870912)&&ve(v,"tabindex",He[29]),Xe[0]&8&&v.value!==He[3]&&ma(v,He[3]),He[35]?tt?tt.p(He,Xe):(tt=xf(He),tt.c(),tt.m(m,null)):tt&&(tt.d(1),tt=null);let pt=$;$=Dt(He),$===pt?~$&&dt[$].p(He,Xe):(he&&(es(),It(dt[pt],1,1,()=>{dt[pt]=null}),$r()),~$?(he=dt[$],he?he.p(He,Xe):(he=dt[$]=it[$](He),he.c()),_t(he,1),he.m(K,null)):he=null),(!me||Xe[0]&33554432|Xe[1]&32&&we!==(we=(He[25]?He[25]:"")+" autocomplete-list "+(He[36]?"":"hidden")+" is-fullwidth svelte-1nqq7zl"))&&ve(K,"class",we),(!me||Xe[0]&66113&&Te!==(Te=(He[16]?He[16]:"")+" "+(He[9]||!He[0].length?"hide-arrow":"")+" "+(He[6]?"is-multiple":"")+" autocomplete select is-fullwidth "+He[37]+" svelte-1nqq7zl"))&&ve(a,"class",Te),Xe[0]&66113|Xe[1]&16&&Tl(a,"show-clear",He[35]),Xe[0]&67137|Xe[1]&8&&Tl(a,"is-loading",He[10]&&He[34])},i(He){me||(_t(Ve),_t(he),me=!0)},o(He){It(Ve),It(he),me=!1},d(He){He&&Y(a),Me&&Me.d(),Ve&&Ve.d(),u[84](null),tt&&tt.d(),~$&&dt[$].d(),u[88](null),Le=!1,ha(Ue)}}}function Gv(u,a){if(typeof u!="function"){console.error("Not a function: "+u+", argument: "+a);return}let s;try{s=u(a)}catch{console.warn("Error executing Autocomplete function on value: "+a+" function: "+u)}return s}function xu(u,a){let s=Gv(u,a);return s==null&&(s=""),typeof s!="string"&&(s=s.toString()),s}function qh(u,a){if(!u)return 0;const s=u.keywords;let l=0;return a.forEach(m=>{s.includes(m)&&l++}),l}function Hv(u,a,s){return qh(a,s)-qh(u,s)}function wu(u){return u.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function qv(u,a,s){let l,m,{$$slots:g={},$$scope:v}=a,{items:r=[]}=a,{searchFunction:T=!1}=a,{labelFieldName:A=void 0}=a,{keywordsFieldName:C=A}=a,{valueFieldName:I=void 0}=a,{labelFunction:k=function(ee){return ee==null?"":A?ee[A]:ee}}=a,{keywordsFunction:K=function(ee){return ee==null?"":C?ee[C]:k(ee)}}=a,{valueFunction:$=function(ee,Gt=!1){return ee==null?ee:!tt||Gt?I?ee[I]:ee:ee.map(Wt=>I?Wt[I]:Wt)}}=a,{keywordsCleanFunction:he=function(ee){return ee}}=a,{textCleanFunction:we=function(ee){return ee}}=a,{beforeChange:Te=function(ee,Gt){return!0}}=a,{onChange:me=function(ee){}}=a,{onFocus:Le=function(){}}=a,{onBlur:Ue=function(){}}=a,{onCreate:Oe=function(ee){qt&&console.log("onCreate: "+ee)}}=a,{selectFirstIfEmpty:We=!1}=a,{minCharactersToSearch:Me=1}=a,{maxItemsToShowInList:Ve=0}=a,{multiple:tt=!1}=a,{create:it=!1}=a,{ignoreAccents:dt=!0}=a,{matchAllKeywords:Dt=!0}=a,{sortByMatchedKeywords:He=!1}=a,{itemFilterFunction:Xe=void 0}=a,{itemSortFunction:pt=void 0}=a,{lock:Ne=!1}=a,{delay:Ft=0}=a,{localFiltering:ut=!0}=a,{localSorting:jt=!0}=a,{cleanUserText:yt=!0}=a,{closeOnBlur:mi=!1}=a,{hideArrow:bi=!1}=a,{showClear:gi=!1}=a,{showLoadingIndicator:Lt=!1}=a,{noResultsText:vi="No results found"}=a,{loadingText:Qt="Loading results..."}=a,{moreItemsText:ui="items not shown"}=a,{createText:Ui="Not found, add anyway?"}=a,{placeholder:pi=void 0}=a,{className:ot=void 0}=a,{inputClassName:Bi=void 0}=a,{inputId:wi=void 0}=a,{name:Qe=void 0}=a,{selectName:Nt=void 0}=a,{selectId:ki=void 0}=a,{title:Vi=void 0}=a,{html5autocomplete:fn=void 0}=a,{readonly:Mi=void 0}=a,{dropdownClassName:ni=void 0}=a,{disabled:si=!1}=a,{noInputStyles:Dn=!1}=a,{required:ei=null}=a,{debug:qt=!1}=a,{tabindex:Xi=0}=a,{selectedItem:ti=tt?[]:void 0}=a,{value:mn=void 0}=a,{highlightedItem:xn=void 0}=a;const se="sautocomplete-"+Math.floor(Math.random()*1e3);let Ie,mt,li=!1,$t=!1,di=-1,{text:Pi}=a,tn=0,xi,nt=[],ii=0,Ut=0,Yi;function wn(ee){return xu(k,ee)}function Vt(ee){const Gt=xu(K,ee);let Wt=xu(he,Gt);return Wt=Wt.toLowerCase().trim(),dt&&(Wt=wu(Wt)),qt&&console.log("Extracted keywords: '"+Wt+"' from item: "+JSON.stringify(ee)),Wt}function Cn(){let ee;qt&&(ee=`Autocomplete prepare list ${wi?`(id: ${wi})`:""}`,console.time(ee),console.log("Prepare items to search"),console.log("items: "+JSON.stringify(r))),Array.isArray(r)||(console.warn("Autocomplete items / search function did not return array but",r),s(0,r=[]));const Gt=r?r.length:0;nt=new Array(Gt),Gt>0&&r.forEach((Wt,Ci)=>{const Ln=Zi(Wt);Ln===void 0&&console.log("Undefined item for: ",Wt),nt[Ci]=Ln}),s(31,xi=nt),qt&&(console.log(nt.length+" items to search"),console.timeEnd(ee))}function Zi(ee){return{keywords:ut?Vt(ee):[],label:wn(ee),item:ee}}function sa(){s(2,mn=$(ti)),s(3,Pi=tt?"":wn(ti)),s(31,xi=nt),me(ti)}function Fi(ee){if(ee==null)return"";if(!yt)return ee;const Gt=ee.replace(/[&/\\#,+()$~%.'":*?<>{}]/g," ").trim();return xu(we,Gt).toLowerCase().trim()}async function on(){let ee;qt&&(ee=`Autocomplete search ${wi?`(id: ${wi})`:""}`,console.time(ee),console.log("Searching user entered text: '"+Pi+"'"));let Gt=Fi(Pi);if(Me>1&&Gt.length<Me&&(Gt=""),s(81,tn=Gt.length),qt&&console.log("Changed user entered text '"+Pi+"' into '"+Gt+"'"),Gt===""){T?(s(0,r=[]),qt&&console.log("User entered text is empty clear list of items")):(s(31,xi=nt),qt&&console.log("User entered text is empty set the list of items to all items")),Zt(),qt&&console.timeEnd(ee);return}if(!T)Bn(Gt);else{ii=ii+1;const Wt=ii;if(s(34,$t=!0),T.constructor.name==="AsyncGeneratorFunction"){for await(const Ci of T(Gt,Ve)){if(Wt<Ut)return!1;Wt>Ut&&s(0,r=[]),Ut=Wt,s(0,r=[...r,...Ci]),Bn(Gt)}Ut<Wt&&(Ut=Wt,s(0,r=[]),Bn(Gt))}else{let Ci=await T(Gt,Ve);if(Wt<Ut)return!1;Ut=Wt,s(0,r=Ci),Bn(Gt)}s(34,$t=!1)}qt&&(console.timeEnd(ee),console.log("Search found "+xi.length+" items"))}function fi(ee,Gt){const Wt=qh(ee,Gt);return Dt?Wt>=Gt.length:Wt>0}function Bn(ee){Cn();const Wt=(dt?wu(ee):ee).split(/\s+/g).filter(En=>En!=="");let Ci;ut?(Xe?Ci=nt.filter(En=>Xe(En.item,Wt)):Ci=nt.filter(En=>fi(En,Wt)),jt&&(pt?Ci=Ci.sort((En,Oa)=>pt(En.item,Oa.item,Wt)):He&&(Ci=Ci.sort((En,Oa)=>Hv(En,Oa,Wt))))):Ci=nt;const Ln=oi(Wt,"label");return s(31,xi=Ci.map(Ln)),Zt(),!0}function gn(ee){let Gt;if(qt&&console.log("createdItem",ee),typeof ee<"u"){Cn(),s(31,xi=nt);let Wt=Ee(ee,xi);Wt<=0&&(s(0,r=[ee]),Cn(),s(31,xi=nt),Wt=0),Wt>=0&&(s(30,di=Wt),Gt=xi[di])}return Gt}function _n(ee){if(qt&&console.log("selectListItem",ee),typeof ee>"u"&&it){const Wt=Oe(Pi);if(typeof Wt<"u"){if(typeof Wt.then=="function")return Wt.then(Ci=>{if(typeof Ci<"u"){const Ln=gn(Ci);typeof Ln<"u"&&_n(Ln)}}),!0;ee=gn(Wt)}}if(typeof ee>"u")return qt&&console.log("listItem is undefined. Can not select."),!1;if(Ne&&ti)return!0;const Gt=ee.item;return Te(ti,Gt)&&(tt?ti?ti.includes(Gt)?s(1,ti=ti.filter(Wt=>Wt!==Gt)):s(1,ti=[...ti,Gt]):s(1,ti=[Gt]):(s(1,ti=void 0),s(1,ti=Gt))),!0}function Sn(){qt&&console.log("selectItem",di);const ee=xi[di];_n(ee)?(qt&&console.log("selectListItem true, closing"),lt(),tt&&Ie.focus()):qt&&console.log("selectListItem false, not closing")}function Zn(){qt&&console.log("up"),rt(),di>0&&s(30,di--,di),W()}function hn(){qt&&console.log("down"),rt(),di<xi.length-1&&s(30,di++,di),W()}function W(){qt&&console.log("highlight");const ee=".selected";qt&&console.log("Seaching DOM element: "+ee+" in "+mt);const Gt=mt&&mt.querySelector(ee);Gt?typeof Gt.scrollIntoViewIfNeeded=="function"?(qt&&console.log("Scrolling selected item into view"),Gt.scrollIntoViewIfNeeded()):Gt.scrollIntoView==="function"?(qt&&console.log("Scrolling selected item into view"),Gt.scrollIntoView()):qt&&console.warn("Could not scroll selected item into view, scrollIntoViewIfNeeded not supported"):qt&&console.warn("Selected item not found to scroll into view")}function L(ee){qt&&console.log("onListItemClick"),_n(ee)&&(lt(),tt&&Ie.focus())}function B(ee){qt&&console.log("onDocumentClick"),ee.composedPath().some(Gt=>Gt.classList&&Gt.classList.contains(se))?(qt&&console.log("onDocumentClick inside"),W()):(qt&&console.log("onDocumentClick outside"),lt())}function R(ee){qt&&console.log("onKeyDown");let Gt=ee.key;Gt==="Tab"&&ee.shiftKey&&(Gt="ShiftTab");const Ci={Tab:li?lt():null,ShiftTab:li?lt():null,ArrowDown:hn.bind(this),ArrowUp:Zn.bind(this),Escape:Be.bind(this),Backspace:tt&&ti&&ti.length&&!Pi?Ye.bind(this):null}[Gt];typeof Ci=="function"&&Ci(ee)}function U(ee){qt&&console.log("onKeyPress"),ee.key==="Enter"&&(ee.preventDefault(),X())}function X(){Sn()}function ce(ee){qt&&console.log("onInput"),s(3,Pi=ee.target.value),Yi&&clearTimeout(Yi),Ft?Yi=setTimeout(oe,Ft):oe()}function ne(ee){qt&&console.log("unselectItem",ee),s(1,ti=ti.filter(Gt=>Gt!==ee)),Ie.focus()}function oe(){on()&&(s(30,di=0),rt())}function fe(){qt&&console.log("onInputClick"),ft()}function Be(ee){qt&&console.log("onEsc"),ee.stopPropagation(),li&&(Ie.focus(),lt())}function Ye(ee){qt&&console.log("onBackspace"),ne(ti[ti.length-1])}function Re(){qt&&console.log("onFocus"),Le(),ft()}function ht(){qt&&console.log("onBlur"),mi&&lt(),Ue()}function ft(){if(qt&&console.log("resetListToAllItemsAndOpen"),Pi?!nt.length&&ti&&T&&on():s(31,xi=nt),rt(),ti){qt&&console.log("Searching currently selected item: "+JSON.stringify(ti));const ee=Ee(ti,xi);ee>=0&&(s(30,di=ee),W())}}function Ee(ee,Gt){qt&&console.log("Finding index for item",ee);let Wt=-1;for(let Ci=0;Ci<Gt.length;Ci++){const Ln=Gt[Ci];if(typeof Ln>"u"){qt&&console.log(`listItem ${Ci} is undefined. Skipping.`);continue}if(qt&&console.log("Item "+Ci+": "+JSON.stringify(Ln)),ee===Ln.item){Wt=Ci;break}}return qt&&(Wt>=0?console.log("Found index for item: "+Wt):console.warn("Not found index for item: "+ee)),Wt}function rt(){qt&&console.log("open"),!bt()&&s(80,li=!0)}function lt(){qt&&console.log("close"),s(80,li=!1),s(34,$t=!1),!Pi&&We&&(s(30,di=0),Sn())}function bt(){return Me>1&&tn<Me}function Zt(){bt()&&lt()}function Rt(){qt&&console.log("clear"),s(3,Pi=""),s(1,ti=tt?[]:void 0),setTimeout(()=>{Ie.focus(),lt()})}function oi(ee,Gt){return Wt=>{let Ci=Wt[Gt];const Ln=Object.assign({highlighted:void 0},Wt);Ln.highlighted=Ci;const En=Ci.toLowerCase(),Oa=dt?wu(En):En;if(ee&&ee.length){const ga=[];for(let oa=0;oa<ee.length;oa++){let dn=ee[oa];dt&&(dn=wu(dn));const Wn=dn.length;let On=0;do if(On=Oa.indexOf(dn,On),On>=0){let ta=On+Wn;ga.push([On,ta]),On=ta}while(On!==-1)}if(ga.length>0){const oa=new Set;for(let dn=0;dn<ga.length;dn++){const Wn=ga[dn],On=Wn[0],ta=Wn[1],Ca=En.substring(On,ta);oa.add(Ca)}for(let dn of oa){if(dn==="b")continue;const Wn=new RegExp("("+dn+")","ig"),On=Ln.highlighted.replace(Wn,"<b>$1</b>");Ln.highlighted=On}}}return Ln}}function ji(ee){return ti?tt?ti.includes(ee):ee===ti:!1}function yn(ee){Di[ee?"unshift":"push"](()=>{Ie=ee,s(32,Ie)})}function Ji(){Pi=this.value,s(3,Pi)}const Pn=ee=>L(ee),Da=ee=>{s(30,di=ee)};function Fa(ee){Di[ee?"unshift":"push"](()=>{mt=ee,s(33,mt)})}return u.$$set=ee=>{"items"in ee&&s(0,r=ee.items),"searchFunction"in ee&&s(52,T=ee.searchFunction),"labelFieldName"in ee&&s(53,A=ee.labelFieldName),"keywordsFieldName"in ee&&s(54,C=ee.keywordsFieldName),"valueFieldName"in ee&&s(55,I=ee.valueFieldName),"labelFunction"in ee&&s(56,k=ee.labelFunction),"keywordsFunction"in ee&&s(57,K=ee.keywordsFunction),"valueFunction"in ee&&s(4,$=ee.valueFunction),"keywordsCleanFunction"in ee&&s(58,he=ee.keywordsCleanFunction),"textCleanFunction"in ee&&s(59,we=ee.textCleanFunction),"beforeChange"in ee&&s(60,Te=ee.beforeChange),"onChange"in ee&&s(61,me=ee.onChange),"onFocus"in ee&&s(62,Le=ee.onFocus),"onBlur"in ee&&s(63,Ue=ee.onBlur),"onCreate"in ee&&s(64,Oe=ee.onCreate),"selectFirstIfEmpty"in ee&&s(65,We=ee.selectFirstIfEmpty),"minCharactersToSearch"in ee&&s(66,Me=ee.minCharactersToSearch),"maxItemsToShowInList"in ee&&s(5,Ve=ee.maxItemsToShowInList),"multiple"in ee&&s(6,tt=ee.multiple),"create"in ee&&s(7,it=ee.create),"ignoreAccents"in ee&&s(67,dt=ee.ignoreAccents),"matchAllKeywords"in ee&&s(68,Dt=ee.matchAllKeywords),"sortByMatchedKeywords"in ee&&s(69,He=ee.sortByMatchedKeywords),"itemFilterFunction"in ee&&s(70,Xe=ee.itemFilterFunction),"itemSortFunction"in ee&&s(71,pt=ee.itemSortFunction),"lock"in ee&&s(8,Ne=ee.lock),"delay"in ee&&s(72,Ft=ee.delay),"localFiltering"in ee&&s(73,ut=ee.localFiltering),"localSorting"in ee&&s(74,jt=ee.localSorting),"cleanUserText"in ee&&s(75,yt=ee.cleanUserText),"closeOnBlur"in ee&&s(76,mi=ee.closeOnBlur),"hideArrow"in ee&&s(9,bi=ee.hideArrow),"showClear"in ee&&s(77,gi=ee.showClear),"showLoadingIndicator"in ee&&s(10,Lt=ee.showLoadingIndicator),"noResultsText"in ee&&s(11,vi=ee.noResultsText),"loadingText"in ee&&s(12,Qt=ee.loadingText),"moreItemsText"in ee&&s(13,ui=ee.moreItemsText),"createText"in ee&&s(14,Ui=ee.createText),"placeholder"in ee&&s(15,pi=ee.placeholder),"className"in ee&&s(16,ot=ee.className),"inputClassName"in ee&&s(17,Bi=ee.inputClassName),"inputId"in ee&&s(18,wi=ee.inputId),"name"in ee&&s(19,Qe=ee.name),"selectName"in ee&&s(20,Nt=ee.selectName),"selectId"in ee&&s(21,ki=ee.selectId),"title"in ee&&s(22,Vi=ee.title),"html5autocomplete"in ee&&s(23,fn=ee.html5autocomplete),"readonly"in ee&&s(24,Mi=ee.readonly),"dropdownClassName"in ee&&s(25,ni=ee.dropdownClassName),"disabled"in ee&&s(26,si=ee.disabled),"noInputStyles"in ee&&s(27,Dn=ee.noInputStyles),"required"in ee&&s(28,ei=ee.required),"debug"in ee&&s(78,qt=ee.debug),"tabindex"in ee&&s(29,Xi=ee.tabindex),"selectedItem"in ee&&s(1,ti=ee.selectedItem),"value"in ee&&s(2,mn=ee.value),"highlightedItem"in ee&&s(51,xn=ee.highlightedItem),"text"in ee&&s(3,Pi=ee.text),"$$scope"in ee&&s(82,v=ee.$$scope)},u.$$.update=()=>{u.$$.dirty[0]&1|u.$$.dirty[1]&2097152&&(T||Cn()),u.$$.dirty[0]&2&&sa(),u.$$.dirty[0]&1073741824|u.$$.dirty[1]&1&&s(51,xn=xi&&di&&di>=0&&di<xi.length?xi[di].item:null),u.$$.dirty[0]&1|u.$$.dirty[2]&786432&&s(36,l=li&&(r&&r.length>0||tn>0)),u.$$.dirty[0]&322|u.$$.dirty[2]&32768&&s(35,m=gi||(Ne||tt)&&ti)},[r,ti,mn,Pi,$,Ve,tt,it,Ne,bi,Lt,vi,Qt,ui,Ui,pi,ot,Bi,wi,Qe,Nt,ki,Vi,fn,Mi,ni,si,Dn,ei,Xi,di,xi,Ie,mt,$t,m,l,se,wn,Sn,L,B,R,U,ce,ne,fe,Re,ht,Rt,ji,xn,T,A,C,I,k,K,he,we,Te,me,Le,Ue,Oe,We,Me,dt,Dt,He,Xe,pt,Ft,ut,jt,yt,mi,gi,qt,oi,li,tn,v,g,yn,Ji,Pn,Da,Fa]}class Zv extends An{constructor(a){super(),kn(this,a,qv,jv,Mn,{items:0,searchFunction:52,labelFieldName:53,keywordsFieldName:54,valueFieldName:55,labelFunction:56,keywordsFunction:57,valueFunction:4,keywordsCleanFunction:58,textCleanFunction:59,beforeChange:60,onChange:61,onFocus:62,onBlur:63,onCreate:64,selectFirstIfEmpty:65,minCharactersToSearch:66,maxItemsToShowInList:5,multiple:6,create:7,ignoreAccents:67,matchAllKeywords:68,sortByMatchedKeywords:69,itemFilterFunction:70,itemSortFunction:71,lock:8,delay:72,localFiltering:73,localSorting:74,cleanUserText:75,closeOnBlur:76,hideArrow:9,showClear:77,showLoadingIndicator:10,noResultsText:11,loadingText:12,moreItemsText:13,createText:14,placeholder:15,className:16,inputClassName:17,inputId:18,name:19,selectName:20,selectId:21,title:22,html5autocomplete:23,readonly:24,dropdownClassName:25,disabled:26,noInputStyles:27,required:28,debug:78,tabindex:29,selectedItem:1,value:2,highlightedItem:51,text:3,highlightFilter:79},null,[-1,-1,-1,-1])}get highlightFilter(){return this.$$.ctx[79]}}function Ef(u,a,s){const l=u.slice();return l[31]=a[s],l}function If(u,a,s){const l=u.slice();return l[34]=a[s],l}function Af(u){let a,s,l,m,g,v,r,T,A;function C(k){u[18](k)}let I={items:u[0],placeholder:"Select currency",showClear:!0,showLoadingIndicator:!0,labelFunction:Wv};return u[1]!==void 0&&(I.selectedItem=u[1]),r=new Zv({props:I}),Di.push(()=>bo(r,"selectedItem",C)),{c(){a=ge("div"),s=ge("div"),l=ge("p"),m=wt("Currency"),g=St(),v=ge("div"),Ei(r.$$.fragment),this.h()},l(k){a=_e(k,"DIV",{class:!0});var K=Ce(a);s=_e(K,"DIV",{class:!0});var $=Ce(s);l=_e($,"P",{class:!0});var he=Ce(l);m=Ct(he,"Currency"),he.forEach(Y),$.forEach(Y),g=Et(K),v=_e(K,"DIV",{class:!0});var we=Ce(v);qi(r.$$.fragment,we),we.forEach(Y),K.forEach(Y),this.h()},h(){ve(l,"class","subtitle is-6"),ve(s,"class","column is-3"),ve(v,"class","column is-5"),ve(a,"class","columns is-vcentered")},m(k,K){et(k,a,K),ie(a,s),ie(s,l),ie(l,m),ie(a,g),ie(a,v),Ii(r,v,null),A=!0},p(k,K){const $={};K[0]&1&&($.items=k[0]),!T&&K[0]&2&&(T=!0,$.selectedItem=k[1],vo(()=>T=!1)),r.$set($)},i(k){A||(_t(r.$$.fragment,k),A=!0)},o(k){It(r.$$.fragment,k),A=!1},d(k){k&&Y(a),Ai(r)}}}function kf(u){let a,s,l,m,g,v,r,T,A,C,I=u[2],k=[];for(let K=0;K<I.length;K+=1)k[K]=Mf(If(u,I,K));return{c(){a=ge("div"),s=ge("div"),l=ge("p"),m=wt("Country"),g=St(),v=ge("div"),r=ge("div"),T=ge("select");for(let K=0;K<k.length;K+=1)k[K].c();this.h()},l(K){a=_e(K,"DIV",{class:!0});var $=Ce(a);s=_e($,"DIV",{class:!0});var he=Ce(s);l=_e(he,"P",{class:!0});var we=Ce(l);m=Ct(we,"Country"),we.forEach(Y),he.forEach(Y),g=Et($),v=_e($,"DIV",{class:!0});var Te=Ce(v);r=_e(Te,"DIV",{class:!0});var me=Ce(r);T=_e(me,"SELECT",{});var Le=Ce(T);for(let Ue=0;Ue<k.length;Ue+=1)k[Ue].l(Le);Le.forEach(Y),me.forEach(Y),Te.forEach(Y),$.forEach(Y),this.h()},h(){ve(l,"class","subtitle is-6"),ve(s,"class","column is-3"),u[3]===void 0&&Ru(()=>u[19].call(T)),ve(r,"class","select is-primary is-medium"),ve(v,"class","column is-5"),ve(a,"class","columns is-vcentered")},m(K,$){et(K,a,$),ie(a,s),ie(s,l),ie(l,m),ie(a,g),ie(a,v),ie(v,r),ie(r,T);for(let he=0;he<k.length;he+=1)k[he].m(T,null);xo(T,u[3]),A||(C=Ri(T,"change",u[19]),A=!0)},p(K,$){if($[0]&4){I=K[2];let he;for(he=0;he<I.length;he+=1){const we=If(K,I,he);k[he]?k[he].p(we,$):(k[he]=Mf(we),k[he].c(),k[he].m(T,null))}for(;he<k.length;he+=1)k[he].d(1);k.length=I.length}$[0]&12&&xo(T,K[3])},d(K){K&&Y(a),wo(k,K),A=!1,C()}}}function Mf(u){let a,s=`${u[34].name} (${u[34].id})`,l,m;return{c(){a=ge("option"),l=wt(s),this.h()},l(g){a=_e(g,"OPTION",{});var v=Ce(a);l=Ct(v,s),v.forEach(Y),this.h()},h(){a.__value=m=u[34].id,a.value=a.__value},m(g,v){et(g,a,v),ie(a,l)},p(g,v){v[0]&4&&s!==(s=`${g[34].name} (${g[34].id})`)&&nn(l,s),v[0]&4&&m!==(m=g[34].id)&&(a.__value=m,a.value=a.__value)},d(g){g&&Y(a)}}}function Df(u){let a,s=`${u[31]}`,l;return{c(){a=ge("option"),l=wt(s),this.h()},l(m){a=_e(m,"OPTION",{});var g=Ce(a);l=Ct(g,s),g.forEach(Y),this.h()},h(){a.__value=u[31],a.value=a.__value},m(m,g){et(m,a,g),ie(a,l)},p:Ba,d(m){m&&Y(a)}}}function Pf(u){let a,s,l,m,g,v,r,T,A;return{c(){a=ge("div"),s=ge("div"),l=ge("p"),m=wt("Lifetime (year)"),g=St(),v=ge("div"),r=ge("input"),this.h()},l(C){a=_e(C,"DIV",{class:!0});var I=Ce(a);s=_e(I,"DIV",{class:!0});var k=Ce(s);l=_e(k,"P",{class:!0});var K=Ce(l);m=Ct(K,"Lifetime (year)"),K.forEach(Y),k.forEach(Y),g=Et(I),v=_e(I,"DIV",{class:!0});var $=Ce(v);r=_e($,"INPUT",{class:!0,type:!0,placeholder:!0}),$.forEach(Y),I.forEach(Y),this.h()},h(){ve(l,"class","subtitle is-6"),ve(s,"class","column is-3"),ve(r,"class","input is-primary is-medium"),ve(r,"type","text"),ve(r,"placeholder","Lifetime"),ve(v,"class","column is-5"),ve(a,"class","columns is-vcentered")},m(C,I){et(C,a,I),ie(a,s),ie(s,l),ie(l,m),ie(a,g),ie(a,v),ie(v,r),ma(r,u[12]),T||(A=Ri(r,"input",u[21]),T=!0)},p(C,I){I[0]&4096&&r.value!==C[12]&&ma(r,C[12])},d(C){C&&Y(a),T=!1,A()}}}function Lf(u){let a,s,l,m=`PPP-${u[3]}/US-${u[5]}`,g,v,r,T,A,C,I,k,K=`CPI-${u[3]}-${u[5]}`,$,he,we,Te,me,Le;return{c(){a=ge("div"),s=ge("div"),l=ge("p"),g=wt(m),v=St(),r=ge("div"),T=ge("input"),A=St(),C=ge("div"),I=ge("div"),k=ge("p"),$=wt(K),he=St(),we=ge("div"),Te=ge("input"),this.h()},l(Ue){a=_e(Ue,"DIV",{class:!0});var Oe=Ce(a);s=_e(Oe,"DIV",{class:!0});var We=Ce(s);l=_e(We,"P",{class:!0});var Me=Ce(l);g=Ct(Me,m),Me.forEach(Y),We.forEach(Y),v=Et(Oe),r=_e(Oe,"DIV",{class:!0});var Ve=Ce(r);T=_e(Ve,"INPUT",{class:!0,type:!0,placeholder:!0}),Ve.forEach(Y),Oe.forEach(Y),A=Et(Ue),C=_e(Ue,"DIV",{class:!0});var tt=Ce(C);I=_e(tt,"DIV",{class:!0});var it=Ce(I);k=_e(it,"P",{class:!0});var dt=Ce(k);$=Ct(dt,K),dt.forEach(Y),it.forEach(Y),he=Et(tt),we=_e(tt,"DIV",{class:!0});var Dt=Ce(we);Te=_e(Dt,"INPUT",{class:!0,type:!0,placeholder:!0}),Dt.forEach(Y),tt.forEach(Y),this.h()},h(){ve(l,"class","subtitle is-6"),ve(s,"class","column is-3"),ve(T,"class","input is-secondary is-medium"),ve(T,"type","text"),ve(T,"placeholder","PPP value"),T.readOnly=!0,ve(r,"class","column is-5"),ve(a,"class","columns is-vcentered"),ve(k,"class","subtitle is-6"),ve(I,"class","column is-3"),ve(Te,"class","input is-secondary is-medium"),ve(Te,"type","text"),ve(Te,"placeholder","CPI target value"),Te.readOnly=!0,ve(we,"class","column is-5"),ve(C,"class","columns is-vcentered")},m(Ue,Oe){et(Ue,a,Oe),ie(a,s),ie(s,l),ie(l,g),ie(a,v),ie(a,r),ie(r,T),ma(T,u[6]),et(Ue,A,Oe),et(Ue,C,Oe),ie(C,I),ie(I,k),ie(k,$),ie(C,he),ie(C,we),ie(we,Te),ma(Te,u[8]),me||(Le=[Ri(T,"input",u[26]),Ri(Te,"input",u[27])],me=!0)},p(Ue,Oe){Oe[0]&40&&m!==(m=`PPP-${Ue[3]}/US-${Ue[5]}`)&&nn(g,m),Oe[0]&64&&T.value!==Ue[6]&&ma(T,Ue[6]),Oe[0]&40&&K!==(K=`CPI-${Ue[3]}-${Ue[5]}`)&&nn($,K),Oe[0]&256&&Te.value!==Ue[8]&&ma(Te,Ue[8])},d(Ue){Ue&&Y(a),Ue&&Y(A),Ue&&Y(C),me=!1,ha(Le)}}}function Rf(u){let a,s,l,m=`CPI-${u[3]}-${u[4]}`,g,v,r,T,A,C;return{c(){a=ge("div"),s=ge("div"),l=ge("p"),g=wt(m),v=St(),r=ge("div"),T=ge("input"),this.h()},l(I){a=_e(I,"DIV",{class:!0});var k=Ce(a);s=_e(k,"DIV",{class:!0});var K=Ce(s);l=_e(K,"P",{class:!0});var $=Ce(l);g=Ct($,m),$.forEach(Y),K.forEach(Y),v=Et(k),r=_e(k,"DIV",{class:!0});var he=Ce(r);T=_e(he,"INPUT",{class:!0,type:!0,placeholder:!0}),he.forEach(Y),k.forEach(Y),this.h()},h(){ve(l,"class","subtitle is-6"),ve(s,"class","column is-3"),ve(T,"class","input is-secondary is-medium"),ve(T,"type","text"),ve(T,"placeholder","CPI source value"),T.readOnly=!0,ve(r,"class","column is-5"),ve(a,"class","columns is-vcentered")},m(I,k){et(I,a,k),ie(a,s),ie(s,l),ie(l,g),ie(a,v),ie(a,r),ie(r,T),ma(T,u[7]),A||(C=Ri(T,"input",u[28]),A=!0)},p(I,k){k[0]&24&&m!==(m=`CPI-${I[3]}-${I[4]}`)&&nn(g,m),k[0]&128&&T.value!==I[7]&&ma(T,I[7])},d(I){I&&Y(a),A=!1,C()}}}function Kv(u){let a,s,l,m,g,v,r,T,A,C=u[1]?`(${u[1].code})`:"",I,k,K,$,he,we,Te,me,Le,Ue,Oe,We,Me,Ve,tt,it,dt,Dt,He,Xe,pt,Ne,Ft,ut,jt,yt,mi,bi,gi,Lt,vi,Qt,ui,Ui,pi,ot,Bi,wi,Qe,Nt,ki,Vi=u[1]?`(${u[1].code})`:"",fn,Mi,ni,si,Dn,ei,qt,Xi,ti,mn,xn,se,Ie,mt,li,$t,di,Pi,tn,xi,nt,ii=`US$${u[5]}`,Ut,Yi,wn,Vt,Cn,Zi,sa,Fi,on,fi,Bn,gn,_n,Sn,Zn,hn,W,L,B=u[0]&&u[0].length&&Af(u),R=u[2]&&u[2].length&&kf(u),U=u[15],X=[];for(let Ee=0;Ee<U.length;Ee+=1)X[Ee]=Df(Ef(u,U,Ee));let ce=u[11]==="CapEx"&&Pf(u);function ne(Ee){u[22](Ee)}let oe={};u[4]!==void 0&&(oe.selectedYear=u[4]),ut=new Zp({props:oe}),Di.push(()=>bo(ut,"selectedYear",ne));function fe(Ee){u[23](Ee)}let Be={min:0,max:100,step:.5,discrete:!0,tickMarks:!0,"input$aria-label":"Discrete slider"};u[13]!==void 0&&(Be.value=u[13]),pi=new Cv({props:Be}),Di.push(()=>bo(pi,"value",fe));function Ye(Ee){u[25](Ee)}let Re={};u[5]!==void 0&&(Re.selectedYear=u[5]),mt=new Zp({props:Re}),Di.push(()=>bo(mt,"selectedYear",Ye));let ht=u[3]&&u[5]&&Lf(u),ft=u[3]&&u[4]&&Rf(u);return{c(){a=ge("div"),s=ge("h1"),l=wt("TACH Calculator"),m=St(),g=ge("div"),v=ge("div"),r=ge("div"),T=ge("p"),A=wt("Cost "),I=wt(C),k=St(),K=ge("div"),$=ge("input"),he=St(),B&&B.c(),we=St(),R&&R.c(),Te=St(),me=ge("div"),Le=ge("div"),Ue=ge("p"),Oe=wt("Cost type"),We=St(),Me=ge("div"),Ve=ge("div"),tt=ge("select");for(let Ee=0;Ee<X.length;Ee+=1)X[Ee].c();it=St(),ce&&ce.c(),dt=St(),Dt=ge("div"),He=ge("div"),Xe=ge("p"),pt=wt("Year purchased"),Ne=St(),Ft=ge("div"),Ei(ut.$$.fragment),yt=St(),mi=ge("div"),bi=ge("div"),gi=ge("p"),Lt=wt("Discount rate: "),vi=wt(u[13]),Qt=wt("%"),ui=St(),Ui=ge("div"),Ei(pi.$$.fragment),Bi=St(),wi=ge("div"),Qe=ge("div"),Nt=ge("p"),ki=wt("Annual cost "),fn=wt(Vi),Mi=St(),ni=ge("div"),si=ge("input"),Dn=St(),ei=ge("hr"),qt=St(),Xi=ge("div"),ti=ge("div"),mn=ge("p"),xn=wt("Year converted to"),se=St(),Ie=ge("div"),Ei(mt.$$.fragment),$t=St(),ht&&ht.c(),di=St(),ft&&ft.c(),Pi=St(),tn=ge("div"),xi=ge("div"),nt=ge("p"),Ut=wt(ii),Yi=St(),wn=ge("div"),Vt=ge("input"),Cn=St(),Zi=ge("hr"),sa=St(),Fi=ge("h1"),on=wt("References"),fi=St(),Bn=ge("ol"),gn=ge("li"),_n=ge("a"),Sn=ge("p"),Zn=wt(`Sainati, T., Zakaria, F., Locatelli, G., Sleigh, P.A. and Evans, B. 2020. Understanding
						the costs of urban sanitation: Towards a standard costing model. Journal of Water
						Sanitation and Hygiene for Development. 10(4), pp.642\u2013658.`),this.h()},l(Ee){a=_e(Ee,"DIV",{class:!0});var rt=Ce(a);s=_e(rt,"H1",{class:!0});var lt=Ce(s);l=Ct(lt,"TACH Calculator"),lt.forEach(Y),m=Et(rt),g=_e(rt,"DIV",{class:!0});var bt=Ce(g);v=_e(bt,"DIV",{class:!0});var Zt=Ce(v);r=_e(Zt,"DIV",{class:!0});var Rt=Ce(r);T=_e(Rt,"P",{class:!0});var oi=Ce(T);A=Ct(oi,"Cost "),I=Ct(oi,C),oi.forEach(Y),Rt.forEach(Y),k=Et(Zt),K=_e(Zt,"DIV",{class:!0});var ji=Ce(K);$=_e(ji,"INPUT",{class:!0,type:!0,placeholder:!0}),ji.forEach(Y),Zt.forEach(Y),he=Et(bt),B&&B.l(bt),we=Et(bt),R&&R.l(bt),Te=Et(bt),me=_e(bt,"DIV",{class:!0});var yn=Ce(me);Le=_e(yn,"DIV",{class:!0});var Ji=Ce(Le);Ue=_e(Ji,"P",{class:!0});var Pn=Ce(Ue);Oe=Ct(Pn,"Cost type"),Pn.forEach(Y),Ji.forEach(Y),We=Et(yn),Me=_e(yn,"DIV",{class:!0});var Da=Ce(Me);Ve=_e(Da,"DIV",{class:!0});var Fa=Ce(Ve);tt=_e(Fa,"SELECT",{});var ee=Ce(tt);for(let $a=0;$a<X.length;$a+=1)X[$a].l(ee);ee.forEach(Y),Fa.forEach(Y),Da.forEach(Y),yn.forEach(Y),it=Et(bt),ce&&ce.l(bt),dt=Et(bt),Dt=_e(bt,"DIV",{class:!0});var Gt=Ce(Dt);He=_e(Gt,"DIV",{class:!0});var Wt=Ce(He);Xe=_e(Wt,"P",{class:!0});var Ci=Ce(Xe);pt=Ct(Ci,"Year purchased"),Ci.forEach(Y),Wt.forEach(Y),Ne=Et(Gt),Ft=_e(Gt,"DIV",{class:!0});var Ln=Ce(Ft);qi(ut.$$.fragment,Ln),Ln.forEach(Y),Gt.forEach(Y),yt=Et(bt),mi=_e(bt,"DIV",{class:!0});var En=Ce(mi);bi=_e(En,"DIV",{class:!0});var Oa=Ce(bi);gi=_e(Oa,"P",{class:!0});var ga=Ce(gi);Lt=Ct(ga,"Discount rate: "),vi=Ct(ga,u[13]),Qt=Ct(ga,"%"),ga.forEach(Y),Oa.forEach(Y),ui=Et(En),Ui=_e(En,"DIV",{class:!0});var oa=Ce(Ui);qi(pi.$$.fragment,oa),oa.forEach(Y),En.forEach(Y),Bi=Et(bt),wi=_e(bt,"DIV",{class:!0});var dn=Ce(wi);Qe=_e(dn,"DIV",{class:!0});var Wn=Ce(Qe);Nt=_e(Wn,"P",{class:!0});var On=Ce(Nt);ki=Ct(On,"Annual cost "),fn=Ct(On,Vi),On.forEach(Y),Wn.forEach(Y),Mi=Et(dn),ni=_e(dn,"DIV",{class:!0});var ta=Ce(ni);si=_e(ta,"INPUT",{class:!0,type:!0,placeholder:!0}),ta.forEach(Y),dn.forEach(Y),Dn=Et(bt),ei=_e(bt,"HR",{}),qt=Et(bt),Xi=_e(bt,"DIV",{class:!0});var Ca=Ce(Xi);ti=_e(Ca,"DIV",{class:!0});var la=Ce(ti);mn=_e(la,"P",{class:!0});var ur=Ce(mn);xn=Ct(ur,"Year converted to"),ur.forEach(Y),la.forEach(Y),se=Et(Ca),Ie=_e(Ca,"DIV",{class:!0});var hr=Ce(Ie);qi(mt.$$.fragment,hr),hr.forEach(Y),Ca.forEach(Y),$t=Et(bt),ht&&ht.l(bt),di=Et(bt),ft&&ft.l(bt),Pi=Et(bt),tn=_e(bt,"DIV",{class:!0});var Nn=Ce(tn);xi=_e(Nn,"DIV",{class:!0});var Br=Ce(xi);nt=_e(Br,"P",{class:!0});var Na=Ce(nt);Ut=Ct(Na,ii),Na.forEach(Y),Br.forEach(Y),Yi=Et(Nn),wn=_e(Nn,"DIV",{class:!0});var Za=Ce(wn);Vt=_e(Za,"INPUT",{class:!0,type:!0,placeholder:!0}),Za.forEach(Y),Nn.forEach(Y),Cn=Et(bt),Zi=_e(bt,"HR",{}),sa=Et(bt),Fi=_e(bt,"H1",{class:!0});var ln=Ce(Fi);on=Ct(ln,"References"),ln.forEach(Y),fi=Et(bt),Bn=_e(bt,"OL",{});var Qa=Ce(Bn);gn=_e(Qa,"LI",{});var Er=Ce(gn);_n=_e(Er,"A",{href:!0,target:!0});var dr=Ce(_n);Sn=_e(dr,"P",{});var Fr=Ce(Sn);Zn=Ct(Fr,`Sainati, T., Zakaria, F., Locatelli, G., Sleigh, P.A. and Evans, B. 2020. Understanding
						the costs of urban sanitation: Towards a standard costing model. Journal of Water
						Sanitation and Hygiene for Development. 10(4), pp.642\u2013658.`),Fr.forEach(Y),dr.forEach(Y),Er.forEach(Y),Qa.forEach(Y),bt.forEach(Y),rt.forEach(Y),this.h()},h(){ve(s,"class","title"),ve(T,"class","subtitle is-6"),ve(r,"class","column is-3"),ve($,"class","input is-primary is-medium"),ve($,"type","text"),ve($,"placeholder","Reported cost"),ve(K,"class","column is-5"),ve(v,"class","columns is-vcentered"),ve(Ue,"class","subtitle is-6"),ve(Le,"class","column is-3"),u[11]===void 0&&Ru(()=>u[20].call(tt)),ve(Ve,"class","select is-primary is-medium"),ve(Me,"class","column is-5"),ve(me,"class","columns is-vcentered"),ve(Xe,"class","subtitle is-6"),ve(He,"class","column is-3"),ve(Ft,"class","column is-3"),ve(Dt,"class","columns is-vcentered"),ve(gi,"class","subtitle is-6"),ve(bi,"class","column is-3"),ve(Ui,"class","column is-5"),ve(mi,"class","columns is-vcentered"),ve(Nt,"class","subtitle is-6"),ve(Qe,"class","column is-3"),ve(si,"class","input is-secondary is-medium"),ve(si,"type","text"),ve(si,"placeholder","Annualised cost"),si.readOnly=!0,ve(ni,"class","column is-5"),ve(wi,"class","columns is-vcentered"),ve(mn,"class","subtitle is-6"),ve(ti,"class","column is-3"),ve(Ie,"class","column is-3"),ve(Xi,"class","columns is-vcentered"),ve(nt,"class","subtitle is-6"),ve(xi,"class","column is-3"),ve(Vt,"class","input is-secondary is-medium"),ve(Vt,"type","text"),ve(Vt,"placeholder","Output value"),ve(wn,"class","column is-5"),ve(tn,"class","columns is-vcentered"),ve(Fi,"class","title is-4"),ve(_n,"href","http://dx.doi.org/10.2166/washdev.2020.093"),ve(_n,"target","\u201D_blank\u201D"),ve(g,"class","content is-medium"),ve(a,"class","calculator-content svelte-15ehczs")},m(Ee,rt){et(Ee,a,rt),ie(a,s),ie(s,l),ie(a,m),ie(a,g),ie(g,v),ie(v,r),ie(r,T),ie(T,A),ie(T,I),ie(v,k),ie(v,K),ie(K,$),ma($,u[9]),ie(g,he),B&&B.m(g,null),ie(g,we),R&&R.m(g,null),ie(g,Te),ie(g,me),ie(me,Le),ie(Le,Ue),ie(Ue,Oe),ie(me,We),ie(me,Me),ie(Me,Ve),ie(Ve,tt);for(let lt=0;lt<X.length;lt+=1)X[lt].m(tt,null);xo(tt,u[11]),ie(g,it),ce&&ce.m(g,null),ie(g,dt),ie(g,Dt),ie(Dt,He),ie(He,Xe),ie(Xe,pt),ie(Dt,Ne),ie(Dt,Ft),Ii(ut,Ft,null),ie(g,yt),ie(g,mi),ie(mi,bi),ie(bi,gi),ie(gi,Lt),ie(gi,vi),ie(gi,Qt),ie(mi,ui),ie(mi,Ui),Ii(pi,Ui,null),ie(g,Bi),ie(g,wi),ie(wi,Qe),ie(Qe,Nt),ie(Nt,ki),ie(Nt,fn),ie(wi,Mi),ie(wi,ni),ie(ni,si),ma(si,u[10]),ie(g,Dn),ie(g,ei),ie(g,qt),ie(g,Xi),ie(Xi,ti),ie(ti,mn),ie(mn,xn),ie(Xi,se),ie(Xi,Ie),Ii(mt,Ie,null),ie(g,$t),ht&&ht.m(g,null),ie(g,di),ft&&ft.m(g,null),ie(g,Pi),ie(g,tn),ie(tn,xi),ie(xi,nt),ie(nt,Ut),ie(tn,Yi),ie(tn,wn),ie(wn,Vt),ma(Vt,u[14]),ie(g,Cn),ie(g,Zi),ie(g,sa),ie(g,Fi),ie(Fi,on),ie(g,fi),ie(g,Bn),ie(Bn,gn),ie(gn,_n),ie(_n,Sn),ie(Sn,Zn),hn=!0,W||(L=[Ri($,"input",u[17]),Ri(tt,"change",u[20]),Ri(si,"input",u[24]),Ri(Vt,"input",u[29])],W=!0)},p(Ee,rt){if((!hn||rt[0]&2)&&C!==(C=Ee[1]?`(${Ee[1].code})`:"")&&nn(I,C),rt[0]&512&&$.value!==Ee[9]&&ma($,Ee[9]),Ee[0]&&Ee[0].length?B?(B.p(Ee,rt),rt[0]&1&&_t(B,1)):(B=Af(Ee),B.c(),_t(B,1),B.m(g,we)):B&&(es(),It(B,1,1,()=>{B=null}),$r()),Ee[2]&&Ee[2].length?R?R.p(Ee,rt):(R=kf(Ee),R.c(),R.m(g,Te)):R&&(R.d(1),R=null),rt[0]&32768){U=Ee[15];let Rt;for(Rt=0;Rt<U.length;Rt+=1){const oi=Ef(Ee,U,Rt);X[Rt]?X[Rt].p(oi,rt):(X[Rt]=Df(oi),X[Rt].c(),X[Rt].m(tt,null))}for(;Rt<X.length;Rt+=1)X[Rt].d(1);X.length=U.length}rt[0]&34816&&xo(tt,Ee[11]),Ee[11]==="CapEx"?ce?ce.p(Ee,rt):(ce=Pf(Ee),ce.c(),ce.m(g,dt)):ce&&(ce.d(1),ce=null);const lt={};!jt&&rt[0]&16&&(jt=!0,lt.selectedYear=Ee[4],vo(()=>jt=!1)),ut.$set(lt),(!hn||rt[0]&8192)&&nn(vi,Ee[13]);const bt={};!ot&&rt[0]&8192&&(ot=!0,bt.value=Ee[13],vo(()=>ot=!1)),pi.$set(bt),(!hn||rt[0]&2)&&Vi!==(Vi=Ee[1]?`(${Ee[1].code})`:"")&&nn(fn,Vi),rt[0]&1024&&si.value!==Ee[10]&&ma(si,Ee[10]);const Zt={};!li&&rt[0]&32&&(li=!0,Zt.selectedYear=Ee[5],vo(()=>li=!1)),mt.$set(Zt),Ee[3]&&Ee[5]?ht?ht.p(Ee,rt):(ht=Lf(Ee),ht.c(),ht.m(g,di)):ht&&(ht.d(1),ht=null),Ee[3]&&Ee[4]?ft?ft.p(Ee,rt):(ft=Rf(Ee),ft.c(),ft.m(g,Pi)):ft&&(ft.d(1),ft=null),(!hn||rt[0]&32)&&ii!==(ii=`US$${Ee[5]}`)&&nn(Ut,ii),rt[0]&16384&&Vt.value!==Ee[14]&&ma(Vt,Ee[14])},i(Ee){hn||(_t(B),_t(ut.$$.fragment,Ee),_t(pi.$$.fragment,Ee),_t(mt.$$.fragment,Ee),hn=!0)},o(Ee){It(B),It(ut.$$.fragment,Ee),It(pi.$$.fragment,Ee),It(mt.$$.fragment,Ee),hn=!1},d(Ee){Ee&&Y(a),B&&B.d(),R&&R.d(),wo(X,Ee),ce&&ce.d(),Ai(ut),Ai(pi),Ai(mt),ht&&ht.d(),ft&&ft.d(),W=!1,ha(L)}}}const Wv=u=>u?`${u.name} (${u.code})`:"";function Xv(u,a,s){let l,m,g,v,r,A=new Date().getFullYear(),C=2020,I,k,K,$,he,we,Te=["CapEx","OpEx"],me="CapEx",Le=30,Ue=5;fs(async()=>{s(16,l=await Wb()),s(0,m=await av())});function Oe(){$=this.value,s(9,$),s(11,me),s(12,Le),s(13,Ue)}function We(ut){g=ut,s(1,g)}function Me(){r=Au(this),s(3,r),s(1,g),s(0,m),s(16,l),s(2,v),s(2,v),s(1,g),s(0,m),s(16,l)}function Ve(){me=Au(this),s(11,me),s(15,Te)}function tt(){Le=this.value,s(12,Le),s(9,$),s(11,me),s(13,Ue)}function it(ut){A=ut,s(4,A)}function dt(ut){Ue=ut,s(13,Ue)}function Dt(){he=this.value,s(10,he),s(9,$),s(11,me),s(12,Le),s(13,Ue),s(6,I),s(7,k),s(8,K),s(3,r),s(5,C),s(4,A),s(1,g),s(0,m),s(16,l),s(2,v)}function He(ut){C=ut,s(5,C)}function Xe(){I=this.value,s(6,I),s(3,r),s(5,C),s(1,g),s(0,m),s(16,l),s(2,v)}function pt(){K=this.value,s(8,K),s(3,r),s(5,C),s(1,g),s(0,m),s(16,l),s(2,v)}function Ne(){k=this.value,s(7,k),s(3,r),s(4,A),s(1,g),s(0,m),s(16,l),s(2,v)}function Ft(){we=this.value,s(14,we),s(10,he),s(6,I),s(7,k),s(8,K),s(9,$),s(11,me),s(12,Le),s(13,Ue),s(3,r),s(5,C),s(4,A),s(1,g),s(0,m),s(16,l),s(2,v)}return u.$$.update=()=>{if(u.$$.dirty[0]&65543&&g){const ut=m.find(jt=>g.code===jt.code);s(2,v=[]),ut==null||ut.iso3.forEach(jt=>{const yt=l.find(mi=>mi.id===jt);!yt||v.push(yt)}),v.length===1&&s(3,r=v[0].id)}if(u.$$.dirty[0]&40&&r&&C&&(rv(r,C).then(ut=>{ut?s(6,I=ut.value):s(6,I=void 0)}),Gp(r,C).then(ut=>{ut?s(8,K=ut.value):s(8,K=void 0)})),u.$$.dirty[0]&24&&r&&A&&Gp(r,A).then(ut=>{ut?s(7,k=ut.value):s(7,k=void 0)}),u.$$.dirty[0]&14848&&$)try{if(s(9,$=Su($)),me==="CapEx"){if(Le){s(12,Le=Su(Le));const ut=Ue===0?0:Ue/100;s(10,he=$*(ut*(1+ut)**Le)/((1+ut)**Le-1))}}else s(10,he=$)}catch{s(10,he=void 0)}if(u.$$.dirty[0]&1472&&he&&I&&k&&K)try{s(10,he=Su(he)),s(14,we=he/I*(K/k))}catch{s(14,we=void 0)}},[m,g,v,r,A,C,I,k,K,$,he,me,Le,Ue,we,Te,l,Oe,We,Me,Ve,tt,it,dt,Dt,He,Xe,pt,Ne,Ft]}class Yv extends An{constructor(a){super(),kn(this,a,Xv,Kv,Mn,{},null,[-1,-1])}}function zf(u,a){for(var s=0;s<a.length;s++){var l=a[s];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(u,l.key,l)}}function qa(u,a,s){return a&&zf(u.prototype,a),s&&zf(u,s),u}function Yn(){return(Yn=Object.assign||function(u){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(u[l]=s[l])}return u}).apply(this,arguments)}function zi(u,a){u.prototype=Object.create(a.prototype),u.prototype.constructor=u,bm(u,a)}function bm(u,a){return(bm=Object.setPrototypeOf||function(s,l){return s.__proto__=l,s})(u,a)}function gc(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function Bf(u,a){(a==null||a>u.length)&&(a=u.length);for(var s=0,l=new Array(a);s<a;s++)l[s]=u[s];return l}function xr(u,a){var s=typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(s)return(s=s.call(u)).next.bind(s);if(Array.isArray(u)||(s=function(m,g){if(m){if(typeof m=="string")return Bf(m,g);var v=Object.prototype.toString.call(m).slice(8,-1);return v==="Object"&&m.constructor&&(v=m.constructor.name),v==="Map"||v==="Set"?Array.from(m):v==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v)?Bf(m,g):void 0}}(u))||a&&u&&typeof u.length=="number"){s&&(u=s);var l=0;return function(){return l>=u.length?{done:!0}:{done:!1,value:u[l++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var $i,vm,pc,xm,Ff,wm,Du={},Yh=[],Jv=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function yo(u,a){for(var s in a)u[s]=a[s];return u}function Cm(u){var a=u.parentNode;a&&a.removeChild(u)}function Yt(u,a,s){var l,m,g,v=arguments,r={};for(g in a)g=="key"?l=a[g]:g=="ref"?m=a[g]:r[g]=a[g];if(arguments.length>3)for(s=[s],g=3;g<arguments.length;g++)s.push(v[g]);if(s!=null&&(r.children=s),typeof u=="function"&&u.defaultProps!=null)for(g in u.defaultProps)r[g]===void 0&&(r[g]=u.defaultProps[g]);return Eu(u,r,l,m,null)}function Eu(u,a,s,l,m){var g={type:u,props:a,key:s,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:m==null?++$i.__v:m};return $i.vnode!=null&&$i.vnode(g),g}function ds(u){return u.children}function fc(u,a){this.props=u,this.context=a}function _c(u,a){if(a==null)return u.__?_c(u.__,u.__.__k.indexOf(u)+1):null;for(var s;a<u.__k.length;a++)if((s=u.__k[a])!=null&&s.__e!=null)return s.__e;return typeof u.type=="function"?_c(u):null}function Tm(u){var a,s;if((u=u.__)!=null&&u.__c!=null){for(u.__e=u.__c.base=null,a=0;a<u.__k.length;a++)if((s=u.__k[a])!=null&&s.__e!=null){u.__e=u.__c.base=s.__e;break}return Tm(u)}}function Zh(u){(!u.__d&&(u.__d=!0)&&pc.push(u)&&!Pu.__r++||Ff!==$i.debounceRendering)&&((Ff=$i.debounceRendering)||xm)(Pu)}function Pu(){for(var u;Pu.__r=pc.length;)u=pc.sort(function(a,s){return a.__v.__b-s.__v.__b}),pc=[],u.some(function(a){var s,l,m,g,v,r;a.__d&&(v=(g=(s=a).__v).__e,(r=s.__P)&&(l=[],(m=yo({},g)).__v=g.__v+1,Jh(r,g,m,s.__n,r.ownerSVGElement!==void 0,g.__h!=null?[v]:null,l,v==null?_c(g):v,g.__h),Im(l,g),g.__e!=v&&Tm(g)))})}function Of(u,a,s,l,m,g,v,r,T,A){var C,I,k,K,$,he,we,Te=l&&l.__k||Yh,me=Te.length;for(s.__k=[],C=0;C<a.length;C++)if((K=s.__k[C]=(K=a[C])==null||typeof K=="boolean"?null:typeof K=="string"||typeof K=="number"||typeof K=="bigint"?Eu(null,K,null,null,K):Array.isArray(K)?Eu(ds,{children:K},null,null,null):K.__b>0?Eu(K.type,K.props,K.key,null,K.__v):K)!=null){if(K.__=s,K.__b=s.__b+1,(k=Te[C])===null||k&&K.key==k.key&&K.type===k.type)Te[C]=void 0;else for(I=0;I<me;I++){if((k=Te[I])&&K.key==k.key&&K.type===k.type){Te[I]=void 0;break}k=null}Jh(u,K,k=k||Du,m,g,v,r,T,A),$=K.__e,(I=K.ref)&&k.ref!=I&&(we||(we=[]),k.ref&&we.push(k.ref,null,K),we.push(I,K.__c||$,K)),$!=null?(he==null&&(he=$),typeof K.type=="function"&&K.__k!=null&&K.__k===k.__k?K.__d=T=Sm(K,T,u):T=Em(u,K,k,Te,$,T),A||s.type!=="option"?typeof s.type=="function"&&(s.__d=T):u.value=""):T&&k.__e==T&&T.parentNode!=u&&(T=_c(k))}for(s.__e=he,C=me;C--;)Te[C]!=null&&(typeof s.type=="function"&&Te[C].__e!=null&&Te[C].__e==s.__d&&(s.__d=_c(l,C+1)),km(Te[C],Te[C]));if(we)for(C=0;C<we.length;C++)Am(we[C],we[++C],we[++C])}function Sm(u,a,s){var l,m;for(l=0;l<u.__k.length;l++)(m=u.__k[l])&&(m.__=u,a=typeof m.type=="function"?Sm(m,a,s):Em(s,m,m,u.__k,m.__e,a));return a}function Em(u,a,s,l,m,g){var v,r,T;if(a.__d!==void 0)v=a.__d,a.__d=void 0;else if(s==null||m!=g||m.parentNode==null)e:if(g==null||g.parentNode!==u)u.appendChild(m),v=null;else{for(r=g,T=0;(r=r.nextSibling)&&T<l.length;T+=2)if(r==m)break e;u.insertBefore(m,g),v=g}return v!==void 0?v:m.nextSibling}function Nf(u,a,s){a[0]==="-"?u.setProperty(a,s):u[a]=s==null?"":typeof s!="number"||Jv.test(a)?s:s+"px"}function Cu(u,a,s,l,m){var g;e:if(a==="style")if(typeof s=="string")u.style.cssText=s;else{if(typeof l=="string"&&(u.style.cssText=l=""),l)for(a in l)s&&a in s||Nf(u.style,a,"");if(s)for(a in s)l&&s[a]===l[a]||Nf(u.style,a,s[a])}else if(a[0]==="o"&&a[1]==="n")g=a!==(a=a.replace(/Capture$/,"")),a=a.toLowerCase()in u?a.toLowerCase().slice(2):a.slice(2),u.l||(u.l={}),u.l[a+g]=s,s?l||u.addEventListener(a,g?Vf:Uf,g):u.removeEventListener(a,g?Vf:Uf,g);else if(a!=="dangerouslySetInnerHTML"){if(m)a=a.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(a!=="href"&&a!=="list"&&a!=="form"&&a!=="tabIndex"&&a!=="download"&&a in u)try{u[a]=s==null?"":s;break e}catch{}typeof s=="function"||(s!=null&&(s!==!1||a[0]==="a"&&a[1]==="r")?u.setAttribute(a,s):u.removeAttribute(a))}}function Uf(u){this.l[u.type+!1]($i.event?$i.event(u):u)}function Vf(u){this.l[u.type+!0]($i.event?$i.event(u):u)}function Jh(u,a,s,l,m,g,v,r,T){var A,C,I,k,K,$,he,we,Te,me,Le,Ue=a.type;if(a.constructor!==void 0)return null;s.__h!=null&&(T=s.__h,r=a.__e=s.__e,a.__h=null,g=[r]),(A=$i.__b)&&A(a);try{e:if(typeof Ue=="function"){if(we=a.props,Te=(A=Ue.contextType)&&l[A.__c],me=A?Te?Te.props.value:A.__:l,s.__c?he=(C=a.__c=s.__c).__=C.__E:("prototype"in Ue&&Ue.prototype.render?a.__c=C=new Ue(we,me):(a.__c=C=new fc(we,me),C.constructor=Ue,C.render=Qv),Te&&Te.sub(C),C.props=we,C.state||(C.state={}),C.context=me,C.__n=l,I=C.__d=!0,C.__h=[]),C.__s==null&&(C.__s=C.state),Ue.getDerivedStateFromProps!=null&&(C.__s==C.state&&(C.__s=yo({},C.__s)),yo(C.__s,Ue.getDerivedStateFromProps(we,C.__s))),k=C.props,K=C.state,I)Ue.getDerivedStateFromProps==null&&C.componentWillMount!=null&&C.componentWillMount(),C.componentDidMount!=null&&C.__h.push(C.componentDidMount);else{if(Ue.getDerivedStateFromProps==null&&we!==k&&C.componentWillReceiveProps!=null&&C.componentWillReceiveProps(we,me),!C.__e&&C.shouldComponentUpdate!=null&&C.shouldComponentUpdate(we,C.__s,me)===!1||a.__v===s.__v){C.props=we,C.state=C.__s,a.__v!==s.__v&&(C.__d=!1),C.__v=a,a.__e=s.__e,a.__k=s.__k,a.__k.forEach(function(Oe){Oe&&(Oe.__=a)}),C.__h.length&&v.push(C);break e}C.componentWillUpdate!=null&&C.componentWillUpdate(we,C.__s,me),C.componentDidUpdate!=null&&C.__h.push(function(){C.componentDidUpdate(k,K,$)})}C.context=me,C.props=we,C.state=C.__s,(A=$i.__r)&&A(a),C.__d=!1,C.__v=a,C.__P=u,A=C.render(C.props,C.state,C.context),C.state=C.__s,C.getChildContext!=null&&(l=yo(yo({},l),C.getChildContext())),I||C.getSnapshotBeforeUpdate==null||($=C.getSnapshotBeforeUpdate(k,K)),Le=A!=null&&A.type===ds&&A.key==null?A.props.children:A,Of(u,Array.isArray(Le)?Le:[Le],a,s,l,m,g,v,r,T),C.base=a.__e,a.__h=null,C.__h.length&&v.push(C),he&&(C.__E=C.__=null),C.__e=!1}else g==null&&a.__v===s.__v?(a.__k=s.__k,a.__e=s.__e):a.__e=function(Oe,We,Me,Ve,tt,it,dt,Dt){var He,Xe,pt,Ne,Ft=Me.props,ut=We.props,jt=We.type,yt=0;if(jt==="svg"&&(tt=!0),it!=null){for(;yt<it.length;yt++)if((He=it[yt])&&(He===Oe||(jt?He.localName==jt:He.nodeType==3))){Oe=He,it[yt]=null;break}}if(Oe==null){if(jt===null)return document.createTextNode(ut);Oe=tt?document.createElementNS("http://www.w3.org/2000/svg",jt):document.createElement(jt,ut.is&&ut),it=null,Dt=!1}if(jt===null)Ft===ut||Dt&&Oe.data===ut||(Oe.data=ut);else{if(it=it&&Yh.slice.call(Oe.childNodes),Xe=(Ft=Me.props||Du).dangerouslySetInnerHTML,pt=ut.dangerouslySetInnerHTML,!Dt){if(it!=null)for(Ft={},Ne=0;Ne<Oe.attributes.length;Ne++)Ft[Oe.attributes[Ne].name]=Oe.attributes[Ne].value;(pt||Xe)&&(pt&&(Xe&&pt.__html==Xe.__html||pt.__html===Oe.innerHTML)||(Oe.innerHTML=pt&&pt.__html||""))}if(function(mi,bi,gi,Lt,vi){var Qt;for(Qt in gi)Qt==="children"||Qt==="key"||Qt in bi||Cu(mi,Qt,null,gi[Qt],Lt);for(Qt in bi)vi&&typeof bi[Qt]!="function"||Qt==="children"||Qt==="key"||Qt==="value"||Qt==="checked"||gi[Qt]===bi[Qt]||Cu(mi,Qt,bi[Qt],gi[Qt],Lt)}(Oe,ut,Ft,tt,Dt),pt)We.__k=[];else if(yt=We.props.children,Of(Oe,Array.isArray(yt)?yt:[yt],We,Me,Ve,tt&&jt!=="foreignObject",it,dt,Oe.firstChild,Dt),it!=null)for(yt=it.length;yt--;)it[yt]!=null&&Cm(it[yt]);Dt||("value"in ut&&(yt=ut.value)!==void 0&&(yt!==Oe.value||jt==="progress"&&!yt)&&Cu(Oe,"value",yt,Ft.value,!1),"checked"in ut&&(yt=ut.checked)!==void 0&&yt!==Oe.checked&&Cu(Oe,"checked",yt,Ft.checked,!1))}return Oe}(s.__e,a,s,l,m,g,v,T);(A=$i.diffed)&&A(a)}catch(Oe){a.__v=null,(T||g!=null)&&(a.__e=r,a.__h=!!T,g[g.indexOf(r)]=null),$i.__e(Oe,a,s)}}function Im(u,a){$i.__c&&$i.__c(a,u),u.some(function(s){try{u=s.__h,s.__h=[],u.some(function(l){l.call(s)})}catch(l){$i.__e(l,s.__v)}})}function Am(u,a,s){try{typeof u=="function"?u(a):u.current=a}catch(l){$i.__e(l,s)}}function km(u,a,s){var l,m,g;if($i.unmount&&$i.unmount(u),(l=u.ref)&&(l.current&&l.current!==u.__e||Am(l,null,a)),s||typeof u.type=="function"||(s=(m=u.__e)!=null),u.__e=u.__d=void 0,(l=u.__c)!=null){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(v){$i.__e(v,a)}l.base=l.__P=null}if(l=u.__k)for(g=0;g<l.length;g++)l[g]&&km(l[g],a,s);m!=null&&Cm(m)}function Qv(u,a,s){return this.constructor(u,s)}function mc(u,a,s){var l,m,g;$i.__&&$i.__(u,a),m=(l=typeof s=="function")?null:s&&s.__k||a.__k,g=[],Jh(a,u=(!l&&s||a).__k=Yt(ds,null,[u]),m||Du,Du,a.ownerSVGElement!==void 0,!l&&s?[s]:m?null:a.firstChild?Yh.slice.call(a.childNodes):null,g,!l&&s?s:m?m.__e:a.firstChild,l),Im(g,u)}function Mm(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(u){var a=16*Math.random()|0;return(u=="x"?a:3&a|8).toString(16)})}$i={__e:function(u,a){for(var s,l,m;a=a.__;)if((s=a.__c)&&!s.__)try{if((l=s.constructor)&&l.getDerivedStateFromError!=null&&(s.setState(l.getDerivedStateFromError(u)),m=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(u),m=s.__d),m)return s.__E=s}catch(g){u=g}throw u},__v:0},vm=function(u){return u!=null&&u.constructor===void 0},fc.prototype.setState=function(u,a){var s;s=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=yo({},this.state),typeof u=="function"&&(u=u(yo({},s),this.props)),u&&yo(s,u),u!=null&&this.__v&&(a&&this.__h.push(a),Zh(this))},fc.prototype.forceUpdate=function(u){this.__v&&(this.__e=!0,u&&this.__h.push(u),Zh(this))},fc.prototype.render=ds,pc=[],xm=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Pu.__r=0,wm=0;var Ou=function(){function u(a){this._id=void 0,this._id=a||Mm()}return qa(u,[{key:"id",get:function(){return this._id}}]),u}(),$v={search:{placeholder:"Type a keyword..."},sort:{sortAsc:"Sort column ascending",sortDesc:"Sort column descending"},pagination:{previous:"Previous",next:"Next",navigate:function(u,a){return"Page "+u+" of "+a},page:function(u){return"Page "+u},showing:"Showing",of:"of",to:"to",results:"results"},loading:"Loading...",noRecordsFound:"No matching records found",error:"An error happened while fetching the data"},e0=function(){function u(s){this._language=void 0,this._defaultLanguage=void 0,this._language=s,this._defaultLanguage=$v}var a=u.prototype;return a.getString=function(s,l){if(!l||!s)return null;var m=s.split("."),g=m[0];if(l[g]){var v=l[g];return typeof v=="string"?function(){return v}:typeof v=="function"?v:this.getString(m.slice(1).join("."),v)}return null},a.translate=function(s){var l,m=this.getString(s,this._language);return(l=m||this.getString(s,this._defaultLanguage))?l.apply(void 0,[].slice.call(arguments,1)):s},u}(),cr=function(u){function a(s,l){var m,g;return(m=u.call(this,s,l)||this).config=void 0,m._=void 0,m.config=function(v){if(!v)return null;var r=Object.keys(v);return r.length?v[r[0]].props.value:null}(l),m.config&&(m._=(g=m.config.translator,function(v){return g.translate.apply(g,[v].concat([].slice.call(arguments,1)))})),m}return zi(a,u),a}(fc),Dm=function(u){function a(){return u.apply(this,arguments)||this}return zi(a,u),a.prototype.render=function(){return Yt(this.props.parentElement,{dangerouslySetInnerHTML:{__html:this.props.content}})},a}(cr);function Pm(u,a){return Yt(Dm,{content:u,parentElement:a})}Dm.defaultProps={parentElement:"span"};var or,Qh=function(u){function a(l){var m;return(m=u.call(this)||this).data=void 0,m.update(l),m}zi(a,u);var s=a.prototype;return s.cast=function(l){return l instanceof HTMLElement?Pm(l.outerHTML):l},s.update=function(l){return this.data=this.cast(l),this},a}(Ou),Uh=function(u){function a(l){var m;return(m=u.call(this)||this)._cells=void 0,m.cells=l||[],m}zi(a,u);var s=a.prototype;return s.cell=function(l){return this._cells[l]},s.toArray=function(){return this.cells.map(function(l){return l.data})},a.fromCells=function(l){return new a(l.map(function(m){return new Qh(m.data)}))},qa(a,[{key:"cells",get:function(){return this._cells},set:function(l){this._cells=l}},{key:"length",get:function(){return this.cells.length}}]),a}(Ou),Nu=function(u){function a(s){var l;return(l=u.call(this)||this)._rows=void 0,l._length=void 0,l.rows=s instanceof Array?s:s instanceof Uh?[s]:[],l}return zi(a,u),a.prototype.toArray=function(){return this.rows.map(function(s){return s.toArray()})},a.fromRows=function(s){return new a(s.map(function(l){return Uh.fromCells(l.cells)}))},a.fromArray=function(s){return new a((s=function(l){return!l[0]||l[0]instanceof Array?l:[l]}(s)).map(function(l){return new Uh(l.map(function(m){return new Qh(m)}))}))},qa(a,[{key:"rows",get:function(){return this._rows},set:function(s){this._rows=s}},{key:"length",get:function(){return this._length||this.rows.length},set:function(s){this._length=s}}]),a}(Ou),Uu=function(){function u(){this.callbacks=void 0}var a=u.prototype;return a.init=function(s){this.callbacks||(this.callbacks={}),s&&!this.callbacks[s]&&(this.callbacks[s]=[])},a.on=function(s,l){return this.init(s),this.callbacks[s].push(l),this},a.off=function(s,l){var m=s;return this.init(),this.callbacks[m]&&this.callbacks[m].length!==0?(this.callbacks[m]=this.callbacks[m].filter(function(g){return g!=l}),this):this},a.emit=function(s){var l=arguments,m=s;return this.init(m),this.callbacks[m].length>0&&(this.callbacks[m].forEach(function(g){return g.apply(void 0,[].slice.call(l,1))}),!0)},u}();(function(u){u[u.Initiator=0]="Initiator",u[u.ServerFilter=1]="ServerFilter",u[u.ServerSort=2]="ServerSort",u[u.ServerLimit=3]="ServerLimit",u[u.Extractor=4]="Extractor",u[u.Transformer=5]="Transformer",u[u.Filter=6]="Filter",u[u.Sort=7]="Sort",u[u.Limit=8]="Limit"})(or||(or={}));var As=function(u){function a(l){var m;return(m=u.call(this)||this).id=void 0,m._props=void 0,m._props={},m.id=Mm(),l&&m.setProps(l),m}zi(a,u);var s=a.prototype;return s.process=function(){var l=[].slice.call(arguments);this.validateProps instanceof Function&&this.validateProps.apply(this,l),this.emit.apply(this,["beforeProcess"].concat(l));var m=this._process.apply(this,l);return this.emit.apply(this,["afterProcess"].concat(l)),m},s.setProps=function(l){return Object.assign(this._props,l),this.emit("propsUpdated",this),this},qa(a,[{key:"props",get:function(){return this._props}}]),a}(Uu),t0=function(u){function a(){return u.apply(this,arguments)||this}return zi(a,u),a.prototype._process=function(s){return this.props.keyword?(l=String(this.props.keyword).trim(),m=this.props.columns,g=this.props.ignoreHiddenColumns,v=s,r=this.props.selector,l=l.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),new Nu(v.rows.filter(function(T,A){return T.cells.some(function(C,I){if(!C||g&&m&&m[I]&&typeof m[I]=="object"&&m[I].hidden)return!1;var k="";if(typeof r=="function")k=r(C.data,A,I);else if(typeof C.data=="object"){var K=C.data;K&&K.props&&K.props.content&&(k=K.props.content)}else k=String(C.data);return new RegExp(l,"gi").test(k)})}))):s;var l,m,g,v,r},qa(a,[{key:"type",get:function(){return or.Filter}}]),a}(As);function rn(){var u="gridjs";return""+u+[].slice.call(arguments).reduce(function(a,s){return a+"-"+s},"")}function Xn(){return[].slice.call(arguments).filter(function(u){return u}).reduce(function(u,a){return(u||"")+" "+a},"").trim()||null}var el,$h=function(u){function a(l){var m;return(m=u.call(this)||this)._state=void 0,m.dispatcher=void 0,m.dispatcher=l,m._state=m.getInitialState(),l.register(m._handle.bind(gc(m))),m}zi(a,u);var s=a.prototype;return s._handle=function(l){this.handle(l.type,l.payload)},s.setState=function(l){var m=this._state;this._state=l,this.emit("updated",l,m)},qa(a,[{key:"state",get:function(){return this._state}}]),a}(Uu),i0=function(u){function a(){return u.apply(this,arguments)||this}zi(a,u);var s=a.prototype;return s.getInitialState=function(){return{keyword:null}},s.handle=function(l,m){l==="SEARCH_KEYWORD"&&this.search(m.keyword)},s.search=function(l){this.setState({keyword:l})},a}($h),ed=function(){function u(a){this.dispatcher=void 0,this.dispatcher=a}return u.prototype.dispatch=function(a,s){this.dispatcher.dispatch({type:a,payload:s})},u}(),n0=function(u){function a(){return u.apply(this,arguments)||this}return zi(a,u),a.prototype.search=function(s){this.dispatch("SEARCH_KEYWORD",{keyword:s})},a}(ed),jf=function(u){function a(){return u.apply(this,arguments)||this}return zi(a,u),a.prototype._process=function(s){if(!this.props.keyword)return s;var l={};return this.props.url&&(l.url=this.props.url(s.url,this.props.keyword)),this.props.body&&(l.body=this.props.body(s.body,this.props.keyword)),Yn({},s,l)},qa(a,[{key:"type",get:function(){return or.ServerFilter}}]),a}(As),Qr=new(function(){function u(){}var a=u.prototype;return a.format=function(s,l){return"[Grid.js] ["+l.toUpperCase()+"]: "+s},a.error=function(s,l){l===void 0&&(l=!1);var m=this.format(s,"error");if(l)throw Error(m);console.error(m)},a.warn=function(s){console.warn(this.format(s,"warn"))},a.info=function(s){console.info(this.format(s,"info"))},u}()),td=function(u){function a(){return u.apply(this,arguments)||this}return zi(a,u),a}(cr);(function(u){u[u.Header=0]="Header",u[u.Footer=1]="Footer",u[u.Cell=2]="Cell"})(el||(el={}));var a0=function(){function u(){this.plugins=void 0,this.plugins=[]}var a=u.prototype;return a.get=function(s){var l=this.plugins.filter(function(m){return m.id===s});return l.length>0?l[0]:null},a.add=function(s){return s.id?this.get(s.id)!==null?(Qr.error("Duplicate plugin ID: "+s.id),this):(this.plugins.push(s),this):(Qr.error("Plugin ID cannot be empty"),this)},a.remove=function(s){return this.plugins.splice(this.plugins.indexOf(this.get(s)),1),this},a.list=function(s){return(s!=null||s!=null?this.plugins.filter(function(l){return l.position===s}):this.plugins).sort(function(l,m){return l.order-m.order})},u}(),Vu=function(u){function a(){return u.apply(this,arguments)||this}return zi(a,u),a.prototype.render=function(){var s=this;if(this.props.pluginId){var l=this.config.plugin.get(this.props.pluginId);return l?Yt(ds,{},Yt(l.component,Yn({plugin:l},l.props,this.props.props))):null}return this.props.position!==void 0?Yt(ds,{},this.config.plugin.list(this.props.position).map(function(m){return Yt(m.component,Yn({plugin:m},m.props,s.props.props))})):null},a}(cr),Lm=function(u){function a(l,m){var g;(g=u.call(this,l,m)||this).searchProcessor=void 0,g.actions=void 0,g.store=void 0,g.storeUpdatedFn=void 0,g.actions=new n0(g.config.dispatcher),g.store=new i0(g.config.dispatcher);var v,r=l.keyword;return l.enabled&&(r&&g.actions.search(r),g.storeUpdatedFn=g.storeUpdated.bind(gc(g)),g.store.on("updated",g.storeUpdatedFn),v=l.server?new jf({keyword:l.keyword,url:l.server.url,body:l.server.body}):new t0({keyword:l.keyword,columns:g.config.header&&g.config.header.columns,ignoreHiddenColumns:l.ignoreHiddenColumns||l.ignoreHiddenColumns===void 0,selector:l.selector}),g.searchProcessor=v,g.config.pipeline.register(v)),g}zi(a,u);var s=a.prototype;return s.componentWillUnmount=function(){this.config.pipeline.unregister(this.searchProcessor),this.store.off("updated",this.storeUpdatedFn)},s.storeUpdated=function(l){this.searchProcessor.setProps({keyword:l.keyword})},s.onChange=function(l){this.actions.search(l.target.value)},s.render=function(){if(!this.props.enabled)return null;var l,m,g,v=this.onChange.bind(this);return this.searchProcessor instanceof jf&&(l=v,m=this.props.debounceTimeout,v=function(){var r=arguments;return new Promise(function(T){g&&clearTimeout(g),g=setTimeout(function(){return T(l.apply(void 0,[].slice.call(r)))},m)})}),Yt("div",{className:rn(Xn("search",this.config.className.search))},Yt("input",{type:"search",placeholder:this._("search.placeholder"),"aria-label":this._("search.placeholder"),onInput:v,className:Xn(rn("input"),rn("search","input")),value:this.store.state.keyword}))},a}(td);Lm.defaultProps={debounceTimeout:250};var r0=function(u){function a(){return u.apply(this,arguments)||this}zi(a,u);var s=a.prototype;return s.validateProps=function(){if(isNaN(Number(this.props.limit))||isNaN(Number(this.props.page)))throw Error("Invalid parameters passed")},s._process=function(l){var m=this.props.page;return new Nu(l.rows.slice(m*this.props.limit,(m+1)*this.props.limit))},qa(a,[{key:"type",get:function(){return or.Limit}}]),a}(As),s0=function(u){function a(){return u.apply(this,arguments)||this}return zi(a,u),a.prototype._process=function(s){var l={};return this.props.url&&(l.url=this.props.url(s.url,this.props.page,this.props.limit)),this.props.body&&(l.body=this.props.body(s.body,this.props.page,this.props.limit)),Yn({},s,l)},qa(a,[{key:"type",get:function(){return or.ServerLimit}}]),a}(As),Rm=function(u){function a(l,m){var g;return(g=u.call(this,l,m)||this).processor=void 0,g.onUpdateFn=void 0,g.setTotalFromTabularFn=void 0,g.state={limit:l.limit,page:l.page||0,total:0},g}zi(a,u);var s=a.prototype;return s.componentWillMount=function(){var l,m=this;this.props.enabled&&(this.setTotalFromTabularFn=this.setTotalFromTabular.bind(this),this.props.server?(l=new s0({limit:this.state.limit,page:this.state.page,url:this.props.server.url,body:this.props.server.body}),this.config.pipeline.on("afterProcess",this.setTotalFromTabularFn)):(l=new r0({limit:this.state.limit,page:this.state.page})).on("beforeProcess",this.setTotalFromTabularFn),this.processor=l,this.config.pipeline.register(l),this.config.pipeline.on("error",function(){m.setState({total:0,page:0})}))},s.setTotalFromTabular=function(l){this.setTotal(l.length)},s.onUpdate=function(l){this.props.resetPageOnUpdate&&l!==this.processor&&this.setPage(0)},s.componentDidMount=function(){this.onUpdateFn=this.onUpdate.bind(this),this.config.pipeline.on("updated",this.onUpdateFn)},s.componentWillUnmount=function(){this.config.pipeline.unregister(this.processor),this.config.pipeline.off("updated",this.onUpdateFn)},s.setPage=function(l){if(l>=this.pages||l<0||l===this.state.page)return null;this.setState({page:l}),this.processor.setProps({page:l})},s.setTotal=function(l){this.setState({total:l})},s.renderPages=function(){var l=this;if(this.props.buttonsCount<=0)return null;var m=Math.min(this.pages,this.props.buttonsCount),g=Math.min(this.state.page,Math.floor(m/2));return this.state.page+Math.floor(m/2)>=this.pages&&(g=m-(this.pages-this.state.page)),Yt(ds,null,this.pages>m&&this.state.page-g>0&&Yt(ds,null,Yt("button",{tabIndex:0,role:"button",onClick:this.setPage.bind(this,0),title:this._("pagination.firstPage"),"aria-label":this._("pagination.firstPage"),className:this.config.className.paginationButton},this._("1")),Yt("button",{tabIndex:-1,className:Xn(rn("spread"),this.config.className.paginationButton)},"...")),Array.from(Array(m).keys()).map(function(v){return l.state.page+(v-g)}).map(function(v){return Yt("button",{tabIndex:0,role:"button",onClick:l.setPage.bind(l,v),className:Xn(l.state.page===v?Xn(rn("currentPage"),l.config.className.paginationButtonCurrent):null,l.config.className.paginationButton),title:l._("pagination.page",v+1),"aria-label":l._("pagination.page",v+1)},l._(""+(v+1)))}),this.pages>m&&this.pages>this.state.page+g+1&&Yt(ds,null,Yt("button",{tabIndex:-1,className:Xn(rn("spread"),this.config.className.paginationButton)},"..."),Yt("button",{tabIndex:0,role:"button",onClick:this.setPage.bind(this,this.pages-1),title:this._("pagination.page",this.pages),"aria-label":this._("pagination.page",this.pages),className:this.config.className.paginationButton},this._(""+this.pages))))},s.renderSummary=function(){return Yt(ds,null,this.props.summary&&this.state.total>0&&Yt("div",{role:"status","aria-live":"polite",className:Xn(rn("summary"),this.config.className.paginationSummary),title:this._("pagination.navigate",this.state.page+1,this.pages)},this._("pagination.showing")," ",Yt("b",null,this._(""+(this.state.page*this.state.limit+1)))," ",this._("pagination.to")," ",Yt("b",null,this._(""+Math.min((this.state.page+1)*this.state.limit,this.state.total)))," ",this._("pagination.of")," ",Yt("b",null,this._(""+this.state.total))," ",this._("pagination.results")))},s.render=function(){return this.props.enabled?Yt("div",{className:Xn(rn("pagination"),this.config.className.pagination)},this.renderSummary(),Yt("div",{className:rn("pages")},this.props.prevButton&&Yt("button",{tabIndex:0,role:"button",disabled:this.state.page===0,onClick:this.setPage.bind(this,this.state.page-1),title:this._("pagination.previous"),"aria-label":this._("pagination.previous"),className:Xn(this.config.className.paginationButton,this.config.className.paginationButtonPrev)},this._("pagination.previous")),this.renderPages(),this.props.nextButton&&Yt("button",{tabIndex:0,role:"button",disabled:this.pages===this.state.page+1||this.pages===0,onClick:this.setPage.bind(this,this.state.page+1),title:this._("pagination.next"),"aria-label":this._("pagination.next"),className:Xn(this.config.className.paginationButton,this.config.className.paginationButtonNext)},this._("pagination.next")))):null},qa(a,[{key:"pages",get:function(){return Math.ceil(this.state.total/this.state.limit)}}]),a}(td);function o0(u,a){return typeof u=="string"?u.indexOf("%")>-1?a/100*parseInt(u,10):parseInt(u,10):u}function Vh(u){return u?Math.floor(u)+"px":""}Rm.defaultProps={summary:!0,nextButton:!0,prevButton:!0,buttonsCount:3,limit:10,resetPageOnUpdate:!0};var l0=function(u){function a(l,m){var g;return(g=u.call(this,l,m)||this).tableElement=void 0,g.tableClassName=void 0,g.tableStyle=void 0,g.tableElement=g.props.tableRef.current.base.cloneNode(!0),g.tableElement.style.position="absolute",g.tableElement.style.width="100%",g.tableElement.style.zIndex="-2147483640",g.tableElement.style.visibility="hidden",g.tableClassName=g.tableElement.className,g.tableStyle=g.tableElement.style.cssText,g}zi(a,u);var s=a.prototype;return s.widths=function(){this.tableElement.className=this.tableClassName+" "+rn("shadowTable"),this.tableElement.style.tableLayout="auto",this.tableElement.style.width="auto",this.tableElement.style.padding="0",this.tableElement.style.margin="0",this.tableElement.style.border="none",this.tableElement.style.outline="none";var l=Array.from(this.base.parentNode.querySelectorAll("thead th")).reduce(function(m,g){var v;return g.style.width=g.clientWidth+"px",Yn(((v={})[g.getAttribute("data-column-id")]={minWidth:g.clientWidth},v),m)},{});return this.tableElement.className=this.tableClassName,this.tableElement.style.cssText=this.tableStyle,this.tableElement.style.tableLayout="auto",Array.from(this.base.parentNode.querySelectorAll("thead th")).reduce(function(m,g){return m[g.getAttribute("data-column-id")].width=g.clientWidth,m},l)},s.render=function(){var l=this;return this.props.tableRef.current?Yt("div",{ref:function(m){m&&m.appendChild(l.tableElement)}}):null},a}(cr);function c0(u){if(!u)return"";var a=u.split(" ");return a.length===1&&/([a-z][A-Z])+/g.test(u)?u:a.map(function(s,l){return l==0?s.toLowerCase():s.charAt(0).toUpperCase()+s.slice(1).toLowerCase()}).join("")}var Il=function(u){function a(){var l;return(l=u.call(this)||this)._columns=void 0,l._columns=[],l}zi(a,u);var s=a.prototype;return s.adjustWidth=function(l){var m=l.container,g=l.tableRef,v=l.tempRef,r=l.tempRef||!0;if(!m)return this;var T=m.clientWidth,A={current:null},C={};if(g.current&&r){var I=Yt(l0,{tableRef:g});I.ref=A,mc(I,v.current),C=A.current.widths()}for(var k,K=xr(a.tabularFormat(this.columns).reduce(function(he,we){return he.concat(we)},[]));!(k=K()).done;){var $=k.value;$.columns&&$.columns.length>0||(!$.width&&r?$.id in C&&($.width=Vh(C[$.id].width),$.minWidth=Vh(C[$.id].minWidth)):$.width=Vh(o0($.width,T)))}return g.current&&r&&mc(null,v.current),this},s.setSort=function(l,m){for(var g,v=xr(m||this.columns||[]);!(g=v()).done;){var r=g.value;r.columns&&r.columns.length>0&&(r.sort={enabled:!1}),r.sort===void 0&&l.sort&&(r.sort={enabled:!0}),r.sort?typeof r.sort=="object"&&(r.sort=Yn({enabled:!0},r.sort)):r.sort={enabled:!1},r.columns&&this.setSort(l,r.columns)}},s.setFixedHeader=function(l,m){for(var g,v=xr(m||this.columns||[]);!(g=v()).done;){var r=g.value;r.fixedHeader===void 0&&(r.fixedHeader=l.fixedHeader),r.columns&&this.setFixedHeader(l,r.columns)}},s.setResizable=function(l,m){for(var g,v=xr(m||this.columns||[]);!(g=v()).done;){var r=g.value;r.resizable===void 0&&(r.resizable=l.resizable),r.columns&&this.setResizable(l,r.columns)}},s.setID=function(l){for(var m,g=xr(l||this.columns||[]);!(m=g()).done;){var v=m.value;v.id||typeof v.name!="string"||(v.id=c0(v.name)),v.id||Qr.error('Could not find a valid ID for one of the columns. Make sure a valid "id" is set for all columns.'),v.columns&&this.setID(v.columns)}},s.populatePlugins=function(l,m){for(var g,v=xr(m);!(g=v()).done;){var r=g.value;r.plugin!==void 0&&l.plugin.add(Yn({id:r.id,props:{}},r.plugin,{position:el.Cell}))}},a.fromColumns=function(l){for(var m,g=new a,v=xr(l);!(m=v()).done;){var r=m.value;if(typeof r=="string"||vm(r))g.columns.push({name:r});else if(typeof r=="object"){var T=r;T.columns&&(T.columns=a.fromColumns(T.columns).columns),typeof T.plugin=="object"&&T.data===void 0&&(T.data=null),g.columns.push(r)}}return g},a.fromUserConfig=function(l){var m=new a;return l.from?m.columns=a.fromHTMLTable(l.from).columns:l.columns?m.columns=a.fromColumns(l.columns).columns:!l.data||typeof l.data[0]!="object"||l.data[0]instanceof Array||(m.columns=Object.keys(l.data[0]).map(function(g){return{name:g}})),m.columns.length?(m.setID(),m.setSort(l),m.setFixedHeader(l),m.setResizable(l),m.populatePlugins(l,m.columns),m):null},a.fromHTMLTable=function(l){for(var m,g=new a,v=xr(l.querySelector("thead").querySelectorAll("th"));!(m=v()).done;){var r=m.value;g.columns.push({name:r.innerHTML,width:r.width})}return g},a.tabularFormat=function(l){var m=[],g=l||[],v=[];if(g&&g.length){m.push(g);for(var r,T=xr(g);!(r=T()).done;){var A=r.value;A.columns&&A.columns.length&&(v=v.concat(A.columns))}v.length&&(m=m.concat(this.tabularFormat(v)))}return m},a.leafColumns=function(l){var m=[],g=l||[];if(g&&g.length)for(var v,r=xr(g);!(v=r()).done;){var T=v.value;T.columns&&T.columns.length!==0||m.push(T),T.columns&&(m=m.concat(this.leafColumns(T.columns)))}return m},a.maximumDepth=function(l){return this.tabularFormat([l]).length-1},qa(a,[{key:"columns",get:function(){return this._columns},set:function(l){this._columns=l}},{key:"visibleColumns",get:function(){return this._columns.filter(function(l){return!l.hidden})}}]),a}(Ou),u0=function(){function u(){this._callbacks=void 0,this._isDispatching=void 0,this._isHandled=void 0,this._isPending=void 0,this._lastID=void 0,this._pendingPayload=void 0,this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}var a=u.prototype;return a.register=function(s){var l="ID_"+this._lastID++;return this._callbacks[l]=s,l},a.unregister=function(s){if(!this._callbacks[s])throw Error("Dispatcher.unregister(...): "+s+" does not map to a registered callback.");delete this._callbacks[s]},a.waitFor=function(s){if(!this._isDispatching)throw Error("Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var l=0;l<s.length;l++){var m=s[l];if(this._isPending[m]){if(!this._isHandled[m])throw Error(`Dispatcher.waitFor(...): Circular dependency detected while ' +
            'waiting for `+m+".")}else{if(!this._callbacks[m])throw Error("Dispatcher.waitFor(...): "+m+" does not map to a registered callback.");this._invokeCallback(m)}}},a.dispatch=function(s){if(this._isDispatching)throw Error("Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch.");this._startDispatching(s);try{for(var l in this._callbacks)this._isPending[l]||this._invokeCallback(l)}finally{this._stopDispatching()}},a.isDispatching=function(){return this._isDispatching},a._invokeCallback=function(s){this._isPending[s]=!0,this._callbacks[s](this._pendingPayload),this._isHandled[s]=!0},a._startDispatching=function(s){for(var l in this._callbacks)this._isPending[l]=!1,this._isHandled[l]=!1;this._pendingPayload=s,this._isDispatching=!0},a._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},u}(),zm=function(){},Gf=function(u){function a(l){var m;return(m=u.call(this)||this).data=void 0,m.set(l),m}zi(a,u);var s=a.prototype;return s.get=function(){try{return Promise.resolve(this.data()).then(function(l){return{data:l,total:l.length}})}catch(l){return Promise.reject(l)}},s.set=function(l){return l instanceof Array?this.data=function(){return l}:l instanceof Function&&(this.data=l),this},a}(zm),Bm=function(u){function a(l){var m;return(m=u.call(this)||this).options=void 0,m.options=l,m}zi(a,u);var s=a.prototype;return s.handler=function(l){return typeof this.options.handle=="function"?this.options.handle(l):l.ok?l.json():(Qr.error("Could not fetch data: "+l.status+" - "+l.statusText,!0),null)},s.get=function(l){var m=Yn({},this.options,l);return typeof m.data=="function"?m.data(m):fetch(m.url,m).then(this.handler.bind(this)).then(function(g){return{data:m.then(g),total:typeof m.total=="function"?m.total(g):void 0}})},a}(zm),h0=function(){function u(){}return u.createFromUserConfig=function(a){var s=null;return a.data&&(s=new Gf(a.data)),a.from&&(s=new Gf(this.tableElementToArray(a.from)),a.from.style.display="none"),a.server&&(s=new Bm(a.server)),s||Qr.error("Could not determine the storage type",!0),s},u.tableElementToArray=function(a){for(var s,l,m=[],g=xr(a.querySelector("tbody").querySelectorAll("tr"));!(s=g()).done;){for(var v,r=[],T=xr(s.value.querySelectorAll("td"));!(v=T()).done;){var A=v.value;A.childNodes.length===1&&A.childNodes[0].nodeType===Node.TEXT_NODE?r.push((l=A.innerHTML,new DOMParser().parseFromString(l,"text/html").documentElement.textContent)):r.push(Pm(A.innerHTML))}m.push(r)}return m},u}(),Hf=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function wr(u,a,s){if(!u.s){if(s instanceof El){if(!s.s)return void(s.o=wr.bind(null,u,a));1&a&&(a=s.s),s=s.v}if(s&&s.then)return void s.then(wr.bind(null,u,a),wr.bind(null,u,2));u.s=a,u.v=s;var l=u.o;l&&l(u)}}var El=function(){function u(){}return u.prototype.then=function(a,s){var l=new u,m=this.s;if(m){var g=1&m?a:s;if(g){try{wr(l,1,g(this.v))}catch(v){wr(l,2,v)}return l}return this}return this.o=function(v){try{var r=v.v;1&v.s?wr(l,1,a?a(r):r):s?wr(l,1,s(r)):wr(l,2,r)}catch(T){wr(l,2,T)}},l},u}();function qf(u){return u instanceof El&&1&u.s}var Pr,d0=function(u){function a(l){var m;return(m=u.call(this)||this)._steps=new Map,m.cache=new Map,m.lastProcessorIndexUpdated=-1,l&&l.forEach(function(g){return m.register(g)}),m}zi(a,u);var s=a.prototype;return s.clearCache=function(){this.cache=new Map,this.lastProcessorIndexUpdated=-1},s.register=function(l,m){if(m===void 0&&(m=null),l.type===null)throw Error("Processor type is not defined");l.on("propsUpdated",this.processorPropsUpdated.bind(this)),this.addProcessorByPriority(l,m),this.afterRegistered(l)},s.unregister=function(l){if(l){var m=this._steps.get(l.type);m&&m.length&&(this._steps.set(l.type,m.filter(function(g){return g!=l})),this.emit("updated",l))}},s.addProcessorByPriority=function(l,m){var g=this._steps.get(l.type);if(!g){var v=[];this._steps.set(l.type,v),g=v}if(m===null||m<0)g.push(l);else if(g[m]){var r=g.slice(0,m-1),T=g.slice(m+1);this._steps.set(l.type,r.concat(l).concat(T))}else g[m]=l},s.getStepsByType=function(l){return this.steps.filter(function(m){return m.type===l})},s.getSortedProcessorTypes=function(){return Object.keys(or).filter(function(l){return!isNaN(Number(l))}).map(function(l){return Number(l)})},s.process=function(l){try{var m=this,g=function(C){return m.lastProcessorIndexUpdated=r.length,m.emit("afterProcess",T),T},v=m.lastProcessorIndexUpdated,r=m.steps,T=l,A=function(C,I){try{var k=function(K,$,he){if(typeof K[Hf]=="function"){var we,Te,me,Le=K[Hf]();if(function Me(Ve){try{for(;!(we=Le.next()).done;)if((Ve=$(we.value))&&Ve.then){if(!qf(Ve))return void Ve.then(Me,me||(me=wr.bind(null,Te=new El,2)));Ve=Ve.v}Te?wr(Te,1,Ve):Te=Ve}catch(tt){wr(Te||(Te=new El),2,tt)}}(),Le.return){var Ue=function(Me){try{we.done||Le.return()}catch{}return Me};if(Te&&Te.then)return Te.then(Ue,function(Me){throw Ue(Me)});Ue()}return Te}if(!("length"in K))throw new TypeError("Object is not iterable");for(var Oe=[],We=0;We<K.length;We++)Oe.push(K[We]);return function(Me,Ve,tt){var it,dt,Dt=-1;return function He(Xe){try{for(;++Dt<Me.length;)if((Xe=Ve(Dt))&&Xe.then){if(!qf(Xe))return void Xe.then(He,dt||(dt=wr.bind(null,it=new El,2)));Xe=Xe.v}it?wr(it,1,Xe):it=Xe}catch(pt){wr(it||(it=new El),2,pt)}}(),it}(Oe,function(Me){return $(Oe[Me])})}(r,function(K){var $=m.findProcessorIndexByID(K.id),he=function(){if($>=v)return Promise.resolve(K.process(T)).then(function(we){m.cache.set(K.id,T=we)});T=m.cache.get(K.id)}();if(he&&he.then)return he.then(function(){})})}catch(K){return I(K)}return k&&k.then?k.then(void 0,I):k}(0,function(C){throw Qr.error(C),m.emit("error",T),C});return Promise.resolve(A&&A.then?A.then(g):g())}catch(C){return Promise.reject(C)}},s.findProcessorIndexByID=function(l){return this.steps.findIndex(function(m){return m.id==l})},s.setLastProcessorIndex=function(l){var m=this.findProcessorIndexByID(l.id);this.lastProcessorIndexUpdated>m&&(this.lastProcessorIndexUpdated=m)},s.processorPropsUpdated=function(l){this.setLastProcessorIndex(l),this.emit("propsUpdated"),this.emit("updated",l)},s.afterRegistered=function(l){this.setLastProcessorIndex(l),this.emit("afterRegister"),this.emit("updated",l)},qa(a,[{key:"steps",get:function(){for(var l,m=[],g=xr(this.getSortedProcessorTypes());!(l=g()).done;){var v=this._steps.get(l.value);v&&v.length&&(m=m.concat(v))}return m.filter(function(r){return r})}}]),a}(Uu),p0=function(u){function a(){return u.apply(this,arguments)||this}return zi(a,u),a.prototype._process=function(s){try{return Promise.resolve(this.props.storage.get(s))}catch(l){return Promise.reject(l)}},qa(a,[{key:"type",get:function(){return or.Extractor}}]),a}(As),f0=function(u){function a(){return u.apply(this,arguments)||this}return zi(a,u),a.prototype._process=function(s){var l=Nu.fromArray(s.data);return l.length=s.total,l},qa(a,[{key:"type",get:function(){return or.Transformer}}]),a}(As),m0=function(u){function a(){return u.apply(this,arguments)||this}return zi(a,u),a.prototype._process=function(){return Object.entries(this.props.serverStorageOptions).filter(function(s){return typeof s[1]!="function"}).reduce(function(s,l){var m;return Yn({},s,((m={})[l[0]]=l[1],m))},{})},qa(a,[{key:"type",get:function(){return or.Initiator}}]),a}(As),g0=function(u){function a(){return u.apply(this,arguments)||this}zi(a,u);var s=a.prototype;return s.castData=function(l){if(!l||!l.length)return[];if(!this.props.header||!this.props.header.columns)return l;var m=Il.leafColumns(this.props.header.columns);return l[0]instanceof Array?l.map(function(g){var v=0;return m.map(function(r,T){return r.data!==void 0?(v++,typeof r.data=="function"?r.data(g):r.data):g[T-v]})}):typeof l[0]!="object"||l[0]instanceof Array?[]:l.map(function(g){return m.map(function(v,r){return v.data!==void 0?typeof v.data=="function"?v.data(g):v.data:v.id?g[v.id]:(Qr.error("Could not find the correct cell for column at position "+r+`.
                          Make sure either 'id' or 'selector' is defined for all columns.`),null)})})},s._process=function(l){return{data:this.castData(l.data),total:l.total}},qa(a,[{key:"type",get:function(){return or.Transformer}}]),a}(As),_0=function(){function u(){}return u.createFromConfig=function(a){var s=new d0;return a.storage instanceof Bm&&s.register(new m0({serverStorageOptions:a.server})),s.register(new p0({storage:a.storage})),s.register(new g0({header:a.header})),s.register(new f0),s},u}(),y0=function(){function u(s){this._userConfig=void 0,Object.assign(this,Yn({},u.defaultConfig(),s)),this._userConfig={}}var a=u.prototype;return a.assign=function(s){for(var l=0,m=Object.keys(s);l<m.length;l++){var g=m[l];g!=="_userConfig"&&(this[g]=s[g])}return this},a.update=function(s){return s?(this._userConfig=Yn({},this._userConfig,s),this.assign(u.fromUserConfig(this._userConfig)),this):this},u.defaultConfig=function(){return{plugin:new a0,dispatcher:new u0,tableRef:{current:null},tempRef:{current:null},width:"100%",height:"auto",autoWidth:!0,style:{},className:{}}},u.fromUserConfig=function(s){var l=new u(s);return l._userConfig=s,typeof s.sort=="boolean"&&s.sort&&l.assign({sort:{multiColumn:!0}}),l.assign({header:Il.fromUserConfig(l)}),l.assign({storage:h0.createFromUserConfig(s)}),l.assign({pipeline:_0.createFromConfig(l)}),l.assign({translator:new e0(s.language)}),l.plugin.add({id:"search",position:el.Header,component:Lm,props:Yn({enabled:s.search===!0||s.search instanceof Object},s.search)}),l.plugin.add({id:"pagination",position:el.Footer,component:Rm,props:Yn({enabled:s.pagination===!0||s.pagination instanceof Object},s.pagination)}),s.plugins&&s.plugins.forEach(function(m){return l.plugin.add(m)}),l},u}();(function(u){u[u.Init=0]="Init",u[u.Loading=1]="Loading",u[u.Loaded=2]="Loaded",u[u.Rendered=3]="Rendered",u[u.Error=4]="Error"})(Pr||(Pr={}));var Zf,Fm=function(u){function a(){return u.apply(this,arguments)||this}zi(a,u);var s=a.prototype;return s.content=function(){return this.props.column&&typeof this.props.column.formatter=="function"?this.props.column.formatter(this.props.cell.data,this.props.row,this.props.column):this.props.column&&this.props.column.plugin?Yt(Vu,{pluginId:this.props.column.id,props:{column:this.props.column,cell:this.props.cell,row:this.props.row}}):this.props.cell.data},s.handleClick=function(l){this.props.messageCell||this.config.eventEmitter.emit("cellClick",l,this.props.cell,this.props.column,this.props.row)},s.getCustomAttributes=function(l){return l?typeof l.attributes=="function"?l.attributes(this.props.cell.data,this.props.row,this.props.column):l.attributes:{}},s.render=function(){return Yt("td",Yn({role:this.props.role,colSpan:this.props.colSpan,"data-column-id":this.props.column&&this.props.column.id,className:Xn(rn("td"),this.props.className,this.config.className.td),style:Yn({},this.props.style,this.config.style.td),onClick:this.handleClick.bind(this)},this.getCustomAttributes(this.props.column)),this.content())},a}(cr),id=function(u){function a(){return u.apply(this,arguments)||this}zi(a,u);var s=a.prototype;return s.getColumn=function(l){if(this.props.header){var m=Il.leafColumns(this.props.header.columns);if(m)return m[l]}return null},s.handleClick=function(l){this.props.messageRow||this.config.eventEmitter.emit("rowClick",l,this.props.row)},s.getChildren=function(){var l=this;return this.props.children?this.props.children:Yt(ds,null,this.props.row.cells.map(function(m,g){var v=l.getColumn(g);return v&&v.hidden?null:Yt(Fm,{key:m.id,cell:m,row:l.props.row,column:v})}))},s.render=function(){return Yt("tr",{className:Xn(rn("tr"),this.config.className.tr),onClick:this.handleClick.bind(this)},this.getChildren())},a}(cr),jh=function(u){function a(){return u.apply(this,arguments)||this}return zi(a,u),a.prototype.render=function(){return Yt(id,{messageRow:!0},Yt(Fm,{role:"alert",colSpan:this.props.colSpan,messageCell:!0,cell:new Qh(this.props.message),className:Xn(rn("message"),this.props.className?this.props.className:null)}))},a}(cr),b0=function(u){function a(){return u.apply(this,arguments)||this}zi(a,u);var s=a.prototype;return s.headerLength=function(){return this.props.header?this.props.header.visibleColumns.length:0},s.render=function(){var l=this;return Yt("tbody",{className:Xn(rn("tbody"),this.config.className.tbody)},this.props.data&&this.props.data.rows.map(function(m){return Yt(id,{key:m.id,row:m,header:l.props.header})}),this.props.status===Pr.Loading&&(!this.props.data||this.props.data.length===0)&&Yt(jh,{message:this._("loading"),colSpan:this.headerLength(),className:Xn(rn("loading"),this.config.className.loading)}),this.props.status===Pr.Rendered&&this.props.data&&this.props.data.length===0&&Yt(jh,{message:this._("noRecordsFound"),colSpan:this.headerLength(),className:Xn(rn("notfound"),this.config.className.notfound)}),this.props.status===Pr.Error&&Yt(jh,{message:this._("error"),colSpan:this.headerLength(),className:Xn(rn("error"),this.config.className.error)}))},a}(cr),v0=function(u){function a(){return u.apply(this,arguments)||this}zi(a,u);var s=a.prototype;return s.validateProps=function(){for(var l,m=xr(this.props.columns);!(l=m()).done;){var g=l.value;g.direction===void 0&&(g.direction=1),g.direction!==1&&g.direction!==-1&&Qr.error("Invalid sort direction "+g.direction)}},s.compare=function(l,m){return l>m?1:l<m?-1:0},s.compareWrapper=function(l,m){for(var g,v=0,r=xr(this.props.columns);!(g=r()).done;){var T=g.value;if(v!==0)break;var A=l.cells[T.index].data,C=m.cells[T.index].data;v|=typeof T.compare=="function"?T.compare(A,C)*T.direction:this.compare(A,C)*T.direction}return v},s._process=function(l){var m=[].concat(l.rows);m.sort(this.compareWrapper.bind(this));var g=new Nu(m);return g.length=l.length,g},qa(a,[{key:"type",get:function(){return or.Sort}}]),a}(As),x0=function(u){function a(){return u.apply(this,arguments)||this}zi(a,u);var s=a.prototype;return s.getInitialState=function(){return[]},s.handle=function(l,m){l==="SORT_COLUMN"?this.sortColumn(m.index,m.direction,m.multi,m.compare):l==="SORT_COLUMN_TOGGLE"&&this.sortToggle(m.index,m.multi,m.compare)},s.sortToggle=function(l,m,g){var v=[].concat(this.state).find(function(r){return r.index===l});this.sortColumn(l,v&&v.direction===1?-1:1,m,g)},s.sortColumn=function(l,m,g,v){var r=[].concat(this.state),T=r.length,A=r.find(function(we){return we.index===l}),C=!1,I=!1,k=!1,K=!1;if(A!==void 0?g?A.direction===-1?k=!0:K=!0:T===1?K=!0:T>1&&(I=!0,C=!0):T===0?C=!0:T>0&&!g?(C=!0,I=!0):T>0&&g&&(C=!0),I&&(r=[]),C)r.push({index:l,direction:m,compare:v});else if(K){var $=r.indexOf(A);r[$].direction=m}else if(k){var he=r.indexOf(A);r.splice(he,1)}this.setState(r)},a}($h),w0=function(u){function a(){return u.apply(this,arguments)||this}zi(a,u);var s=a.prototype;return s.sortColumn=function(l,m,g,v){this.dispatch("SORT_COLUMN",{index:l,direction:m,multi:g,compare:v})},s.sortToggle=function(l,m,g){this.dispatch("SORT_COLUMN_TOGGLE",{index:l,multi:m,compare:g})},a}(ed),C0=function(u){function a(){return u.apply(this,arguments)||this}return zi(a,u),a.prototype._process=function(s){var l={};return this.props.url&&(l.url=this.props.url(s.url,this.props.columns)),this.props.body&&(l.body=this.props.body(s.body,this.props.columns)),Yn({},s,l)},qa(a,[{key:"type",get:function(){return or.ServerSort}}]),a}(As),T0=function(u){function a(l,m){var g;return(g=u.call(this,l,m)||this).sortProcessor=void 0,g.actions=void 0,g.store=void 0,g.updateStateFn=void 0,g.updateSortProcessorFn=void 0,g.actions=new w0(g.config.dispatcher),g.store=new x0(g.config.dispatcher),l.enabled&&(g.sortProcessor=g.getOrCreateSortProcessor(),g.updateStateFn=g.updateState.bind(gc(g)),g.store.on("updated",g.updateStateFn),g.state={direction:0}),g}zi(a,u);var s=a.prototype;return s.componentWillUnmount=function(){this.config.pipeline.unregister(this.sortProcessor),this.store.off("updated",this.updateStateFn),this.updateSortProcessorFn&&this.store.off("updated",this.updateSortProcessorFn)},s.updateState=function(){var l=this,m=this.store.state.find(function(g){return g.index===l.props.index});this.setState(m?{direction:m.direction}:{direction:0})},s.updateSortProcessor=function(l){this.sortProcessor.setProps({columns:l})},s.getOrCreateSortProcessor=function(){var l=or.Sort;this.config.sort&&typeof this.config.sort.server=="object"&&(l=or.ServerSort);var m,g=this.config.pipeline.getStepsByType(l);return g.length>0?m=g[0]:(this.updateSortProcessorFn=this.updateSortProcessor.bind(this),this.store.on("updated",this.updateSortProcessorFn),m=l===or.ServerSort?new C0(Yn({columns:this.store.state},this.config.sort.server)):new v0({columns:this.store.state}),this.config.pipeline.register(m)),m},s.changeDirection=function(l){l.preventDefault(),l.stopPropagation(),this.actions.sortToggle(this.props.index,l.shiftKey===!0&&this.config.sort.multiColumn,this.props.compare)},s.render=function(){if(!this.props.enabled)return null;var l=this.state.direction,m="neutral";return l===1?m="asc":l===-1&&(m="desc"),Yt("button",{tabIndex:-1,"aria-label":this._("sort.sort"+(l===1?"Desc":"Asc")),title:this._("sort.sort"+(l===1?"Desc":"Asc")),className:Xn(rn("sort"),rn("sort",m),this.config.className.sort),onClick:this.changeDirection.bind(this)})},a}(cr),S0=function(u){function a(){for(var l,m=arguments.length,g=new Array(m),v=0;v<m;v++)g[v]=arguments[v];return(l=u.call.apply(u,[this].concat(g))||this).moveFn=void 0,l.upFn=void 0,l}zi(a,u);var s=a.prototype;return s.getPageX=function(l){return l instanceof MouseEvent?Math.floor(l.pageX):Math.floor(l.changedTouches[0].pageX)},s.start=function(l){var m,g,v,r,T;l.stopPropagation(),this.setState({offsetStart:parseInt(this.props.thRef.current.style.width,10)-this.getPageX(l)}),this.upFn=this.end.bind(this),this.moveFn=(m=this.move.bind(this),(g=10)===void 0&&(g=100),function(){var A=[].slice.call(arguments);v?(clearTimeout(r),r=setTimeout(function(){Date.now()-T>=g&&(m.apply(void 0,A),T=Date.now())},Math.max(g-(Date.now()-T),0))):(m.apply(void 0,A),T=Date.now(),v=!0)}),document.addEventListener("mouseup",this.upFn),document.addEventListener("touchend",this.upFn),document.addEventListener("mousemove",this.moveFn),document.addEventListener("touchmove",this.moveFn)},s.move=function(l){l.stopPropagation();var m=this.props.thRef.current;this.state.offsetStart+this.getPageX(l)>=parseInt(m.style.minWidth,10)&&(m.style.width=this.state.offsetStart+this.getPageX(l)+"px")},s.end=function(l){l.stopPropagation(),document.removeEventListener("mouseup",this.upFn),document.removeEventListener("mousemove",this.moveFn),document.removeEventListener("touchmove",this.moveFn),document.removeEventListener("touchend",this.upFn)},s.render=function(){return Yt("div",{className:Xn(rn("th"),rn("resizable")),onMouseDown:this.start.bind(this),onTouchStart:this.start.bind(this),onClick:function(l){return l.stopPropagation()}})},a}(cr),E0=function(u){function a(l,m){var g;return(g=u.call(this,l,m)||this).sortRef={current:null},g.thRef={current:null},g.state={style:{}},g}zi(a,u);var s=a.prototype;return s.isSortable=function(){return this.props.column.sort.enabled},s.isResizable=function(){return this.props.column.resizable},s.onClick=function(l){l.stopPropagation(),this.isSortable()&&this.sortRef.current.changeDirection(l)},s.keyDown=function(l){this.isSortable()&&l.which===13&&this.onClick(l)},s.componentDidMount=function(){var l=this;setTimeout(function(){if(l.props.column.fixedHeader&&l.thRef.current){var m=l.thRef.current.offsetTop;typeof m=="number"&&l.setState({style:{top:m}})}},0)},s.content=function(){return this.props.column.name!==void 0?this.props.column.name:this.props.column.plugin!==void 0?Yt(Vu,{pluginId:this.props.column.plugin.id,props:{column:this.props.column}}):null},s.getCustomAttributes=function(){var l=this.props.column;return l?typeof l.attributes=="function"?l.attributes(null,null,this.props.column):l.attributes:{}},s.render=function(){var l={};return this.isSortable()&&(l.tabIndex=0),Yt("th",Yn({ref:this.thRef,"data-column-id":this.props.column&&this.props.column.id,className:Xn(rn("th"),this.isSortable()?rn("th","sort"):null,this.props.column.fixedHeader?rn("th","fixed"):null,this.config.className.th),onClick:this.onClick.bind(this),style:Yn({},this.config.style.th,{minWidth:this.props.column.minWidth,width:this.props.column.width},this.state.style,this.props.style),onKeyDown:this.keyDown.bind(this),rowSpan:this.props.rowSpan>1?this.props.rowSpan:void 0,colSpan:this.props.colSpan>1?this.props.colSpan:void 0},this.getCustomAttributes(),l),Yt("div",{className:rn("th","content")},this.content()),this.isSortable()&&Yt(T0,Yn({ref:this.sortRef,index:this.props.index},this.props.column.sort)),this.isResizable()&&this.props.index<this.config.header.visibleColumns.length-1&&Yt(S0,{column:this.props.column,thRef:this.thRef}))},a}(cr),I0=function(u){function a(){return u.apply(this,arguments)||this}zi(a,u);var s=a.prototype;return s.renderColumn=function(l,m,g,v){var r=function(T,A,C){var I=Il.maximumDepth(T),k=C-A;return{rowSpan:Math.floor(k-I-I/k),colSpan:T.columns&&T.columns.length||1}}(l,m,v);return Yt(E0,{column:l,index:g,colSpan:r.colSpan,rowSpan:r.rowSpan})},s.renderRow=function(l,m,g){var v=this,r=Il.leafColumns(this.props.header.columns);return Yt(id,null,l.map(function(T){return T.hidden?null:v.renderColumn(T,m,r.indexOf(T),g)}))},s.renderRows=function(){var l=this,m=Il.tabularFormat(this.props.header.columns);return m.map(function(g,v){return l.renderRow(g,v,m.length)})},s.render=function(){return this.props.header?Yt("thead",{key:this.props.header.id,className:Xn(rn("thead"),this.config.className.thead)},this.renderRows()):null},a}(cr),A0=function(u){function a(){return u.apply(this,arguments)||this}return zi(a,u),a.prototype.render=function(){return Yt("table",{role:"grid",className:Xn(rn("table"),this.config.className.table),style:Yn({},this.config.style.table,{height:this.props.height})},Yt(I0,{header:this.props.header}),Yt(b0,{data:this.props.data,status:this.props.status,header:this.props.header}))},a}(cr),k0=function(u){function a(l,m){var g;return(g=u.call(this,l,m)||this).headerRef={current:null},g.state={isActive:!0},g}zi(a,u);var s=a.prototype;return s.componentDidMount=function(){this.headerRef.current.children.length===0&&this.setState({isActive:!1})},s.render=function(){return this.state.isActive?Yt("div",{ref:this.headerRef,className:Xn(rn("head"),this.config.className.header),style:Yn({},this.config.style.header)},Yt(Vu,{position:el.Header})):null},a}(cr),M0=function(u){function a(l,m){var g;return(g=u.call(this,l,m)||this).footerRef={current:null},g.state={isActive:!0},g}zi(a,u);var s=a.prototype;return s.componentDidMount=function(){this.footerRef.current.children.length===0&&this.setState({isActive:!1})},s.render=function(){return this.state.isActive?Yt("div",{ref:this.footerRef,className:Xn(rn("footer"),this.config.className.footer),style:Yn({},this.config.style.footer)},Yt(Vu,{position:el.Footer})):null},a}(cr),D0=function(u){function a(l,m){var g;return(g=u.call(this,l,m)||this).configContext=void 0,g.processPipelineFn=void 0,g.configContext=function(v,r){var T={__c:r="__cC"+wm++,__:null,Consumer:function(A,C){return A.children(C)},Provider:function(A){var C,I;return this.getChildContext||(C=[],(I={})[r]=this,this.getChildContext=function(){return I},this.shouldComponentUpdate=function(k){this.props.value!==k.value&&C.some(Zh)},this.sub=function(k){C.push(k);var K=k.componentWillUnmount;k.componentWillUnmount=function(){C.splice(C.indexOf(k),1),K&&K.call(k)}}),A.children}};return T.Provider.__=T.Consumer.contextType=T}(),g.state={status:Pr.Loading,header:l.header,data:null},g}zi(a,u);var s=a.prototype;return s.processPipeline=function(){try{var l=this;l.props.config.eventEmitter.emit("beforeLoad"),l.setState({status:Pr.Loading});var m=function(g,v){try{var r=Promise.resolve(l.props.pipeline.process()).then(function(T){l.setState({data:T,status:Pr.Loaded}),l.props.config.eventEmitter.emit("load",T)})}catch(T){return v(T)}return r&&r.then?r.then(void 0,v):r}(0,function(g){Qr.error(g),l.setState({status:Pr.Error,data:null})});return Promise.resolve(m&&m.then?m.then(function(){}):void 0)}catch(g){return Promise.reject(g)}},s.componentDidMount=function(){try{var l=this,m=l.props.config;return Promise.resolve(l.processPipeline()).then(function(){m.header&&l.state.data&&l.state.data.length&&l.setState({header:m.header.adjustWidth(m)}),l.processPipelineFn=l.processPipeline.bind(l),l.props.pipeline.on("updated",l.processPipelineFn)})}catch(g){return Promise.reject(g)}},s.componentWillUnmount=function(){this.props.pipeline.off("updated",this.processPipelineFn)},s.componentDidUpdate=function(l,m){m.status!=Pr.Rendered&&this.state.status==Pr.Loaded&&(this.setState({status:Pr.Rendered}),this.props.config.eventEmitter.emit("ready"))},s.render=function(){return Yt(this.configContext.Provider,{value:this.props.config},Yt("div",{role:"complementary",className:Xn("gridjs",rn("container"),this.state.status===Pr.Loading?rn("loading"):null,this.props.config.className.container),style:Yn({},this.props.config.style.container,{width:this.props.width})},this.state.status===Pr.Loading&&Yt("div",{className:rn("loading-bar")}),Yt(k0,null),Yt("div",{className:rn("wrapper"),style:{height:this.props.height}},Yt(A0,{ref:this.props.config.tableRef,data:this.state.data,header:this.state.header,width:this.props.width,height:this.props.height,status:this.state.status})),Yt(M0,null),Yt("div",{ref:this.props.config.tempRef,id:"gridjs-temp",className:rn("temp")})))},a}(cr),P0=function(u){function a(l){var m;return(m=u.call(this)||this).config=void 0,m.plugin=void 0,m.config=new y0({instance:gc(m),eventEmitter:gc(m)}).update(l),m.plugin=m.config.plugin,m}zi(a,u);var s=a.prototype;return s.updateConfig=function(l){return this.config.update(l),this},s.createElement=function(){return Yt(D0,{config:this.config,pipeline:this.config.pipeline,header:this.config.header,width:this.config.width,height:this.config.height})},s.forceRender=function(){return this.config&&this.config.container||Qr.error("Container is empty. Make sure you call render() before forceRender()",!0),this.config.pipeline.clearCache(),mc(null,this.config.container),mc(this.createElement(),this.config.container),this},s.render=function(l){return l||Qr.error("Container element cannot be null",!0),l.childNodes.length>0?(Qr.error("The container element "+l+" is not empty. Make sure the container is empty and call render() again"),this):(this.config.container=l,mc(this.createElement(),l),this)},a}(Uu),Kh=[],Kf=$i.__b,Wf=$i.__r,Xf=$i.diffed,Yf=$i.__c,Jf=$i.unmount;function L0(){Kh.forEach(function(u){if(u.__P)try{u.__H.__h.forEach(Iu),u.__H.__h.forEach(Wh),u.__H.__h=[]}catch(a){u.__H.__h=[],$i.__e(a,u.__v)}}),Kh=[]}$i.__b=function(u){Kf&&Kf(u)},$i.__r=function(u){Wf&&Wf(u);var a=u.__c.__H;a&&(a.__h.forEach(Iu),a.__h.forEach(Wh),a.__h=[])},$i.diffed=function(u){Xf&&Xf(u);var a=u.__c;a&&a.__H&&a.__H.__h.length&&(Kh.push(a)!==1&&Zf===$i.requestAnimationFrame||((Zf=$i.requestAnimationFrame)||function(s){var l,m=function(){clearTimeout(g),Qf&&cancelAnimationFrame(l),setTimeout(s)},g=setTimeout(m,100);Qf&&(l=requestAnimationFrame(m))})(L0))},$i.__c=function(u,a){a.some(function(s){try{s.__h.forEach(Iu),s.__h=s.__h.filter(function(l){return!l.__||Wh(l)})}catch(l){a.some(function(m){m.__h&&(m.__h=[])}),a=[],$i.__e(l,s.__v)}}),Yf&&Yf(u,a)},$i.unmount=function(u){Jf&&Jf(u);var a=u.__c;if(a&&a.__H)try{a.__H.__.forEach(Iu)}catch(s){$i.__e(s,a.__v)}};var Qf=typeof requestAnimationFrame=="function";function Iu(u){typeof u.__c=="function"&&u.__c()}function Wh(u){u.__c=u.__()}function R0(u){let a;return{c(){a=ge("article")},l(s){a=_e(s,"ARTICLE",{}),Ce(a).forEach(Y)},m(s,l){et(s,a,l),u[18](a)},p:Ba,i:Ba,o:Ba,d(s){s&&Y(a),u[18](null)}}}function z0(u,a,s){let{width:l="100%"}=a,{height:m="auto"}=a,{autoWidth:g=!0}=a,{fixedHeader:v=!1}=a,{resizable:r=!1}=a,{from:T=void 0}=a,{language:A=void 0}=a,{search:C=!1}=a,{sort:I=!1}=a,{pagination:k=!1}=a,{server:K=void 0}=a,{columns:$=void 0}=a,{data:he=void 0}=a,{plugins:we=void 0}=a,{style:Te={}}=a,{className:me={}}=a;const Le=new P0({from:T,data:he,columns:$,server:K,search:C,sort:I,pagination:k,language:A,width:l,height:m,autoWidth:g,plugins:we,fixedHeader:v,resizable:r,style:Te,className:me});let Ue;const Oe=z_();Le.on("cellClick",(...Me)=>Oe("cellClick",{...Me})),Le.on("rowClick",(...Me)=>Oe("rowClick",{...Me})),Le.on("beforeLoad",()=>Oe("beforeLoad")),Le.on("load",Me=>Oe("load",{...Me})),Le.on("ready",()=>Oe("ready")),fs(()=>{Ue&&Le.render(Ue)});function We(Me){Di[Me?"unshift":"push"](()=>{Ue=Me,s(0,Ue)})}return u.$$set=Me=>{"width"in Me&&s(1,l=Me.width),"height"in Me&&s(2,m=Me.height),"autoWidth"in Me&&s(3,g=Me.autoWidth),"fixedHeader"in Me&&s(4,v=Me.fixedHeader),"resizable"in Me&&s(5,r=Me.resizable),"from"in Me&&s(6,T=Me.from),"language"in Me&&s(7,A=Me.language),"search"in Me&&s(8,C=Me.search),"sort"in Me&&s(9,I=Me.sort),"pagination"in Me&&s(10,k=Me.pagination),"server"in Me&&s(11,K=Me.server),"columns"in Me&&s(12,$=Me.columns),"data"in Me&&s(13,he=Me.data),"plugins"in Me&&s(14,we=Me.plugins),"style"in Me&&s(15,Te=Me.style),"className"in Me&&s(16,me=Me.className)},u.$$.update=()=>{u.$$.dirty&114687&&Ue&&Le.updateConfig({from:T,data:he,columns:$,server:K,search:C,sort:I,pagination:k,language:A,width:l,height:m,autoWidth:g,fixedHeader:v,style:Te,className:me,resizable:r}).forceRender()},[Ue,l,m,g,v,r,T,A,C,I,k,K,$,he,we,Te,me,Le,We]}class B0 extends An{constructor(a){super(),kn(this,a,z0,R0,Mn,{width:1,height:2,autoWidth:3,fixedHeader:4,resizable:5,from:6,language:7,search:8,sort:9,pagination:10,server:11,columns:12,data:13,plugins:14,style:15,className:16,instance:17})}get instance(){return this.$$.ctx[17]}}function nd(u,a){u.prototype=Object.create(a.prototype),u.prototype.constructor=u,Om(u,a)}function Om(u,a){return(Om=Object.setPrototypeOf||function(s,l){return s.__proto__=l,s})(u,a)}var F0=function(u){function a(){return u.apply(this,arguments)||this}nd(a,u);var s=a.prototype;return s.getInitialState=function(){return{rowIds:[]}},s.handle=function(l,m){l==="CHECK"&&this.check(m.ROW_ID),l==="UNCHECK"&&this.uncheck(m.ROW_ID)},s.check=function(l){this.state.rowIds.indexOf(l)>-1||this.setState({rowIds:[l].concat(this.state.rowIds)})},s.uncheck=function(l){var m=this.state.rowIds.indexOf(l);if(m!==-1){var g=[].concat(this.state.rowIds);g.splice(m,1),this.setState({rowIds:g})}},a}($h),O0=function(u){function a(){return u.apply(this,arguments)||this}nd(a,u);var s=a.prototype;return s.check=function(l){this.dispatch("CHECK",{ROW_ID:l})},s.uncheck=function(l){this.dispatch("UNCHECK",{ROW_ID:l})},a}(ed),Nm=function(u){function a(l,m){var g;if((g=u.call(this,l,m)||this).actions=void 0,g.store=void 0,g.storeUpdatedFn=void 0,g.isDataCell=function(r){return r.row!==void 0},g.getParentTR=function(){return g.base&&g.base.parentElement&&g.base.parentElement.parentElement},g.state={isChecked:!1},g.isDataCell(l)){if(l.store)g.store=l.store;else{var v=new F0(g.config.dispatcher);g.store=v,l.plugin.props.store=v}g.actions=new O0(g.config.dispatcher),g.storeUpdatedFn=g.storeUpdated.bind(function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(g)),g.store.on("updated",g.storeUpdatedFn),l.cell.data&&g.check()}return g}nd(a,u);var s=a.prototype;return s.componentWillUnmount=function(){this.store.off("updated",this.storeUpdatedFn)},s.componentDidMount=function(){this.store&&this.storeUpdated(this.store.state)},s.storeUpdated=function(l){var m=this.getParentTR();if(m){var g=l.rowIds.indexOf(this.props.id(this.props.row))>-1;this.setState({isChecked:g}),g?m.classList.add(this.props.selectedClassName):m.classList.remove(this.props.selectedClassName)}},s.check=function(){this.actions.check(this.props.id(this.props.row)),this.props.cell.update(!0)},s.uncheck=function(){this.actions.uncheck(this.props.id(this.props.row)),this.props.cell.update(!1)},s.toggle=function(){this.state.isChecked?this.uncheck():this.check()},s.render=function(){var l=this;return this.isDataCell(this.props)?Yt("input",{type:"checkbox",checked:this.state.isChecked,onChange:function(){return l.toggle()},className:this.props.checkboxClassName}):null},a}(td);Nm.defaultProps={selectedClassName:rn("tr","selected"),checkboxClassName:rn("checkbox")};const Um=sm(void 0),Lu=sm(void 0);function N0(u){let a,s,l,m,g,v,r,T,A,C,I;function k($){u[4]($)}let K={columns:u[2],style:u[1],pagination:!0,search:!0,sort:!0,resizable:!1};return u[0]!==void 0&&(K.data=u[0]),l=new B0({props:K}),Di.push(()=>bo(l,"data",k)),l.$on("cellClick",u[3]),{c(){a=ge("div"),s=ge("div"),Ei(l.$$.fragment),g=St(),v=ge("p"),r=wt("Hole "),T=ge("span"),A=wt("Shift"),C=wt(" key to sort by multiple columns"),this.h()},l($){a=_e($,"DIV",{class:!0});var he=Ce(a);s=_e(he,"DIV",{class:!0});var we=Ce(s);qi(l.$$.fragment,we),g=Et(we),v=_e(we,"P",{class:!0});var Te=Ce(v);r=Ct(Te,"Hole "),T=_e(Te,"SPAN",{class:!0});var me=Ce(T);A=Ct(me,"Shift"),me.forEach(Y),C=Ct(Te," key to sort by multiple columns"),Te.forEach(Y),we.forEach(Y),he.forEach(Y),this.h()},h(){ve(T,"class","tag is-primary"),ve(v,"class","subtitle is-5"),ve(s,"class","column"),ve(a,"class","datatable-content columns svelte-12wyn94")},m($,he){et($,a,he),ie(a,s),Ii(l,s,null),ie(s,g),ie(s,v),ie(v,r),ie(v,T),ie(T,A),ie(v,C),I=!0},p($,[he]){const we={};!m&&he&1&&(m=!0,we.data=$[0],vo(()=>m=!1)),l.$set(we)},i($){I||(_t(l.$$.fragment,$),I=!0)},o($){It(l.$$.fragment,$),I=!1},d($){$&&Y(a),Ai(l)}}}function U0(u,a,s){let l;ku(u,Lu,I=>s(5,l=I));const m={master:[{column:"datapoint_id",title:"ID",type:"Number"},{column:"region",title:"Region",type:"String"},{column:"country",title:"Country",type:"String"},{column:"country_code",title:"Code",type:"String"},{column:"date",title:"Date",type:"String"},{column:"city",title:"City",type:"String"},{column:"system",title:"System",type:"String"},{column:"element",title:"Element",type:"String"},{column:"component",title:"Component",type:"String"},{column:"data_collector",title:"Organisation",type:"String"},{column:"num_hh_served",title:"Number of households served",type:"Number"},{column:"num_people_served",title:"Number of people served",type:"Number"},{column:"num_people_per_hh",title:"Number of people per household",type:"Number"},{column:"tach",title:"TACH$2020",type:"Number"},{column:"tacc",title:"TACC$2020",type:"Number"},{column:"case_description",title:"Description",type:"String"}]};let g={table:{"white-space":"nowrap"}},r=[{id:"id-checkbox",name:"",plugin:{component:Nm,props:{id:I=>I.cell(1).data}}},...m.master.map(I=>I.title)],T=[];fs(async()=>{if(!l){const I=await ym();Lu.update(()=>I)}s(0,T=[]),l.forEach(I=>{let k=[];m.master.forEach(K=>{!I.master[K.column]||(K.type==="Number"?k.push(Number(I.master[K.column])):k.push(I.master[K.column]))}),T.push(k)})});const A=()=>{};function C(I){T=I,s(0,T)}return[T,g,r,A,C]}class V0 extends An{constructor(a){super(),kn(this,a,U0,N0,Mn,{})}}var Jo={exports:{}};(function(u,a){(function(s,l){u.exports=l()})(Cl,function(){var s,l,m;function g(r,T){if(!s)s=T;else if(!l)l=T;else{var A="var sharedChunk = {}; ("+s+")(sharedChunk); ("+l+")(sharedChunk);",C={};s(C),m=T(C),typeof window<"u"&&(m.workerUrl=window.URL.createObjectURL(new Blob([A],{type:"text/javascript"})))}}g(["exports"],function(r){var T=A;function A(i,e,n,c){this.cx=3*i,this.bx=3*(n-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(c-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=e,this.p2x=n,this.p2y=c}function C(i,e,n,c){const p=new T(i,e,n,c);return function(_){return p.solve(_)}}A.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,e){if(e===void 0&&(e=1e-6),i<0)return 0;if(i>1)return 1;for(var n=i,c=0;c<8;c++){var p=this.sampleCurveX(n)-i;if(Math.abs(p)<e)return n;var _=this.sampleCurveDerivativeX(n);if(Math.abs(_)<1e-6)break;n-=p/_}var b=0,w=1;for(n=i,c=0;c<20&&(p=this.sampleCurveX(n),!(Math.abs(p-i)<e));c++)i>p?b=n:w=n,n=.5*(w-b)+b;return n},solve:function(i,e){return this.sampleCurveY(this.solveCurveX(i,e))}};const I=C(.25,.1,.25,1);function k(i,e,n){return Math.min(n,Math.max(e,i))}function K(i,e,n){const c=n-e,p=((i-e)%c+c)%c+e;return p===e?n:p}function $(i,...e){for(const n of e)for(const c in n)i[c]=n[c];return i}let he=1;function we(i,e){i.forEach(n=>{e[n]&&(e[n]=e[n].bind(e))})}function Te(i,e,n){const c={};for(const p in i)c[p]=e.call(n||this,i[p],p,i);return c}function me(i,e,n){const c={};for(const p in i)e.call(n||this,i[p],p,i)&&(c[p]=i[p]);return c}function Le(i){return Array.isArray(i)?i.map(Le):typeof i=="object"&&i?Te(i,Le):i}const Ue={};function Oe(i){Ue[i]||(typeof console<"u"&&console.warn(i),Ue[i]=!0)}function We(i,e,n){return(n.y-i.y)*(e.x-i.x)>(e.y-i.y)*(n.x-i.x)}function Me(i){let e=0;for(let n,c,p=0,_=i.length,b=_-1;p<_;b=p++)n=i[p],c=i[b],e+=(c.x-n.x)*(n.y+c.y);return e}function Ve(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function tt(i){const e={};if(i.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(n,c,p,_)=>{const b=p||_;return e[c]=!b||b.toLowerCase(),""}),e["max-age"]){const n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}let it,dt,Dt=null;function He(i){if(Dt==null){const e=i.navigator?i.navigator.userAgent:null;Dt=!!i.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return Dt}function Xe(i){return typeof ImageBitmap<"u"&&i instanceof ImageBitmap}const pt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(i){const e=requestAnimationFrame(i);return{cancel:()=>cancelAnimationFrame(e)}},getImageData(i,e=0){const n=window.document.createElement("canvas"),c=n.getContext("2d");if(!c)throw new Error("failed to create canvas 2d context");return n.width=i.width,n.height=i.height,c.drawImage(i,0,0,i.width,i.height),c.getImageData(-e,-e,i.width+2*e,i.height+2*e)},resolveURL:i=>(it||(it=document.createElement("a")),it.href=i,it.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(dt==null&&(dt=matchMedia("(prefers-reduced-motion: reduce)")),dt.matches)}};var Ne=Ft;function Ft(i,e){this.x=i,this.y=e}Ft.prototype={clone:function(){return new Ft(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,e){return this.clone()._rotateAround(i,e)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var e=i.x-this.x,n=i.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,e){return Math.atan2(this.x*e-this.y*i,this.x*i+this.y*e)},_matMult:function(i){var e=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=e,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var e=Math.cos(i),n=Math.sin(i),c=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=c,this},_rotateAround:function(i,e){var n=Math.cos(i),c=Math.sin(i),p=e.y+c*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-c*(this.y-e.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ft.convert=function(i){return i instanceof Ft?i:Array.isArray(i)?new Ft(i[0],i[1]):i};const ut={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},jt="mapbox-tiles";let yt,mi,bi=500,gi=50;function Lt(){typeof caches>"u"||yt||(yt=caches.open(jt))}let vi=1/0;const Qt={supported:!1,testSupport:function(i){!pi&&Ui&&(ot?Bi(i):ui=i)}};let ui,Ui,pi=!1,ot=!1;function Bi(i){const e=i.createTexture();i.bindTexture(i.TEXTURE_2D,e);try{if(i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,Ui),i.isContextLost())return;Qt.supported=!0}catch{}i.deleteTexture(e),pi=!0}typeof document<"u"&&(Ui=document.createElement("img"),Ui.onload=function(){ui&&Bi(ui),ui=null,ot=!0},Ui.onerror=function(){pi=!0,ui=null},Ui.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const wi={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(wi);class Qe extends Error{constructor(e,n,c,p){super(`AJAXError: ${n} (${e}): ${c}`),this.status=e,this.statusText=n,this.url=c,this.body=p}}const Nt=Ve()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function ki(i,e){const n=new AbortController,c=new Request(i.url,{method:i.method||"GET",body:i.body,credentials:i.credentials,headers:i.headers,referrer:Nt(),signal:n.signal});let p=!1,_=!1;return i.type==="json"&&c.headers.set("Accept","application/json"),((b,w,S)=>{if(_)return;const D=Date.now();fetch(c).then(z=>z.ok?((N,j,H)=>{(i.type==="arrayBuffer"?N.arrayBuffer():i.type==="json"?N.json():N.text()).then(q=>{_||(j&&H&&function(ue,re,Se){if(Lt(),!yt)return;const Fe={status:re.status,statusText:re.statusText,headers:new Headers};re.headers.forEach((Pe,$e)=>Fe.headers.set($e,Pe));const xe=tt(re.headers.get("Cache-Control")||"");xe["no-store"]||(xe["max-age"]&&Fe.headers.set("Expires",new Date(Se+1e3*xe["max-age"]).toUTCString()),new Date(Fe.headers.get("Expires")).getTime()-Se<42e4||function(Pe,$e){if(mi===void 0)try{new Response(new ReadableStream),mi=!0}catch{mi=!1}mi?$e(Pe.body):Pe.blob().then($e)}(re,Pe=>{const $e=new Response(Pe,Fe);Lt(),yt&&yt.then(Je=>Je.put(function(Bt){const Ht=Bt.indexOf("?");return Ht<0?Bt:Bt.slice(0,Ht)}(ue.url),$e)).catch(Je=>Oe(Je.message))}))}(c,j,H),p=!0,e(null,q,N.headers.get("Cache-Control"),N.headers.get("Expires")))}).catch(q=>{_||e(new Error(q.message))})})(z,null,D):z.blob().then(N=>e(new Qe(z.status,z.statusText,i.url,N)))).catch(z=>{z.code!==20&&e(new Error(z.message))})})(),{cancel:()=>{_=!0,p||n.abort()}}}const Vi=function(i,e){if(/:\/\//.test(i.url)&&!/^https?:|^file:/.test(i.url)){if(Ve()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,e);if(!Ve()){const c=i.url.substring(0,i.url.indexOf("://"));return(ut.REGISTERED_PROTOCOLS[c]||ki)(i,e)}}if(!(/^file:/.test(n=i.url)||/^file:/.test(Nt())&&!/^\w+:/.test(n))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return ki(i,e);if(Ve()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",i,e,void 0,!0)}var n;return function(c,p){const _=new XMLHttpRequest;_.open(c.method||"GET",c.url,!0),c.type==="arrayBuffer"&&(_.responseType="arraybuffer");for(const b in c.headers)_.setRequestHeader(b,c.headers[b]);return c.type==="json"&&(_.responseType="text",_.setRequestHeader("Accept","application/json")),_.withCredentials=c.credentials==="include",_.onerror=()=>{p(new Error(_.statusText))},_.onload=()=>{if((_.status>=200&&_.status<300||_.status===0)&&_.response!==null){let b=_.response;if(c.type==="json")try{b=JSON.parse(_.response)}catch(w){return p(w)}p(null,b,_.getResponseHeader("Cache-Control"),_.getResponseHeader("Expires"))}else{const b=new Blob([_.response],{type:_.getResponseHeader("Content-Type")});p(new Qe(_.status,_.statusText,c.url,b))}},_.send(c.body),{cancel:()=>_.abort()}}(i,e)},fn=function(i,e){return Vi($(i,{type:"arrayBuffer"}),e)};function Mi(i){const e=window.document.createElement("a");return e.href=i,e.protocol===window.document.location.protocol&&e.host===window.document.location.host}const ni="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let si,Dn;si=[],Dn=0;const ei=function(i,e){if(Qt.supported&&(i.headers||(i.headers={}),i.headers.accept="image/webp,*/*"),Dn>=ut.MAX_PARALLEL_IMAGE_REQUESTS){const _={requestParameters:i,callback:e,cancelled:!1,cancel(){this.cancelled=!0}};return si.push(_),_}Dn++;let n=!1;const c=()=>{if(!n)for(n=!0,Dn--;si.length&&Dn<ut.MAX_PARALLEL_IMAGE_REQUESTS;){const _=si.shift(),{requestParameters:b,callback:w,cancelled:S}=_;S||(_.cancel=ei(b,w).cancel)}},p=fn(i,(_,b,w,S)=>{c(),_?e(_):b&&function(D,z){typeof createImageBitmap=="function"?function(N,j){const H=new Blob([new Uint8Array(N)],{type:"image/png"});createImageBitmap(H).then(q=>{j(null,q)}).catch(q=>{j(new Error(`Could not load image because of ${q.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(D,z):function(N,j){const H=new Image;H.onload=()=>{j(null,H),URL.revokeObjectURL(H.src),H.onload=null,window.requestAnimationFrame(()=>{H.src=ni})},H.onerror=()=>j(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const q=new Blob([new Uint8Array(N)],{type:"image/png"});H.src=N.byteLength?URL.createObjectURL(q):ni}(D,z)}(b,(D,z)=>{D!=null?e(D):z!=null&&e(null,z,{cacheControl:w,expires:S})})});return{cancel:()=>{p.cancel(),c()}}};function qt(i,e,n){n[i]&&n[i].indexOf(e)!==-1||(n[i]=n[i]||[],n[i].push(e))}function Xi(i,e,n){if(n&&n[i]){const c=n[i].indexOf(e);c!==-1&&n[i].splice(c,1)}}class ti{constructor(e,n={}){$(this,n),this.type=e}}class mn extends ti{constructor(e,n={}){super("error",$({error:e},n))}}class xn{on(e,n){return this._listeners=this._listeners||{},qt(e,n,this._listeners),this}off(e,n){return Xi(e,n,this._listeners),Xi(e,n,this._oneTimeListeners),this}once(e,n){return this._oneTimeListeners=this._oneTimeListeners||{},qt(e,n,this._oneTimeListeners),this}fire(e,n){typeof e=="string"&&(e=new ti(e,n||{}));const c=e.type;if(this.listens(c)){e.target=this;const p=this._listeners&&this._listeners[c]?this._listeners[c].slice():[];for(const w of p)w.call(this,e);const _=this._oneTimeListeners&&this._oneTimeListeners[c]?this._oneTimeListeners[c].slice():[];for(const w of _)Xi(c,w,this._oneTimeListeners),w.call(this,e);const b=this._eventedParent;b&&($(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(e))}else e instanceof mn&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,n){return this._eventedParent=e,this._eventedParentData=n,this}}var se={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class Ie{constructor(e,n,c,p){this.message=(e?`${e}: `:"")+c,p&&(this.identifier=p),n!=null&&n.__line__&&(this.line=n.__line__)}}function mt(i){const e=i.value;return e?[new Ie(i.key,e,"constants have been deprecated as of v8")]:[]}function li(i,...e){for(const n of e)for(const c in n)i[c]=n[c];return i}function $t(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function di(i){if(Array.isArray(i))return i.map(di);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const e={};for(const n in i)e[n]=di(i[n]);return e}return $t(i)}class Pi extends Error{constructor(e,n){super(n),this.message=n,this.key=e}}class tn{constructor(e,n=[]){this.parent=e,this.bindings={};for(const[c,p]of n)this.bindings[c]=p}concat(e){return new tn(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const xi={kind:"null"},nt={kind:"number"},ii={kind:"string"},Ut={kind:"boolean"},Yi={kind:"color"},wn={kind:"object"},Vt={kind:"value"},Cn={kind:"collator"},Zi={kind:"formatted"},sa={kind:"padding"},Fi={kind:"resolvedImage"};function on(i,e){return{kind:"array",itemType:i,N:e}}function fi(i){if(i.kind==="array"){const e=fi(i.itemType);return typeof i.N=="number"?`array<${e}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${e}>`}return i.kind}const Bn=[xi,nt,ii,Ut,Yi,Zi,wn,on(Vt),sa,Fi];function gn(i,e){if(e.kind==="error")return null;if(i.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!gn(i.itemType,e.itemType))&&(typeof i.N!="number"||i.N===e.N))return null}else{if(i.kind===e.kind)return null;if(i.kind==="value"){for(const n of Bn)if(!gn(n,e))return null}}return`Expected ${fi(i)} but found ${fi(e)} instead.`}function _n(i,e){return e.some(n=>n.kind===i.kind)}function Sn(i,e){return e.some(n=>n==="null"?i===null:n==="array"?Array.isArray(i):n==="object"?i&&!Array.isArray(i)&&typeof i=="object":n===typeof i)}var Zn,hn={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function W(i){return(i=Math.round(i))<0?0:i>255?255:i}function L(i){return W(i[i.length-1]==="%"?parseFloat(i)/100*255:parseInt(i))}function B(i){return(e=i[i.length-1]==="%"?parseFloat(i)/100:parseFloat(i))<0?0:e>1?1:e;var e}function R(i,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?i+(e-i)*n*6:2*n<1?e:3*n<2?i+(e-i)*(2/3-n)*6:i}try{Zn={}.parseCSSColor=function(i){var e,n=i.replace(/ /g,"").toLowerCase();if(n in hn)return hn[n].slice();if(n[0]==="#")return n.length===4?(e=parseInt(n.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:n.length===7&&(e=parseInt(n.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var c=n.indexOf("("),p=n.indexOf(")");if(c!==-1&&p+1===n.length){var _=n.substr(0,c),b=n.substr(c+1,p-(c+1)).split(","),w=1;switch(_){case"rgba":if(b.length!==4)return null;w=B(b.pop());case"rgb":return b.length!==3?null:[L(b[0]),L(b[1]),L(b[2]),w];case"hsla":if(b.length!==4)return null;w=B(b.pop());case"hsl":if(b.length!==3)return null;var S=(parseFloat(b[0])%360+360)%360/360,D=B(b[1]),z=B(b[2]),N=z<=.5?z*(D+1):z+D-z*D,j=2*z-N;return[W(255*R(j,N,S+1/3)),W(255*R(j,N,S)),W(255*R(j,N,S-1/3)),w];default:return null}}return null}}catch{}class U{constructor(e,n,c,p=1){this.r=e,this.g=n,this.b=c,this.a=p}static parse(e){if(!e)return;if(e instanceof U)return e;if(typeof e!="string")return;const n=Zn(e);return n?new U(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3]):void 0}toString(){const[e,n,c,p]=this.toArray();return`rgba(${Math.round(e)},${Math.round(n)},${Math.round(c)},${p})`}toArray(){const{r:e,g:n,b:c,a:p}=this;return p===0?[0,0,0,0]:[255*e/p,255*n/p,255*c/p,p]}}U.black=new U(0,0,0,1),U.white=new U(1,1,1,1),U.transparent=new U(0,0,0,0),U.red=new U(1,0,0,1);class X{constructor(e,n,c){this.sensitivity=e?n?"variant":"case":n?"accent":"base",this.locale=c,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,n){return this.collator.compare(e,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ce{constructor(e,n,c,p,_){this.text=e,this.image=n,this.scale=c,this.fontStack=p,this.textColor=_}}class ne{constructor(e){this.sections=e}static fromString(e){return new ne([new ce(e,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof ne?e:ne.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class oe{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof oe)return e;if(typeof e=="number")return new oe([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const n of e)if(typeof n!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new oe(e)}}toString(){return JSON.stringify(this.values)}}class fe{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new fe({name:e,available:!1}):null}}function Be(i,e,n,c){return typeof i=="number"&&i>=0&&i<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof n=="number"&&n>=0&&n<=255?c===void 0||typeof c=="number"&&c>=0&&c<=1?null:`Invalid rgba value [${[i,e,n,c].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof c=="number"?[i,e,n,c]:[i,e,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ye(i){if(i===null||typeof i=="string"||typeof i=="boolean"||typeof i=="number"||i instanceof U||i instanceof X||i instanceof ne||i instanceof oe||i instanceof fe)return!0;if(Array.isArray(i)){for(const e of i)if(!Ye(e))return!1;return!0}if(typeof i=="object"){for(const e in i)if(!Ye(i[e]))return!1;return!0}return!1}function Re(i){if(i===null)return xi;if(typeof i=="string")return ii;if(typeof i=="boolean")return Ut;if(typeof i=="number")return nt;if(i instanceof U)return Yi;if(i instanceof X)return Cn;if(i instanceof ne)return Zi;if(i instanceof oe)return sa;if(i instanceof fe)return Fi;if(Array.isArray(i)){const e=i.length;let n;for(const c of i){const p=Re(c);if(n){if(n===p)continue;n=Vt;break}n=p}return on(n||Vt,e)}return wn}function ht(i){const e=typeof i;return i===null?"":e==="string"||e==="number"||e==="boolean"?String(i):i instanceof U||i instanceof ne||i instanceof oe||i instanceof fe?i.toString():JSON.stringify(i)}class ft{constructor(e,n){this.type=e,this.value=n}static parse(e,n){if(e.length!==2)return n.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Ye(e[1]))return n.error("invalid value");const c=e[1];let p=Re(c);const _=n.expectedType;return p.kind!=="array"||p.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(p=_),new ft(p,c)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Ee{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const rt={string:ii,number:nt,boolean:Ut,object:wn};class lt{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");let c,p=1;const _=e[0];if(_==="array"){let w,S;if(e.length>2){const D=e[1];if(typeof D!="string"||!(D in rt)||D==="object")return n.error('The item type argument of "array" must be one of string, number, boolean',1);w=rt[D],p++}else w=Vt;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return n.error('The length argument to "array" must be a positive integer literal',2);S=e[2],p++}c=on(w,S)}else{if(!rt[_])throw new Error(`Types doesn't contain name = ${_}`);c=rt[_]}const b=[];for(;p<e.length;p++){const w=n.parse(e[p],p,Vt);if(!w)return null;b.push(w)}return new lt(c,b)}evaluate(e){for(let n=0;n<this.args.length;n++){const c=this.args[n].evaluate(e);if(!gn(this.type,Re(c)))return c;if(n===this.args.length-1)throw new Ee(`Expected value to be of type ${fi(this.type)}, but found ${fi(Re(c))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const bt={"to-boolean":Ut,"to-color":Yi,"to-number":nt,"to-string":ii};class Zt{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");const c=e[0];if(!bt[c])throw new Error(`Can't parse ${c} as it is not part of the known types`);if((c==="to-boolean"||c==="to-string")&&e.length!==2)return n.error("Expected one argument.");const p=bt[c],_=[];for(let b=1;b<e.length;b++){const w=n.parse(e[b],b,Vt);if(!w)return null;_.push(w)}return new Zt(p,_)}evaluate(e){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(e));if(this.type.kind==="color"){let n,c;for(const p of this.args){if(n=p.evaluate(e),c=null,n instanceof U)return n;if(typeof n=="string"){const _=e.parseColor(n);if(_)return _}else if(Array.isArray(n)&&(c=n.length<3||n.length>4?`Invalid rbga value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:Be(n[0],n[1],n[2],n[3]),!c))return new U(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new Ee(c||`Could not parse color from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}if(this.type.kind==="padding"){let n;for(const c of this.args){n=c.evaluate(e);const p=oe.parse(n);if(p)return p}throw new Ee(`Could not parse padding from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}if(this.type.kind==="number"){let n=null;for(const c of this.args){if(n=c.evaluate(e),n===null)return 0;const p=Number(n);if(!isNaN(p))return p}throw new Ee(`Could not convert ${JSON.stringify(n)} to number.`)}return this.type.kind==="formatted"?ne.fromString(ht(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?fe.fromString(ht(this.args[0].evaluate(e))):ht(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Rt=["Unknown","Point","LineString","Polygon"];class oi{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Rt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let n=this._parseColorCache[e];return n||(n=this._parseColorCache[e]=U.parse(e)),n}}class ji{constructor(e,n,c,p){this.name=e,this.type=n,this._evaluate=c,this.args=p}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,n){const c=e[0],p=ji.definitions[c];if(!p)return n.error(`Unknown expression "${c}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(p)?p[0]:p.type,b=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,w=b.filter(([D])=>!Array.isArray(D)||D.length===e.length-1);let S=null;for(const[D,z]of w){S=new Nn(n.registry,n.path,null,n.scope);const N=[];let j=!1;for(let H=1;H<e.length;H++){const q=e[H],ue=Array.isArray(D)?D[H-1]:D.type,re=S.parse(q,1+N.length,ue);if(!re){j=!0;break}N.push(re)}if(!j)if(Array.isArray(D)&&D.length!==N.length)S.error(`Expected ${D.length} arguments, but found ${N.length} instead.`);else{for(let H=0;H<N.length;H++){const q=Array.isArray(D)?D[H]:D.type,ue=N[H];S.concat(H+1).checkSubtype(q,ue.type)}if(S.errors.length===0)return new ji(c,_,z,N)}}if(w.length===1)n.errors.push(...S.errors);else{const D=(w.length?w:b).map(([N])=>{return j=N,Array.isArray(j)?`(${j.map(fi).join(", ")})`:`(${fi(j.type)}...)`;var j}).join(" | "),z=[];for(let N=1;N<e.length;N++){const j=n.parse(e[N],1+z.length);if(!j)return null;z.push(fi(j.type))}n.error(`Expected arguments of type ${D}, but found (${z.join(", ")}) instead.`)}return null}static register(e,n){ji.definitions=n;for(const c in n)e[c]=ji}}class yn{constructor(e,n,c){this.type=Cn,this.locale=c,this.caseSensitive=e,this.diacriticSensitive=n}static parse(e,n){if(e.length!==2)return n.error("Expected one argument.");const c=e[1];if(typeof c!="object"||Array.isArray(c))return n.error("Collator options argument must be an object.");const p=n.parse(c["case-sensitive"]!==void 0&&c["case-sensitive"],1,Ut);if(!p)return null;const _=n.parse(c["diacritic-sensitive"]!==void 0&&c["diacritic-sensitive"],1,Ut);if(!_)return null;let b=null;return c.locale&&(b=n.parse(c.locale,1,ii),!b)?null:new yn(p,_,b)}evaluate(e){return new X(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}const Ji=8192;function Pn(i,e){i[0]=Math.min(i[0],e[0]),i[1]=Math.min(i[1],e[1]),i[2]=Math.max(i[2],e[0]),i[3]=Math.max(i[3],e[1])}function Da(i,e){return!(i[0]<=e[0]||i[2]>=e[2]||i[1]<=e[1]||i[3]>=e[3])}function Fa(i,e){const n=(180+i[0])/360,c=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i[1]*Math.PI/360)))/360,p=Math.pow(2,e.z);return[Math.round(n*p*Ji),Math.round(c*p*Ji)]}function ee(i,e,n){const c=i[0]-e[0],p=i[1]-e[1],_=i[0]-n[0],b=i[1]-n[1];return c*b-_*p==0&&c*_<=0&&p*b<=0}function Gt(i,e){let n=!1;for(let b=0,w=e.length;b<w;b++){const S=e[b];for(let D=0,z=S.length;D<z-1;D++){if(ee(i,S[D],S[D+1]))return!1;(p=S[D])[1]>(c=i)[1]!=(_=S[D+1])[1]>c[1]&&c[0]<(_[0]-p[0])*(c[1]-p[1])/(_[1]-p[1])+p[0]&&(n=!n)}}var c,p,_;return n}function Wt(i,e){for(let n=0;n<e.length;n++)if(Gt(i,e[n]))return!0;return!1}function Ci(i,e,n,c){const p=c[0]-n[0],_=c[1]-n[1],b=(i[0]-n[0])*_-p*(i[1]-n[1]),w=(e[0]-n[0])*_-p*(e[1]-n[1]);return b>0&&w<0||b<0&&w>0}function Ln(i,e,n){for(const D of n)for(let z=0;z<D.length-1;++z)if((w=[(b=D[z+1])[0]-(_=D[z])[0],b[1]-_[1]])[0]*(S=[(p=e)[0]-(c=i)[0],p[1]-c[1]])[1]-w[1]*S[0]!=0&&Ci(c,p,_,b)&&Ci(_,b,c,p))return!0;var c,p,_,b,w,S;return!1}function En(i,e){for(let n=0;n<i.length;++n)if(!Gt(i[n],e))return!1;for(let n=0;n<i.length-1;++n)if(Ln(i[n],i[n+1],e))return!1;return!0}function Oa(i,e){for(let n=0;n<e.length;n++)if(En(i,e[n]))return!0;return!1}function ga(i,e,n){const c=[];for(let p=0;p<i.length;p++){const _=[];for(let b=0;b<i[p].length;b++){const w=Fa(i[p][b],n);Pn(e,w),_.push(w)}c.push(_)}return c}function oa(i,e,n){const c=[];for(let p=0;p<i.length;p++){const _=ga(i[p],e,n);c.push(_)}return c}function dn(i,e,n,c){if(i[0]<n[0]||i[0]>n[2]){const p=.5*c;let _=i[0]-n[0]>p?-c:n[0]-i[0]>p?c:0;_===0&&(_=i[0]-n[2]>p?-c:n[2]-i[0]>p?c:0),i[0]+=_}Pn(e,i)}function Wn(i,e,n,c){const p=Math.pow(2,c.z)*Ji,_=[c.x*Ji,c.y*Ji],b=[];for(const w of i)for(const S of w){const D=[S.x+_[0],S.y+_[1]];dn(D,e,n,p),b.push(D)}return b}function On(i,e,n,c){const p=Math.pow(2,c.z)*Ji,_=[c.x*Ji,c.y*Ji],b=[];for(const S of i){const D=[];for(const z of S){const N=[z.x+_[0],z.y+_[1]];Pn(e,N),D.push(N)}b.push(D)}if(e[2]-e[0]<=p/2){(w=e)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(const S of b)for(const D of S)dn(D,e,n,p)}var w;return b}class ta{constructor(e,n){this.type=Ut,this.geojson=e,this.geometries=n}static parse(e,n){if(e.length!==2)return n.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Ye(e[1])){const c=e[1];if(c.type==="FeatureCollection")for(let p=0;p<c.features.length;++p){const _=c.features[p].geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new ta(c,c.features[p].geometry)}else if(c.type==="Feature"){const p=c.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new ta(c,c.geometry)}else if(c.type==="Polygon"||c.type==="MultiPolygon")return new ta(c,c)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(n,c){const p=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],b=n.canonicalID();if(c.type==="Polygon"){const w=ga(c.coordinates,_,b),S=Wn(n.geometry(),p,_,b);if(!Da(p,_))return!1;for(const D of S)if(!Gt(D,w))return!1}if(c.type==="MultiPolygon"){const w=oa(c.coordinates,_,b),S=Wn(n.geometry(),p,_,b);if(!Da(p,_))return!1;for(const D of S)if(!Wt(D,w))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(n,c){const p=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],b=n.canonicalID();if(c.type==="Polygon"){const w=ga(c.coordinates,_,b),S=On(n.geometry(),p,_,b);if(!Da(p,_))return!1;for(const D of S)if(!En(D,w))return!1}if(c.type==="MultiPolygon"){const w=oa(c.coordinates,_,b),S=On(n.geometry(),p,_,b);if(!Da(p,_))return!1;for(const D of S)if(!Oa(D,w))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function Ca(i){if(i instanceof ji&&(i.name==="get"&&i.args.length===1||i.name==="feature-state"||i.name==="has"&&i.args.length===1||i.name==="properties"||i.name==="geometry-type"||i.name==="id"||/^filter-/.test(i.name))||i instanceof ta)return!1;let e=!0;return i.eachChild(n=>{e&&!Ca(n)&&(e=!1)}),e}function la(i){if(i instanceof ji&&i.name==="feature-state")return!1;let e=!0;return i.eachChild(n=>{e&&!la(n)&&(e=!1)}),e}function ur(i,e){if(i instanceof ji&&e.indexOf(i.name)>=0)return!1;let n=!0;return i.eachChild(c=>{n&&!ur(c,e)&&(n=!1)}),n}class hr{constructor(e,n){this.type=n.type,this.name=e,this.boundExpression=n}static parse(e,n){if(e.length!==2||typeof e[1]!="string")return n.error("'var' expression requires exactly one string literal argument.");const c=e[1];return n.scope.has(c)?new hr(c,n.scope.get(c)):n.error(`Unknown variable "${c}". Make sure "${c}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class Nn{constructor(e,n=[],c,p=new tn,_=[]){this.registry=e,this.path=n,this.key=n.map(b=>`[${b}]`).join(""),this.scope=p,this.errors=_,this.expectedType=c}parse(e,n,c,p,_={}){return n?this.concat(n,c,p)._parse(e,_):this._parse(e,_)}_parse(e,n){function c(p,_,b){return b==="assert"?new lt(_,[p]):b==="coerce"?new Zt(_,[p]):p}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=e[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[p];if(_){let b=_.parse(e,this);if(!b)return null;if(this.expectedType){const w=this.expectedType,S=b.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||S.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string")if(w.kind!=="padding"||S.kind!=="value"&&S.kind!=="number"&&S.kind!=="array"){if(this.checkSubtype(w,S))return null}else b=c(b,w,n.typeAnnotation||"coerce");else b=c(b,w,n.typeAnnotation||"coerce");else b=c(b,w,n.typeAnnotation||"assert")}if(!(b instanceof ft)&&b.type.kind!=="resolvedImage"&&Br(b)){const w=new oi;try{b=new ft(b.type,b.evaluate(w))}catch(S){return this.error(S.message),null}}return b}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,n,c){const p=typeof e=="number"?this.path.concat(e):this.path,_=c?this.scope.concat(c):this.scope;return new Nn(this.registry,p,n||null,_,this.errors)}error(e,...n){const c=`${this.key}${n.map(p=>`[${p}]`).join("")}`;this.errors.push(new Pi(c,e))}checkSubtype(e,n){const c=gn(e,n);return c&&this.error(c),c}}function Br(i){if(i instanceof hr)return Br(i.boundExpression);if(i instanceof ji&&i.name==="error"||i instanceof yn||i instanceof ta)return!1;const e=i instanceof Zt||i instanceof lt;let n=!0;return i.eachChild(c=>{n=e?n&&Br(c):n&&c instanceof ft}),!!n&&Ca(i)&&ur(i,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Na(i,e){const n=i.length-1;let c,p,_=0,b=n,w=0;for(;_<=b;)if(w=Math.floor((_+b)/2),c=i[w],p=i[w+1],c<=e){if(w===n||e<p)return w;_=w+1}else{if(!(c>e))throw new Ee("Input is not a number.");b=w-1}return 0}class Za{constructor(e,n,c){this.type=e,this.input=n,this.labels=[],this.outputs=[];for(const[p,_]of c)this.labels.push(p),this.outputs.push(_)}static parse(e,n){if(e.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");const c=n.parse(e[1],1,nt);if(!c)return null;const p=[];let _=null;n.expectedType&&n.expectedType.kind!=="value"&&(_=n.expectedType);for(let b=1;b<e.length;b+=2){const w=b===1?-1/0:e[b],S=e[b+1],D=b,z=b+1;if(typeof w!="number")return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(p.length&&p[p.length-1][0]>=w)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const N=n.parse(S,z,_);if(!N)return null;_=_||N.type,p.push([w,N])}return new Za(_,c,p)}evaluate(e){const n=this.labels,c=this.outputs;if(n.length===1)return c[0].evaluate(e);const p=this.input.evaluate(e);if(p<=n[0])return c[0].evaluate(e);const _=n.length;return p>=n[_-1]?c[_-1].evaluate(e):c[Na(n,p)].evaluate(e)}eachChild(e){e(this.input);for(const n of this.outputs)e(n)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function ln(i,e,n){return i*(1-n)+e*n}var Qa=Object.freeze({__proto__:null,number:ln,color:function(i,e,n){return new U(ln(i.r,e.r,n),ln(i.g,e.g,n),ln(i.b,e.b,n),ln(i.a,e.a,n))},array:function(i,e,n){return i.map((c,p)=>ln(c,e[p],n))},padding:function(i,e,n){const c=i.values,p=e.values;return new oe([ln(c[0],p[0],n),ln(c[1],p[1],n),ln(c[2],p[2],n),ln(c[3],p[3],n)])}});const Er=.95047,dr=1.08883,Fr=4/29,$a=6/29,ks=3*$a*$a,Js=Math.PI/180,Ms=180/Math.PI;function ts(i){return i>.008856451679035631?Math.pow(i,1/3):i/ks+Fr}function ms(i){return i>$a?i*i*i:ks*(i-Fr)}function Qs(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function Ds(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function Hi(i){const e=Ds(i.r),n=Ds(i.g),c=Ds(i.b),p=ts((.4124564*e+.3575761*n+.1804375*c)/Er),_=ts((.2126729*e+.7151522*n+.072175*c)/1);return{l:116*_-16,a:500*(p-_),b:200*(_-ts((.0193339*e+.119192*n+.9503041*c)/dr)),alpha:i.a}}function So(i){let e=(i.l+16)/116,n=isNaN(i.a)?e:e+i.a/500,c=isNaN(i.b)?e:e-i.b/200;return e=1*ms(e),n=Er*ms(n),c=dr*ms(c),new U(Qs(3.2404542*n-1.5371385*e-.4985314*c),Qs(-.969266*n+1.8760108*e+.041556*c),Qs(.0556434*n-.2040259*e+1.0572252*c),i.alpha)}function Dl(i,e,n){const c=e-i;return i+n*(c>180||c<-180?c-360*Math.round(c/360):c)}const is={forward:Hi,reverse:So,interpolate:function(i,e,n){return{l:ln(i.l,e.l,n),a:ln(i.a,e.a,n),b:ln(i.b,e.b,n),alpha:ln(i.alpha,e.alpha,n)}}},Ps={forward:function(i){const{l:e,a:n,b:c}=Hi(i),p=Math.atan2(c,n)*Ms;return{h:p<0?p+360:p,c:Math.sqrt(n*n+c*c),l:e,alpha:i.a}},reverse:function(i){const e=i.h*Js,n=i.c;return So({l:i.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:i.alpha})},interpolate:function(i,e,n){return{h:Dl(i.h,e.h,n),c:ln(i.c,e.c,n),l:ln(i.l,e.l,n),alpha:ln(i.alpha,e.alpha,n)}}};var $s=Object.freeze({__proto__:null,lab:is,hcl:Ps});class Ka{constructor(e,n,c,p,_){this.type=e,this.operator=n,this.interpolation=c,this.input=p,this.labels=[],this.outputs=[];for(const[b,w]of _)this.labels.push(b),this.outputs.push(w)}static interpolationFactor(e,n,c,p){let _=0;if(e.name==="exponential")_=Ls(n,e.base,c,p);else if(e.name==="linear")_=Ls(n,1,c,p);else if(e.name==="cubic-bezier"){const b=e.controlPoints;_=new T(b[0],b[1],b[2],b[3]).solve(Ls(n,1,c,p))}return _}static parse(e,n){let[c,p,_,...b]=e;if(!Array.isArray(p)||p.length===0)return n.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const D=p[1];if(typeof D!="number")return n.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:D}}else{if(p[0]!=="cubic-bezier")return n.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const D=p.slice(1);if(D.length!==4||D.some(z=>typeof z!="number"||z<0||z>1))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:D}}}if(e.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(_=n.parse(_,2,nt),!_)return null;const w=[];let S=null;c==="interpolate-hcl"||c==="interpolate-lab"?S=Yi:n.expectedType&&n.expectedType.kind!=="value"&&(S=n.expectedType);for(let D=0;D<b.length;D+=2){const z=b[D],N=b[D+1],j=D+3,H=D+4;if(typeof z!="number")return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(w.length&&w[w.length-1][0]>=z)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',j);const q=n.parse(N,H,S);if(!q)return null;S=S||q.type,w.push([z,q])}return S.kind==="number"||S.kind==="color"||S.kind==="padding"||S.kind==="array"&&S.itemType.kind==="number"&&typeof S.N=="number"?new Ka(S,c,p,_,w):n.error(`Type ${fi(S)} is not interpolatable.`)}evaluate(e){const n=this.labels,c=this.outputs;if(n.length===1)return c[0].evaluate(e);const p=this.input.evaluate(e);if(p<=n[0])return c[0].evaluate(e);const _=n.length;if(p>=n[_-1])return c[_-1].evaluate(e);const b=Na(n,p),w=Ka.interpolationFactor(this.interpolation,p,n[b],n[b+1]),S=c[b].evaluate(e),D=c[b+1].evaluate(e);return this.operator==="interpolate"?Qa[this.type.kind.toLowerCase()](S,D,w):this.operator==="interpolate-hcl"?Ps.reverse(Ps.interpolate(Ps.forward(S),Ps.forward(D),w)):is.reverse(is.interpolate(is.forward(S),is.forward(D),w))}eachChild(e){e(this.input);for(const n of this.outputs)e(n)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function Ls(i,e,n,c){const p=c-n,_=i-n;return p===0?0:e===1?_/p:(Math.pow(e,_)-1)/(Math.pow(e,p)-1)}class Rs{constructor(e,n){this.type=e,this.args=n}static parse(e,n){if(e.length<2)return n.error("Expectected at least one argument.");let c=null;const p=n.expectedType;p&&p.kind!=="value"&&(c=p);const _=[];for(const w of e.slice(1)){const S=n.parse(w,1+_.length,c,void 0,{typeAnnotation:"omit"});if(!S)return null;c=c||S.type,_.push(S)}if(!c)throw new Error("No output type");const b=p&&_.some(w=>gn(p,w.type));return new Rs(b?Vt:c,_)}evaluate(e){let n,c=null,p=0;for(const _ of this.args)if(p++,c=_.evaluate(e),c&&c instanceof fe&&!c.available&&(n||(n=c.name),c=null,p===this.args.length&&(c=n)),c!==null)break;return c}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}class gs{constructor(e,n){this.type=n.type,this.bindings=[].concat(e),this.result=n}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const n of this.bindings)e(n[1]);e(this.result)}static parse(e,n){if(e.length<4)return n.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const c=[];for(let _=1;_<e.length-1;_+=2){const b=e[_];if(typeof b!="string")return n.error(`Expected string, but found ${typeof b} instead.`,_);if(/[^a-zA-Z0-9_]/.test(b))return n.error("Variable names must contain only alphanumeric characters or '_'.",_);const w=n.parse(e[_+1],_+1);if(!w)return null;c.push([b,w])}const p=n.parse(e[e.length-1],e.length-1,n.expectedType,c);return p?new gs(c,p):null}outputDefined(){return this.result.outputDefined()}}class O{constructor(e,n,c){this.type=e,this.index=n,this.input=c}static parse(e,n){if(e.length!==3)return n.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const c=n.parse(e[1],1,nt),p=n.parse(e[2],2,on(n.expectedType||Vt));return c&&p?new O(p.type.itemType,c,p):null}evaluate(e){const n=this.index.evaluate(e),c=this.input.evaluate(e);if(n<0)throw new Ee(`Array index out of bounds: ${n} < 0.`);if(n>=c.length)throw new Ee(`Array index out of bounds: ${n} > ${c.length-1}.`);if(n!==Math.floor(n))throw new Ee(`Array index must be an integer, but found ${n} instead.`);return c[n]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class Z{constructor(e,n){this.type=Ut,this.needle=e,this.haystack=n}static parse(e,n){if(e.length!==3)return n.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const c=n.parse(e[1],1,Vt),p=n.parse(e[2],2,Vt);return c&&p?_n(c.type,[Ut,ii,nt,xi,Vt])?new Z(c,p):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${fi(c.type)} instead`):null}evaluate(e){const n=this.needle.evaluate(e),c=this.haystack.evaluate(e);if(!c)return!1;if(!Sn(n,["boolean","string","number","null"]))throw new Ee(`Expected first argument to be of type boolean, string, number or null, but found ${fi(Re(n))} instead.`);if(!Sn(c,["string","array"]))throw new Ee(`Expected second argument to be of type array or string, but found ${fi(Re(c))} instead.`);return c.indexOf(n)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class le{constructor(e,n,c){this.type=nt,this.needle=e,this.haystack=n,this.fromIndex=c}static parse(e,n){if(e.length<=2||e.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const c=n.parse(e[1],1,Vt),p=n.parse(e[2],2,Vt);if(!c||!p)return null;if(!_n(c.type,[Ut,ii,nt,xi,Vt]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${fi(c.type)} instead`);if(e.length===4){const _=n.parse(e[3],3,nt);return _?new le(c,p,_):null}return new le(c,p)}evaluate(e){const n=this.needle.evaluate(e),c=this.haystack.evaluate(e);if(!Sn(n,["boolean","string","number","null"]))throw new Ee(`Expected first argument to be of type boolean, string, number or null, but found ${fi(Re(n))} instead.`);if(!Sn(c,["string","array"]))throw new Ee(`Expected second argument to be of type array or string, but found ${fi(Re(c))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(e);return c.indexOf(n,p)}return c.indexOf(n)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class de{constructor(e,n,c,p,_,b){this.inputType=e,this.type=n,this.input=c,this.cases=p,this.outputs=_,this.otherwise=b}static parse(e,n){if(e.length<5)return n.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return n.error("Expected an even number of arguments.");let c,p;n.expectedType&&n.expectedType.kind!=="value"&&(p=n.expectedType);const _={},b=[];for(let D=2;D<e.length-1;D+=2){let z=e[D];const N=e[D+1];Array.isArray(z)||(z=[z]);const j=n.concat(D);if(z.length===0)return j.error("Expected at least one branch label.");for(const q of z){if(typeof q!="number"&&typeof q!="string")return j.error("Branch labels must be numbers or strings.");if(typeof q=="number"&&Math.abs(q)>Number.MAX_SAFE_INTEGER)return j.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof q=="number"&&Math.floor(q)!==q)return j.error("Numeric branch labels must be integer values.");if(c){if(j.checkSubtype(c,Re(q)))return null}else c=Re(q);if(_[String(q)]!==void 0)return j.error("Branch labels must be unique.");_[String(q)]=b.length}const H=n.parse(N,D,p);if(!H)return null;p=p||H.type,b.push(H)}const w=n.parse(e[1],1,Vt);if(!w)return null;const S=n.parse(e[e.length-1],e.length-1,p);return S?w.type.kind!=="value"&&n.concat(1).checkSubtype(c,w.type)?null:new de(c,p,w,_,b,S):null}evaluate(e){const n=this.input.evaluate(e);return(Re(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class ke{constructor(e,n,c){this.type=e,this.branches=n,this.otherwise=c}static parse(e,n){if(e.length<4)return n.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return n.error("Expected an odd number of arguments.");let c;n.expectedType&&n.expectedType.kind!=="value"&&(c=n.expectedType);const p=[];for(let b=1;b<e.length-1;b+=2){const w=n.parse(e[b],b,Ut);if(!w)return null;const S=n.parse(e[b+1],b+1,c);if(!S)return null;p.push([w,S]),c=c||S.type}const _=n.parse(e[e.length-1],e.length-1,c);if(!_)return null;if(!c)throw new Error("Can't infer output type");return new ke(c,p,_)}evaluate(e){for(const[n,c]of this.branches)if(n.evaluate(e))return c.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[n,c]of this.branches)e(n),e(c);e(this.otherwise)}outputDefined(){return this.branches.every(([e,n])=>n.outputDefined())&&this.otherwise.outputDefined()}}class ye{constructor(e,n,c,p){this.type=e,this.input=n,this.beginIndex=c,this.endIndex=p}static parse(e,n){if(e.length<=2||e.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const c=n.parse(e[1],1,Vt),p=n.parse(e[2],2,nt);if(!c||!p)return null;if(!_n(c.type,[on(Vt),ii,Vt]))return n.error(`Expected first argument to be of type array or string, but found ${fi(c.type)} instead`);if(e.length===4){const _=n.parse(e[3],3,nt);return _?new ye(c.type,c,p,_):null}return new ye(c.type,c,p)}evaluate(e){const n=this.input.evaluate(e),c=this.beginIndex.evaluate(e);if(!Sn(n,["string","array"]))throw new Ee(`Expected first argument to be of type array or string, but found ${fi(Re(n))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(e);return n.slice(c,p)}return n.slice(c)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function je(i,e){return i==="=="||i==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function at(i,e,n,c){return c.compare(e,n)===0}function hi(i,e,n){const c=i!=="=="&&i!=="!=";return class Vm{constructor(_,b,w){this.type=Ut,this.lhs=_,this.rhs=b,this.collator=w,this.hasUntypedArgument=_.type.kind==="value"||b.type.kind==="value"}static parse(_,b){if(_.length!==3&&_.length!==4)return b.error("Expected two or three arguments.");const w=_[0];let S=b.parse(_[1],1,Vt);if(!S)return null;if(!je(w,S.type))return b.concat(1).error(`"${w}" comparisons are not supported for type '${fi(S.type)}'.`);let D=b.parse(_[2],2,Vt);if(!D)return null;if(!je(w,D.type))return b.concat(2).error(`"${w}" comparisons are not supported for type '${fi(D.type)}'.`);if(S.type.kind!==D.type.kind&&S.type.kind!=="value"&&D.type.kind!=="value")return b.error(`Cannot compare types '${fi(S.type)}' and '${fi(D.type)}'.`);c&&(S.type.kind==="value"&&D.type.kind!=="value"?S=new lt(D.type,[S]):S.type.kind!=="value"&&D.type.kind==="value"&&(D=new lt(S.type,[D])));let z=null;if(_.length===4){if(S.type.kind!=="string"&&D.type.kind!=="string"&&S.type.kind!=="value"&&D.type.kind!=="value")return b.error("Cannot use collator to compare non-string types.");if(z=b.parse(_[3],3,Cn),!z)return null}return new Vm(S,D,z)}evaluate(_){const b=this.lhs.evaluate(_),w=this.rhs.evaluate(_);if(c&&this.hasUntypedArgument){const S=Re(b),D=Re(w);if(S.kind!==D.kind||S.kind!=="string"&&S.kind!=="number")throw new Ee(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${S.kind}, ${D.kind}) instead.`)}if(this.collator&&!c&&this.hasUntypedArgument){const S=Re(b),D=Re(w);if(S.kind!=="string"||D.kind!=="string")return e(_,b,w)}return this.collator?n(_,b,w,this.collator.evaluate(_)):e(_,b,w)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const _i=hi("==",function(i,e,n){return e===n},at),Rn=hi("!=",function(i,e,n){return e!==n},function(i,e,n,c){return!at(0,e,n,c)}),Pa=hi("<",function(i,e,n){return e<n},function(i,e,n,c){return c.compare(e,n)<0}),ns=hi(">",function(i,e,n){return e>n},function(i,e,n,c){return c.compare(e,n)>0}),as=hi("<=",function(i,e,n){return e<=n},function(i,e,n,c){return c.compare(e,n)<=0}),pr=hi(">=",function(i,e,n){return e>=n},function(i,e,n,c){return c.compare(e,n)>=0});class _s{constructor(e,n,c,p,_){this.type=ii,this.number=e,this.locale=n,this.currency=c,this.minFractionDigits=p,this.maxFractionDigits=_}static parse(e,n){if(e.length!==3)return n.error("Expected two arguments.");const c=n.parse(e[1],1,nt);if(!c)return null;const p=e[2];if(typeof p!="object"||Array.isArray(p))return n.error("NumberFormat options argument must be an object.");let _=null;if(p.locale&&(_=n.parse(p.locale,1,ii),!_))return null;let b=null;if(p.currency&&(b=n.parse(p.currency,1,ii),!b))return null;let w=null;if(p["min-fraction-digits"]&&(w=n.parse(p["min-fraction-digits"],1,nt),!w))return null;let S=null;return p["max-fraction-digits"]&&(S=n.parse(p["max-fraction-digits"],1,nt),!S)?null:new _s(c,_,b,w,S)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class zs{constructor(e){this.type=Zi,this.sections=e}static parse(e,n){if(e.length<2)return n.error("Expected at least one argument.");const c=e[1];if(!Array.isArray(c)&&typeof c=="object")return n.error("First argument must be an image or text section.");const p=[];let _=!1;for(let b=1;b<=e.length-1;++b){const w=e[b];if(_&&typeof w=="object"&&!Array.isArray(w)){_=!1;let S=null;if(w["font-scale"]&&(S=n.parse(w["font-scale"],1,nt),!S))return null;let D=null;if(w["text-font"]&&(D=n.parse(w["text-font"],1,on(ii)),!D))return null;let z=null;if(w["text-color"]&&(z=n.parse(w["text-color"],1,Yi),!z))return null;const N=p[p.length-1];N.scale=S,N.font=D,N.textColor=z}else{const S=n.parse(e[b],1,Vt);if(!S)return null;const D=S.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,p.push({content:S,scale:null,font:null,textColor:null})}}return new zs(p)}evaluate(e){return new ne(this.sections.map(n=>{const c=n.content.evaluate(e);return Re(c)===Fi?new ce("",c,null,null,null):new ce(ht(c),null,n.scale?n.scale.evaluate(e):null,n.font?n.font.evaluate(e).join(","):null,n.textColor?n.textColor.evaluate(e):null)}))}eachChild(e){for(const n of this.sections)e(n.content),n.scale&&e(n.scale),n.font&&e(n.font),n.textColor&&e(n.textColor)}outputDefined(){return!1}}class Pl{constructor(e){this.type=Fi,this.input=e}static parse(e,n){if(e.length!==2)return n.error("Expected two arguments.");const c=n.parse(e[1],1,ii);return c?new Pl(c):n.error("No image name provided.")}evaluate(e){const n=this.input.evaluate(e),c=fe.fromString(n);return c&&e.availableImages&&(c.available=e.availableImages.indexOf(n)>-1),c}eachChild(e){e(this.input)}outputDefined(){return!1}}class Ll{constructor(e){this.type=nt,this.input=e}static parse(e,n){if(e.length!==2)return n.error(`Expected 1 argument, but found ${e.length-1} instead.`);const c=n.parse(e[1],1);return c?c.type.kind!=="array"&&c.type.kind!=="string"&&c.type.kind!=="value"?n.error(`Expected argument of type string or array, but found ${fi(c.type)} instead.`):new Ll(c):null}evaluate(e){const n=this.input.evaluate(e);if(typeof n=="string"||Array.isArray(n))return n.length;throw new Ee(`Expected value to be of type string or array, but found ${fi(Re(n))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const eo={"==":_i,"!=":Rn,">":ns,"<":Pa,">=":pr,"<=":as,array:lt,at:O,boolean:lt,case:ke,coalesce:Rs,collator:yn,format:zs,image:Pl,in:Z,"index-of":le,interpolate:Ka,"interpolate-hcl":Ka,"interpolate-lab":Ka,length:Ll,let:gs,literal:ft,match:de,number:lt,"number-format":_s,object:lt,slice:ye,step:Za,string:lt,"to-boolean":Zt,"to-color":Zt,"to-number":Zt,"to-string":Zt,var:hr,within:ta};function bc(i,[e,n,c,p]){e=e.evaluate(i),n=n.evaluate(i),c=c.evaluate(i);const _=p?p.evaluate(i):1,b=Be(e,n,c,_);if(b)throw new Ee(b);return new U(e/255*_,n/255*_,c/255*_,_)}function vc(i,e){return i in e}function il(i,e){const n=e[i];return n===void 0?null:n}function Bs(i){return{type:i}}function xc(i){return{result:"success",value:i}}function to(i){return{result:"error",value:i}}function Un(i){return i["property-type"]==="data-driven"||i["property-type"]==="cross-faded-data-driven"}function wc(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function Gi(i){return!!i.expression&&i.expression.interpolated}function cn(i){return i instanceof Number?"number":i instanceof String?"string":i instanceof Boolean?"boolean":Array.isArray(i)?"array":i===null?"null":typeof i}function Fn(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}function jn(i){return i}function Eo(i,e){const n=e.type==="color",c=i.stops&&typeof i.stops[0][0]=="object",p=c||!(c||i.property!==void 0),_=i.type||(Gi(e)?"exponential":"interval");if(n||e.type==="padding"){const D=n?U.parse:oe.parse;(i=li({},i)).stops&&(i.stops=i.stops.map(z=>[z[0],D(z[1])])),i.default=D(i.default?i.default:e.default)}if(i.colorSpace&&i.colorSpace!=="rgb"&&!$s[i.colorSpace])throw new Error(`Unknown color space: ${i.colorSpace}`);let b,w,S;if(_==="exponential")b=Cc;else if(_==="interval")b=Gu;else if(_==="categorical"){b=ju,w=Object.create(null);for(const D of i.stops)w[D[0]]=D[1];S=typeof i.stops[0][0]}else{if(_!=="identity")throw new Error(`Unknown function type "${_}"`);b=Hu}if(c){const D={},z=[];for(let H=0;H<i.stops.length;H++){const q=i.stops[H],ue=q[0].zoom;D[ue]===void 0&&(D[ue]={zoom:ue,type:i.type,property:i.property,default:i.default,stops:[]},z.push(ue)),D[ue].stops.push([q[0].value,q[1]])}const N=[];for(const H of z)N.push([D[H].zoom,Eo(D[H],e)]);const j={name:"linear"};return{kind:"composite",interpolationType:j,interpolationFactor:Ka.interpolationFactor.bind(void 0,j),zoomStops:N.map(H=>H[0]),evaluate:({zoom:H},q)=>Cc({stops:N,base:i.base},e,H).evaluate(H,q)}}if(p){const D=_==="exponential"?{name:"exponential",base:i.base!==void 0?i.base:1}:null;return{kind:"camera",interpolationType:D,interpolationFactor:Ka.interpolationFactor.bind(void 0,D),zoomStops:i.stops.map(z=>z[0]),evaluate:({zoom:z})=>b(i,e,z,w,S)}}return{kind:"source",evaluate(D,z){const N=z&&z.properties?z.properties[i.property]:void 0;return N===void 0?io(i.default,e.default):b(i,e,N,w,S)}}}function io(i,e,n){return i!==void 0?i:e!==void 0?e:n!==void 0?n:void 0}function ju(i,e,n,c,p){return io(typeof n===p?c[n]:void 0,i.default,e.default)}function Gu(i,e,n){if(cn(n)!=="number")return io(i.default,e.default);const c=i.stops.length;if(c===1||n<=i.stops[0][0])return i.stops[0][1];if(n>=i.stops[c-1][0])return i.stops[c-1][1];const p=Na(i.stops.map(_=>_[0]),n);return i.stops[p][1]}function Cc(i,e,n){const c=i.base!==void 0?i.base:1;if(cn(n)!=="number")return io(i.default,e.default);const p=i.stops.length;if(p===1||n<=i.stops[0][0])return i.stops[0][1];if(n>=i.stops[p-1][0])return i.stops[p-1][1];const _=Na(i.stops.map(z=>z[0]),n),b=function(z,N,j,H){const q=H-j,ue=z-j;return q===0?0:N===1?ue/q:(Math.pow(N,ue)-1)/(Math.pow(N,q)-1)}(n,c,i.stops[_][0],i.stops[_+1][0]),w=i.stops[_][1],S=i.stops[_+1][1];let D=Qa[e.type]||jn;if(i.colorSpace&&i.colorSpace!=="rgb"){const z=$s[i.colorSpace];D=(N,j)=>z.reverse(z.interpolate(z.forward(N),z.forward(j),b))}return typeof w.evaluate=="function"?{evaluate(...z){const N=w.evaluate.apply(void 0,z),j=S.evaluate.apply(void 0,z);if(N!==void 0&&j!==void 0)return D(N,j,b)}}:D(w,S,b)}function Hu(i,e,n){switch(e.type){case"color":n=U.parse(n);break;case"formatted":n=ne.fromString(n.toString());break;case"resolvedImage":n=fe.fromString(n.toString());break;case"padding":n=oe.parse(n);break;default:cn(n)===e.type||e.type==="enum"&&e.values[n]||(n=void 0)}return io(n,i.default,e.default)}ji.register(eo,{error:[{kind:"error"},[ii],(i,[e])=>{throw new Ee(e.evaluate(i))}],typeof:[ii,[Vt],(i,[e])=>fi(Re(e.evaluate(i)))],"to-rgba":[on(nt,4),[Yi],(i,[e])=>e.evaluate(i).toArray()],rgb:[Yi,[nt,nt,nt],bc],rgba:[Yi,[nt,nt,nt,nt],bc],has:{type:Ut,overloads:[[[ii],(i,[e])=>vc(e.evaluate(i),i.properties())],[[ii,wn],(i,[e,n])=>vc(e.evaluate(i),n.evaluate(i))]]},get:{type:Vt,overloads:[[[ii],(i,[e])=>il(e.evaluate(i),i.properties())],[[ii,wn],(i,[e,n])=>il(e.evaluate(i),n.evaluate(i))]]},"feature-state":[Vt,[ii],(i,[e])=>il(e.evaluate(i),i.featureState||{})],properties:[wn,[],i=>i.properties()],"geometry-type":[ii,[],i=>i.geometryType()],id:[Vt,[],i=>i.id()],zoom:[nt,[],i=>i.globals.zoom],"heatmap-density":[nt,[],i=>i.globals.heatmapDensity||0],"line-progress":[nt,[],i=>i.globals.lineProgress||0],accumulated:[Vt,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[nt,Bs(nt),(i,e)=>{let n=0;for(const c of e)n+=c.evaluate(i);return n}],"*":[nt,Bs(nt),(i,e)=>{let n=1;for(const c of e)n*=c.evaluate(i);return n}],"-":{type:nt,overloads:[[[nt,nt],(i,[e,n])=>e.evaluate(i)-n.evaluate(i)],[[nt],(i,[e])=>-e.evaluate(i)]]},"/":[nt,[nt,nt],(i,[e,n])=>e.evaluate(i)/n.evaluate(i)],"%":[nt,[nt,nt],(i,[e,n])=>e.evaluate(i)%n.evaluate(i)],ln2:[nt,[],()=>Math.LN2],pi:[nt,[],()=>Math.PI],e:[nt,[],()=>Math.E],"^":[nt,[nt,nt],(i,[e,n])=>Math.pow(e.evaluate(i),n.evaluate(i))],sqrt:[nt,[nt],(i,[e])=>Math.sqrt(e.evaluate(i))],log10:[nt,[nt],(i,[e])=>Math.log(e.evaluate(i))/Math.LN10],ln:[nt,[nt],(i,[e])=>Math.log(e.evaluate(i))],log2:[nt,[nt],(i,[e])=>Math.log(e.evaluate(i))/Math.LN2],sin:[nt,[nt],(i,[e])=>Math.sin(e.evaluate(i))],cos:[nt,[nt],(i,[e])=>Math.cos(e.evaluate(i))],tan:[nt,[nt],(i,[e])=>Math.tan(e.evaluate(i))],asin:[nt,[nt],(i,[e])=>Math.asin(e.evaluate(i))],acos:[nt,[nt],(i,[e])=>Math.acos(e.evaluate(i))],atan:[nt,[nt],(i,[e])=>Math.atan(e.evaluate(i))],min:[nt,Bs(nt),(i,e)=>Math.min(...e.map(n=>n.evaluate(i)))],max:[nt,Bs(nt),(i,e)=>Math.max(...e.map(n=>n.evaluate(i)))],abs:[nt,[nt],(i,[e])=>Math.abs(e.evaluate(i))],round:[nt,[nt],(i,[e])=>{const n=e.evaluate(i);return n<0?-Math.round(-n):Math.round(n)}],floor:[nt,[nt],(i,[e])=>Math.floor(e.evaluate(i))],ceil:[nt,[nt],(i,[e])=>Math.ceil(e.evaluate(i))],"filter-==":[Ut,[ii,Vt],(i,[e,n])=>i.properties()[e.value]===n.value],"filter-id-==":[Ut,[Vt],(i,[e])=>i.id()===e.value],"filter-type-==":[Ut,[ii],(i,[e])=>i.geometryType()===e.value],"filter-<":[Ut,[ii,Vt],(i,[e,n])=>{const c=i.properties()[e.value],p=n.value;return typeof c==typeof p&&c<p}],"filter-id-<":[Ut,[Vt],(i,[e])=>{const n=i.id(),c=e.value;return typeof n==typeof c&&n<c}],"filter->":[Ut,[ii,Vt],(i,[e,n])=>{const c=i.properties()[e.value],p=n.value;return typeof c==typeof p&&c>p}],"filter-id->":[Ut,[Vt],(i,[e])=>{const n=i.id(),c=e.value;return typeof n==typeof c&&n>c}],"filter-<=":[Ut,[ii,Vt],(i,[e,n])=>{const c=i.properties()[e.value],p=n.value;return typeof c==typeof p&&c<=p}],"filter-id-<=":[Ut,[Vt],(i,[e])=>{const n=i.id(),c=e.value;return typeof n==typeof c&&n<=c}],"filter->=":[Ut,[ii,Vt],(i,[e,n])=>{const c=i.properties()[e.value],p=n.value;return typeof c==typeof p&&c>=p}],"filter-id->=":[Ut,[Vt],(i,[e])=>{const n=i.id(),c=e.value;return typeof n==typeof c&&n>=c}],"filter-has":[Ut,[Vt],(i,[e])=>e.value in i.properties()],"filter-has-id":[Ut,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[Ut,[on(ii)],(i,[e])=>e.value.indexOf(i.geometryType())>=0],"filter-id-in":[Ut,[on(Vt)],(i,[e])=>e.value.indexOf(i.id())>=0],"filter-in-small":[Ut,[ii,on(Vt)],(i,[e,n])=>n.value.indexOf(i.properties()[e.value])>=0],"filter-in-large":[Ut,[ii,on(Vt)],(i,[e,n])=>function(c,p,_,b){for(;_<=b;){const w=_+b>>1;if(p[w]===c)return!0;p[w]>c?b=w-1:_=w+1}return!1}(i.properties()[e.value],n.value,0,n.value.length-1)],all:{type:Ut,overloads:[[[Ut,Ut],(i,[e,n])=>e.evaluate(i)&&n.evaluate(i)],[Bs(Ut),(i,e)=>{for(const n of e)if(!n.evaluate(i))return!1;return!0}]]},any:{type:Ut,overloads:[[[Ut,Ut],(i,[e,n])=>e.evaluate(i)||n.evaluate(i)],[Bs(Ut),(i,e)=>{for(const n of e)if(n.evaluate(i))return!0;return!1}]]},"!":[Ut,[Ut],(i,[e])=>!e.evaluate(i)],"is-supported-script":[Ut,[ii],(i,[e])=>{const n=i.globals&&i.globals.isSupportedScript;return!n||n(e.evaluate(i))}],upcase:[ii,[ii],(i,[e])=>e.evaluate(i).toUpperCase()],downcase:[ii,[ii],(i,[e])=>e.evaluate(i).toLowerCase()],concat:[ii,Bs(Vt),(i,e)=>e.map(n=>ht(n.evaluate(i))).join("")],"resolved-locale":[ii,[Cn],(i,[e])=>e.evaluate(i).resolvedLocale()]});class nl{constructor(e,n){this.expression=e,this._warningHistory={},this._evaluator=new oi,this._defaultValue=n?function(c){return c.type==="color"&&Fn(c.default)?new U(0,0,0,0):c.type==="color"?U.parse(c.default)||null:c.type==="padding"?oe.parse(c.default)||null:c.default===void 0?null:c.default}(n):null,this._enumValues=n&&n.type==="enum"?n.values:null}evaluateWithoutErrorHandling(e,n,c,p,_,b){return this._evaluator.globals=e,this._evaluator.feature=n,this._evaluator.featureState=c,this._evaluator.canonical=p,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=b,this.expression.evaluate(this._evaluator)}evaluate(e,n,c,p,_,b){this._evaluator.globals=e,this._evaluator.feature=n||null,this._evaluator.featureState=c||null,this._evaluator.canonical=p,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=b||null;try{const w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new Ee(`Expected value to be one of ${Object.keys(this._enumValues).map(S=>JSON.stringify(S)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console<"u"&&console.warn(w.message)),this._defaultValue}}}function Io(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in eo}function Ao(i,e){const n=new Nn(eo,[],e?function(p){const _={color:Yi,string:ii,number:nt,enum:ii,boolean:Ut,formatted:Zi,padding:sa,resolvedImage:Fi};return p.type==="array"?on(_[p.value]||Vt,p.length):_[p.type]}(e):void 0),c=n.parse(i,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return c?xc(new nl(c,e)):to(n.errors)}class ko{constructor(e,n){this.kind=e,this._styleExpression=n,this.isStateDependent=e!=="constant"&&!la(n.expression)}evaluateWithoutErrorHandling(e,n,c,p,_,b){return this._styleExpression.evaluateWithoutErrorHandling(e,n,c,p,_,b)}evaluate(e,n,c,p,_,b){return this._styleExpression.evaluate(e,n,c,p,_,b)}}class Rl{constructor(e,n,c,p){this.kind=e,this.zoomStops=c,this._styleExpression=n,this.isStateDependent=e!=="camera"&&!la(n.expression),this.interpolationType=p}evaluateWithoutErrorHandling(e,n,c,p,_,b){return this._styleExpression.evaluateWithoutErrorHandling(e,n,c,p,_,b)}evaluate(e,n,c,p,_,b){return this._styleExpression.evaluate(e,n,c,p,_,b)}interpolationFactor(e,n,c){return this.interpolationType?Ka.interpolationFactor(this.interpolationType,e,n,c):0}}function Tc(i,e){const n=Ao(i,e);if(n.result==="error")return n;const c=n.value.expression,p=Ca(c);if(!p&&!Un(e))return to([new Pi("","data expressions not supported")]);const _=ur(c,["zoom"]);if(!_&&!wc(e))return to([new Pi("","zoom expressions not supported")]);const b=rl(c);return b||_?b instanceof Pi?to([b]):b instanceof Ka&&!Gi(e)?to([new Pi("",'"interpolate" expressions cannot be used with this property')]):xc(b?new Rl(p?"camera":"composite",n.value,b.labels,b instanceof Ka?b.interpolation:void 0):new ko(p?"constant":"source",n.value)):to([new Pi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class al{constructor(e,n){this._parameters=e,this._specification=n,li(this,Eo(this._parameters,this._specification))}static deserialize(e){return new al(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function rl(i){let e=null;if(i instanceof gs)e=rl(i.result);else if(i instanceof Rs){for(const n of i.args)if(e=rl(n),e)break}else(i instanceof Za||i instanceof Ka)&&i.input instanceof ji&&i.input.name==="zoom"&&(e=i);return e instanceof Pi||i.eachChild(n=>{const c=rl(n);c instanceof Pi?e=c:!e&&c?e=new Pi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&c&&e!==c&&(e=new Pi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function Or(i){const e=i.key,n=i.value,c=i.valueSpec||{},p=i.objectElementValidators||{},_=i.style,b=i.styleSpec;let w=[];const S=cn(n);if(S!=="object")return[new Ie(e,n,`object expected, ${S} found`)];for(const D in n){const z=D.split(".")[0],N=c[z]||c["*"];let j;if(p[z])j=p[z];else if(c[z])j=mr;else if(p["*"])j=p["*"];else{if(!c["*"]){w.push(new Ie(e,n[D],`unknown property "${D}"`));continue}j=mr}w=w.concat(j({key:(e&&`${e}.`)+D,value:n[D],valueSpec:N,style:_,styleSpec:b,object:n,objectKey:D},n))}for(const D in c)p[D]||c[D].required&&c[D].default===void 0&&n[D]===void 0&&w.push(new Ie(e,n,`missing required property "${D}"`));return w}function Sc(i){const e=i.value,n=i.valueSpec,c=i.style,p=i.styleSpec,_=i.key,b=i.arrayElementValidator||mr;if(cn(e)!=="array")return[new Ie(_,e,`array expected, ${cn(e)} found`)];if(n.length&&e.length!==n.length)return[new Ie(_,e,`array length ${n.length} expected, length ${e.length} found`)];if(n["min-length"]&&e.length<n["min-length"])return[new Ie(_,e,`array length at least ${n["min-length"]} expected, length ${e.length} found`)];let w={type:n.value,values:n.values};p.$version<7&&(w.function=n.function),cn(n.value)==="object"&&(w=n.value);let S=[];for(let D=0;D<e.length;D++)S=S.concat(b({array:e,arrayIndex:D,value:e[D],valueSpec:w,style:c,styleSpec:p,key:`${_}[${D}]`}));return S}function zl(i){const e=i.key,n=i.value,c=i.valueSpec;let p=cn(n);return p==="number"&&n!=n&&(p="NaN"),p!=="number"?[new Ie(e,n,`number expected, ${p} found`)]:"minimum"in c&&n<c.minimum?[new Ie(e,n,`${n} is less than the minimum value ${c.minimum}`)]:"maximum"in c&&n>c.maximum?[new Ie(e,n,`${n} is greater than the maximum value ${c.maximum}`)]:[]}function Ec(i){const e=i.valueSpec,n=$t(i.value.type);let c,p,_,b={};const w=n!=="categorical"&&i.value.property===void 0,S=!w,D=cn(i.value.stops)==="array"&&cn(i.value.stops[0])==="array"&&cn(i.value.stops[0][0])==="object",z=Or({key:i.key,value:i.value,valueSpec:i.styleSpec.function,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{stops:function(H){if(n==="identity")return[new Ie(H.key,H.value,'identity function may not have a "stops" property')];let q=[];const ue=H.value;return q=q.concat(Sc({key:H.key,value:ue,valueSpec:H.valueSpec,style:H.style,styleSpec:H.styleSpec,arrayElementValidator:N})),cn(ue)==="array"&&ue.length===0&&q.push(new Ie(H.key,ue,"array must have at least one stop")),q},default:function(H){return mr({key:H.key,value:H.value,valueSpec:e,style:H.style,styleSpec:H.styleSpec})}}});return n==="identity"&&w&&z.push(new Ie(i.key,i.value,'missing required property "property"')),n==="identity"||i.value.stops||z.push(new Ie(i.key,i.value,'missing required property "stops"')),n==="exponential"&&i.valueSpec.expression&&!Gi(i.valueSpec)&&z.push(new Ie(i.key,i.value,"exponential functions not supported")),i.styleSpec.$version>=8&&(S&&!Un(i.valueSpec)?z.push(new Ie(i.key,i.value,"property functions not supported")):w&&!wc(i.valueSpec)&&z.push(new Ie(i.key,i.value,"zoom functions not supported"))),n!=="categorical"&&!D||i.value.property!==void 0||z.push(new Ie(i.key,i.value,'"property" property is required')),z;function N(H){let q=[];const ue=H.value,re=H.key;if(cn(ue)!=="array")return[new Ie(re,ue,`array expected, ${cn(ue)} found`)];if(ue.length!==2)return[new Ie(re,ue,`array length 2 expected, length ${ue.length} found`)];if(D){if(cn(ue[0])!=="object")return[new Ie(re,ue,`object expected, ${cn(ue[0])} found`)];if(ue[0].zoom===void 0)return[new Ie(re,ue,"object stop key must have zoom")];if(ue[0].value===void 0)return[new Ie(re,ue,"object stop key must have value")];if(_&&_>$t(ue[0].zoom))return[new Ie(re,ue[0].zoom,"stop zoom values must appear in ascending order")];$t(ue[0].zoom)!==_&&(_=$t(ue[0].zoom),p=void 0,b={}),q=q.concat(Or({key:`${re}[0]`,value:ue[0],valueSpec:{zoom:{}},style:H.style,styleSpec:H.styleSpec,objectElementValidators:{zoom:zl,value:j}}))}else q=q.concat(j({key:`${re}[0]`,value:ue[0],valueSpec:{},style:H.style,styleSpec:H.styleSpec},ue));return Io(di(ue[1]))?q.concat([new Ie(`${re}[1]`,ue[1],"expressions are not allowed in function stops.")]):q.concat(mr({key:`${re}[1]`,value:ue[1],valueSpec:e,style:H.style,styleSpec:H.styleSpec}))}function j(H,q){const ue=cn(H.value),re=$t(H.value),Se=H.value!==null?H.value:q;if(c){if(ue!==c)return[new Ie(H.key,Se,`${ue} stop domain type must match previous stop domain type ${c}`)]}else c=ue;if(ue!=="number"&&ue!=="string"&&ue!=="boolean")return[new Ie(H.key,Se,"stop domain value must be a number, string, or boolean")];if(ue!=="number"&&n!=="categorical"){let Fe=`number expected, ${ue} found`;return Un(e)&&n===void 0&&(Fe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ie(H.key,Se,Fe)]}return n!=="categorical"||ue!=="number"||isFinite(re)&&Math.floor(re)===re?n!=="categorical"&&ue==="number"&&p!==void 0&&re<p?[new Ie(H.key,Se,"stop domain values must appear in ascending order")]:(p=re,n==="categorical"&&re in b?[new Ie(H.key,Se,"stop domain values must be unique")]:(b[re]=!0,[])):[new Ie(H.key,Se,`integer expected, found ${re}`)]}}function Fs(i){const e=(i.expressionContext==="property"?Tc:Ao)(di(i.value),i.valueSpec);if(e.result==="error")return e.value.map(c=>new Ie(`${i.key}${c.key}`,i.value,c.message));const n=e.value.expression||e.value._styleExpression.expression;if(i.expressionContext==="property"&&i.propertyKey==="text-font"&&!n.outputDefined())return[new Ie(i.key,i.value,`Invalid data expression for "${i.propertyKey}". Output values must be contained as literals within the expression.`)];if(i.expressionContext==="property"&&i.propertyType==="layout"&&!la(n))return[new Ie(i.key,i.value,'"feature-state" data expressions are not supported with layout properties.')];if(i.expressionContext==="filter"&&!la(n))return[new Ie(i.key,i.value,'"feature-state" data expressions are not supported with filters.')];if(i.expressionContext&&i.expressionContext.indexOf("cluster")===0){if(!ur(n,["zoom","feature-state"]))return[new Ie(i.key,i.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(i.expressionContext==="cluster-initial"&&!Ca(n))return[new Ie(i.key,i.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Mo(i){const e=i.key,n=i.value,c=i.valueSpec,p=[];return Array.isArray(c.values)?c.values.indexOf($t(n))===-1&&p.push(new Ie(e,n,`expected one of [${c.values.join(", ")}], ${JSON.stringify(n)} found`)):Object.keys(c.values).indexOf($t(n))===-1&&p.push(new Ie(e,n,`expected one of [${Object.keys(c.values).join(", ")}], ${JSON.stringify(n)} found`)),p}function no(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const e of i.slice(1))if(!no(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const qu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function sl(i){if(i==null)return{filter:()=>!0,needGeometry:!1};no(i)||(i=Do(i));const e=Ao(i,qu);if(e.result==="error")throw new Error(e.value.map(n=>`${n.key}: ${n.message}`).join(", "));return{filter:(n,c,p)=>e.value.evaluate(n,c,{},p),needGeometry:Ac(i)}}function Ic(i,e){return i<e?-1:i>e?1:0}function Ac(i){if(!Array.isArray(i))return!1;if(i[0]==="within")return!0;for(let e=1;e<i.length;e++)if(Ac(i[e]))return!0;return!1}function Do(i){if(!i)return!0;const e=i[0];return i.length<=1?e!=="any":e==="=="?Bl(i[1],i[2],"=="):e==="!="?ao(Bl(i[1],i[2],"==")):e==="<"||e===">"||e==="<="||e===">="?Bl(i[1],i[2],e):e==="any"?(n=i.slice(1),["any"].concat(n.map(Do))):e==="all"?["all"].concat(i.slice(1).map(Do)):e==="none"?["all"].concat(i.slice(1).map(Do).map(ao)):e==="in"?ol(i[1],i.slice(2)):e==="!in"?ao(ol(i[1],i.slice(2))):e==="has"?Po(i[1]):e==="!has"?ao(Po(i[1])):e!=="within"||i;var n}function Bl(i,e,n){switch(i){case"$type":return[`filter-type-${n}`,e];case"$id":return[`filter-id-${n}`,e];default:return[`filter-${n}`,i,e]}}function ol(i,e){if(e.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(n=>typeof n!=typeof e[0])?["filter-in-large",i,["literal",e.sort(Ic)]]:["filter-in-small",i,["literal",e]]}}function Po(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function ao(i){return["!",i]}function Lo(i){return no(di(i.value))?Fs(li({},i,{expressionContext:"filter",valueSpec:{value:"boolean"}})):kc(i)}function kc(i){const e=i.value,n=i.key;if(cn(e)!=="array")return[new Ie(n,e,`array expected, ${cn(e)} found`)];const c=i.styleSpec;let p,_=[];if(e.length<1)return[new Ie(n,e,"filter array must have at least 1 element")];switch(_=_.concat(Mo({key:`${n}[0]`,value:e[0],valueSpec:c.filter_operator,style:i.style,styleSpec:i.styleSpec})),$t(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&$t(e[1])==="$type"&&_.push(new Ie(n,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&_.push(new Ie(n,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(p=cn(e[1]),p!=="string"&&_.push(new Ie(`${n}[1]`,e[1],`string expected, ${p} found`)));for(let b=2;b<e.length;b++)p=cn(e[b]),$t(e[1])==="$type"?_=_.concat(Mo({key:`${n}[${b}]`,value:e[b],valueSpec:c.geometry_type,style:i.style,styleSpec:i.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&_.push(new Ie(`${n}[${b}]`,e[b],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let b=1;b<e.length;b++)_=_.concat(kc({key:`${n}[${b}]`,value:e[b],style:i.style,styleSpec:i.styleSpec}));break;case"has":case"!has":p=cn(e[1]),e.length!==2?_.push(new Ie(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):p!=="string"&&_.push(new Ie(`${n}[1]`,e[1],`string expected, ${p} found`));break;case"within":p=cn(e[1]),e.length!==2?_.push(new Ie(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):p!=="object"&&_.push(new Ie(`${n}[1]`,e[1],`object expected, ${p} found`))}return _}function Ro(i,e){const n=i.key,c=i.style,p=i.styleSpec,_=i.value,b=i.objectKey,w=p[`${e}_${i.layerType}`];if(!w)return[];const S=b.match(/^(.*)-transition$/);if(e==="paint"&&S&&w[S[1]]&&w[S[1]].transition)return mr({key:n,value:_,valueSpec:p.transition,style:c,styleSpec:p});const D=i.valueSpec||w[b];if(!D)return[new Ie(n,_,`unknown property "${b}"`)];let z;if(cn(_)==="string"&&Un(D)&&!D.tokens&&(z=/^{([^}]+)}$/.exec(_)))return[new Ie(n,_,`"${b}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(z[1])} }\`.`)];const N=[];return i.layerType==="symbol"&&(b==="text-field"&&c&&!c.glyphs&&N.push(new Ie(n,_,'use of "text-field" requires a style "glyphs" property')),b==="text-font"&&Fn(di(_))&&$t(_.type)==="identity"&&N.push(new Ie(n,_,'"text-font" does not support identity functions'))),N.concat(mr({key:i.key,value:_,valueSpec:D,style:c,styleSpec:p,expressionContext:"property",propertyType:e,propertyKey:b}))}function Mc(i){return Ro(i,"paint")}function Dc(i){return Ro(i,"layout")}function Pc(i){let e=[];const n=i.value,c=i.key,p=i.style,_=i.styleSpec;n.type||n.ref||e.push(new Ie(c,n,'either "type" or "ref" is required'));let b=$t(n.type);const w=$t(n.ref);if(n.id){const S=$t(n.id);for(let D=0;D<i.arrayIndex;D++){const z=p.layers[D];$t(z.id)===S&&e.push(new Ie(c,n.id,`duplicate layer id "${n.id}", previously used at line ${z.id.__line__}`))}}if("ref"in n){let S;["type","source","source-layer","filter","layout"].forEach(D=>{D in n&&e.push(new Ie(c,n[D],`"${D}" is prohibited for ref layers`))}),p.layers.forEach(D=>{$t(D.id)===w&&(S=D)}),S?S.ref?e.push(new Ie(c,n.ref,"ref cannot reference another ref layer")):b=$t(S.type):e.push(new Ie(c,n.ref,`ref layer "${w}" not found`))}else if(b!=="background")if(n.source){const S=p.sources&&p.sources[n.source],D=S&&$t(S.type);S?D==="vector"&&b==="raster"?e.push(new Ie(c,n.source,`layer "${n.id}" requires a raster source`)):D==="raster"&&b!=="raster"?e.push(new Ie(c,n.source,`layer "${n.id}" requires a vector source`)):D!=="vector"||n["source-layer"]?D==="raster-dem"&&b!=="hillshade"?e.push(new Ie(c,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):b!=="line"||!n.paint||!n.paint["line-gradient"]||D==="geojson"&&S.lineMetrics||e.push(new Ie(c,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Ie(c,n,`layer "${n.id}" must specify a "source-layer"`)):e.push(new Ie(c,n.source,`source "${n.source}" not found`))}else e.push(new Ie(c,n,'missing required property "source"'));return e=e.concat(Or({key:c,value:n,valueSpec:_.layer,style:i.style,styleSpec:i.styleSpec,objectElementValidators:{"*":()=>[],type:()=>mr({key:`${c}.type`,value:n.type,valueSpec:_.layer.type,style:i.style,styleSpec:i.styleSpec,object:n,objectKey:"type"}),filter:Lo,layout:S=>Or({layer:n,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":D=>Dc(li({layerType:b},D))}}),paint:S=>Or({layer:n,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":D=>Mc(li({layerType:b},D))}})}})),e}function ro(i){const e=i.value,n=i.key,c=cn(e);return c!=="string"?[new Ie(n,e,`string expected, ${c} found`)]:[]}const Lc={promoteId:function({key:i,value:e}){if(cn(e)==="string")return ro({key:i,value:e});{const n=[];for(const c in e)n.push(...ro({key:`${i}.${c}`,value:e[c]}));return n}}};function zo(i){const e=i.value,n=i.key,c=i.styleSpec,p=i.style;if(!e.type)return[new Ie(n,e,'"type" is required')];const _=$t(e.type);let b;switch(_){case"vector":case"raster":case"raster-dem":return b=Or({key:n,value:e,valueSpec:c[`source_${_.replace("-","_")}`],style:i.style,styleSpec:c,objectElementValidators:Lc}),b;case"geojson":if(b=Or({key:n,value:e,valueSpec:c.source_geojson,style:p,styleSpec:c,objectElementValidators:Lc}),e.cluster)for(const w in e.clusterProperties){const[S,D]=e.clusterProperties[w],z=typeof S=="string"?[S,["accumulated"],["get",w]]:S;b.push(...Fs({key:`${n}.${w}.map`,value:D,expressionContext:"cluster-map"})),b.push(...Fs({key:`${n}.${w}.reduce`,value:z,expressionContext:"cluster-reduce"}))}return b;case"video":return Or({key:n,value:e,valueSpec:c.source_video,style:p,styleSpec:c});case"image":return Or({key:n,value:e,valueSpec:c.source_image,style:p,styleSpec:c});case"canvas":return[new Ie(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Mo({key:`${n}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,styleSpec:c})}}function Bo(i){const e=i.value,n=i.styleSpec,c=n.light,p=i.style;let _=[];const b=cn(e);if(e===void 0)return _;if(b!=="object")return _=_.concat([new Ie("light",e,`object expected, ${b} found`)]),_;for(const w in e){const S=w.match(/^(.*)-transition$/);_=_.concat(S&&c[S[1]]&&c[S[1]].transition?mr({key:w,value:e[w],valueSpec:n.transition,style:p,styleSpec:n}):c[w]?mr({key:w,value:e[w],valueSpec:c[w],style:p,styleSpec:n}):[new Ie(w,e[w],`unknown property "${w}"`)])}return _}function fr(i){const e=i.value,n=i.styleSpec,c=n.terrain,p=i.style;let _=[];const b=cn(e);if(e===void 0)return _;if(b!=="object")return _=_.concat([new Ie("terrain",e,`object expected, ${b} found`)]),_;for(const w in e)_=_.concat(c[w]?mr({key:w,value:e[w],valueSpec:c[w],style:p,styleSpec:n}):[new Ie(w,e[w],`unknown property "${w}"`)]);return _}const Fo={"*":()=>[],array:Sc,boolean:function(i){const e=i.value,n=i.key,c=cn(e);return c!=="boolean"?[new Ie(n,e,`boolean expected, ${c} found`)]:[]},number:zl,color:function(i){const e=i.key,n=i.value,c=cn(n);return c!=="string"?[new Ie(e,n,`color expected, ${c} found`)]:Zn(n)===null?[new Ie(e,n,`color expected, "${n}" found`)]:[]},constants:mt,enum:Mo,filter:Lo,function:Ec,layer:Pc,object:Or,source:zo,light:Bo,terrain:fr,string:ro,formatted:function(i){return ro(i).length===0?[]:Fs(i)},resolvedImage:function(i){return ro(i).length===0?[]:Fs(i)},padding:function(i){const e=i.key,n=i.value;if(cn(n)==="array"){if(n.length<1||n.length>4)return[new Ie(e,n,`padding requires 1 to 4 values; ${n.length} values found`)];const c={type:"number"};let p=[];for(let _=0;_<n.length;_++)p=p.concat(mr({key:`${e}[${_}]`,value:n[_],valueSpec:c}));return p}return zl({key:e,value:n,valueSpec:{}})}};function mr(i){const e=i.value,n=i.valueSpec,c=i.styleSpec;return n.expression&&Fn($t(e))?Ec(i):n.expression&&Io(di(e))?Fs(i):n.type&&Fo[n.type]?Fo[n.type](i):Or(li({},i,{valueSpec:n.type?c[n.type]:n}))}function Zu(i){const e=i.value,n=i.key,c=ro(i);return c.length||(e.indexOf("{fontstack}")===-1&&c.push(new Ie(n,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&c.push(new Ie(n,e,'"glyphs" url must include a "{range}" token'))),c}function ys(i,e=se){let n=[];return n=n.concat(mr({key:"",value:i,valueSpec:e.$root,styleSpec:e,style:i,objectElementValidators:{glyphs:Zu,"*":()=>[]}})),i.constants&&(n=n.concat(mt({key:"constants",value:i.constants,style:i,styleSpec:e}))),Rc(n)}function Rc(i){return[].concat(i).sort((e,n)=>e.line-n.line)}function rs(i){return function(...e){return Rc(i.apply(this,e))}}ys.source=rs(zo),ys.light=rs(Bo),ys.terrain=rs(fr),ys.layer=rs(Pc),ys.filter=rs(Lo),ys.paintProperty=rs(Mc),ys.layoutProperty=rs(Dc);const Oo=ys,Fl=Oo.light,Ku=Oo.paintProperty,Wu=Oo.layoutProperty;function ll(i,e){let n=!1;if(e&&e.length)for(const c of e)i.fire(new mn(new Error(c.message))),n=!0;return n}class No{constructor(e,n,c){const p=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const b=new Int32Array(this.arrayBuffer);e=b[0],this.d=(n=b[1])+2*(c=b[2]);for(let S=0;S<this.d*this.d;S++){const D=b[3+S],z=b[3+S+1];p.push(D===z?null:b.subarray(D,z))}const w=b[3+p.length+1];this.keys=b.subarray(b[3+p.length],w),this.bboxes=b.subarray(w),this.insert=this._insertReadonly}else{this.d=n+2*c;for(let b=0;b<this.d*this.d;b++)p.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=e,this.padding=c,this.scale=n/e,this.uid=0;const _=c/n*e;this.min=-_,this.max=e+_}insert(e,n,c,p,_){this._forEachCell(n,c,p,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(n),this.bboxes.push(c),this.bboxes.push(p),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,n,c,p,_,b){this.cells[_].push(b)}query(e,n,c,p,_){const b=this.min,w=this.max;if(e<=b&&n<=b&&w<=c&&w<=p&&!_)return Array.prototype.slice.call(this.keys);{const S=[];return this._forEachCell(e,n,c,p,this._queryCell,S,{},_),S}}_queryCell(e,n,c,p,_,b,w,S){const D=this.cells[_];if(D!==null){const z=this.keys,N=this.bboxes;for(let j=0;j<D.length;j++){const H=D[j];if(w[H]===void 0){const q=4*H;(S?S(N[q+0],N[q+1],N[q+2],N[q+3]):e<=N[q+2]&&n<=N[q+3]&&c>=N[q+0]&&p>=N[q+1])?(w[H]=!0,b.push(z[H])):w[H]=!1}}}}_forEachCell(e,n,c,p,_,b,w,S){const D=this._convertToCellCoord(e),z=this._convertToCellCoord(n),N=this._convertToCellCoord(c),j=this._convertToCellCoord(p);for(let H=D;H<=N;H++)for(let q=z;q<=j;q++){const ue=this.d*q+H;if((!S||S(this._convertFromCellCoord(H),this._convertFromCellCoord(q),this._convertFromCellCoord(H+1),this._convertFromCellCoord(q+1)))&&_.call(this,e,n,c,p,ue,b,w,S))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,n=3+this.cells.length+1+1;let c=0;for(let b=0;b<this.cells.length;b++)c+=this.cells[b].length;const p=new Int32Array(n+c+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let _=n;for(let b=0;b<e.length;b++){const w=e[b];p[3+b]=_,p.set(w,_),_+=w.length}return p[3+e.length]=_,p.set(this.keys,_),_+=this.keys.length,p[3+e.length+1]=_,p.set(this.bboxes,_),_+=this.bboxes.length,p.buffer}static serialize(e,n){const c=e.toArrayBuffer();return n&&n.push(c),{buffer:c}}static deserialize(e){return new No(e.buffer)}}const ss={};function Ot(i,e,n={}){if(ss[i])throw new Error(`${i} is already registered.`);Object.defineProperty(e,"_classRegistryKey",{value:i,writeable:!1}),ss[i]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}Ot("Object",Object),Ot("TransferableGridIndex",No),Ot("Color",U),Ot("Error",Error),Ot("AJAXError",Qe),Ot("ResolvedImage",fe),Ot("StylePropertyFunction",al),Ot("StyleExpression",nl,{omit:["_evaluator"]}),Ot("ZoomDependentExpression",Rl),Ot("ZoomConstantExpression",ko),Ot("CompoundExpression",ji,{omit:["_evaluate"]});for(const i in eo)eo[i]._classRegistryKey||Ot(`Expression_${i}`,eo[i]);function zc(i){return i&&typeof ArrayBuffer<"u"&&(i instanceof ArrayBuffer||i.constructor&&i.constructor.name==="ArrayBuffer")}function Os(i,e){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob)return i;if(zc(i)||Xe(i))return e&&e.push(i),i;if(ArrayBuffer.isView(i)){const n=i;return e&&e.push(n.buffer),n}if(i instanceof ImageData)return e&&e.push(i.data.buffer),i;if(Array.isArray(i)){const n=[];for(const c of i)n.push(Os(c,e));return n}if(typeof i=="object"){const n=i.constructor,c=n._classRegistryKey;if(!c)throw new Error("can't serialize object of unregistered class");if(!ss[c])throw new Error(`${c} is not registered.`);const p=n.serialize?n.serialize(i,e):{};if(n.serialize){if(e&&p===e[e.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in i){if(!i.hasOwnProperty(_)||ss[c].omit.indexOf(_)>=0)continue;const b=i[_];p[_]=ss[c].shallow.indexOf(_)>=0?b:Os(b,e)}i instanceof Error&&(p.message=i.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return c!=="Object"&&(p.$name=c),p}throw new Error("can't serialize object of type "+typeof i)}function bs(i){if(i==null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||i instanceof Boolean||i instanceof Number||i instanceof String||i instanceof Date||i instanceof RegExp||i instanceof Blob||zc(i)||Xe(i)||ArrayBuffer.isView(i)||i instanceof ImageData)return i;if(Array.isArray(i))return i.map(bs);if(typeof i=="object"){const e=i.$name||"Object";if(!ss[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:n}=ss[e];if(!n)throw new Error(`can't deserialize unregistered class ${e}`);if(n.deserialize)return n.deserialize(i);const c=Object.create(n.prototype);for(const p of Object.keys(i)){if(p==="$name")continue;const _=i[p];c[p]=ss[e].shallow.indexOf(p)>=0?_:bs(_)}return c}throw new Error("can't deserialize object of type "+typeof i)}class Ol{constructor(){this.first=!0}update(e,n){const c=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=c,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=c,!0):(this.lastFloorZoom>c?(this.lastIntegerZoom=c+1,this.lastIntegerZoomTime=n):this.lastFloorZoom<c&&(this.lastIntegerZoom=c,this.lastIntegerZoomTime=n),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=c,!0))}}const At={"Latin-1 Supplement":i=>i>=128&&i<=255,Arabic:i=>i>=1536&&i<=1791,"Arabic Supplement":i=>i>=1872&&i<=1919,"Arabic Extended-A":i=>i>=2208&&i<=2303,"Hangul Jamo":i=>i>=4352&&i<=4607,"Unified Canadian Aboriginal Syllabics":i=>i>=5120&&i<=5759,Khmer:i=>i>=6016&&i<=6143,"Unified Canadian Aboriginal Syllabics Extended":i=>i>=6320&&i<=6399,"General Punctuation":i=>i>=8192&&i<=8303,"Letterlike Symbols":i=>i>=8448&&i<=8527,"Number Forms":i=>i>=8528&&i<=8591,"Miscellaneous Technical":i=>i>=8960&&i<=9215,"Control Pictures":i=>i>=9216&&i<=9279,"Optical Character Recognition":i=>i>=9280&&i<=9311,"Enclosed Alphanumerics":i=>i>=9312&&i<=9471,"Geometric Shapes":i=>i>=9632&&i<=9727,"Miscellaneous Symbols":i=>i>=9728&&i<=9983,"Miscellaneous Symbols and Arrows":i=>i>=11008&&i<=11263,"CJK Radicals Supplement":i=>i>=11904&&i<=12031,"Kangxi Radicals":i=>i>=12032&&i<=12255,"Ideographic Description Characters":i=>i>=12272&&i<=12287,"CJK Symbols and Punctuation":i=>i>=12288&&i<=12351,Hiragana:i=>i>=12352&&i<=12447,Katakana:i=>i>=12448&&i<=12543,Bopomofo:i=>i>=12544&&i<=12591,"Hangul Compatibility Jamo":i=>i>=12592&&i<=12687,Kanbun:i=>i>=12688&&i<=12703,"Bopomofo Extended":i=>i>=12704&&i<=12735,"CJK Strokes":i=>i>=12736&&i<=12783,"Katakana Phonetic Extensions":i=>i>=12784&&i<=12799,"Enclosed CJK Letters and Months":i=>i>=12800&&i<=13055,"CJK Compatibility":i=>i>=13056&&i<=13311,"CJK Unified Ideographs Extension A":i=>i>=13312&&i<=19903,"Yijing Hexagram Symbols":i=>i>=19904&&i<=19967,"CJK Unified Ideographs":i=>i>=19968&&i<=40959,"Yi Syllables":i=>i>=40960&&i<=42127,"Yi Radicals":i=>i>=42128&&i<=42191,"Hangul Jamo Extended-A":i=>i>=43360&&i<=43391,"Hangul Syllables":i=>i>=44032&&i<=55215,"Hangul Jamo Extended-B":i=>i>=55216&&i<=55295,"Private Use Area":i=>i>=57344&&i<=63743,"CJK Compatibility Ideographs":i=>i>=63744&&i<=64255,"Arabic Presentation Forms-A":i=>i>=64336&&i<=65023,"Vertical Forms":i=>i>=65040&&i<=65055,"CJK Compatibility Forms":i=>i>=65072&&i<=65103,"Small Form Variants":i=>i>=65104&&i<=65135,"Arabic Presentation Forms-B":i=>i>=65136&&i<=65279,"Halfwidth and Fullwidth Forms":i=>i>=65280&&i<=65519};function cl(i){for(const e of i)if(Ul(e.charCodeAt(0)))return!0;return!1}function Xu(i){for(const e of i)if(!Nl(e.charCodeAt(0)))return!1;return!0}function Nl(i){return!(At.Arabic(i)||At["Arabic Supplement"](i)||At["Arabic Extended-A"](i)||At["Arabic Presentation Forms-A"](i)||At["Arabic Presentation Forms-B"](i))}function Ul(i){return!(i!==746&&i!==747&&(i<4352||!(At["Bopomofo Extended"](i)||At.Bopomofo(i)||At["CJK Compatibility Forms"](i)&&!(i>=65097&&i<=65103)||At["CJK Compatibility Ideographs"](i)||At["CJK Compatibility"](i)||At["CJK Radicals Supplement"](i)||At["CJK Strokes"](i)||!(!At["CJK Symbols and Punctuation"](i)||i>=12296&&i<=12305||i>=12308&&i<=12319||i===12336)||At["CJK Unified Ideographs Extension A"](i)||At["CJK Unified Ideographs"](i)||At["Enclosed CJK Letters and Months"](i)||At["Hangul Compatibility Jamo"](i)||At["Hangul Jamo Extended-A"](i)||At["Hangul Jamo Extended-B"](i)||At["Hangul Jamo"](i)||At["Hangul Syllables"](i)||At.Hiragana(i)||At["Ideographic Description Characters"](i)||At.Kanbun(i)||At["Kangxi Radicals"](i)||At["Katakana Phonetic Extensions"](i)||At.Katakana(i)&&i!==12540||!(!At["Halfwidth and Fullwidth Forms"](i)||i===65288||i===65289||i===65293||i>=65306&&i<=65310||i===65339||i===65341||i===65343||i>=65371&&i<=65503||i===65507||i>=65512&&i<=65519)||!(!At["Small Form Variants"](i)||i>=65112&&i<=65118||i>=65123&&i<=65126)||At["Unified Canadian Aboriginal Syllabics"](i)||At["Unified Canadian Aboriginal Syllabics Extended"](i)||At["Vertical Forms"](i)||At["Yijing Hexagram Symbols"](i)||At["Yi Syllables"](i)||At["Yi Radicals"](i))))}function Bc(i){return!(Ul(i)||function(e){return!!(At["Latin-1 Supplement"](e)&&(e===167||e===169||e===174||e===177||e===188||e===189||e===190||e===215||e===247)||At["General Punctuation"](e)&&(e===8214||e===8224||e===8225||e===8240||e===8241||e===8251||e===8252||e===8258||e===8263||e===8264||e===8265||e===8273)||At["Letterlike Symbols"](e)||At["Number Forms"](e)||At["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||e===9003||e>=9085&&e<=9114||e>=9150&&e<=9165||e===9167||e>=9169&&e<=9179||e>=9186&&e<=9215)||At["Control Pictures"](e)&&e!==9251||At["Optical Character Recognition"](e)||At["Enclosed Alphanumerics"](e)||At["Geometric Shapes"](e)||At["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||At["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||At["CJK Symbols and Punctuation"](e)||At.Katakana(e)||At["Private Use Area"](e)||At["CJK Compatibility Forms"](e)||At["Small Form Variants"](e)||At["Halfwidth and Fullwidth Forms"](e)||e===8734||e===8756||e===8757||e>=9984&&e<=10087||e>=10102&&e<=10131||e===65532||e===65533)}(i))}function Fc(i){return i>=1424&&i<=2303||At["Arabic Presentation Forms-A"](i)||At["Arabic Presentation Forms-B"](i)}function Yu(i,e){return!(!e&&Fc(i)||i>=2304&&i<=3583||i>=3840&&i<=4255||At.Khmer(i))}function Oc(i){for(const e of i)if(Fc(e.charCodeAt(0)))return!0;return!1}const Vl="deferred",jl="loading",Gl="loaded";let Hl=null,er="unavailable",vs=null;const Nc=function(i){i&&typeof i=="string"&&i.indexOf("NetworkError")>-1&&(er="error"),Hl&&Hl(i)};function so(){ql.fire(new ti("pluginStateChange",{pluginStatus:er,pluginURL:vs}))}const ql=new xn,Uo=function(){return er},Uc=function(){if(er!==Vl||!vs)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");er=jl,so(),vs&&fn({url:vs},i=>{i?Nc(i):(er=Gl,so())})},Ir={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>er===Gl||Ir.applyArabicShaping!=null,isLoading:()=>er===jl,setState(i){if(!Ve())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");er=i.pluginStatus,vs=i.pluginURL},isParsed(){if(!Ve())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Ir.applyArabicShaping!=null&&Ir.processBidirectionalText!=null&&Ir.processStyledBidirectionalText!=null},getPluginURL(){if(!Ve())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return vs}};class Gn{constructor(e,n){this.zoom=e,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.zoomHistory=n.zoomHistory,this.transition=n.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ol,this.transition={})}isSupportedScript(e){return function(n,c){for(const p of n)if(!Yu(p.charCodeAt(0),c))return!1;return!0}(e,Ir.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,n=e-Math.floor(e),c=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:n+(1-n)*c}:{fromScale:.5,toScale:1,t:1-(1-c)*n}}}class Vo{constructor(e,n){this.property=e,this.value=n,this.expression=function(c,p){if(Fn(c))return new al(c,p);if(Io(c)){const _=Tc(c,p);if(_.result==="error")throw new Error(_.value.map(b=>`${b.key}: ${b.message}`).join(", "));return _.value}{let _=c;return p.type==="color"&&typeof c=="string"?_=U.parse(c):p.type!=="padding"||typeof c!="number"&&!Array.isArray(c)||(_=oe.parse(c)),{kind:"constant",evaluate:()=>_}}}(n===void 0?e.specification.default:n,e.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(e,n,c){return this.property.possiblyEvaluate(this,e,n,c)}}class ul{constructor(e){this.property=e,this.value=new Vo(e,void 0)}transitioned(e,n){return new jc(this.property,this.value,n,$({},e.transition,this.transition),e.now)}untransitioned(){return new jc(this.property,this.value,null,{},0)}}class Vc{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return Le(this._values[e].value.value)}setValue(e,n){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new ul(this._values[e].property)),this._values[e].value=new Vo(this._values[e].property,n===null?void 0:Le(n))}getTransition(e){return Le(this._values[e].transition)}setTransition(e,n){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new ul(this._values[e].property)),this._values[e].transition=Le(n)||void 0}serialize(){const e={};for(const n of Object.keys(this._values)){const c=this.getValue(n);c!==void 0&&(e[n]=c);const p=this.getTransition(n);p!==void 0&&(e[`${n}-transition`]=p)}return e}transitioned(e,n){const c=new Gc(this._properties);for(const p of Object.keys(this._values))c._values[p]=this._values[p].transitioned(e,n._values[p]);return c}untransitioned(){const e=new Gc(this._properties);for(const n of Object.keys(this._values))e._values[n]=this._values[n].untransitioned();return e}}class jc{constructor(e,n,c,p,_){this.property=e,this.value=n,this.begin=_+p.delay||0,this.end=this.begin+p.duration||0,e.specification.transition&&(p.delay||p.duration)&&(this.prior=c)}possiblyEvaluate(e,n,c){const p=e.now||0,_=this.value.possiblyEvaluate(e,n,c),b=this.prior;if(b){if(p>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(p<this.begin)return b.possiblyEvaluate(e,n,c);{const w=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(e,n,c),_,function(S){if(S<=0)return 0;if(S>=1)return 1;const D=S*S,z=D*S;return 4*(S<.5?z:3*(S-D)+z-.75)}(w))}}return _}}class Gc{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,n,c){const p=new jo(this._properties);for(const _ of Object.keys(this._values))p._values[_]=this._values[_].possiblyEvaluate(e,n,c);return p}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Ju{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return Le(this._values[e].value)}setValue(e,n){this._values[e]=new Vo(this._values[e].property,n===null?void 0:Le(n))}serialize(){const e={};for(const n of Object.keys(this._values)){const c=this.getValue(n);c!==void 0&&(e[n]=c)}return e}possiblyEvaluate(e,n,c){const p=new jo(this._properties);for(const _ of Object.keys(this._values))p._values[_]=this._values[_].possiblyEvaluate(e,n,c);return p}}class qr{constructor(e,n,c){this.property=e,this.value=n,this.parameters=c}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,n,c,p){return this.property.evaluate(this.value,this.parameters,e,n,c,p)}}class jo{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Kt{constructor(e){this.specification=e}possiblyEvaluate(e,n){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(n)}interpolate(e,n,c){const p=Qa[this.specification.type];return p?p(e,n,c):e}}class ci{constructor(e,n){this.specification=e,this.overrides=n}possiblyEvaluate(e,n,c,p){return new qr(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(n,null,{},c,p)}:e.expression,n)}interpolate(e,n,c){if(e.value.kind!=="constant"||n.value.kind!=="constant")return e;if(e.value.value===void 0||n.value.value===void 0)return new qr(this,{kind:"constant",value:void 0},e.parameters);const p=Qa[this.specification.type];return p?new qr(this,{kind:"constant",value:p(e.value.value,n.value.value,c)},e.parameters):e}evaluate(e,n,c,p,_,b){return e.kind==="constant"?e.value:e.evaluate(n,c,p,_,b)}}class oo extends ci{possiblyEvaluate(e,n,c,p){if(e.value===void 0)return new qr(this,{kind:"constant",value:void 0},n);if(e.expression.kind==="constant"){const _=e.expression.evaluate(n,null,{},c,p),b=e.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,w=this._calculate(b,b,b,n);return new qr(this,{kind:"constant",value:w},n)}if(e.expression.kind==="camera"){const _=this._calculate(e.expression.evaluate({zoom:n.zoom-1}),e.expression.evaluate({zoom:n.zoom}),e.expression.evaluate({zoom:n.zoom+1}),n);return new qr(this,{kind:"constant",value:_},n)}return new qr(this,e.expression,n)}evaluate(e,n,c,p,_,b){if(e.kind==="source"){const w=e.evaluate(n,c,p,_,b);return this._calculate(w,w,w,n)}return e.kind==="composite"?this._calculate(e.evaluate({zoom:Math.floor(n.zoom)-1},c,p),e.evaluate({zoom:Math.floor(n.zoom)},c,p),e.evaluate({zoom:Math.floor(n.zoom)+1},c,p),n):e.value}_calculate(e,n,c,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:e,to:n}:{from:c,to:n}}interpolate(e){return e}}class Zl{constructor(e){this.specification=e}possiblyEvaluate(e,n,c,p){if(e.value!==void 0){if(e.expression.kind==="constant"){const _=e.expression.evaluate(n,null,{},c,p);return this._calculate(_,_,_,n)}return this._calculate(e.expression.evaluate(new Gn(Math.floor(n.zoom-1),n)),e.expression.evaluate(new Gn(Math.floor(n.zoom),n)),e.expression.evaluate(new Gn(Math.floor(n.zoom+1),n)),n)}}_calculate(e,n,c,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:e,to:n}:{from:c,to:n}}interpolate(e){return e}}class xs{constructor(e){this.specification=e}possiblyEvaluate(e,n,c,p){return!!e.expression.evaluate(n,null,{},c,p)}interpolate(){return!1}}class La{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const n in e){const c=e[n];c.specification.overridable&&this.overridableProperties.push(n);const p=this.defaultPropertyValues[n]=new Vo(c,void 0),_=this.defaultTransitionablePropertyValues[n]=new ul(c);this.defaultTransitioningPropertyValues[n]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=p.possiblyEvaluate({})}}}Ot("DataDrivenProperty",ci),Ot("DataConstantProperty",Kt),Ot("CrossFadedDataDrivenProperty",oo),Ot("CrossFadedProperty",Zl),Ot("ColorRampProperty",xs);const ws="-transition";class Zr extends xn{constructor(e,n){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},e.type!=="custom"&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),n.layout&&(this._unevaluatedLayout=new Ju(n.layout)),n.paint)){this._transitionablePaint=new Vc(n.paint);for(const c in e.paint)this.setPaintProperty(c,e.paint[c],{validate:!1});for(const c in e.layout)this.setLayoutProperty(c,e.layout[c],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new jo(n.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,n,c={}){n!=null&&this._validate(Wu,`layers.${this.id}.layout.${e}`,e,n,c)||(e!=="visibility"?this._unevaluatedLayout.setValue(e,n):this.visibility=n)}getPaintProperty(e){return e.endsWith(ws)?this._transitionablePaint.getTransition(e.slice(0,-ws.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,n,c={}){if(n!=null&&this._validate(Ku,`layers.${this.id}.paint.${e}`,e,n,c))return!1;if(e.endsWith(ws))return this._transitionablePaint.setTransition(e.slice(0,-ws.length),n||void 0),!1;{const p=this._transitionablePaint._values[e],_=p.property.specification["property-type"]==="cross-faded-data-driven",b=p.value.isDataDriven(),w=p.value;this._transitionablePaint.setValue(e,n),this._handleSpecialPaintPropertyUpdate(e);const S=this._transitionablePaint._values[e].value;return S.isDataDriven()||b||_||this._handleOverridablePaintPropertyUpdate(e,w,S)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,n,c){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||this.visibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,n){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,n)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,n)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),me(e,(n,c)=>!(n===void 0||c==="layout"&&!Object.keys(n).length||c==="paint"&&!Object.keys(n).length))}_validate(e,n,c,p,_={}){return(!_||_.validate!==!1)&&ll(this,e.call(Oo,{key:n,layerType:this.type,objectKey:c,value:p,styleSpec:se,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const n=this.paint.get(e);if(n instanceof qr&&Un(n.property.specification)&&(n.value.kind==="source"||n.value.kind==="composite")&&n.value.isStateDependent)return!0}return!1}}const Hc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Cs{constructor(e,n){this._structArray=e,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ia{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,n){return e._trim(),n&&(e.isTransferred=!0,n.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const n=Object.create(this.prototype);return n.arrayBuffer=e.arrayBuffer,n.length=e.length,n.capacity=e.arrayBuffer.byteLength/n.bytesPerElement,n._refreshViews(),n}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const n=this.uint8;this._refreshViews(),n&&this.uint8.set(n)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function da(i,e=1){let n=0,c=0;return{members:i.map(p=>{const _=Hc[p.type].BYTES_PER_ELEMENT,b=n=Kl(n,Math.max(e,_)),w=p.components||1;return c=Math.max(c,_),n+=_*w,{name:p.name,type:p.type,components:w,offset:b}}),size:Kl(n,Math.max(c,e)),alignment:e}}function Kl(i,e){return Math.ceil(i/e)*e}class Ns extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n){const c=this.length;return this.resize(c+1),this.emplace(c,e,n)}emplace(e,n,c){const p=2*e;return this.int16[p+0]=n,this.int16[p+1]=c,e}}Ns.prototype.bytesPerElement=4,Ot("StructArrayLayout2i4",Ns);class d extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,c,p){const _=this.length;return this.resize(_+1),this.emplace(_,e,n,c,p)}emplace(e,n,c,p,_){const b=4*e;return this.int16[b+0]=n,this.int16[b+1]=c,this.int16[b+2]=p,this.int16[b+3]=_,e}}d.prototype.bytesPerElement=8,Ot("StructArrayLayout4i8",d);class t extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,c,p,_,b){const w=this.length;return this.resize(w+1),this.emplace(w,e,n,c,p,_,b)}emplace(e,n,c,p,_,b,w){const S=6*e;return this.int16[S+0]=n,this.int16[S+1]=c,this.int16[S+2]=p,this.int16[S+3]=_,this.int16[S+4]=b,this.int16[S+5]=w,e}}t.prototype.bytesPerElement=12,Ot("StructArrayLayout2i4i12",t);class o extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,c,p,_,b){const w=this.length;return this.resize(w+1),this.emplace(w,e,n,c,p,_,b)}emplace(e,n,c,p,_,b,w){const S=4*e,D=8*e;return this.int16[S+0]=n,this.int16[S+1]=c,this.uint8[D+4]=p,this.uint8[D+5]=_,this.uint8[D+6]=b,this.uint8[D+7]=w,e}}o.prototype.bytesPerElement=8,Ot("StructArrayLayout2i4ub8",o);class h extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n){const c=this.length;return this.resize(c+1),this.emplace(c,e,n)}emplace(e,n,c){const p=2*e;return this.float32[p+0]=n,this.float32[p+1]=c,e}}h.prototype.bytesPerElement=8,Ot("StructArrayLayout2f8",h);class f extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,c,p,_,b,w,S,D,z){const N=this.length;return this.resize(N+1),this.emplace(N,e,n,c,p,_,b,w,S,D,z)}emplace(e,n,c,p,_,b,w,S,D,z,N){const j=10*e;return this.uint16[j+0]=n,this.uint16[j+1]=c,this.uint16[j+2]=p,this.uint16[j+3]=_,this.uint16[j+4]=b,this.uint16[j+5]=w,this.uint16[j+6]=S,this.uint16[j+7]=D,this.uint16[j+8]=z,this.uint16[j+9]=N,e}}f.prototype.bytesPerElement=20,Ot("StructArrayLayout10ui20",f);class y extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,c,p,_,b,w,S,D,z,N,j){const H=this.length;return this.resize(H+1),this.emplace(H,e,n,c,p,_,b,w,S,D,z,N,j)}emplace(e,n,c,p,_,b,w,S,D,z,N,j,H){const q=12*e;return this.int16[q+0]=n,this.int16[q+1]=c,this.int16[q+2]=p,this.int16[q+3]=_,this.uint16[q+4]=b,this.uint16[q+5]=w,this.uint16[q+6]=S,this.uint16[q+7]=D,this.int16[q+8]=z,this.int16[q+9]=N,this.int16[q+10]=j,this.int16[q+11]=H,e}}y.prototype.bytesPerElement=24,Ot("StructArrayLayout4i4ui4i24",y);class x extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,c){const p=this.length;return this.resize(p+1),this.emplace(p,e,n,c)}emplace(e,n,c,p){const _=3*e;return this.float32[_+0]=n,this.float32[_+1]=c,this.float32[_+2]=p,e}}x.prototype.bytesPerElement=12,Ot("StructArrayLayout3f12",x);class E extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.uint32[1*e+0]=n,e}}E.prototype.bytesPerElement=4,Ot("StructArrayLayout1ul4",E);class M extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,c,p,_,b,w,S,D){const z=this.length;return this.resize(z+1),this.emplace(z,e,n,c,p,_,b,w,S,D)}emplace(e,n,c,p,_,b,w,S,D,z){const N=10*e,j=5*e;return this.int16[N+0]=n,this.int16[N+1]=c,this.int16[N+2]=p,this.int16[N+3]=_,this.int16[N+4]=b,this.int16[N+5]=w,this.uint32[j+3]=S,this.uint16[N+8]=D,this.uint16[N+9]=z,e}}M.prototype.bytesPerElement=20,Ot("StructArrayLayout6i1ul2ui20",M);class P extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,c,p,_,b){const w=this.length;return this.resize(w+1),this.emplace(w,e,n,c,p,_,b)}emplace(e,n,c,p,_,b,w){const S=6*e;return this.int16[S+0]=n,this.int16[S+1]=c,this.int16[S+2]=p,this.int16[S+3]=_,this.int16[S+4]=b,this.int16[S+5]=w,e}}P.prototype.bytesPerElement=12,Ot("StructArrayLayout2i2i2i12",P);class F extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,c,p,_){const b=this.length;return this.resize(b+1),this.emplace(b,e,n,c,p,_)}emplace(e,n,c,p,_,b){const w=4*e,S=8*e;return this.float32[w+0]=n,this.float32[w+1]=c,this.float32[w+2]=p,this.int16[S+6]=_,this.int16[S+7]=b,e}}F.prototype.bytesPerElement=16,Ot("StructArrayLayout2f1f2i16",F);class V extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,c,p){const _=this.length;return this.resize(_+1),this.emplace(_,e,n,c,p)}emplace(e,n,c,p,_){const b=12*e,w=3*e;return this.uint8[b+0]=n,this.uint8[b+1]=c,this.float32[w+1]=p,this.float32[w+2]=_,e}}V.prototype.bytesPerElement=12,Ot("StructArrayLayout2ub2f12",V);class G extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,c){const p=this.length;return this.resize(p+1),this.emplace(p,e,n,c)}emplace(e,n,c,p){const _=3*e;return this.uint16[_+0]=n,this.uint16[_+1]=c,this.uint16[_+2]=p,e}}G.prototype.bytesPerElement=6,Ot("StructArrayLayout3ui6",G);class te extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,c,p,_,b,w,S,D,z,N,j,H,q,ue,re,Se){const Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,e,n,c,p,_,b,w,S,D,z,N,j,H,q,ue,re,Se)}emplace(e,n,c,p,_,b,w,S,D,z,N,j,H,q,ue,re,Se,Fe){const xe=24*e,Pe=12*e,$e=48*e;return this.int16[xe+0]=n,this.int16[xe+1]=c,this.uint16[xe+2]=p,this.uint16[xe+3]=_,this.uint32[Pe+2]=b,this.uint32[Pe+3]=w,this.uint32[Pe+4]=S,this.uint16[xe+10]=D,this.uint16[xe+11]=z,this.uint16[xe+12]=N,this.float32[Pe+7]=j,this.float32[Pe+8]=H,this.uint8[$e+36]=q,this.uint8[$e+37]=ue,this.uint8[$e+38]=re,this.uint32[Pe+10]=Se,this.int16[xe+22]=Fe,e}}te.prototype.bytesPerElement=48,Ot("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",te);class J extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,c,p,_,b,w,S,D,z,N,j,H,q,ue,re,Se,Fe,xe,Pe,$e,Je,Bt,Ht,kt,xt,gt,Mt){const Tt=this.length;return this.resize(Tt+1),this.emplace(Tt,e,n,c,p,_,b,w,S,D,z,N,j,H,q,ue,re,Se,Fe,xe,Pe,$e,Je,Bt,Ht,kt,xt,gt,Mt)}emplace(e,n,c,p,_,b,w,S,D,z,N,j,H,q,ue,re,Se,Fe,xe,Pe,$e,Je,Bt,Ht,kt,xt,gt,Mt,Tt){const ct=34*e,ri=17*e;return this.int16[ct+0]=n,this.int16[ct+1]=c,this.int16[ct+2]=p,this.int16[ct+3]=_,this.int16[ct+4]=b,this.int16[ct+5]=w,this.int16[ct+6]=S,this.int16[ct+7]=D,this.uint16[ct+8]=z,this.uint16[ct+9]=N,this.uint16[ct+10]=j,this.uint16[ct+11]=H,this.uint16[ct+12]=q,this.uint16[ct+13]=ue,this.uint16[ct+14]=re,this.uint16[ct+15]=Se,this.uint16[ct+16]=Fe,this.uint16[ct+17]=xe,this.uint16[ct+18]=Pe,this.uint16[ct+19]=$e,this.uint16[ct+20]=Je,this.uint16[ct+21]=Bt,this.uint16[ct+22]=Ht,this.uint32[ri+12]=kt,this.float32[ri+13]=xt,this.float32[ri+14]=gt,this.float32[ri+15]=Mt,this.float32[ri+16]=Tt,e}}J.prototype.bytesPerElement=68,Ot("StructArrayLayout8i15ui1ul4f68",J);class Q extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.float32[1*e+0]=n,e}}Q.prototype.bytesPerElement=4,Ot("StructArrayLayout1f4",Q);class pe extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,n,c){const p=this.length;return this.resize(p+1),this.emplace(p,e,n,c)}emplace(e,n,c,p){const _=3*e;return this.int16[_+0]=n,this.int16[_+1]=c,this.int16[_+2]=p,e}}pe.prototype.bytesPerElement=6,Ot("StructArrayLayout3i6",pe);class be extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n,c){const p=this.length;return this.resize(p+1),this.emplace(p,e,n,c)}emplace(e,n,c,p){const _=4*e;return this.uint32[2*e+0]=n,this.uint16[_+2]=c,this.uint16[_+3]=p,e}}be.prototype.bytesPerElement=8,Ot("StructArrayLayout1ul2ui8",be);class Ae extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,n){const c=this.length;return this.resize(c+1),this.emplace(c,e,n)}emplace(e,n,c){const p=2*e;return this.uint16[p+0]=n,this.uint16[p+1]=c,e}}Ae.prototype.bytesPerElement=4,Ot("StructArrayLayout2ui4",Ae);class ae extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const n=this.length;return this.resize(n+1),this.emplace(n,e)}emplace(e,n){return this.uint16[1*e+0]=n,e}}ae.prototype.bytesPerElement=2,Ot("StructArrayLayout1ui2",ae);class ze extends ia{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,n,c,p){const _=this.length;return this.resize(_+1),this.emplace(_,e,n,c,p)}emplace(e,n,c,p,_){const b=4*e;return this.float32[b+0]=n,this.float32[b+1]=c,this.float32[b+2]=p,this.float32[b+3]=_,e}}ze.prototype.bytesPerElement=16,Ot("StructArrayLayout4f16",ze);class De extends Cs{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Ne(this.anchorPointX,this.anchorPointY)}}De.prototype.size=20;class qe extends M{get(e){return new De(this,e)}}Ot("CollisionBoxArray",qe);class Ze extends Cs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ze.prototype.size=48;class st extends te{get(e){return new Ze(this,e)}}Ot("PlacedSymbolArray",st);class Ge extends Cs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Ge.prototype.size=68;class Pt extends J{get(e){return new Ge(this,e)}}Ot("SymbolInstanceArray",Pt);class vt extends Q{getoffsetX(e){return this.float32[1*e+0]}}Ot("GlyphOffsetArray",vt);class zt extends pe{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}Ot("SymbolLineVertexArray",zt);class yi extends Cs{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}yi.prototype.size=8;class Ti extends be{get(e){return new yi(this,e)}}Ot("FeatureIndexArray",Ti);class ai extends Ns{}class bn extends Ns{}class vn extends Ns{}class Ki extends t{}class Qi extends o{}class Tn extends h{}class Ta extends f{}class Kr extends y{}class Nr extends x{}class Wr extends E{}class Ts extends P{}class Ar extends V{}class tr extends G{}class os extends Ae{}const hl=da([{name:"a_pos",components:2,type:"Int16"}],4),{members:_a}=hl;class Li{constructor(e=[]){this.segments=e}prepareSegment(e,n,c,p){let _=this.segments[this.segments.length-1];return e>Li.MAX_VERTEX_ARRAY_LENGTH&&Oe(`Max vertices per segment is ${Li.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!_||_.vertexLength+e>Li.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==p)&&(_={vertexOffset:n.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0},p!==void 0&&(_.sortKey=p),this.segments.push(_)),_}get(){return this.segments}destroy(){for(const e of this.segments)for(const n in e.vaos)e.vaos[n].destroy()}static simpleSegment(e,n,c,p){return new Li([{vertexOffset:e,primitiveOffset:n,vertexLength:c,primitiveLength:p,vaos:{},sortKey:0}])}}function pn(i,e){return 256*(i=k(Math.floor(i),0,255))+k(Math.floor(e),0,255)}Li.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ot("SegmentVector",Li);const Sa=da([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ea={exports:{}},Hn={exports:{}};Hn.exports=function(i,e){var n,c,p,_,b,w,S,D;for(c=i.length-(n=3&i.length),p=e,b=3432918353,w=461845907,D=0;D<c;)S=255&i.charCodeAt(D)|(255&i.charCodeAt(++D))<<8|(255&i.charCodeAt(++D))<<16|(255&i.charCodeAt(++D))<<24,++D,p=27492+(65535&(_=5*(65535&(p=(p^=S=(65535&(S=(S=(65535&S)*b+(((S>>>16)*b&65535)<<16)&4294967295)<<15|S>>>17))*w+(((S>>>16)*w&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(S=0,n){case 3:S^=(255&i.charCodeAt(D+2))<<16;case 2:S^=(255&i.charCodeAt(D+1))<<8;case 1:p^=S=(65535&(S=(S=(65535&(S^=255&i.charCodeAt(D)))*b+(((S>>>16)*b&65535)<<16)&4294967295)<<15|S>>>17))*w+(((S>>>16)*w&65535)<<16)&4294967295}return p^=i.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var kr={exports:{}};kr.exports=function(i,e){for(var n,c=i.length,p=e^c,_=0;c>=4;)n=1540483477*(65535&(n=255&i.charCodeAt(_)|(255&i.charCodeAt(++_))<<8|(255&i.charCodeAt(++_))<<16|(255&i.charCodeAt(++_))<<24))+((1540483477*(n>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),c-=4,++_;switch(c){case 3:p^=(255&i.charCodeAt(_+2))<<16;case 2:p^=(255&i.charCodeAt(_+1))<<8;case 1:p=1540483477*(65535&(p^=255&i.charCodeAt(_)))+((1540483477*(p>>>16)&65535)<<16)}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var Us=Hn.exports,Wl=kr.exports;Ea.exports=Us,Ea.exports.murmur3=Us,Ea.exports.murmur2=Wl;class lo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,n,c,p){this.ids.push(qc(e)),this.positions.push(n,c,p)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const n=qc(e);let c=0,p=this.ids.length-1;for(;c<p;){const b=c+p>>1;this.ids[b]>=n?p=b:c=b+1}const _=[];for(;this.ids[c]===n;)_.push({index:this.positions[3*c],start:this.positions[3*c+1],end:this.positions[3*c+2]}),c++;return _}static serialize(e,n){const c=new Float64Array(e.ids),p=new Uint32Array(e.positions);return Xl(c,p,0,c.length-1),n&&n.push(c.buffer,p.buffer),{ids:c,positions:p}}static deserialize(e){const n=new lo;return n.ids=e.ids,n.positions=e.positions,n.indexed=!0,n}}function qc(i){const e=+i;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:Ea.exports(String(i))}function Xl(i,e,n,c){for(;n<c;){const p=i[n+c>>1];let _=n-1,b=c+1;for(;;){do _++;while(i[_]<p);do b--;while(i[b]>p);if(_>=b)break;Ss(i,_,b),Ss(e,3*_,3*b),Ss(e,3*_+1,3*b+1),Ss(e,3*_+2,3*b+2)}b-n<c-b?(Xl(i,e,n,b),n=b+1):(Xl(i,e,b+1,c),c=b)}}function Ss(i,e,n){const c=i[e];i[e]=i[n],i[n]=c}Ot("FeaturePositionMap",lo);class Vs{constructor(e,n){this.gl=e.gl,this.location=n}}class js extends Vs{constructor(e,n){super(e,n),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class dl extends Vs{constructor(e,n){super(e,n),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class ad extends Vs{constructor(e,n){super(e,n),this.current=U.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const jm=new Float32Array(16);function Qu(i){return[pn(255*i.r,255*i.g),pn(255*i.b,255*i.a)]}class Yl{constructor(e,n,c){this.value=e,this.uniformNames=n.map(p=>`u_${p}`),this.type=c}setUniform(e,n,c){e.set(c.constantOr(this.value))}getBinding(e,n,c){return this.type==="color"?new ad(e,n):new js(e,n)}}class pl{constructor(e,n){this.uniformNames=n.map(c=>`u_${c}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,n){this.pixelRatioFrom=n.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=n.tlbr,this.patternTo=e.tlbr}setUniform(e,n,c,p){const _=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&e.set(_)}getBinding(e,n,c){return c.substr(0,9)==="u_pattern"?new dl(e,n):new js(e,n)}}class Gs{constructor(e,n,c,p){this.expression=e,this.type=c,this.maxValue=0,this.paintVertexAttributes=n.map(_=>({name:`a_${_}`,type:"Float32",components:c==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(e,n,c,p,_){const b=this.paintVertexArray.length,w=this.expression.evaluate(new Gn(0),n,{},p,[],_);this.paintVertexArray.resize(e),this._setPaintValue(b,e,w)}updatePaintArray(e,n,c,p){const _=this.expression.evaluate({zoom:0},c,p);this._setPaintValue(e,n,_)}_setPaintValue(e,n,c){if(this.type==="color"){const p=Qu(c);for(let _=e;_<n;_++)this.paintVertexArray.emplace(_,p[0],p[1])}else{for(let p=e;p<n;p++)this.paintVertexArray.emplace(p,c);this.maxValue=Math.max(this.maxValue,Math.abs(c))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ls{constructor(e,n,c,p,_,b){this.expression=e,this.uniformNames=n.map(w=>`u_${w}_t`),this.type=c,this.useIntegerZoom=p,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=n.map(w=>({name:`a_${w}`,type:"Float32",components:c==="color"?4:2,offset:0})),this.paintVertexArray=new b}populatePaintArray(e,n,c,p,_){const b=this.expression.evaluate(new Gn(this.zoom),n,{},p,[],_),w=this.expression.evaluate(new Gn(this.zoom+1),n,{},p,[],_),S=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(S,e,b,w)}updatePaintArray(e,n,c,p){const _=this.expression.evaluate({zoom:this.zoom},c,p),b=this.expression.evaluate({zoom:this.zoom+1},c,p);this._setPaintValue(e,n,_,b)}_setPaintValue(e,n,c,p){if(this.type==="color"){const _=Qu(c),b=Qu(p);for(let w=e;w<n;w++)this.paintVertexArray.emplace(w,_[0],_[1],b[0],b[1])}else{for(let _=e;_<n;_++)this.paintVertexArray.emplace(_,c,p);this.maxValue=Math.max(this.maxValue,Math.abs(c),Math.abs(p))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,n){const c=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,p=k(this.expression.interpolationFactor(c,this.zoom,this.zoom+1),0,1);e.set(p)}getBinding(e,n,c){return new js(e,n)}}class co{constructor(e,n,c,p,_,b){this.expression=e,this.type=n,this.useIntegerZoom=c,this.zoom=p,this.layerId=b,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(e,n,c){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(p,e,n.patterns&&n.patterns[this.layerId],c)}updatePaintArray(e,n,c,p,_){this._setPaintValues(e,n,c.patterns&&c.patterns[this.layerId],_)}_setPaintValues(e,n,c,p){if(!p||!c)return;const{min:_,mid:b,max:w}=c,S=p[_],D=p[b],z=p[w];if(S&&D&&z)for(let N=e;N<n;N++)this.zoomInPaintVertexArray.emplace(N,D.tl[0],D.tl[1],D.br[0],D.br[1],S.tl[0],S.tl[1],S.br[0],S.br[1],D.pixelRatio,S.pixelRatio),this.zoomOutPaintVertexArray.emplace(N,D.tl[0],D.tl[1],D.br[0],D.br[1],z.tl[0],z.tl[1],z.br[0],z.br[1],D.pixelRatio,z.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,Sa.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,Sa.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class rd{constructor(e,n,c){this.binders={},this._buffers=[];const p=[];for(const _ in e.paint._values){if(!c(_))continue;const b=e.paint.get(_);if(!(b instanceof qr&&Un(b.property.specification)))continue;const w=Gm(_,e.type),S=b.value,D=b.property.specification.type,z=b.property.useIntegerZoom,N=b.property.specification["property-type"],j=N==="cross-faded"||N==="cross-faded-data-driven";if(S.kind==="constant")this.binders[_]=j?new pl(S.value,w):new Yl(S.value,w,D),p.push(`/u_${_}`);else if(S.kind==="source"||j){const H=sd(_,D,"source");this.binders[_]=j?new co(S,D,z,n,H,e.id):new Gs(S,w,D,H),p.push(`/a_${_}`)}else{const H=sd(_,D,"composite");this.binders[_]=new ls(S,w,D,z,n,H),p.push(`/z_${_}`)}}this.cacheKey=p.sort().join("")}getMaxValue(e){const n=this.binders[e];return n instanceof Gs||n instanceof ls?n.maxValue:0}populatePaintArrays(e,n,c,p,_){for(const b in this.binders){const w=this.binders[b];(w instanceof Gs||w instanceof ls||w instanceof co)&&w.populatePaintArray(e,n,c,p,_)}}setConstantPatternPositions(e,n){for(const c in this.binders){const p=this.binders[c];p instanceof pl&&p.setConstantPatternPositions(e,n)}}updatePaintArrays(e,n,c,p,_){let b=!1;for(const w in e){const S=n.getPositions(w);for(const D of S){const z=c.feature(D.index);for(const N in this.binders){const j=this.binders[N];if((j instanceof Gs||j instanceof ls||j instanceof co)&&j.expression.isStateDependent===!0){const H=p.paint.get(N);j.expression=H.value,j.updatePaintArray(D.start,D.end,z,e[w],_),b=!0}}}}return b}defines(){const e=[];for(const n in this.binders){const c=this.binders[n];(c instanceof Yl||c instanceof pl)&&e.push(...c.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return e}getBinderAttributes(){const e=[];for(const n in this.binders){const c=this.binders[n];if(c instanceof Gs||c instanceof ls)for(let p=0;p<c.paintVertexAttributes.length;p++)e.push(c.paintVertexAttributes[p].name);else if(c instanceof co)for(let p=0;p<Sa.members.length;p++)e.push(Sa.members[p].name)}return e}getBinderUniforms(){const e=[];for(const n in this.binders){const c=this.binders[n];if(c instanceof Yl||c instanceof pl||c instanceof ls)for(const p of c.uniformNames)e.push(p)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,n){const c=[];for(const p in this.binders){const _=this.binders[p];if(_ instanceof Yl||_ instanceof pl||_ instanceof ls){for(const b of _.uniformNames)if(n[b]){const w=_.getBinding(e,n[b],b);c.push({name:b,property:p,binding:w})}}}return c}setUniforms(e,n,c,p){for(const{name:_,property:b,binding:w}of n)this.binders[b].setUniform(w,p,c.get(b),_)}updatePaintBuffers(e){this._buffers=[];for(const n in this.binders){const c=this.binders[n];if(e&&c instanceof co){const p=e.fromScale===2?c.zoomInPaintVertexBuffer:c.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(c instanceof Gs||c instanceof ls)&&c.paintVertexBuffer&&this._buffers.push(c.paintVertexBuffer)}}upload(e){for(const n in this.binders){const c=this.binders[n];(c instanceof Gs||c instanceof ls||c instanceof co)&&c.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const n=this.binders[e];(n instanceof Gs||n instanceof ls||n instanceof co)&&n.destroy()}}}class Go{constructor(e,n,c=()=>!0){this.programConfigurations={};for(const p of e)this.programConfigurations[p.id]=new rd(p,n,c);this.needsUpload=!1,this._featureMap=new lo,this._bufferOffset=0}populatePaintArrays(e,n,c,p,_,b){for(const w in this.programConfigurations)this.programConfigurations[w].populatePaintArrays(e,n,p,_,b);n.id!==void 0&&this._featureMap.add(n.id,c,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,n,c,p){for(const _ of c)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(e,this._featureMap,n,_,p)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const n in this.programConfigurations)this.programConfigurations[n].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function Gm(i,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[i]||[i.replace(`${e}-`,"").replace(/-/g,"_")]}function sd(i,e,n){const c={color:{source:h,composite:ze},number:{source:Q,composite:h}},p=function(_){return{"line-pattern":{source:Ta,composite:Ta},"fill-pattern":{source:Ta,composite:Ta},"fill-extrusion-pattern":{source:Ta,composite:Ta}}[_]}(i);return p&&p[n]||c[e][n]}Ot("ConstantBinder",Yl),Ot("CrossFadedConstantBinder",pl),Ot("SourceExpressionBinder",Gs),Ot("CrossFadedCompositeBinder",co),Ot("CompositeExpressionBinder",ls),Ot("ProgramConfiguration",rd,{omit:["_buffers"]}),Ot("ProgramConfigurationSet",Go);var ya=8192;const $u=Math.pow(2,14)-1,od=-$u-1;function Ho(i){const e=ya/i.extent,n=i.loadGeometry();for(let c=0;c<n.length;c++){const p=n[c];for(let _=0;_<p.length;_++){const b=p[_],w=Math.round(b.x*e),S=Math.round(b.y*e);b.x=k(w,od,$u),b.y=k(S,od,$u),(w<b.x||w>b.x+1||S<b.y||S>b.y+1)&&Oe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return n}function qo(i,e){return{type:i.type,id:i.id,properties:i.properties,geometry:e?Ho(i):[]}}function Zc(i,e,n,c,p){i.emplaceBack(2*e+(c+1)/2,2*n+(p+1)/2)}class eh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new bn,this.indexArray=new tr,this.segments=new Li,this.programConfigurations=new Go(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(e,n,c){const p=this.layers[0],_=[];let b=null,w=!1;p.type==="circle"&&(b=p.layout.get("circle-sort-key"),w=!b.isConstant());for(const{feature:S,id:D,index:z,sourceLayerIndex:N}of e){const j=this.layers[0]._featureFilter.needGeometry,H=qo(S,j);if(!this.layers[0]._featureFilter.filter(new Gn(this.zoom),H,c))continue;const q=w?b.evaluate(H,{},c):void 0,ue={id:D,properties:S.properties,type:S.type,sourceLayerIndex:N,index:z,geometry:j?H.geometry:Ho(S),patterns:{},sortKey:q};_.push(ue)}w&&_.sort((S,D)=>S.sortKey-D.sortKey);for(const S of _){const{geometry:D,index:z,sourceLayerIndex:N}=S,j=e[z].feature;this.addFeature(S,D,z,c),n.featureIndex.insert(j,D,z,N,this.index)}}update(e,n,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,n,this.stateDependentLayers,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,_a),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,n,c,p){for(const _ of n)for(const b of _){const w=b.x,S=b.y;if(w<0||w>=ya||S<0||S>=ya)continue;const D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),z=D.vertexLength;Zc(this.layoutVertexArray,w,S,-1,-1),Zc(this.layoutVertexArray,w,S,1,-1),Zc(this.layoutVertexArray,w,S,1,1),Zc(this.layoutVertexArray,w,S,-1,1),this.indexArray.emplaceBack(z,z+1,z+2),this.indexArray.emplaceBack(z,z+3,z+2),D.vertexLength+=4,D.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,c,{},p)}}function ld(i,e){for(let n=0;n<i.length;n++)if(fl(e,i[n]))return!0;for(let n=0;n<e.length;n++)if(fl(i,e[n]))return!0;return!!th(i,e)}function Hm(i,e,n){return!!fl(i,e)||!!ih(e,i,n)}function cd(i,e){if(i.length===1)return hd(e,i[0]);for(let n=0;n<e.length;n++){const c=e[n];for(let p=0;p<c.length;p++)if(fl(i,c[p]))return!0}for(let n=0;n<i.length;n++)if(hd(e,i[n]))return!0;for(let n=0;n<e.length;n++)if(th(i,e[n]))return!0;return!1}function qm(i,e,n){if(i.length>1){if(th(i,e))return!0;for(let c=0;c<e.length;c++)if(ih(e[c],i,n))return!0}for(let c=0;c<i.length;c++)if(ih(i[c],e,n))return!0;return!1}function th(i,e){if(i.length===0||e.length===0)return!1;for(let n=0;n<i.length-1;n++){const c=i[n],p=i[n+1];for(let _=0;_<e.length-1;_++)if(Zm(c,p,e[_],e[_+1]))return!0}return!1}function Zm(i,e,n,c){return We(i,n,c)!==We(e,n,c)&&We(i,e,n)!==We(i,e,c)}function ih(i,e,n){const c=n*n;if(e.length===1)return i.distSqr(e[0])<c;for(let p=1;p<e.length;p++)if(ud(i,e[p-1],e[p])<c)return!0;return!1}function ud(i,e,n){const c=e.distSqr(n);if(c===0)return i.distSqr(e);const p=((i.x-e.x)*(n.x-e.x)+(i.y-e.y)*(n.y-e.y))/c;return i.distSqr(p<0?e:p>1?n:n.sub(e)._mult(p)._add(e))}function hd(i,e){let n,c,p,_=!1;for(let b=0;b<i.length;b++){n=i[b];for(let w=0,S=n.length-1;w<n.length;S=w++)c=n[w],p=n[S],c.y>e.y!=p.y>e.y&&e.x<(p.x-c.x)*(e.y-c.y)/(p.y-c.y)+c.x&&(_=!_)}return _}function fl(i,e){let n=!1;for(let c=0,p=i.length-1;c<i.length;p=c++){const _=i[c],b=i[p];_.y>e.y!=b.y>e.y&&e.x<(b.x-_.x)*(e.y-_.y)/(b.y-_.y)+_.x&&(n=!n)}return n}function Km(i,e,n){const c=n[0],p=n[2];if(i.x<c.x&&e.x<c.x||i.x>p.x&&e.x>p.x||i.y<c.y&&e.y<c.y||i.y>p.y&&e.y>p.y)return!1;const _=We(i,e,n[0]);return _!==We(i,e,n[1])||_!==We(i,e,n[2])||_!==We(i,e,n[3])}function Jl(i,e,n){const c=e.paint.get(i).value;return c.kind==="constant"?c.value:n.programConfigurations.get(e.id).getMaxValue(i)}function Kc(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Wc(i,e,n,c,p){if(!e[0]&&!e[1])return i;const _=Ne.convert(e)._mult(p);n==="viewport"&&_._rotate(-c);const b=[];for(let w=0;w<i.length;w++)b.push(i[w].sub(_));return b}Ot("CircleBucket",eh,{omit:["layers"]});const Wm=new La({"circle-sort-key":new ci(se.layout_circle["circle-sort-key"])});var Xm={paint:new La({"circle-radius":new ci(se.paint_circle["circle-radius"]),"circle-color":new ci(se.paint_circle["circle-color"]),"circle-blur":new ci(se.paint_circle["circle-blur"]),"circle-opacity":new ci(se.paint_circle["circle-opacity"]),"circle-translate":new Kt(se.paint_circle["circle-translate"]),"circle-translate-anchor":new Kt(se.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Kt(se.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Kt(se.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ci(se.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ci(se.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ci(se.paint_circle["circle-stroke-opacity"])}),layout:Wm},ir=1e-6,nr=typeof Float32Array<"u"?Float32Array:Array;function dd(){var i=new nr(9);return nr!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[5]=0,i[6]=0,i[7]=0),i[0]=1,i[4]=1,i[8]=1,i}function nh(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}function pd(i,e,n){var c=e[0],p=e[1],_=e[2],b=e[3],w=e[4],S=e[5],D=e[6],z=e[7],N=e[8],j=e[9],H=e[10],q=e[11],ue=e[12],re=e[13],Se=e[14],Fe=e[15],xe=n[0],Pe=n[1],$e=n[2],Je=n[3];return i[0]=xe*c+Pe*w+$e*N+Je*ue,i[1]=xe*p+Pe*S+$e*j+Je*re,i[2]=xe*_+Pe*D+$e*H+Je*Se,i[3]=xe*b+Pe*z+$e*q+Je*Fe,i[4]=(xe=n[4])*c+(Pe=n[5])*w+($e=n[6])*N+(Je=n[7])*ue,i[5]=xe*p+Pe*S+$e*j+Je*re,i[6]=xe*_+Pe*D+$e*H+Je*Se,i[7]=xe*b+Pe*z+$e*q+Je*Fe,i[8]=(xe=n[8])*c+(Pe=n[9])*w+($e=n[10])*N+(Je=n[11])*ue,i[9]=xe*p+Pe*S+$e*j+Je*re,i[10]=xe*_+Pe*D+$e*H+Je*Se,i[11]=xe*b+Pe*z+$e*q+Je*Fe,i[12]=(xe=n[12])*c+(Pe=n[13])*w+($e=n[14])*N+(Je=n[15])*ue,i[13]=xe*p+Pe*S+$e*j+Je*re,i[14]=xe*_+Pe*D+$e*H+Je*Se,i[15]=xe*b+Pe*z+$e*q+Je*Fe,i}Math.hypot||(Math.hypot=function(){for(var i=0,e=arguments.length;e--;)i+=arguments[e]*arguments[e];return Math.sqrt(i)});var Ql,Ym=pd;function fd(){var i=new nr(3);return nr!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i}function md(i,e,n){var c=new nr(3);return c[0]=i,c[1]=e,c[2]=n,c}function Xc(i,e,n){var c=e[0],p=e[1],_=e[2],b=e[3];return i[0]=n[0]*c+n[4]*p+n[8]*_+n[12]*b,i[1]=n[1]*c+n[5]*p+n[9]*_+n[13]*b,i[2]=n[2]*c+n[6]*p+n[10]*_+n[14]*b,i[3]=n[3]*c+n[7]*p+n[11]*_+n[15]*b,i}function gd(){var i=new nr(4);return nr!=Float32Array&&(i[0]=0,i[1]=0,i[2]=0),i[3]=1,i}function _d(i,e){const n=Xc([],[i.x,i.y,0,1],e);return new Ne(n[0]/n[3],n[1]/n[3])}fd(),Ql=new nr(4),nr!=Float32Array&&(Ql[0]=0,Ql[1]=0,Ql[2]=0,Ql[3]=0),fd(),md(1,0,0),md(0,1,0),gd(),gd(),dd(),function(){var i;i=new nr(2),nr!=Float32Array&&(i[0]=0,i[1]=0)}();class yd extends eh{}Ot("HeatmapBucket",yd,{omit:["layers"]});var Jm={paint:new La({"heatmap-radius":new ci(se.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ci(se.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Kt(se.paint_heatmap["heatmap-intensity"]),"heatmap-color":new xs(se.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Kt(se.paint_heatmap["heatmap-opacity"])})};function ah(i,{width:e,height:n},c,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==e*n*c)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${e*n*c}`)}else p=new Uint8Array(e*n*c);return i.width=e,i.height=n,i.data=p,i}function bd(i,{width:e,height:n},c){if(e===i.width&&n===i.height)return;const p=ah({},{width:e,height:n},c);rh(i,p,{x:0,y:0},{x:0,y:0},{width:Math.min(i.width,e),height:Math.min(i.height,n)},c),i.width=e,i.height=n,i.data=p.data}function rh(i,e,n,c,p,_){if(p.width===0||p.height===0)return e;if(p.width>i.width||p.height>i.height||n.x>i.width-p.width||n.y>i.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>e.width||p.height>e.height||c.x>e.width-p.width||c.y>e.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const b=i.data,w=e.data;if(b===w)throw new Error("srcData equals dstData, so image is already copied");for(let S=0;S<p.height;S++){const D=((n.y+S)*i.width+n.x)*_,z=((c.y+S)*e.width+c.x)*_;for(let N=0;N<p.width*_;N++)w[z+N]=b[D+N]}return e}class $l{constructor(e,n){ah(this,e,1,n)}resize(e){bd(this,e,1)}clone(){return new $l({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,n,c,p,_){rh(e,n,c,p,_,1)}}class Ur{constructor(e,n){ah(this,e,4,n)}resize(e){bd(this,e,4)}replace(e,n){n?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Ur({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,n,c,p,_){rh(e,n,c,p,_,4)}}function vd(i){const e={},n=i.resolution||256,c=i.clips?i.clips.length:1,p=i.image||new Ur({width:n,height:c});if(Math.log(n)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${n}`);const _=(b,w,S)=>{e[i.evaluationKey]=S;const D=i.expression.evaluate(e);p.data[b+w+0]=Math.floor(255*D.r/D.a),p.data[b+w+1]=Math.floor(255*D.g/D.a),p.data[b+w+2]=Math.floor(255*D.b/D.a),p.data[b+w+3]=Math.floor(255*D.a)};if(i.clips)for(let b=0,w=0;b<c;++b,w+=4*n)for(let S=0,D=0;S<n;S++,D+=4){const z=S/(n-1),{start:N,end:j}=i.clips[b];_(w,D,N*(1-z)+j*z)}else for(let b=0,w=0;b<n;b++,w+=4)_(0,w,b/(n-1));return p}Ot("AlphaImage",$l),Ot("RGBAImage",Ur);var Qm={paint:new La({"hillshade-illumination-direction":new Kt(se.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Kt(se.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Kt(se.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Kt(se.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Kt(se.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Kt(se.paint_hillshade["hillshade-accent-color"])})};const $m=da([{name:"a_pos",components:2,type:"Int16"}],4),{members:eg}=$m;var Yc={exports:{}};function Jc(i,e,n){n=n||2;var c,p,_,b,w,S,D,z=e&&e.length,N=z?e[0]*n:i.length,j=xd(i,0,N,n,!0),H=[];if(!j||j.next===j.prev)return H;if(z&&(j=function(ue,re,Se,Fe){var xe,Pe,$e,Je=[];for(xe=0,Pe=re.length;xe<Pe;xe++)($e=xd(ue,re[xe]*Fe,xe<Pe-1?re[xe+1]*Fe:ue.length,Fe,!1))===$e.next&&($e.steiner=!0),Je.push(lg($e));for(Je.sort(rg),xe=0;xe<Je.length;xe++)Se=sg(Je[xe],Se);return Se}(i,e,j,n)),i.length>80*n){c=_=i[0],p=b=i[1];for(var q=n;q<N;q+=n)(w=i[q])<c&&(c=w),(S=i[q+1])<p&&(p=S),w>_&&(_=w),S>b&&(b=S);D=(D=Math.max(_-c,b-p))!==0?32767/D:0}return ec(j,H,n,c,p,D,0),H}function xd(i,e,n,c,p){var _,b;if(p===lh(i,e,n,c)>0)for(_=e;_<n;_+=c)b=Td(_,i[_],i[_+1],b);else for(_=n-c;_>=e;_-=c)b=Td(_,i[_],i[_+1],b);return b&&Qc(b,b.next)&&(ic(b),b=b.next),b}function Zo(i,e){if(!i)return i;e||(e=i);var n,c=i;do if(n=!1,c.steiner||!Qc(c,c.next)&&ca(c.prev,c,c.next)!==0)c=c.next;else{if(ic(c),(c=e=c.prev)===c.next)break;n=!0}while(n||c!==e);return e}function ec(i,e,n,c,p,_,b){if(i){!b&&_&&function(z,N,j,H){var q=z;do q.z===0&&(q.z=sh(q.x,q.y,N,j,H)),q.prevZ=q.prev,q.nextZ=q.next,q=q.next;while(q!==z);q.prevZ.nextZ=null,q.prevZ=null,function(ue){var re,Se,Fe,xe,Pe,$e,Je,Bt,Ht=1;do{for(Se=ue,ue=null,Pe=null,$e=0;Se;){for($e++,Fe=Se,Je=0,re=0;re<Ht&&(Je++,Fe=Fe.nextZ);re++);for(Bt=Ht;Je>0||Bt>0&&Fe;)Je!==0&&(Bt===0||!Fe||Se.z<=Fe.z)?(xe=Se,Se=Se.nextZ,Je--):(xe=Fe,Fe=Fe.nextZ,Bt--),Pe?Pe.nextZ=xe:ue=xe,xe.prevZ=Pe,Pe=xe;Se=Fe}Pe.nextZ=null,Ht*=2}while($e>1)}(q)}(i,c,p,_);for(var w,S,D=i;i.prev!==i.next;)if(w=i.prev,S=i.next,_?ig(i,c,p,_):tg(i))e.push(w.i/n|0),e.push(i.i/n|0),e.push(S.i/n|0),ic(i),i=S.next,D=S.next;else if((i=S)===D){b?b===1?ec(i=ng(Zo(i),e,n),e,n,c,p,_,2):b===2&&ag(i,e,n,c,p,_):ec(Zo(i),e,n,c,p,_,1);break}}}function tg(i){var e=i.prev,n=i,c=i.next;if(ca(e,n,c)>=0)return!1;for(var p=e.x,_=n.x,b=c.x,w=e.y,S=n.y,D=c.y,z=p<_?p<b?p:b:_<b?_:b,N=w<S?w<D?w:D:S<D?S:D,j=p>_?p>b?p:b:_>b?_:b,H=w>S?w>D?w:D:S>D?S:D,q=c.next;q!==e;){if(q.x>=z&&q.x<=j&&q.y>=N&&q.y<=H&&ml(p,w,_,S,b,D,q.x,q.y)&&ca(q.prev,q,q.next)>=0)return!1;q=q.next}return!0}function ig(i,e,n,c){var p=i.prev,_=i,b=i.next;if(ca(p,_,b)>=0)return!1;for(var w=p.x,S=_.x,D=b.x,z=p.y,N=_.y,j=b.y,H=w<S?w<D?w:D:S<D?S:D,q=z<N?z<j?z:j:N<j?N:j,ue=w>S?w>D?w:D:S>D?S:D,re=z>N?z>j?z:j:N>j?N:j,Se=sh(H,q,e,n,c),Fe=sh(ue,re,e,n,c),xe=i.prevZ,Pe=i.nextZ;xe&&xe.z>=Se&&Pe&&Pe.z<=Fe;){if(xe.x>=H&&xe.x<=ue&&xe.y>=q&&xe.y<=re&&xe!==p&&xe!==b&&ml(w,z,S,N,D,j,xe.x,xe.y)&&ca(xe.prev,xe,xe.next)>=0||(xe=xe.prevZ,Pe.x>=H&&Pe.x<=ue&&Pe.y>=q&&Pe.y<=re&&Pe!==p&&Pe!==b&&ml(w,z,S,N,D,j,Pe.x,Pe.y)&&ca(Pe.prev,Pe,Pe.next)>=0))return!1;Pe=Pe.nextZ}for(;xe&&xe.z>=Se;){if(xe.x>=H&&xe.x<=ue&&xe.y>=q&&xe.y<=re&&xe!==p&&xe!==b&&ml(w,z,S,N,D,j,xe.x,xe.y)&&ca(xe.prev,xe,xe.next)>=0)return!1;xe=xe.prevZ}for(;Pe&&Pe.z<=Fe;){if(Pe.x>=H&&Pe.x<=ue&&Pe.y>=q&&Pe.y<=re&&Pe!==p&&Pe!==b&&ml(w,z,S,N,D,j,Pe.x,Pe.y)&&ca(Pe.prev,Pe,Pe.next)>=0)return!1;Pe=Pe.nextZ}return!0}function ng(i,e,n){var c=i;do{var p=c.prev,_=c.next.next;!Qc(p,_)&&wd(p,c,c.next,_)&&tc(p,_)&&tc(_,p)&&(e.push(p.i/n|0),e.push(c.i/n|0),e.push(_.i/n|0),ic(c),ic(c.next),c=i=_),c=c.next}while(c!==i);return Zo(c)}function ag(i,e,n,c,p,_){var b=i;do{for(var w=b.next.next;w!==b.prev;){if(b.i!==w.i&&cg(b,w)){var S=Cd(b,w);return b=Zo(b,b.next),S=Zo(S,S.next),ec(b,e,n,c,p,_,0),void ec(S,e,n,c,p,_,0)}w=w.next}b=b.next}while(b!==i)}function rg(i,e){return i.x-e.x}function sg(i,e){var n=function(p,_){var b,w=_,S=p.x,D=p.y,z=-1/0;do{if(D<=w.y&&D>=w.next.y&&w.next.y!==w.y){var N=w.x+(D-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(N<=S&&N>z&&(z=N,b=w.x<w.next.x?w:w.next,N===S))return b}w=w.next}while(w!==_);if(!b)return null;var j,H=b,q=b.x,ue=b.y,re=1/0;w=b;do S>=w.x&&w.x>=q&&S!==w.x&&ml(D<ue?S:z,D,q,ue,D<ue?z:S,D,w.x,w.y)&&(j=Math.abs(D-w.y)/(S-w.x),tc(w,p)&&(j<re||j===re&&(w.x>b.x||w.x===b.x&&og(b,w)))&&(b=w,re=j)),w=w.next;while(w!==H);return b}(i,e);if(!n)return e;var c=Cd(n,i);return Zo(c,c.next),Zo(n,n.next)}function og(i,e){return ca(i.prev,i,e.prev)<0&&ca(e.next,i,i.next)<0}function sh(i,e,n,c,p){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-n)*p|0)|i<<8))|i<<4))|i<<2))|i<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-c)*p|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function lg(i){var e=i,n=i;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==i);return n}function ml(i,e,n,c,p,_,b,w){return(p-b)*(e-w)>=(i-b)*(_-w)&&(i-b)*(c-w)>=(n-b)*(e-w)&&(n-b)*(_-w)>=(p-b)*(c-w)}function cg(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!function(n,c){var p=n;do{if(p.i!==n.i&&p.next.i!==n.i&&p.i!==c.i&&p.next.i!==c.i&&wd(p,p.next,n,c))return!0;p=p.next}while(p!==n);return!1}(i,e)&&(tc(i,e)&&tc(e,i)&&function(n,c){var p=n,_=!1,b=(n.x+c.x)/2,w=(n.y+c.y)/2;do p.y>w!=p.next.y>w&&p.next.y!==p.y&&b<(p.next.x-p.x)*(w-p.y)/(p.next.y-p.y)+p.x&&(_=!_),p=p.next;while(p!==n);return _}(i,e)&&(ca(i.prev,i,e.prev)||ca(i,e.prev,e))||Qc(i,e)&&ca(i.prev,i,i.next)>0&&ca(e.prev,e,e.next)>0)}function ca(i,e,n){return(e.y-i.y)*(n.x-e.x)-(e.x-i.x)*(n.y-e.y)}function Qc(i,e){return i.x===e.x&&i.y===e.y}function wd(i,e,n,c){var p=eu(ca(i,e,n)),_=eu(ca(i,e,c)),b=eu(ca(n,c,i)),w=eu(ca(n,c,e));return p!==_&&b!==w||!(p!==0||!$c(i,n,e))||!(_!==0||!$c(i,c,e))||!(b!==0||!$c(n,i,c))||!(w!==0||!$c(n,e,c))}function $c(i,e,n){return e.x<=Math.max(i.x,n.x)&&e.x>=Math.min(i.x,n.x)&&e.y<=Math.max(i.y,n.y)&&e.y>=Math.min(i.y,n.y)}function eu(i){return i>0?1:i<0?-1:0}function tc(i,e){return ca(i.prev,i,i.next)<0?ca(i,e,i.next)>=0&&ca(i,i.prev,e)>=0:ca(i,e,i.prev)<0||ca(i,i.next,e)<0}function Cd(i,e){var n=new oh(i.i,i.x,i.y),c=new oh(e.i,e.x,e.y),p=i.next,_=e.prev;return i.next=e,e.prev=i,n.next=p,p.prev=n,c.next=n,n.prev=c,_.next=c,c.prev=_,c}function Td(i,e,n,c){var p=new oh(i,e,n);return c?(p.next=c.next,p.prev=c,c.next.prev=p,c.next=p):(p.prev=p,p.next=p),p}function ic(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function oh(i,e,n){this.i=i,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function lh(i,e,n,c){for(var p=0,_=e,b=n-c;_<n;_+=c)p+=(i[b]-i[_])*(i[_+1]+i[b+1]),b=_;return p}function ug(i,e,n,c,p){Sd(i,e,n||0,c||i.length-1,p||hg)}function Sd(i,e,n,c,p){for(;c>n;){if(c-n>600){var _=c-n+1,b=e-n+1,w=Math.log(_),S=.5*Math.exp(2*w/3),D=.5*Math.sqrt(w*S*(_-S)/_)*(b-_/2<0?-1:1);Sd(i,e,Math.max(n,Math.floor(e-b*S/_+D)),Math.min(c,Math.floor(e+(_-b)*S/_+D)),p)}var z=i[e],N=n,j=c;for(nc(i,n,e),p(i[c],z)>0&&nc(i,n,c);N<j;){for(nc(i,N,j),N++,j--;p(i[N],z)<0;)N++;for(;p(i[j],z)>0;)j--}p(i[n],z)===0?nc(i,n,j):nc(i,++j,c),j<=e&&(n=j+1),e<=j&&(c=j-1)}}function nc(i,e,n){var c=i[e];i[e]=i[n],i[n]=c}function hg(i,e){return i<e?-1:i>e?1:0}function ch(i,e){const n=i.length;if(n<=1)return[i];const c=[];let p,_;for(let b=0;b<n;b++){const w=Me(i[b]);w!==0&&(i[b].area=Math.abs(w),_===void 0&&(_=w<0),_===w<0?(p&&c.push(p),p=[i[b]]):p.push(i[b]))}if(p&&c.push(p),e>1)for(let b=0;b<c.length;b++)c[b].length<=e||(ug(c[b],e,1,c[b].length-1,dg),c[b]=c[b].slice(0,e));return c}function dg(i,e){return e.area-i.area}function uh(i,e,n){const c=n.patternDependencies;let p=!1;for(const _ of e){const b=_.paint.get(`${i}-pattern`);b.isConstant()||(p=!0);const w=b.constantOr(null);w&&(p=!0,c[w.to]=!0,c[w.from]=!0)}return p}function hh(i,e,n,c,p){const _=p.patternDependencies;for(const b of e){const w=b.paint.get(`${i}-pattern`).value;if(w.kind!=="constant"){let S=w.evaluate({zoom:c-1},n,{},p.availableImages),D=w.evaluate({zoom:c},n,{},p.availableImages),z=w.evaluate({zoom:c+1},n,{},p.availableImages);S=S&&S.name?S.name:S,D=D&&D.name?D.name:D,z=z&&z.name?z.name:z,_[S]=!0,_[D]=!0,_[z]=!0,n.patterns[b.id]={min:S,mid:D,max:z}}}return n}Yc.exports=Jc,Yc.exports.default=Jc,Jc.deviation=function(i,e,n,c){var p=e&&e.length,_=Math.abs(lh(i,0,p?e[0]*n:i.length,n));if(p)for(var b=0,w=e.length;b<w;b++)_-=Math.abs(lh(i,e[b]*n,b<w-1?e[b+1]*n:i.length,n));var S=0;for(b=0;b<c.length;b+=3){var D=c[b]*n,z=c[b+1]*n,N=c[b+2]*n;S+=Math.abs((i[D]-i[N])*(i[z+1]-i[D+1])-(i[D]-i[z])*(i[N+1]-i[D+1]))}return _===0&&S===0?0:Math.abs((S-_)/_)},Jc.flatten=function(i){for(var e=i[0][0].length,n={vertices:[],holes:[],dimensions:e},c=0,p=0;p<i.length;p++){for(var _=0;_<i[p].length;_++)for(var b=0;b<e;b++)n.vertices.push(i[p][_][b]);p>0&&n.holes.push(c+=i[p-1].length)}return n};class dh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new vn,this.indexArray=new tr,this.indexArray2=new os,this.programConfigurations=new Go(e.layers,e.zoom),this.segments=new Li,this.segments2=new Li,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(e,n,c){this.hasPattern=uh("fill",this.layers,n);const p=this.layers[0].layout.get("fill-sort-key"),_=!p.isConstant(),b=[];for(const{feature:w,id:S,index:D,sourceLayerIndex:z}of e){const N=this.layers[0]._featureFilter.needGeometry,j=qo(w,N);if(!this.layers[0]._featureFilter.filter(new Gn(this.zoom),j,c))continue;const H=_?p.evaluate(j,{},c,n.availableImages):void 0,q={id:S,properties:w.properties,type:w.type,sourceLayerIndex:z,index:D,geometry:N?j.geometry:Ho(w),patterns:{},sortKey:H};b.push(q)}_&&b.sort((w,S)=>w.sortKey-S.sortKey);for(const w of b){const{geometry:S,index:D,sourceLayerIndex:z}=w;if(this.hasPattern){const N=hh("fill",this.layers,w,this.zoom,n);this.patternFeatures.push(N)}else this.addFeature(w,S,D,c,{});n.featureIndex.insert(e[D].feature,S,D,z,this.index)}}update(e,n,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,n,this.stateDependentLayers,c)}addFeatures(e,n,c){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,n,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,eg),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,n,c,p,_){for(const b of ch(n,500)){let w=0;for(const H of b)w+=H.length;const S=this.segments.prepareSegment(w,this.layoutVertexArray,this.indexArray),D=S.vertexLength,z=[],N=[];for(const H of b){if(H.length===0)continue;H!==b[0]&&N.push(z.length/2);const q=this.segments2.prepareSegment(H.length,this.layoutVertexArray,this.indexArray2),ue=q.vertexLength;this.layoutVertexArray.emplaceBack(H[0].x,H[0].y),this.indexArray2.emplaceBack(ue+H.length-1,ue),z.push(H[0].x),z.push(H[0].y);for(let re=1;re<H.length;re++)this.layoutVertexArray.emplaceBack(H[re].x,H[re].y),this.indexArray2.emplaceBack(ue+re-1,ue+re),z.push(H[re].x),z.push(H[re].y);q.vertexLength+=H.length,q.primitiveLength+=H.length}const j=Yc.exports(z,N);for(let H=0;H<j.length;H+=3)this.indexArray.emplaceBack(D+j[H],D+j[H+1],D+j[H+2]);S.vertexLength+=w,S.primitiveLength+=j.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,c,_,p)}}Ot("FillBucket",dh,{omit:["layers","patternFeatures"]});const pg=new La({"fill-sort-key":new ci(se.layout_fill["fill-sort-key"])});var fg={paint:new La({"fill-antialias":new Kt(se.paint_fill["fill-antialias"]),"fill-opacity":new ci(se.paint_fill["fill-opacity"]),"fill-color":new ci(se.paint_fill["fill-color"]),"fill-outline-color":new ci(se.paint_fill["fill-outline-color"]),"fill-translate":new Kt(se.paint_fill["fill-translate"]),"fill-translate-anchor":new Kt(se.paint_fill["fill-translate-anchor"]),"fill-pattern":new oo(se.paint_fill["fill-pattern"])}),layout:pg};const mg=da([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),gg=da([{name:"a_centroid",components:2,type:"Int16"}],4),{members:_g}=mg;var uo={},yg=Ne,Ed=gl;function gl(i,e,n,c,p){this.properties={},this.extent=n,this.type=0,this._pbf=i,this._geometry=-1,this._keys=c,this._values=p,i.readFields(bg,this,e)}function bg(i,e,n){i==1?e.id=n.readVarint():i==2?function(c,p){for(var _=c.readVarint()+c.pos;c.pos<_;){var b=p._keys[c.readVarint()],w=p._values[c.readVarint()];p.properties[b]=w}}(n,e):i==3?e.type=n.readVarint():i==4&&(e._geometry=n.pos)}function vg(i){for(var e,n,c=0,p=0,_=i.length,b=_-1;p<_;b=p++)c+=((n=i[b]).x-(e=i[p]).x)*(e.y+n.y);return c}gl.types=["Unknown","Point","LineString","Polygon"],gl.prototype.loadGeometry=function(){var i=this._pbf;i.pos=this._geometry;for(var e,n=i.readVarint()+i.pos,c=1,p=0,_=0,b=0,w=[];i.pos<n;){if(p<=0){var S=i.readVarint();c=7&S,p=S>>3}if(p--,c===1||c===2)_+=i.readSVarint(),b+=i.readSVarint(),c===1&&(e&&w.push(e),e=[]),e.push(new yg(_,b));else{if(c!==7)throw new Error("unknown command "+c);e&&e.push(e[0].clone())}}return e&&w.push(e),w},gl.prototype.bbox=function(){var i=this._pbf;i.pos=this._geometry;for(var e=i.readVarint()+i.pos,n=1,c=0,p=0,_=0,b=1/0,w=-1/0,S=1/0,D=-1/0;i.pos<e;){if(c<=0){var z=i.readVarint();n=7&z,c=z>>3}if(c--,n===1||n===2)(p+=i.readSVarint())<b&&(b=p),p>w&&(w=p),(_+=i.readSVarint())<S&&(S=_),_>D&&(D=_);else if(n!==7)throw new Error("unknown command "+n)}return[b,S,w,D]},gl.prototype.toGeoJSON=function(i,e,n){var c,p,_=this.extent*Math.pow(2,n),b=this.extent*i,w=this.extent*e,S=this.loadGeometry(),D=gl.types[this.type];function z(H){for(var q=0;q<H.length;q++){var ue=H[q];H[q]=[360*(ue.x+b)/_-180,360/Math.PI*Math.atan(Math.exp((180-360*(ue.y+w)/_)*Math.PI/180))-90]}}switch(this.type){case 1:var N=[];for(c=0;c<S.length;c++)N[c]=S[c][0];z(S=N);break;case 2:for(c=0;c<S.length;c++)z(S[c]);break;case 3:for(S=function(H){var q=H.length;if(q<=1)return[H];for(var ue,re,Se=[],Fe=0;Fe<q;Fe++){var xe=vg(H[Fe]);xe!==0&&(re===void 0&&(re=xe<0),re===xe<0?(ue&&Se.push(ue),ue=[H[Fe]]):ue.push(H[Fe]))}return ue&&Se.push(ue),Se}(S),c=0;c<S.length;c++)for(p=0;p<S[c].length;p++)z(S[c][p])}S.length===1?S=S[0]:D="Multi"+D;var j={type:"Feature",geometry:{type:D,coordinates:S},properties:this.properties};return"id"in this&&(j.id=this.id),j};var xg=Ed,Id=Ad;function Ad(i,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(wg,this,e),this.length=this._features.length}function wg(i,e,n){i===15?e.version=n.readVarint():i===1?e.name=n.readString():i===5?e.extent=n.readVarint():i===2?e._features.push(n.pos):i===3?e._keys.push(n.readString()):i===4&&e._values.push(function(c){for(var p=null,_=c.readVarint()+c.pos;c.pos<_;){var b=c.readVarint()>>3;p=b===1?c.readString():b===2?c.readFloat():b===3?c.readDouble():b===4?c.readVarint64():b===5?c.readVarint():b===6?c.readSVarint():b===7?c.readBoolean():null}return p}(n))}Ad.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var e=this._pbf.readVarint()+this._pbf.pos;return new xg(this._pbf,e,this.extent,this._keys,this._values)};var Cg=Id;function Tg(i,e,n){if(i===3){var c=new Cg(n,n.readVarint()+n.pos);c.length&&(e[c.name]=c)}}uo.VectorTile=function(i,e){this.layers=i.readFields(Tg,{},e)},uo.VectorTileFeature=Ed,uo.VectorTileLayer=Id;const Sg=uo.VectorTileFeature.types,ph=Math.pow(2,13);function ac(i,e,n,c,p,_,b,w){i.emplaceBack(e,n,2*Math.floor(c*ph)+b,p*ph*2,_*ph*2,Math.round(w))}class fh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ki,this.centroidVertexArray=new ai,this.indexArray=new tr,this.programConfigurations=new Go(e.layers,e.zoom),this.segments=new Li,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(e,n,c){this.features=[],this.hasPattern=uh("fill-extrusion",this.layers,n);for(const{feature:p,id:_,index:b,sourceLayerIndex:w}of e){const S=this.layers[0]._featureFilter.needGeometry,D=qo(p,S);if(!this.layers[0]._featureFilter.filter(new Gn(this.zoom),D,c))continue;const z={id:_,sourceLayerIndex:w,index:b,geometry:S?D.geometry:Ho(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(hh("fill-extrusion",this.layers,z,this.zoom,n)):this.addFeature(z,z.geometry,b,c,{}),n.featureIndex.insert(p,z.geometry,b,w,this.index,!0)}}addFeatures(e,n,c){for(const p of this.features){const{geometry:_}=p;this.addFeature(p,_,p.index,n,c)}}update(e,n,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,n,this.stateDependentLayers,c)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,_g),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,gg.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,n,c,p,_){const b={x:0,y:0,vertexCount:0};for(const w of ch(n,500)){let S=0;for(const q of w)S+=q.length;let D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const q of w){if(q.length===0||Ig(q))continue;let ue=0;for(let re=0;re<q.length;re++){const Se=q[re];if(re>=1){const Fe=q[re-1];if(!Eg(Se,Fe)){D.vertexLength+4>Li.MAX_VERTEX_ARRAY_LENGTH&&(D=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const xe=Se.sub(Fe)._perp()._unit(),Pe=Fe.dist(Se);ue+Pe>32768&&(ue=0),ac(this.layoutVertexArray,Se.x,Se.y,xe.x,xe.y,0,0,ue),ac(this.layoutVertexArray,Se.x,Se.y,xe.x,xe.y,0,1,ue),b.x+=2*Se.x,b.y+=2*Se.y,b.vertexCount+=2,ue+=Pe,ac(this.layoutVertexArray,Fe.x,Fe.y,xe.x,xe.y,0,0,ue),ac(this.layoutVertexArray,Fe.x,Fe.y,xe.x,xe.y,0,1,ue),b.x+=2*Fe.x,b.y+=2*Fe.y,b.vertexCount+=2;const $e=D.vertexLength;this.indexArray.emplaceBack($e,$e+2,$e+1),this.indexArray.emplaceBack($e+1,$e+2,$e+3),D.vertexLength+=4,D.primitiveLength+=2}}}}if(D.vertexLength+S>Li.MAX_VERTEX_ARRAY_LENGTH&&(D=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray)),Sg[e.type]!=="Polygon")continue;const z=[],N=[],j=D.vertexLength;for(const q of w)if(q.length!==0){q!==w[0]&&N.push(z.length/2);for(let ue=0;ue<q.length;ue++){const re=q[ue];ac(this.layoutVertexArray,re.x,re.y,0,0,1,1,0),b.x+=re.x,b.y+=re.y,b.vertexCount+=1,z.push(re.x),z.push(re.y)}}const H=Yc.exports(z,N);for(let q=0;q<H.length;q+=3)this.indexArray.emplaceBack(j+H[q],j+H[q+2],j+H[q+1]);D.primitiveLength+=H.length/3,D.vertexLength+=S}for(let w=0;w<b.vertexCount;w++)this.centroidVertexArray.emplaceBack(Math.floor(b.x/b.vertexCount),Math.floor(b.y/b.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,c,_,p)}}function Eg(i,e){return i.x===e.x&&(i.x<0||i.x>ya)||i.y===e.y&&(i.y<0||i.y>ya)}function Ig(i){return i.every(e=>e.x<0)||i.every(e=>e.x>ya)||i.every(e=>e.y<0)||i.every(e=>e.y>ya)}Ot("FillExtrusionBucket",fh,{omit:["layers","features"]});var Ag={paint:new La({"fill-extrusion-opacity":new Kt(se["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ci(se["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Kt(se["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Kt(se["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new oo(se["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ci(se["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ci(se["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Kt(se["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function rc(i,e){return i.x*e.x+i.y*e.y}function kd(i,e){if(i.length===1){let n=0;const c=e[n++];let p;for(;!p||c.equals(p);)if(p=e[n++],!p)return 1/0;for(;n<e.length;n++){const _=e[n],b=i[0],w=p.sub(c),S=_.sub(c),D=b.sub(c),z=rc(w,w),N=rc(w,S),j=rc(S,S),H=rc(D,w),q=rc(D,S),ue=z*j-N*N,re=(j*H-N*q)/ue,Se=(z*q-N*H)/ue,Fe=c.z*(1-re-Se)+p.z*re+_.z*Se;if(isFinite(Fe))return Fe}return 1/0}{let n=1/0;for(const c of e)n=Math.min(n,c.z);return n}}const kg=da([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Mg}=kg,Dg=da([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Pg}=Dg,Lg=uo.VectorTileFeature.types,Rg=Math.cos(Math.PI/180*37.5),Md=Math.pow(2,14)/.5;class mh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(n=>n.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(n=>{this.gradients[n.id]={}}),this.layoutVertexArray=new Qi,this.layoutVertexArray2=new Tn,this.indexArray=new tr,this.programConfigurations=new Go(e.layers,e.zoom),this.segments=new Li,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(n=>n.isStateDependent()).map(n=>n.id)}populate(e,n,c){this.hasPattern=uh("line",this.layers,n);const p=this.layers[0].layout.get("line-sort-key"),_=!p.isConstant(),b=[];for(const{feature:w,id:S,index:D,sourceLayerIndex:z}of e){const N=this.layers[0]._featureFilter.needGeometry,j=qo(w,N);if(!this.layers[0]._featureFilter.filter(new Gn(this.zoom),j,c))continue;const H=_?p.evaluate(j,{},c):void 0,q={id:S,properties:w.properties,type:w.type,sourceLayerIndex:z,index:D,geometry:N?j.geometry:Ho(w),patterns:{},sortKey:H};b.push(q)}_&&b.sort((w,S)=>w.sortKey-S.sortKey);for(const w of b){const{geometry:S,index:D,sourceLayerIndex:z}=w;if(this.hasPattern){const N=hh("line",this.layers,w,this.zoom,n);this.patternFeatures.push(N)}else this.addFeature(w,S,D,c,{});n.featureIndex.insert(e[D].feature,S,D,z,this.index)}}update(e,n,c){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,n,this.stateDependentLayers,c)}addFeatures(e,n,c){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,n,c)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Pg)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Mg),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,n,c,p,_){const b=this.layers[0].layout,w=b.get("line-join").evaluate(e,{}),S=b.get("line-cap"),D=b.get("line-miter-limit"),z=b.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const N of n)this.addLine(N,e,w,S,D,z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,c,_,p)}addLine(e,n,c,p,_,b){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Se=0;Se<e.length-1;Se++)this.totalDistance+=e[Se].dist(e[Se+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const w=Lg[n.type]==="Polygon";let S=e.length;for(;S>=2&&e[S-1].equals(e[S-2]);)S--;let D=0;for(;D<S-1&&e[D].equals(e[D+1]);)D++;if(S<(w?3:2))return;c==="bevel"&&(_=1.05);const z=this.overscaling<=16?122880/(512*this.overscaling):0,N=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray);let j,H,q,ue,re;this.e1=this.e2=-1,w&&(j=e[S-2],re=e[D].sub(j)._unit()._perp());for(let Se=D;Se<S;Se++){if(q=Se===S-1?w?e[D+1]:void 0:e[Se+1],q&&e[Se].equals(q))continue;re&&(ue=re),j&&(H=j),j=e[Se],re=q?q.sub(j)._unit()._perp():ue,ue=ue||re;let Fe=ue.add(re);Fe.x===0&&Fe.y===0||Fe._unit();const xe=ue.x*re.x+ue.y*re.y,Pe=Fe.x*re.x+Fe.y*re.y,$e=Pe!==0?1/Pe:1/0,Je=2*Math.sqrt(2-2*Pe),Bt=Pe<Rg&&H&&q,Ht=ue.x*re.y-ue.y*re.x>0;if(Bt&&Se>D){const gt=j.dist(H);if(gt>2*z){const Mt=j.sub(j.sub(H)._mult(z/gt)._round());this.updateDistance(H,Mt),this.addCurrentVertex(Mt,ue,0,0,N),H=Mt}}const kt=H&&q;let xt=kt?c:w?"butt":p;if(kt&&xt==="round"&&($e<b?xt="miter":$e<=2&&(xt="fakeround")),xt==="miter"&&$e>_&&(xt="bevel"),xt==="bevel"&&($e>2&&(xt="flipbevel"),$e<_&&(xt="miter")),H&&this.updateDistance(H,j),xt==="miter")Fe._mult($e),this.addCurrentVertex(j,Fe,0,0,N);else if(xt==="flipbevel"){if($e>100)Fe=re.mult(-1);else{const gt=$e*ue.add(re).mag()/ue.sub(re).mag();Fe._perp()._mult(gt*(Ht?-1:1))}this.addCurrentVertex(j,Fe,0,0,N),this.addCurrentVertex(j,Fe.mult(-1),0,0,N)}else if(xt==="bevel"||xt==="fakeround"){const gt=-Math.sqrt($e*$e-1),Mt=Ht?gt:0,Tt=Ht?0:gt;if(H&&this.addCurrentVertex(j,ue,Mt,Tt,N),xt==="fakeround"){const ct=Math.round(180*Je/Math.PI/20);for(let ri=1;ri<ct;ri++){let Xt=ri/ct;if(Xt!==.5){const Vn=Xt-.5;Xt+=Xt*Vn*(Xt-1)*((1.0904+xe*(xe*(3.55645-1.43519*xe)-3.2452))*Vn*Vn+(.848013+xe*(.215638*xe-1.06021)))}const Si=re.sub(ue)._mult(Xt)._add(ue)._unit()._mult(Ht?-1:1);this.addHalfVertex(j,Si.x,Si.y,!1,Ht,0,N)}}q&&this.addCurrentVertex(j,re,-Mt,-Tt,N)}else if(xt==="butt")this.addCurrentVertex(j,Fe,0,0,N);else if(xt==="square"){const gt=H?1:-1;this.addCurrentVertex(j,Fe,gt,gt,N)}else xt==="round"&&(H&&(this.addCurrentVertex(j,ue,0,0,N),this.addCurrentVertex(j,ue,1,1,N,!0)),q&&(this.addCurrentVertex(j,re,-1,-1,N,!0),this.addCurrentVertex(j,re,0,0,N)));if(Bt&&Se<S-1){const gt=j.dist(q);if(gt>2*z){const Mt=j.add(q.sub(j)._mult(z/gt)._round());this.updateDistance(j,Mt),this.addCurrentVertex(Mt,re,0,0,N),j=Mt}}}}addCurrentVertex(e,n,c,p,_,b=!1){const w=n.y*p-n.x,S=-n.y-n.x*p;this.addHalfVertex(e,n.x+n.y*c,n.y-n.x*c,b,!1,c,_),this.addHalfVertex(e,w,S,b,!0,-p,_),this.distance>Md/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(e,n,c,p,_,b))}addHalfVertex({x:e,y:n},c,p,_,b,w,S){const D=.5*(this.lineClips?this.scaledDistance*(Md-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(_?1:0),(n<<1)+(b?1:0),Math.round(63*c)+128,Math.round(63*p)+128,1+(w===0?0:w<0?-1:1)|(63&D)<<2,D>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const z=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,z),S.primitiveLength++),b?this.e2=z:this.e1=z}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,n){this.distance+=e.dist(n),this.updateScaledDistance()}}Ot("LineBucket",mh,{omit:["layers","patternFeatures"]});const zg=new La({"line-cap":new Kt(se.layout_line["line-cap"]),"line-join":new ci(se.layout_line["line-join"]),"line-miter-limit":new Kt(se.layout_line["line-miter-limit"]),"line-round-limit":new Kt(se.layout_line["line-round-limit"]),"line-sort-key":new ci(se.layout_line["line-sort-key"])});var Dd={paint:new La({"line-opacity":new ci(se.paint_line["line-opacity"]),"line-color":new ci(se.paint_line["line-color"]),"line-translate":new Kt(se.paint_line["line-translate"]),"line-translate-anchor":new Kt(se.paint_line["line-translate-anchor"]),"line-width":new ci(se.paint_line["line-width"]),"line-gap-width":new ci(se.paint_line["line-gap-width"]),"line-offset":new ci(se.paint_line["line-offset"]),"line-blur":new ci(se.paint_line["line-blur"]),"line-dasharray":new Zl(se.paint_line["line-dasharray"]),"line-pattern":new oo(se.paint_line["line-pattern"]),"line-gradient":new xs(se.paint_line["line-gradient"])}),layout:zg};const Pd=new class extends ci{possiblyEvaluate(i,e){return e=new Gn(Math.floor(e.zoom),{now:e.now,fadeDuration:e.fadeDuration,zoomHistory:e.zoomHistory,transition:e.transition}),super.possiblyEvaluate(i,e)}evaluate(i,e,n,c){return e=$({},e,{zoom:Math.floor(e.zoom)}),super.evaluate(i,e,n,c)}}(Dd.paint.properties["line-width"].specification);function Ld(i,e){return e>0?e+2*i:i}Pd.useIntegerZoom=!0;const Bg=da([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Fg=da([{name:"a_projected_pos",components:3,type:"Float32"}],4);da([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Og=da([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);da([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Rd=da([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Ng=da([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Ug(i,e,n){return i.sections.forEach(c=>{c.text=function(p,_,b){const w=_.layout.get("text-transform").evaluate(b,{});return w==="uppercase"?p=p.toLocaleUpperCase():w==="lowercase"&&(p=p.toLocaleLowerCase()),Ir.applyArabicShaping&&(p=Ir.applyArabicShaping(p)),p}(c.text,e,n)}),i}da([{name:"triangle",components:3,type:"Uint16"}]),da([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),da([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),da([{type:"Float32",name:"offsetX"}]),da([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const sc={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var Ra=24,gh=In,zd=function(i,e,n,c,p){var _,b,w=8*p-c-1,S=(1<<w)-1,D=S>>1,z=-7,N=n?p-1:0,j=n?-1:1,H=i[e+N];for(N+=j,_=H&(1<<-z)-1,H>>=-z,z+=w;z>0;_=256*_+i[e+N],N+=j,z-=8);for(b=_&(1<<-z)-1,_>>=-z,z+=c;z>0;b=256*b+i[e+N],N+=j,z-=8);if(_===0)_=1-D;else{if(_===S)return b?NaN:1/0*(H?-1:1);b+=Math.pow(2,c),_-=D}return(H?-1:1)*b*Math.pow(2,_-c)},Bd=function(i,e,n,c,p,_){var b,w,S,D=8*_-p-1,z=(1<<D)-1,N=z>>1,j=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,H=c?0:_-1,q=c?1:-1,ue=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(w=isNaN(e)?1:0,b=z):(b=Math.floor(Math.log(e)/Math.LN2),e*(S=Math.pow(2,-b))<1&&(b--,S*=2),(e+=b+N>=1?j/S:j*Math.pow(2,1-N))*S>=2&&(b++,S/=2),b+N>=z?(w=0,b=z):b+N>=1?(w=(e*S-1)*Math.pow(2,p),b+=N):(w=e*Math.pow(2,N-1)*Math.pow(2,p),b=0));p>=8;i[n+H]=255&w,H+=q,w/=256,p-=8);for(b=b<<p|w,D+=p;D>0;i[n+H]=255&b,H+=q,b/=256,D-=8);i[n+H-q]|=128*ue};function In(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}In.Varint=0,In.Fixed64=1,In.Bytes=2,In.Fixed32=5;var ho,_h=4294967296,Fd=1/_h,Od=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Hs(i){return i.type===In.Bytes?i.readVarint()+i.pos:i.pos+1}function _l(i,e,n){return n?4294967296*e+(i>>>0):4294967296*(e>>>0)+(i>>>0)}function Nd(i,e,n){var c=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(c);for(var p=n.pos-1;p>=i;p--)n.buf[p+c]=n.buf[p]}function Vg(i,e){for(var n=0;n<i.length;n++)e.writeVarint(i[n])}function jg(i,e){for(var n=0;n<i.length;n++)e.writeSVarint(i[n])}function Gg(i,e){for(var n=0;n<i.length;n++)e.writeFloat(i[n])}function Hg(i,e){for(var n=0;n<i.length;n++)e.writeDouble(i[n])}function qg(i,e){for(var n=0;n<i.length;n++)e.writeBoolean(i[n])}function Zg(i,e){for(var n=0;n<i.length;n++)e.writeFixed32(i[n])}function Kg(i,e){for(var n=0;n<i.length;n++)e.writeSFixed32(i[n])}function Wg(i,e){for(var n=0;n<i.length;n++)e.writeFixed64(i[n])}function Xg(i,e){for(var n=0;n<i.length;n++)e.writeSFixed64(i[n])}function tu(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16)+16777216*i[e+3]}function yl(i,e,n){i[n]=e,i[n+1]=e>>>8,i[n+2]=e>>>16,i[n+3]=e>>>24}function Ud(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16)+(i[e+3]<<24)}function Yg(i,e,n){i===1&&n.readMessage(Jg,e)}function Jg(i,e,n){if(i===3){const{id:c,bitmap:p,width:_,height:b,left:w,top:S,advance:D}=n.readMessage(Qg,{});e.push({id:c,bitmap:new $l({width:_+6,height:b+6},p),metrics:{width:_,height:b,left:w,top:S,advance:D}})}}function Qg(i,e,n){i===1?e.id=n.readVarint():i===2?e.bitmap=n.readBytes():i===3?e.width=n.readVarint():i===4?e.height=n.readVarint():i===5?e.left=n.readSVarint():i===6?e.top=n.readSVarint():i===7&&(e.advance=n.readVarint())}function Vd(i){let e=0,n=0;for(const b of i)e+=b.w*b.h,n=Math.max(n,b.w);i.sort((b,w)=>w.h-b.h);const c=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}];let p=0,_=0;for(const b of i)for(let w=c.length-1;w>=0;w--){const S=c[w];if(!(b.w>S.w||b.h>S.h)){if(b.x=S.x,b.y=S.y,_=Math.max(_,b.y+b.h),p=Math.max(p,b.x+b.w),b.w===S.w&&b.h===S.h){const D=c.pop();w<c.length&&(c[w]=D)}else b.h===S.h?(S.x+=b.w,S.w-=b.w):b.w===S.w?(S.y+=b.h,S.h-=b.h):(c.push({x:S.x+b.w,y:S.y,w:S.w-b.w,h:b.h}),S.y+=b.h,S.h-=b.h);break}}return{w:p,h:_,fill:e/(p*_)||0}}In.prototype={destroy:function(){this.buf=null},readFields:function(i,e,n){for(n=n||this.length;this.pos<n;){var c=this.readVarint(),p=c>>3,_=this.pos;this.type=7&c,i(p,e,this),this.pos===_&&this.skip(c)}return e},readMessage:function(i,e){return this.readFields(i,e,this.readVarint()+this.pos)},readFixed32:function(){var i=tu(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=Ud(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=tu(this.buf,this.pos)+tu(this.buf,this.pos+4)*_h;return this.pos+=8,i},readSFixed64:function(){var i=tu(this.buf,this.pos)+Ud(this.buf,this.pos+4)*_h;return this.pos+=8,i},readFloat:function(){var i=zd(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=zd(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var e,n,c=this.buf;return e=127&(n=c[this.pos++]),n<128?e:(e|=(127&(n=c[this.pos++]))<<7,n<128?e:(e|=(127&(n=c[this.pos++]))<<14,n<128?e:(e|=(127&(n=c[this.pos++]))<<21,n<128?e:function(p,_,b){var w,S,D=b.buf;if(w=(112&(S=D[b.pos++]))>>4,S<128||(w|=(127&(S=D[b.pos++]))<<3,S<128)||(w|=(127&(S=D[b.pos++]))<<10,S<128)||(w|=(127&(S=D[b.pos++]))<<17,S<128)||(w|=(127&(S=D[b.pos++]))<<24,S<128)||(w|=(1&(S=D[b.pos++]))<<31,S<128))return _l(p,w,_);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=c[this.pos]))<<28,i,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2==1?(i+1)/-2:i/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var i=this.readVarint()+this.pos,e=this.pos;return this.pos=i,i-e>=12&&Od?function(n,c,p){return Od.decode(n.subarray(c,p))}(this.buf,e,i):function(n,c,p){for(var _="",b=c;b<p;){var w,S,D,z=n[b],N=null,j=z>239?4:z>223?3:z>191?2:1;if(b+j>p)break;j===1?z<128&&(N=z):j===2?(192&(w=n[b+1]))==128&&(N=(31&z)<<6|63&w)<=127&&(N=null):j===3?(S=n[b+2],(192&(w=n[b+1]))==128&&(192&S)==128&&((N=(15&z)<<12|(63&w)<<6|63&S)<=2047||N>=55296&&N<=57343)&&(N=null)):j===4&&(S=n[b+2],D=n[b+3],(192&(w=n[b+1]))==128&&(192&S)==128&&(192&D)==128&&((N=(15&z)<<18|(63&w)<<12|(63&S)<<6|63&D)<=65535||N>=1114112)&&(N=null)),N===null?(N=65533,j=1):N>65535&&(N-=65536,_+=String.fromCharCode(N>>>10&1023|55296),N=56320|1023&N),_+=String.fromCharCode(N),b+=j}return _}(this.buf,e,i)},readBytes:function(){var i=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,i);return this.pos=i,e},readPackedVarint:function(i,e){if(this.type!==In.Bytes)return i.push(this.readVarint(e));var n=Hs(this);for(i=i||[];this.pos<n;)i.push(this.readVarint(e));return i},readPackedSVarint:function(i){if(this.type!==In.Bytes)return i.push(this.readSVarint());var e=Hs(this);for(i=i||[];this.pos<e;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==In.Bytes)return i.push(this.readBoolean());var e=Hs(this);for(i=i||[];this.pos<e;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==In.Bytes)return i.push(this.readFloat());var e=Hs(this);for(i=i||[];this.pos<e;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==In.Bytes)return i.push(this.readDouble());var e=Hs(this);for(i=i||[];this.pos<e;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==In.Bytes)return i.push(this.readFixed32());var e=Hs(this);for(i=i||[];this.pos<e;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==In.Bytes)return i.push(this.readSFixed32());var e=Hs(this);for(i=i||[];this.pos<e;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==In.Bytes)return i.push(this.readFixed64());var e=Hs(this);for(i=i||[];this.pos<e;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==In.Bytes)return i.push(this.readSFixed64());var e=Hs(this);for(i=i||[];this.pos<e;)i.push(this.readSFixed64());return i},skip:function(i){var e=7&i;if(e===In.Varint)for(;this.buf[this.pos++]>127;);else if(e===In.Bytes)this.pos=this.readVarint()+this.pos;else if(e===In.Fixed32)this.pos+=4;else{if(e!==In.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(i,e){this.writeVarint(i<<3|e)},realloc:function(i){for(var e=this.length||16;e<this.pos+i;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),yl(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),yl(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),yl(this.buf,-1&i,this.pos),yl(this.buf,Math.floor(i*Fd),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),yl(this.buf,-1&i,this.pos),yl(this.buf,Math.floor(i*Fd),this.pos+4),this.pos+=8},writeVarint:function(i){(i=+i||0)>268435455||i<0?function(e,n){var c,p;if(e>=0?(c=e%4294967296|0,p=e/4294967296|0):(p=~(-e/4294967296),4294967295^(c=~(-e%4294967296))?c=c+1|0:(c=0,p=p+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");n.realloc(10),function(_,b,w){w.buf[w.pos++]=127&_|128,_>>>=7,w.buf[w.pos++]=127&_|128,_>>>=7,w.buf[w.pos++]=127&_|128,_>>>=7,w.buf[w.pos++]=127&_|128,w.buf[w.pos]=127&(_>>>=7)}(c,0,n),function(_,b){var w=(7&_)<<4;b.buf[b.pos++]|=w|((_>>>=3)?128:0),_&&(b.buf[b.pos++]=127&_|((_>>>=7)?128:0),_&&(b.buf[b.pos++]=127&_|((_>>>=7)?128:0),_&&(b.buf[b.pos++]=127&_|((_>>>=7)?128:0),_&&(b.buf[b.pos++]=127&_|((_>>>=7)?128:0),_&&(b.buf[b.pos++]=127&_)))))}(p,n)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))},writeSVarint:function(i){this.writeVarint(i<0?2*-i-1:2*i)},writeBoolean:function(i){this.writeVarint(Boolean(i))},writeString:function(i){i=String(i),this.realloc(4*i.length),this.pos++;var e=this.pos;this.pos=function(c,p,_){for(var b,w,S=0;S<p.length;S++){if((b=p.charCodeAt(S))>55295&&b<57344){if(!w){b>56319||S+1===p.length?(c[_++]=239,c[_++]=191,c[_++]=189):w=b;continue}if(b<56320){c[_++]=239,c[_++]=191,c[_++]=189,w=b;continue}b=w-55296<<10|b-56320|65536,w=null}else w&&(c[_++]=239,c[_++]=191,c[_++]=189,w=null);b<128?c[_++]=b:(b<2048?c[_++]=b>>6|192:(b<65536?c[_++]=b>>12|224:(c[_++]=b>>18|240,c[_++]=b>>12&63|128),c[_++]=b>>6&63|128),c[_++]=63&b|128)}return _}(this.buf,i,this.pos);var n=this.pos-e;n>=128&&Nd(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(i){this.realloc(4),Bd(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),Bd(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var e=i.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=i[n]},writeRawMessage:function(i,e){this.pos++;var n=this.pos;i(e,this);var c=this.pos-n;c>=128&&Nd(n,c,this),this.pos=n-1,this.writeVarint(c),this.pos+=c},writeMessage:function(i,e,n){this.writeTag(i,In.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(i,e){e.length&&this.writeMessage(i,Vg,e)},writePackedSVarint:function(i,e){e.length&&this.writeMessage(i,jg,e)},writePackedBoolean:function(i,e){e.length&&this.writeMessage(i,qg,e)},writePackedFloat:function(i,e){e.length&&this.writeMessage(i,Gg,e)},writePackedDouble:function(i,e){e.length&&this.writeMessage(i,Hg,e)},writePackedFixed32:function(i,e){e.length&&this.writeMessage(i,Zg,e)},writePackedSFixed32:function(i,e){e.length&&this.writeMessage(i,Kg,e)},writePackedFixed64:function(i,e){e.length&&this.writeMessage(i,Wg,e)},writePackedSFixed64:function(i,e){e.length&&this.writeMessage(i,Xg,e)},writeBytesField:function(i,e){this.writeTag(i,In.Bytes),this.writeBytes(e)},writeFixed32Field:function(i,e){this.writeTag(i,In.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(i,e){this.writeTag(i,In.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(i,e){this.writeTag(i,In.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(i,e){this.writeTag(i,In.Fixed64),this.writeSFixed64(e)},writeVarintField:function(i,e){this.writeTag(i,In.Varint),this.writeVarint(e)},writeSVarintField:function(i,e){this.writeTag(i,In.Varint),this.writeSVarint(e)},writeStringField:function(i,e){this.writeTag(i,In.Bytes),this.writeString(e)},writeFloatField:function(i,e){this.writeTag(i,In.Fixed32),this.writeFloat(e)},writeDoubleField:function(i,e){this.writeTag(i,In.Fixed64),this.writeDouble(e)},writeBooleanField:function(i,e){this.writeVarintField(i,Boolean(e))}};class yh{constructor(e,{pixelRatio:n,version:c,stretchX:p,stretchY:_,content:b}){this.paddedRect=e,this.pixelRatio=n,this.stretchX=p,this.stretchY=_,this.content=b,this.version=c}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class jd{constructor(e,n){const c={},p={};this.haveRenderCallbacks=[];const _=[];this.addImages(e,c,_),this.addImages(n,p,_);const{w:b,h:w}=Vd(_),S=new Ur({width:b||1,height:w||1});for(const D in e){const z=e[D],N=c[D].paddedRect;Ur.copy(z.data,S,{x:0,y:0},{x:N.x+1,y:N.y+1},z.data)}for(const D in n){const z=n[D],N=p[D].paddedRect,j=N.x+1,H=N.y+1,q=z.data.width,ue=z.data.height;Ur.copy(z.data,S,{x:0,y:0},{x:j,y:H},z.data),Ur.copy(z.data,S,{x:0,y:ue-1},{x:j,y:H-1},{width:q,height:1}),Ur.copy(z.data,S,{x:0,y:0},{x:j,y:H+ue},{width:q,height:1}),Ur.copy(z.data,S,{x:q-1,y:0},{x:j-1,y:H},{width:1,height:ue}),Ur.copy(z.data,S,{x:0,y:0},{x:j+q,y:H},{width:1,height:ue})}this.image=S,this.iconPositions=c,this.patternPositions=p}addImages(e,n,c){for(const p in e){const _=e[p],b={x:0,y:0,w:_.data.width+2,h:_.data.height+2};c.push(b),n[p]=new yh(b,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(e,n){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const c in e.updatedImages)this.patchUpdatedImage(this.iconPositions[c],e.getImage(c),n),this.patchUpdatedImage(this.patternPositions[c],e.getImage(c),n)}patchUpdatedImage(e,n,c){if(!e||!n||e.version===n.version)return;e.version=n.version;const[p,_]=e.tl;c.update(n.data,void 0,{x:p,y:_})}}Ot("ImagePosition",yh),Ot("ImageAtlas",jd),r.WritingMode=void 0,(ho=r.WritingMode||(r.WritingMode={}))[ho.none=0]="none",ho[ho.horizontal=1]="horizontal",ho[ho.vertical=2]="vertical",ho[ho.horizontalOnly=3]="horizontalOnly";const iu=-17;class oc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,n){const c=new oc;return c.scale=e||1,c.fontStack=n,c}static forImage(e){const n=new oc;return n.imageName=e,n}}class bl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,n){const c=new bl;for(let p=0;p<e.sections.length;p++){const _=e.sections[p];_.image?c.addImageSection(_):c.addTextSection(_,n)}return c}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let n="";for(let c=0;c<e.length;c++){const p=e.charCodeAt(c+1)||null,_=e.charCodeAt(c-1)||null;n+=p&&Bc(p)&&!sc[e[c+1]]||_&&Bc(_)&&!sc[e[c-1]]||!sc[e[c]]?e[c]:sc[e[c]]}return n}(this.text)}trim(){let e=0;for(let c=0;c<this.text.length&&au[this.text.charCodeAt(c)];c++)e++;let n=this.text.length;for(let c=this.text.length-1;c>=0&&c>=e&&au[this.text.charCodeAt(c)];c--)n--;this.text=this.text.substring(e,n),this.sectionIndex=this.sectionIndex.slice(e,n)}substring(e,n){const c=new bl;return c.text=this.text.substring(e,n),c.sectionIndex=this.sectionIndex.slice(e,n),c.sections=this.sections,c}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,n)=>Math.max(e,this.sections[n].scale),0)}addTextSection(e,n){this.text+=e.text,this.sections.push(oc.forText(e.scale,e.fontStack||n));const c=this.sections.length-1;for(let p=0;p<e.text.length;++p)this.sectionIndex.push(c)}addImageSection(e){const n=e.image?e.image.name:"";if(n.length===0)return void Oe("Can't add FormattedSection with an empty image.");const c=this.getNextImageSectionCharCode();c?(this.text+=String.fromCharCode(c),this.sections.push(oc.forImage(n)),this.sectionIndex.push(this.sections.length-1)):Oe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function nu(i,e,n,c,p,_,b,w,S,D,z,N,j,H,q,ue){const re=bl.fromFeature(i,p);let Se;N===r.WritingMode.vertical&&re.verticalizePunctuation();const{processBidirectionalText:Fe,processStyledBidirectionalText:xe}=Ir;if(Fe&&re.sections.length===1){Se=[];const Je=Fe(re.toString(),bh(re,D,_,e,c,H,q));for(const Bt of Je){const Ht=new bl;Ht.text=Bt,Ht.sections=re.sections;for(let kt=0;kt<Bt.length;kt++)Ht.sectionIndex.push(0);Se.push(Ht)}}else if(xe){Se=[];const Je=xe(re.text,re.sectionIndex,bh(re,D,_,e,c,H,q));for(const Bt of Je){const Ht=new bl;Ht.text=Bt[0],Ht.sectionIndex=Bt[1],Ht.sections=re.sections,Se.push(Ht)}}else Se=function(Je,Bt){const Ht=[],kt=Je.text;let xt=0;for(const gt of Bt)Ht.push(Je.substring(xt,gt)),xt=gt;return xt<kt.length&&Ht.push(Je.substring(xt,kt.length)),Ht}(re,bh(re,D,_,e,c,H,q));const Pe=[],$e={positionedLines:Pe,text:re.toString(),top:z[1],bottom:z[1],left:z[0],right:z[0],writingMode:N,iconsInText:!1,verticalizable:!1};return function(Je,Bt,Ht,kt,xt,gt,Mt,Tt,ct,ri,Xt,Si){let Vn=0,qn=iu,ba=0,jr=0;const Ua=Tt==="right"?1:Tt==="left"?0:.5;let pa=0;for(const fa of xt){fa.trim();const ja=fa.getMaxScale(),Xa=(ja-1)*Ra,ar={positionedGlyphs:[],lineOffset:0};Je.positionedLines[pa]=ar;const _r=ar.positionedGlyphs;let yr=0;if(!fa.length()){qn+=gt,++pa;continue}for(let Aa=0;Aa<fa.length();Aa++){const Oi=fa.getSection(Aa),Mr=fa.getSectionIndex(Aa),Ga=fa.getCharCode(Aa);let Ya=0,Xr=null,cs=null,us=null,Zs=Ra;const Yr=!(ct===r.WritingMode.horizontal||!Xt&&!Ul(Ga)||Xt&&(au[Ga]||(Ia=Ga,At.Arabic(Ia)||At["Arabic Supplement"](Ia)||At["Arabic Extended-A"](Ia)||At["Arabic Presentation Forms-A"](Ia)||At["Arabic Presentation Forms-B"](Ia))));if(Oi.imageName){const Gr=kt[Oi.imageName];if(!Gr)continue;us=Oi.imageName,Je.iconsInText=Je.iconsInText||!0,cs=Gr.paddedRect;const br=Gr.displaySize;Oi.scale=Oi.scale*Ra/Si,Xr={width:br[0],height:br[1],left:1,top:-3,advance:Yr?br[1]:br[0]},Ya=Xa+(Ra-br[1]*Oi.scale),Zs=Xr.advance;const Ks=Yr?br[0]*Oi.scale-Ra*ja:br[1]*Oi.scale-Ra*ja;Ks>0&&Ks>yr&&(yr=Ks)}else{const Gr=Ht[Oi.fontStack],br=Gr&&Gr[Ga];if(br&&br.rect)cs=br.rect,Xr=br.metrics;else{const Ks=Bt[Oi.fontStack],uc=Ks&&Ks[Ga];if(!uc)continue;Xr=uc.metrics}Ya=(ja-Oi.scale)*Ra}Yr?(Je.verticalizable=!0,_r.push({glyph:Ga,imageName:us,x:Vn,y:qn+Ya,vertical:Yr,scale:Oi.scale,fontStack:Oi.fontStack,sectionIndex:Mr,metrics:Xr,rect:cs}),Vn+=Zs*Oi.scale+ri):(_r.push({glyph:Ga,imageName:us,x:Vn,y:qn+Ya,vertical:Yr,scale:Oi.scale,fontStack:Oi.fontStack,sectionIndex:Mr,metrics:Xr,rect:cs}),Vn+=Xr.advance*Oi.scale+ri)}_r.length!==0&&(ba=Math.max(Vn-ri,ba),t_(_r,0,_r.length-1,Ua,yr)),Vn=0;const Kn=gt*ja+yr;ar.lineOffset=Math.max(yr,Xa),qn+=Kn,jr=Math.max(Kn,jr),++pa}var Ia;const Va=qn-iu,{horizontalAlign:Wa,verticalAlign:gr}=vh(Mt);(function(fa,ja,Xa,ar,_r,yr,Kn,Aa,Oi){const Mr=(ja-Xa)*_r;let Ga=0;Ga=yr!==Kn?-Aa*ar-iu:(-ar*Oi+.5)*Kn;for(const Ya of fa)for(const Xr of Ya.positionedGlyphs)Xr.x+=Mr,Xr.y+=Ga})(Je.positionedLines,Ua,Wa,gr,ba,jr,gt,Va,xt.length),Je.top+=-gr*Va,Je.bottom=Je.top+Va,Je.left+=-Wa*ba,Je.right=Je.left+ba}($e,e,n,c,Se,b,w,S,N,D,j,ue),!function(Je){for(const Bt of Je)if(Bt.positionedGlyphs.length!==0)return!1;return!0}(Pe)&&$e}const au={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},$g={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Gd(i,e,n,c,p,_){if(e.imageName){const b=c[e.imageName];return b?b.displaySize[0]*e.scale*Ra/_+p:0}{const b=n[e.fontStack],w=b&&b[i];return w?w.metrics.advance*e.scale+p:0}}function Hd(i,e,n,c){const p=Math.pow(i-e,2);return c?i<e?p/2:2*p:p+Math.abs(n)*n}function e_(i,e,n){let c=0;return i===10&&(c-=1e4),n&&(c+=150),i!==40&&i!==65288||(c+=50),e!==41&&e!==65289||(c+=50),c}function qd(i,e,n,c,p,_){let b=null,w=Hd(e,n,p,_);for(const S of c){const D=Hd(e-S.x,n,p,_)+S.badness;D<=w&&(b=S,w=D)}return{index:i,x:e,priorBreak:b,badness:w}}function Zd(i){return i?Zd(i.priorBreak).concat(i.index):[]}function bh(i,e,n,c,p,_,b){if(_!=="point")return[];if(!i)return[];const w=[],S=function(j,H,q,ue,re,Se){let Fe=0;for(let xe=0;xe<j.length();xe++){const Pe=j.getSection(xe);Fe+=Gd(j.getCharCode(xe),Pe,ue,re,H,Se)}return Fe/Math.max(1,Math.ceil(Fe/q))}(i,e,n,c,p,b),D=i.text.indexOf("\u200B")>=0;let z=0;for(let j=0;j<i.length();j++){const H=i.getSection(j),q=i.getCharCode(j);if(au[q]||(z+=Gd(q,H,c,p,e,b)),j<i.length()-1){const ue=!((N=q)<11904||!(At["Bopomofo Extended"](N)||At.Bopomofo(N)||At["CJK Compatibility Forms"](N)||At["CJK Compatibility Ideographs"](N)||At["CJK Compatibility"](N)||At["CJK Radicals Supplement"](N)||At["CJK Strokes"](N)||At["CJK Symbols and Punctuation"](N)||At["CJK Unified Ideographs Extension A"](N)||At["CJK Unified Ideographs"](N)||At["Enclosed CJK Letters and Months"](N)||At["Halfwidth and Fullwidth Forms"](N)||At.Hiragana(N)||At["Ideographic Description Characters"](N)||At["Kangxi Radicals"](N)||At["Katakana Phonetic Extensions"](N)||At.Katakana(N)||At["Vertical Forms"](N)||At["Yi Radicals"](N)||At["Yi Syllables"](N)));($g[q]||ue||H.imageName)&&w.push(qd(j+1,z,S,w,e_(q,i.getCharCode(j+1),ue&&D),!1))}}var N;return Zd(qd(i.length(),z,S,w,0,!0))}function vh(i){let e=.5,n=.5;switch(i){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(i){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function t_(i,e,n,c,p){if(!c&&!p)return;const _=i[n],b=(i[n].x+_.metrics.advance*_.scale)*c;for(let w=e;w<=n;w++)i[w].x-=b,i[w].y+=p}function i_(i,e,n){const{horizontalAlign:c,verticalAlign:p}=vh(n),_=e[0]-i.displaySize[0]*c,b=e[1]-i.displaySize[1]*p;return{image:i,top:b,bottom:b+i.displaySize[1],left:_,right:_+i.displaySize[0]}}function Kd(i,e,n,c,p,_){const b=i.image;let w;if(b.content){const re=b.content,Se=b.pixelRatio||1;w=[re[0]/Se,re[1]/Se,b.displaySize[0]-re[2]/Se,b.displaySize[1]-re[3]/Se]}const S=e.left*_,D=e.right*_;let z,N,j,H;n==="width"||n==="both"?(H=p[0]+S-c[3],N=p[0]+D+c[1]):(H=p[0]+(S+D-b.displaySize[0])/2,N=H+b.displaySize[0]);const q=e.top*_,ue=e.bottom*_;return n==="height"||n==="both"?(z=p[1]+q-c[0],j=p[1]+ue+c[2]):(z=p[1]+(q+ue-b.displaySize[1])/2,j=z+b.displaySize[1]),{image:b,top:z,right:N,bottom:j,left:H,collisionPadding:w}}const qs=128;function Wd(i,e){const{expression:n}=e;if(n.kind==="constant")return{kind:"constant",layoutSize:n.evaluate(new Gn(i+1))};if(n.kind==="source")return{kind:"source"};{const{zoomStops:c,interpolationType:p}=n;let _=0;for(;_<c.length&&c[_]<=i;)_++;_=Math.max(0,_-1);let b=_;for(;b<c.length&&c[b]<i+1;)b++;b=Math.min(c.length-1,b);const w=c[_],S=c[b];return n.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:S,interpolationType:p}:{kind:"camera",minZoom:w,maxZoom:S,minSize:n.evaluate(new Gn(w)),maxSize:n.evaluate(new Gn(S)),interpolationType:p}}}class po extends Ne{constructor(e,n,c,p){super(e,n),this.angle=c,p!==void 0&&(this.segment=p)}clone(){return new po(this.x,this.y,this.angle,this.segment)}}function Xd(i,e,n,c,p){if(e.segment===void 0)return!0;let _=e,b=e.segment+1,w=0;for(;w>-n/2;){if(b--,b<0)return!1;w-=i[b].dist(_),_=i[b]}w+=i[b].dist(i[b+1]),b++;const S=[];let D=0;for(;w<n/2;){const z=i[b],N=i[b+1];if(!N)return!1;let j=i[b-1].angleTo(z)-z.angleTo(N);for(j=Math.abs((j+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:w,angleDelta:j}),D+=j;w-S[0].distance>c;)D-=S.shift().angleDelta;if(D>p)return!1;b++,w+=z.dist(N)}return!0}function Yd(i){let e=0;for(let n=0;n<i.length-1;n++)e+=i[n].dist(i[n+1]);return e}function Jd(i,e,n){return i?.6*e*n:0}function Qd(i,e){return Math.max(i?i.right-i.left:0,e?e.right-e.left:0)}function n_(i,e,n,c,p,_){const b=Jd(n,p,_),w=Qd(n,c)*_;let S=0;const D=Yd(i)/2;for(let z=0;z<i.length-1;z++){const N=i[z],j=i[z+1],H=N.dist(j);if(S+H>D){const q=(D-S)/H,ue=ln(N.x,j.x,q),re=ln(N.y,j.y,q),Se=new po(ue,re,j.angleTo(N),z);return Se._round(),!b||Xd(i,Se,w,b,e)?Se:void 0}S+=H}}function a_(i,e,n,c,p,_,b,w,S){const D=Jd(c,_,b),z=Qd(c,p),N=z*b,j=i[0].x===0||i[0].x===S||i[0].y===0||i[0].y===S;return e-N<e/4&&(e=N+e/4),$d(i,j?e/2*w%e:(z/2+2*_)*b*w%e,e,D,n,N,j,!1,S)}function $d(i,e,n,c,p,_,b,w,S){const D=_/2,z=Yd(i);let N=0,j=e-n,H=[];for(let q=0;q<i.length-1;q++){const ue=i[q],re=i[q+1],Se=ue.dist(re),Fe=re.angleTo(ue);for(;j+n<N+Se;){j+=n;const xe=(j-N)/Se,Pe=ln(ue.x,re.x,xe),$e=ln(ue.y,re.y,xe);if(Pe>=0&&Pe<S&&$e>=0&&$e<S&&j-D>=0&&j+D<=z){const Je=new po(Pe,$e,Fe,q);Je._round(),c&&!Xd(i,Je,_,c,p)||H.push(Je)}}N+=Se}return w||H.length||b||(H=$d(i,N/2,n,c,p,_,b,!0,S)),H}function ep(i,e,n,c,p){const _=[];for(let b=0;b<i.length;b++){const w=i[b];let S;for(let D=0;D<w.length-1;D++){let z=w[D],N=w[D+1];z.x<e&&N.x<e||(z.x<e?z=new Ne(e,z.y+(e-z.x)/(N.x-z.x)*(N.y-z.y))._round():N.x<e&&(N=new Ne(e,z.y+(e-z.x)/(N.x-z.x)*(N.y-z.y))._round()),z.y<n&&N.y<n||(z.y<n?z=new Ne(z.x+(n-z.y)/(N.y-z.y)*(N.x-z.x),n)._round():N.y<n&&(N=new Ne(z.x+(n-z.y)/(N.y-z.y)*(N.x-z.x),n)._round()),z.x>=c&&N.x>=c||(z.x>=c?z=new Ne(c,z.y+(c-z.x)/(N.x-z.x)*(N.y-z.y))._round():N.x>=c&&(N=new Ne(c,z.y+(c-z.x)/(N.x-z.x)*(N.y-z.y))._round()),z.y>=p&&N.y>=p||(z.y>=p?z=new Ne(z.x+(p-z.y)/(N.y-z.y)*(N.x-z.x),p)._round():N.y>=p&&(N=new Ne(z.x+(p-z.y)/(N.y-z.y)*(N.x-z.x),p)._round()),S&&z.equals(S[S.length-1])||(S=[z],_.push(S)),S.push(N)))))}}return _}function tp(i,e,n,c){const p=[],_=i.image,b=_.pixelRatio,w=_.paddedRect.w-2,S=_.paddedRect.h-2,D=i.right-i.left,z=i.bottom-i.top,N=_.stretchX||[[0,w]],j=_.stretchY||[[0,S]],H=(gt,Mt)=>gt+Mt[1]-Mt[0],q=N.reduce(H,0),ue=j.reduce(H,0),re=w-q,Se=S-ue;let Fe=0,xe=q,Pe=0,$e=ue,Je=0,Bt=re,Ht=0,kt=Se;if(_.content&&c){const gt=_.content;Fe=ru(N,0,gt[0]),Pe=ru(j,0,gt[1]),xe=ru(N,gt[0],gt[2]),$e=ru(j,gt[1],gt[3]),Je=gt[0]-Fe,Ht=gt[1]-Pe,Bt=gt[2]-gt[0]-xe,kt=gt[3]-gt[1]-$e}const xt=(gt,Mt,Tt,ct)=>{const ri=su(gt.stretch-Fe,xe,D,i.left),Xt=ou(gt.fixed-Je,Bt,gt.stretch,q),Si=su(Mt.stretch-Pe,$e,z,i.top),Vn=ou(Mt.fixed-Ht,kt,Mt.stretch,ue),qn=su(Tt.stretch-Fe,xe,D,i.left),ba=ou(Tt.fixed-Je,Bt,Tt.stretch,q),jr=su(ct.stretch-Pe,$e,z,i.top),Ua=ou(ct.fixed-Ht,kt,ct.stretch,ue),pa=new Ne(ri,Si),Ia=new Ne(qn,Si),Va=new Ne(qn,jr),Wa=new Ne(ri,jr),gr=new Ne(Xt/b,Vn/b),fa=new Ne(ba/b,Ua/b),ja=e*Math.PI/180;if(ja){const _r=Math.sin(ja),yr=Math.cos(ja),Kn=[yr,-_r,_r,yr];pa._matMult(Kn),Ia._matMult(Kn),Wa._matMult(Kn),Va._matMult(Kn)}const Xa=gt.stretch+gt.fixed,ar=Mt.stretch+Mt.fixed;return{tl:pa,tr:Ia,bl:Wa,br:Va,tex:{x:_.paddedRect.x+1+Xa,y:_.paddedRect.y+1+ar,w:Tt.stretch+Tt.fixed-Xa,h:ct.stretch+ct.fixed-ar},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:gr,pixelOffsetBR:fa,minFontScaleX:Bt/b/D,minFontScaleY:kt/b/z,isSDF:n}};if(c&&(_.stretchX||_.stretchY)){const gt=ip(N,re,q),Mt=ip(j,Se,ue);for(let Tt=0;Tt<gt.length-1;Tt++){const ct=gt[Tt],ri=gt[Tt+1];for(let Xt=0;Xt<Mt.length-1;Xt++)p.push(xt(ct,Mt[Xt],ri,Mt[Xt+1]))}}else p.push(xt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:S+1}));return p}function ru(i,e,n){let c=0;for(const p of i)c+=Math.max(e,Math.min(n,p[1]))-Math.max(e,Math.min(n,p[0]));return c}function ip(i,e,n){const c=[{fixed:-1,stretch:0}];for(const[p,_]of i){const b=c[c.length-1];c.push({fixed:p-b.stretch,stretch:b.stretch}),c.push({fixed:p-b.stretch,stretch:b.stretch+(_-p)})}return c.push({fixed:e+1,stretch:n}),c}function su(i,e,n,c){return i/e*n+c}function ou(i,e,n,c){return i-e*n/c}Ot("Anchor",po);class lu{constructor(e,n,c,p,_,b,w,S,D,z){if(this.boxStartIndex=e.length,D){let N=b.top,j=b.bottom;const H=b.collisionPadding;H&&(N-=H[1],j+=H[3]);let q=j-N;q>0&&(q=Math.max(10,q),this.circleDiameter=q)}else{let N=b.top*w-S[0],j=b.bottom*w+S[2],H=b.left*w-S[3],q=b.right*w+S[1];const ue=b.collisionPadding;if(ue&&(H-=ue[0]*w,N-=ue[1]*w,q+=ue[2]*w,j+=ue[3]*w),z){const re=new Ne(H,N),Se=new Ne(q,N),Fe=new Ne(H,j),xe=new Ne(q,j),Pe=z*Math.PI/180;re._rotate(Pe),Se._rotate(Pe),Fe._rotate(Pe),xe._rotate(Pe),H=Math.min(re.x,Se.x,Fe.x,xe.x),q=Math.max(re.x,Se.x,Fe.x,xe.x),N=Math.min(re.y,Se.y,Fe.y,xe.y),j=Math.max(re.y,Se.y,Fe.y,xe.y)}e.emplaceBack(n.x,n.y,H,N,q,j,c,p,_)}this.boxEndIndex=e.length}}class r_{constructor(e=[],n=s_){if(this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:n,compare:c}=this,p=n[e];for(;e>0;){const _=e-1>>1,b=n[_];if(c(p,b)>=0)break;n[e]=b,e=_}n[e]=p}_down(e){const{data:n,compare:c}=this,p=this.length>>1,_=n[e];for(;e<p;){let b=1+(e<<1),w=n[b];const S=b+1;if(S<this.length&&c(n[S],w)<0&&(b=S,w=n[S]),c(w,_)>=0)break;n[e]=w,e=b}n[e]=_}}function s_(i,e){return i<e?-1:i>e?1:0}function o_(i,e=1,n=!1){let c=1/0,p=1/0,_=-1/0,b=-1/0;const w=i[0];for(let H=0;H<w.length;H++){const q=w[H];(!H||q.x<c)&&(c=q.x),(!H||q.y<p)&&(p=q.y),(!H||q.x>_)&&(_=q.x),(!H||q.y>b)&&(b=q.y)}const S=Math.min(_-c,b-p);let D=S/2;const z=new r_([],l_);if(S===0)return new Ne(c,p);for(let H=c;H<_;H+=S)for(let q=p;q<b;q+=S)z.push(new vl(H+D,q+D,D,i));let N=function(H){let q=0,ue=0,re=0;const Se=H[0];for(let Fe=0,xe=Se.length,Pe=xe-1;Fe<xe;Pe=Fe++){const $e=Se[Fe],Je=Se[Pe],Bt=$e.x*Je.y-Je.x*$e.y;ue+=($e.x+Je.x)*Bt,re+=($e.y+Je.y)*Bt,q+=3*Bt}return new vl(ue/q,re/q,0,H)}(i),j=z.length;for(;z.length;){const H=z.pop();(H.d>N.d||!N.d)&&(N=H,n&&console.log("found best %d after %d probes",Math.round(1e4*H.d)/1e4,j)),H.max-N.d<=e||(D=H.h/2,z.push(new vl(H.p.x-D,H.p.y-D,D,i)),z.push(new vl(H.p.x+D,H.p.y-D,D,i)),z.push(new vl(H.p.x-D,H.p.y+D,D,i)),z.push(new vl(H.p.x+D,H.p.y+D,D,i)),j+=4)}return n&&(console.log(`num probes: ${j}`),console.log(`best distance: ${N.d}`)),N.p}function l_(i,e){return e.max-i.max}function vl(i,e,n,c){this.p=new Ne(i,e),this.h=n,this.d=function(p,_){let b=!1,w=1/0;for(let S=0;S<_.length;S++){const D=_[S];for(let z=0,N=D.length,j=N-1;z<N;j=z++){const H=D[z],q=D[j];H.y>p.y!=q.y>p.y&&p.x<(q.x-H.x)*(p.y-H.y)/(q.y-H.y)+H.x&&(b=!b),w=Math.min(w,ud(p,H,q))}}return(b?1:-1)*Math.sqrt(w)}(this.p,c),this.max=this.d+this.h*Math.SQRT2}const xh=Number.POSITIVE_INFINITY;function np(i,e){return e[1]!==xh?function(n,c,p){let _=0,b=0;switch(c=Math.abs(c),p=Math.abs(p),n){case"top-right":case"top-left":case"top":b=p-7;break;case"bottom-right":case"bottom-left":case"bottom":b=7-p}switch(n){case"top-right":case"bottom-right":case"right":_=-c;break;case"top-left":case"bottom-left":case"left":_=c}return[_,b]}(i,e[0],e[1]):function(n,c){let p=0,_=0;c<0&&(c=0);const b=c/Math.sqrt(2);switch(n){case"top-right":case"top-left":_=b-7;break;case"bottom-right":case"bottom-left":_=7-b;break;case"bottom":_=7-c;break;case"top":_=c-7}switch(n){case"top-right":case"bottom-right":p=-b;break;case"top-left":case"bottom-left":p=b;break;case"left":p=c;break;case"right":p=-c}return[p,_]}(i,e[0])}function wh(i){switch(i){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function c_(i,e,n,c,p,_,b,w,S,D,z){let N=_.textMaxSize.evaluate(e,{});N===void 0&&(N=b);const j=i.layers[0].layout,H=j.get("icon-offset").evaluate(e,{},z),q=rp(n.horizontal),ue=b/24,re=i.tilePixelRatio*ue,Se=i.tilePixelRatio*N/24,Fe=i.tilePixelRatio*w,xe=i.tilePixelRatio*j.get("symbol-spacing"),Pe=j.get("text-padding")*i.tilePixelRatio,$e=function(ct,ri,Xt,Si=1){const Vn=ct.get("icon-padding").evaluate(ri,{},Xt),qn=Vn&&Vn.values;return[qn[0]*Si,qn[1]*Si,qn[2]*Si,qn[3]*Si]}(j,e,z,i.tilePixelRatio),Je=j.get("text-max-angle")/180*Math.PI,Bt=j.get("text-rotation-alignment")!=="viewport"&&j.get("symbol-placement")!=="point",Ht=j.get("icon-rotation-alignment")==="map"&&j.get("symbol-placement")!=="point",kt=j.get("symbol-placement"),xt=xe/2,gt=j.get("icon-text-fit");let Mt;c&&gt!=="none"&&(i.allowVerticalPlacement&&n.vertical&&(Mt=Kd(c,n.vertical,gt,j.get("icon-text-fit-padding"),H,ue)),q&&(c=Kd(c,q,gt,j.get("icon-text-fit-padding"),H,ue)));const Tt=(ct,ri)=>{ri.x<0||ri.x>=ya||ri.y<0||ri.y>=ya||function(Xt,Si,Vn,qn,ba,jr,Ua,pa,Ia,Va,Wa,gr,fa,ja,Xa,ar,_r,yr,Kn,Aa,Oi,Mr,Ga,Ya,Xr){const cs=Xt.addToLineVertexArray(Si,Vn);let us,Zs,Yr,Gr,br=0,Ks=0,uc=0,xp=0,Ph=-1,Lh=-1;const Ws={};let wp=Ea.exports(""),Rh=0,zh=0;if(pa._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Rh,zh]=pa.layout.get("text-offset").evaluate(Oi,{},Ya).map(vr=>vr*Ra):(Rh=pa.layout.get("text-radial-offset").evaluate(Oi,{},Ya)*Ra,zh=xh),Xt.allowVerticalPlacement&&qn.vertical){const vr=pa.layout.get("text-rotate").evaluate(Oi,{},Ya)+90;Yr=new lu(Ia,Si,Va,Wa,gr,qn.vertical,fa,ja,Xa,vr),Ua&&(Gr=new lu(Ia,Si,Va,Wa,gr,Ua,_r,yr,Xa,vr))}if(ba){const vr=pa.layout.get("icon-rotate").evaluate(Oi,{}),Es=pa.layout.get("icon-text-fit")!=="none",hc=tp(ba,vr,Ga,Es),dc=Ua?tp(Ua,vr,Ga,Es):void 0;Zs=new lu(Ia,Si,Va,Wa,gr,ba,_r,yr,!1,vr),br=4*hc.length;const Sp=Xt.iconSizeData;let Wo=null;Sp.kind==="source"?(Wo=[qs*pa.layout.get("icon-size").evaluate(Oi,{})],Wo[0]>fo&&Oe(`${Xt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Sp.kind==="composite"&&(Wo=[qs*Mr.compositeIconSizes[0].evaluate(Oi,{},Ya),qs*Mr.compositeIconSizes[1].evaluate(Oi,{},Ya)],(Wo[0]>fo||Wo[1]>fo)&&Oe(`${Xt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Xt.addSymbols(Xt.icon,hc,Wo,Aa,Kn,Oi,r.WritingMode.none,Si,cs.lineStartIndex,cs.lineLength,-1,Ya),Ph=Xt.icon.placedSymbolArray.length-1,dc&&(Ks=4*dc.length,Xt.addSymbols(Xt.icon,dc,Wo,Aa,Kn,Oi,r.WritingMode.vertical,Si,cs.lineStartIndex,cs.lineLength,-1,Ya),Lh=Xt.icon.placedSymbolArray.length-1)}const Cp=Object.keys(qn.horizontal);for(const vr of Cp){const Es=qn.horizontal[vr];if(!us){wp=Ea.exports(Es.text);const dc=pa.layout.get("text-rotate").evaluate(Oi,{},Ya);us=new lu(Ia,Si,Va,Wa,gr,Es,fa,ja,Xa,dc)}const hc=Es.positionedLines.length===1;if(uc+=ap(Xt,Si,Es,jr,pa,Xa,Oi,ar,cs,qn.vertical?r.WritingMode.horizontal:r.WritingMode.horizontalOnly,hc?Cp:[vr],Ws,Ph,Mr,Ya),hc)break}qn.vertical&&(xp+=ap(Xt,Si,qn.vertical,jr,pa,Xa,Oi,ar,cs,r.WritingMode.vertical,["vertical"],Ws,Lh,Mr,Ya));const w_=us?us.boxStartIndex:Xt.collisionBoxArray.length,C_=us?us.boxEndIndex:Xt.collisionBoxArray.length,T_=Yr?Yr.boxStartIndex:Xt.collisionBoxArray.length,S_=Yr?Yr.boxEndIndex:Xt.collisionBoxArray.length,E_=Zs?Zs.boxStartIndex:Xt.collisionBoxArray.length,I_=Zs?Zs.boxEndIndex:Xt.collisionBoxArray.length,A_=Gr?Gr.boxStartIndex:Xt.collisionBoxArray.length,k_=Gr?Gr.boxEndIndex:Xt.collisionBoxArray.length;let hs=-1;const pu=(vr,Es)=>vr&&vr.circleDiameter?Math.max(vr.circleDiameter,Es):Es;hs=pu(us,hs),hs=pu(Yr,hs),hs=pu(Zs,hs),hs=pu(Gr,hs);const Tp=hs>-1?1:0;Tp&&(hs*=Xr/Ra),Xt.glyphOffsetArray.length>=xl.MAX_GLYPHS&&Oe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Oi.sortKey!==void 0&&Xt.addToSortKeyRanges(Xt.symbolInstances.length,Oi.sortKey),Xt.symbolInstances.emplaceBack(Si.x,Si.y,Ws.right>=0?Ws.right:-1,Ws.center>=0?Ws.center:-1,Ws.left>=0?Ws.left:-1,Ws.vertical||-1,Ph,Lh,wp,w_,C_,T_,S_,E_,I_,A_,k_,Va,uc,xp,br,Ks,Tp,0,fa,Rh,zh,hs)}(i,ri,ct,n,c,p,Mt,i.layers[0],i.collisionBoxArray,e.index,e.sourceLayerIndex,i.index,re,[Pe,Pe,Pe,Pe],Bt,S,Fe,$e,Ht,H,e,_,D,z,b)};if(kt==="line")for(const ct of ep(e.geometry,0,0,ya,ya)){const ri=a_(ct,xe,Je,n.vertical||q,c,24,Se,i.overscaling,ya);for(const Xt of ri){const Si=q;Si&&u_(i,Si.text,xt,Xt)||Tt(ct,Xt)}}else if(kt==="line-center"){for(const ct of e.geometry)if(ct.length>1){const ri=n_(ct,Je,n.vertical||q,c,24,Se);ri&&Tt(ct,ri)}}else if(e.type==="Polygon")for(const ct of ch(e.geometry,0)){const ri=o_(ct,16);Tt(ct[0],new po(ri.x,ri.y,0))}else if(e.type==="LineString")for(const ct of e.geometry)Tt(ct,new po(ct[0].x,ct[0].y,0));else if(e.type==="Point")for(const ct of e.geometry)for(const ri of ct)Tt([ri],new po(ri.x,ri.y,0))}const fo=32640;function ap(i,e,n,c,p,_,b,w,S,D,z,N,j,H,q){const ue=function(Fe,xe,Pe,$e,Je,Bt,Ht,kt){const xt=$e.layout.get("text-rotate").evaluate(Bt,{})*Math.PI/180,gt=[];for(const Mt of xe.positionedLines)for(const Tt of Mt.positionedGlyphs){if(!Tt.rect)continue;const ct=Tt.rect||{};let ri=4,Xt=!0,Si=1,Vn=0;const qn=(Je||kt)&&Tt.vertical,ba=Tt.metrics.advance*Tt.scale/2;if(kt&&xe.verticalizable){const Kn=(Tt.scale-1)*Ra,Aa=(Ra-Tt.metrics.width*Tt.scale)/2;Vn=Mt.lineOffset/2-(Tt.imageName?-Aa:Kn)}if(Tt.imageName){const Kn=Ht[Tt.imageName];Xt=Kn.sdf,Si=Kn.pixelRatio,ri=1/Si}const jr=Je?[Tt.x+ba,Tt.y]:[0,0];let Ua=Je?[0,0]:[Tt.x+ba+Pe[0],Tt.y+Pe[1]-Vn],pa=[0,0];qn&&(pa=Ua,Ua=[0,0]);const Ia=(Tt.metrics.left-ri)*Tt.scale-ba+Ua[0],Va=(-Tt.metrics.top-ri)*Tt.scale+Ua[1],Wa=Ia+ct.w*Tt.scale/Si,gr=Va+ct.h*Tt.scale/Si,fa=new Ne(Ia,Va),ja=new Ne(Wa,Va),Xa=new Ne(Ia,gr),ar=new Ne(Wa,gr);if(qn){const Kn=new Ne(-ba,ba-iu),Aa=-Math.PI/2,Oi=12-ba,Mr=new Ne(22-Oi,-(Tt.imageName?Oi:0)),Ga=new Ne(...pa);fa._rotateAround(Aa,Kn)._add(Mr)._add(Ga),ja._rotateAround(Aa,Kn)._add(Mr)._add(Ga),Xa._rotateAround(Aa,Kn)._add(Mr)._add(Ga),ar._rotateAround(Aa,Kn)._add(Mr)._add(Ga)}if(xt){const Kn=Math.sin(xt),Aa=Math.cos(xt),Oi=[Aa,-Kn,Kn,Aa];fa._matMult(Oi),ja._matMult(Oi),Xa._matMult(Oi),ar._matMult(Oi)}const _r=new Ne(0,0),yr=new Ne(0,0);gt.push({tl:fa,tr:ja,bl:Xa,br:ar,tex:ct,writingMode:xe.writingMode,glyphOffset:jr,sectionIndex:Tt.sectionIndex,isSDF:Xt,pixelOffsetTL:_r,pixelOffsetBR:yr,minFontScaleX:0,minFontScaleY:0})}return gt}(0,n,w,p,_,b,c,i.allowVerticalPlacement),re=i.textSizeData;let Se=null;re.kind==="source"?(Se=[qs*p.layout.get("text-size").evaluate(b,{})],Se[0]>fo&&Oe(`${i.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):re.kind==="composite"&&(Se=[qs*H.compositeTextSizes[0].evaluate(b,{},q),qs*H.compositeTextSizes[1].evaluate(b,{},q)],(Se[0]>fo||Se[1]>fo)&&Oe(`${i.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),i.addSymbols(i.text,ue,Se,w,_,b,D,e,S.lineStartIndex,S.lineLength,j,q);for(const Fe of z)N[Fe]=i.text.placedSymbolArray.length-1;return 4*ue.length}function rp(i){for(const e in i)return i[e];return null}function u_(i,e,n,c){const p=i.compareText;if(e in p){const _=p[e];for(let b=_.length-1;b>=0;b--)if(c.dist(_[b])<n)return!0}else p[e]=[];return p[e].push(c),!1}const h_=uo.VectorTileFeature.types,d_=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function cu(i,e,n,c,p,_,b,w,S,D,z,N,j){const H=w?Math.min(fo,Math.round(w[0])):0,q=w?Math.min(fo,Math.round(w[1])):0;i.emplaceBack(e,n,Math.round(32*c),Math.round(32*p),_,b,(H<<1)+(S?1:0),q,16*D,16*z,256*N,256*j)}function Ch(i,e,n){i.emplaceBack(e.x,e.y,n),i.emplaceBack(e.x,e.y,n),i.emplaceBack(e.x,e.y,n),i.emplaceBack(e.x,e.y,n)}function p_(i){for(const e of i.sections)if(Oc(e.text))return!0;return!1}class Th{constructor(e){this.layoutVertexArray=new Kr,this.indexArray=new tr,this.programConfigurations=e,this.segments=new Li,this.dynamicLayoutVertexArray=new Nr,this.opacityVertexArray=new Wr,this.placedSymbolArray=new st}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(e,n,c,p){this.isEmpty()||(c&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Bg.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,n),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Fg.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,d_,!0),this.opacityVertexBuffer.itemSize=1),(c||p)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ot("SymbolBuffers",Th);class Sh{constructor(e,n,c){this.layoutVertexArray=new e,this.layoutAttributes=n,this.indexArray=new c,this.segments=new Li,this.collisionVertexArray=new Ar}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Og.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ot("CollisionBuffers",Sh);class xl{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(b=>b.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=nh([]),this.placementViewportMatrix=nh([]);const n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Wd(this.zoom,n["text-size"]),this.iconSizeData=Wd(this.zoom,n["icon-size"]);const c=this.layers[0].layout,p=c.get("symbol-sort-key"),_=c.get("symbol-z-order");this.canOverlap=Ih(c,"text-overlap","text-allow-overlap")!=="never"||Ih(c,"icon-overlap","icon-allow-overlap")!=="never"||c.get("text-ignore-placement")||c.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,c.get("symbol-placement")==="point"&&(this.writingModes=c.get("text-writing-mode").map(b=>r.WritingMode[b])),this.stateDependentLayerIds=this.layers.filter(b=>b.isStateDependent()).map(b=>b.id),this.sourceID=e.sourceID}createArrays(){this.text=new Th(new Go(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new Th(new Go(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new vt,this.lineVertexArray=new zt,this.symbolInstances=new Pt}calculateGlyphDependencies(e,n,c,p,_){for(let b=0;b<e.length;b++)if(n[e.charCodeAt(b)]=!0,(c||p)&&_){const w=sc[e.charAt(b)];w&&(n[w.charCodeAt(0)]=!0)}}populate(e,n,c){const p=this.layers[0],_=p.layout,b=_.get("text-font"),w=_.get("text-field"),S=_.get("icon-image"),D=(w.value.kind!=="constant"||w.value.value instanceof ne&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(b.value.kind!=="constant"||b.value.value.length>0),z=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,N=_.get("symbol-sort-key");if(this.features=[],!D&&!z)return;const j=n.iconDependencies,H=n.glyphDependencies,q=n.availableImages,ue=new Gn(this.zoom);for(const{feature:re,id:Se,index:Fe,sourceLayerIndex:xe}of e){const Pe=p._featureFilter.needGeometry,$e=qo(re,Pe);if(!p._featureFilter.filter(ue,$e,c))continue;let Je,Bt;if(Pe||($e.geometry=Ho(re)),D){const kt=p.getValueAndResolveTokens("text-field",$e,c,q),xt=ne.factory(kt);p_(xt)&&(this.hasRTLText=!0),(!this.hasRTLText||Uo()==="unavailable"||this.hasRTLText&&Ir.isParsed())&&(Je=Ug(xt,p,$e))}if(z){const kt=p.getValueAndResolveTokens("icon-image",$e,c,q);Bt=kt instanceof fe?kt:fe.fromString(kt)}if(!Je&&!Bt)continue;const Ht=this.sortFeaturesByKey?N.evaluate($e,{},c):void 0;if(this.features.push({id:Se,text:Je,icon:Bt,index:Fe,sourceLayerIndex:xe,geometry:$e.geometry,properties:re.properties,type:h_[re.type],sortKey:Ht}),Bt&&(j[Bt.name]=!0),Je){const kt=b.evaluate($e,{},c).join(","),xt=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(r.WritingMode.vertical)>=0;for(const gt of Je.sections)if(gt.image)j[gt.image.name]=!0;else{const Mt=cl(Je.toString()),Tt=gt.fontStack||kt,ct=H[Tt]=H[Tt]||{};this.calculateGlyphDependencies(gt.text,ct,xt,this.allowVerticalPlacement,Mt)}}}_.get("symbol-placement")==="line"&&(this.features=function(re){const Se={},Fe={},xe=[];let Pe=0;function $e(kt){xe.push(re[kt]),Pe++}function Je(kt,xt,gt){const Mt=Fe[kt];return delete Fe[kt],Fe[xt]=Mt,xe[Mt].geometry[0].pop(),xe[Mt].geometry[0]=xe[Mt].geometry[0].concat(gt[0]),Mt}function Bt(kt,xt,gt){const Mt=Se[xt];return delete Se[xt],Se[kt]=Mt,xe[Mt].geometry[0].shift(),xe[Mt].geometry[0]=gt[0].concat(xe[Mt].geometry[0]),Mt}function Ht(kt,xt,gt){const Mt=gt?xt[0][xt[0].length-1]:xt[0][0];return`${kt}:${Mt.x}:${Mt.y}`}for(let kt=0;kt<re.length;kt++){const xt=re[kt],gt=xt.geometry,Mt=xt.text?xt.text.toString():null;if(!Mt){$e(kt);continue}const Tt=Ht(Mt,gt),ct=Ht(Mt,gt,!0);if(Tt in Fe&&ct in Se&&Fe[Tt]!==Se[ct]){const ri=Bt(Tt,ct,gt),Xt=Je(Tt,ct,xe[ri].geometry);delete Se[Tt],delete Fe[ct],Fe[Ht(Mt,xe[Xt].geometry,!0)]=Xt,xe[ri].geometry=null}else Tt in Fe?Je(Tt,ct,gt):ct in Se?Bt(Tt,ct,gt):($e(kt),Se[Tt]=Pe-1,Fe[ct]=Pe-1)}return xe.filter(kt=>kt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((re,Se)=>re.sortKey-Se.sortKey)}update(e,n,c){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,n,this.layers,c),this.icon.programConfigurations.updatePaintArrays(e,n,this.layers,c))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,n){const c=this.lineVertexArray.length;if(e.segment!==void 0){let p=e.dist(n[e.segment+1]),_=e.dist(n[e.segment]);const b={};for(let w=e.segment+1;w<n.length;w++)b[w]={x:n[w].x,y:n[w].y,tileUnitDistanceFromAnchor:p},w<n.length-1&&(p+=n[w+1].dist(n[w]));for(let w=e.segment||0;w>=0;w--)b[w]={x:n[w].x,y:n[w].y,tileUnitDistanceFromAnchor:_},w>0&&(_+=n[w-1].dist(n[w]));for(let w=0;w<n.length;w++){const S=b[w];this.lineVertexArray.emplaceBack(S.x,S.y,S.tileUnitDistanceFromAnchor)}}return{lineStartIndex:c,lineLength:this.lineVertexArray.length-c}}addSymbols(e,n,c,p,_,b,w,S,D,z,N,j){const H=e.indexArray,q=e.layoutVertexArray,ue=e.segments.prepareSegment(4*n.length,q,H,this.canOverlap?b.sortKey:void 0),re=this.glyphOffsetArray.length,Se=ue.vertexLength,Fe=this.allowVerticalPlacement&&w===r.WritingMode.vertical?Math.PI/2:0,xe=b.text&&b.text.sections;for(let Pe=0;Pe<n.length;Pe++){const{tl:$e,tr:Je,bl:Bt,br:Ht,tex:kt,pixelOffsetTL:xt,pixelOffsetBR:gt,minFontScaleX:Mt,minFontScaleY:Tt,glyphOffset:ct,isSDF:ri,sectionIndex:Xt}=n[Pe],Si=ue.vertexLength,Vn=ct[1];cu(q,S.x,S.y,$e.x,Vn+$e.y,kt.x,kt.y,c,ri,xt.x,xt.y,Mt,Tt),cu(q,S.x,S.y,Je.x,Vn+Je.y,kt.x+kt.w,kt.y,c,ri,gt.x,xt.y,Mt,Tt),cu(q,S.x,S.y,Bt.x,Vn+Bt.y,kt.x,kt.y+kt.h,c,ri,xt.x,gt.y,Mt,Tt),cu(q,S.x,S.y,Ht.x,Vn+Ht.y,kt.x+kt.w,kt.y+kt.h,c,ri,gt.x,gt.y,Mt,Tt),Ch(e.dynamicLayoutVertexArray,S,Fe),H.emplaceBack(Si,Si+1,Si+2),H.emplaceBack(Si+1,Si+2,Si+3),ue.vertexLength+=4,ue.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ct[0]),Pe!==n.length-1&&Xt===n[Pe+1].sectionIndex||e.programConfigurations.populatePaintArrays(q.length,b,b.index,{},j,xe&&xe[Xt])}e.placedSymbolArray.emplaceBack(S.x,S.y,re,this.glyphOffsetArray.length-re,Se,D,z,S.segment,c?c[0]:0,c?c[1]:0,p[0],p[1],w,0,!1,0,N)}_addCollisionDebugVertex(e,n,c,p,_,b){return n.emplaceBack(0,0),e.emplaceBack(c.x,c.y,p,_,Math.round(b.x),Math.round(b.y))}addCollisionDebugVertices(e,n,c,p,_,b,w){const S=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),D=S.vertexLength,z=_.layoutVertexArray,N=_.collisionVertexArray,j=w.anchorX,H=w.anchorY;this._addCollisionDebugVertex(z,N,b,j,H,new Ne(e,n)),this._addCollisionDebugVertex(z,N,b,j,H,new Ne(c,n)),this._addCollisionDebugVertex(z,N,b,j,H,new Ne(c,p)),this._addCollisionDebugVertex(z,N,b,j,H,new Ne(e,p)),S.vertexLength+=4;const q=_.indexArray;q.emplaceBack(D,D+1),q.emplaceBack(D+1,D+2),q.emplaceBack(D+2,D+3),q.emplaceBack(D+3,D),S.primitiveLength+=4}addDebugCollisionBoxes(e,n,c,p){for(let _=e;_<n;_++){const b=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(b.x1,b.y1,b.x2,b.y2,p?this.textCollisionBox:this.iconCollisionBox,b.anchorPoint,c)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Sh(Ts,Rd.members,os),this.iconCollisionBox=new Sh(Ts,Rd.members,os);for(let e=0;e<this.symbolInstances.length;e++){const n=this.symbolInstances.get(e);this.addDebugCollisionBoxes(n.textBoxStartIndex,n.textBoxEndIndex,n,!0),this.addDebugCollisionBoxes(n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n,!0),this.addDebugCollisionBoxes(n.iconBoxStartIndex,n.iconBoxEndIndex,n,!1),this.addDebugCollisionBoxes(n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex,n,!1)}}_deserializeCollisionBoxesForSymbol(e,n,c,p,_,b,w,S,D){const z={};for(let N=n;N<c;N++){const j=e.get(N);z.textBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},z.textFeatureIndex=j.featureIndex;break}for(let N=p;N<_;N++){const j=e.get(N);z.verticalTextBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},z.verticalTextFeatureIndex=j.featureIndex;break}for(let N=b;N<w;N++){const j=e.get(N);z.iconBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},z.iconFeatureIndex=j.featureIndex;break}for(let N=S;N<D;N++){const j=e.get(N);z.verticalIconBox={x1:j.x1,y1:j.y1,x2:j.x2,y2:j.y2,anchorPointX:j.anchorPointX,anchorPointY:j.anchorPointY},z.verticalIconFeatureIndex=j.featureIndex;break}return z}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let n=0;n<this.symbolInstances.length;n++){const c=this.symbolInstances.get(n);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,c.textBoxStartIndex,c.textBoxEndIndex,c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c.iconBoxStartIndex,c.iconBoxEndIndex,c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,n){const c=e.placedSymbolArray.get(n),p=c.vertexStartIndex+4*c.numGlyphs;for(let _=c.vertexStartIndex;_<p;_+=4)e.indexArray.emplaceBack(_,_+1,_+2),e.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const n=Math.sin(e),c=Math.cos(e),p=[],_=[],b=[];for(let w=0;w<this.symbolInstances.length;++w){b.push(w);const S=this.symbolInstances.get(w);p.push(0|Math.round(n*S.anchorX+c*S.anchorY)),_.push(S.featureIndex)}return b.sort((w,S)=>p[w]-p[S]||_[S]-_[w]),b}addToSortKeyRanges(e,n){const c=this.sortKeyRanges[this.sortKeyRanges.length-1];c&&c.sortKey===n?c.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:n,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const n of this.symbolInstanceIndexes){const c=this.symbolInstances.get(n);this.featureSortOrder.push(c.featureIndex),[c.rightJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.leftJustifiedTextSymbolIndex].forEach((p,_,b)=>{p>=0&&b.indexOf(p)===_&&this.addIndicesForPlacedSymbol(this.text,p)}),c.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,c.verticalPlacedTextSymbolIndex),c.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.placedIconSymbolIndex),c.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,c.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Ot("SymbolBucket",xl,{omit:["layers","collisionBoxArray","features","compareText"]}),xl.MAX_GLYPHS=65535,xl.addDynamicAttributes=Ch;const f_=new La({"symbol-placement":new Kt(se.layout_symbol["symbol-placement"]),"symbol-spacing":new Kt(se.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Kt(se.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ci(se.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Kt(se.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Kt(se.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Kt(se.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Kt(se.layout_symbol["icon-ignore-placement"]),"icon-optional":new Kt(se.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Kt(se.layout_symbol["icon-rotation-alignment"]),"icon-size":new ci(se.layout_symbol["icon-size"]),"icon-text-fit":new Kt(se.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Kt(se.layout_symbol["icon-text-fit-padding"]),"icon-image":new ci(se.layout_symbol["icon-image"]),"icon-rotate":new ci(se.layout_symbol["icon-rotate"]),"icon-padding":new ci(se.layout_symbol["icon-padding"]),"icon-keep-upright":new Kt(se.layout_symbol["icon-keep-upright"]),"icon-offset":new ci(se.layout_symbol["icon-offset"]),"icon-anchor":new ci(se.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Kt(se.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Kt(se.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Kt(se.layout_symbol["text-rotation-alignment"]),"text-field":new ci(se.layout_symbol["text-field"]),"text-font":new ci(se.layout_symbol["text-font"]),"text-size":new ci(se.layout_symbol["text-size"]),"text-max-width":new ci(se.layout_symbol["text-max-width"]),"text-line-height":new Kt(se.layout_symbol["text-line-height"]),"text-letter-spacing":new ci(se.layout_symbol["text-letter-spacing"]),"text-justify":new ci(se.layout_symbol["text-justify"]),"text-radial-offset":new ci(se.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Kt(se.layout_symbol["text-variable-anchor"]),"text-anchor":new ci(se.layout_symbol["text-anchor"]),"text-max-angle":new Kt(se.layout_symbol["text-max-angle"]),"text-writing-mode":new Kt(se.layout_symbol["text-writing-mode"]),"text-rotate":new ci(se.layout_symbol["text-rotate"]),"text-padding":new Kt(se.layout_symbol["text-padding"]),"text-keep-upright":new Kt(se.layout_symbol["text-keep-upright"]),"text-transform":new ci(se.layout_symbol["text-transform"]),"text-offset":new ci(se.layout_symbol["text-offset"]),"text-allow-overlap":new Kt(se.layout_symbol["text-allow-overlap"]),"text-overlap":new Kt(se.layout_symbol["text-overlap"]),"text-ignore-placement":new Kt(se.layout_symbol["text-ignore-placement"]),"text-optional":new Kt(se.layout_symbol["text-optional"])});var Eh={paint:new La({"icon-opacity":new ci(se.paint_symbol["icon-opacity"]),"icon-color":new ci(se.paint_symbol["icon-color"]),"icon-halo-color":new ci(se.paint_symbol["icon-halo-color"]),"icon-halo-width":new ci(se.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ci(se.paint_symbol["icon-halo-blur"]),"icon-translate":new Kt(se.paint_symbol["icon-translate"]),"icon-translate-anchor":new Kt(se.paint_symbol["icon-translate-anchor"]),"text-opacity":new ci(se.paint_symbol["text-opacity"]),"text-color":new ci(se.paint_symbol["text-color"],{runtimeType:Yi,getOverride:i=>i.textColor,hasOverride:i=>!!i.textColor}),"text-halo-color":new ci(se.paint_symbol["text-halo-color"]),"text-halo-width":new ci(se.paint_symbol["text-halo-width"]),"text-halo-blur":new ci(se.paint_symbol["text-halo-blur"]),"text-translate":new Kt(se.paint_symbol["text-translate"]),"text-translate-anchor":new Kt(se.paint_symbol["text-translate-anchor"])}),layout:f_};class sp{constructor(e){if(e.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:xi,this.defaultValue=e}evaluate(e){if(e.formattedSection){const n=this.defaultValue.property.overrides;if(n&&n.hasOverride(e.formattedSection))return n.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ot("FormatSectionOverride",sp,{omit:["defaultValue"]});class uu extends Zr{constructor(e){super(e,Eh)}recalculate(e,n){if(super.recalculate(e,n),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const c=this.layout.get("text-writing-mode");if(c){const p=[];for(const _ of c)p.indexOf(_)<0&&p.push(_);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,n,c,p){const _=this.layout.get(e).evaluate(n,{},c,p),b=this._unevaluatedLayout._values[e];return b.isDataDriven()||Io(b.value)||!_?_:function(w,S){return S.replace(/{([^{}]+)}/g,(D,z)=>z in w?String(w[z]):"")}(n.properties,_)}createBucket(e){return new xl(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const e of Eh.paint.overridableProperties){if(!uu.hasPaintOverride(this.layout,e))continue;const n=this.paint.get(e),c=new sp(n),p=new nl(c,n.property.specification);let _=null;_=n.value.kind==="constant"||n.value.kind==="source"?new ko("source",p):new Rl("composite",p,n.value.zoomStops),this.paint._values[e]=new qr(n.property,_,n.parameters)}}_handleOverridablePaintPropertyUpdate(e,n,c){return!(!this.layout||n.isDataDriven()||c.isDataDriven())&&uu.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,n){const c=e.get("text-field"),p=Eh.paint.properties[n];let _=!1;const b=w=>{for(const S of w)if(p.overrides&&p.overrides.hasOverride(S))return void(_=!0)};if(c.value.kind==="constant"&&c.value.value instanceof ne)b(c.value.value.sections);else if(c.value.kind==="source"){const w=D=>{_||(D instanceof ft&&Re(D.value)===Zi?b(D.value.sections):D instanceof zs?b(D.sections):D.eachChild(w))},S=c.value;S._styleExpression&&w(S._styleExpression.expression)}return _}}function Ih(i,e,n){let c="never";const p=i.get(e);return p?c=p:i.get(n)&&(c="always"),c}var m_={paint:new La({"background-color":new Kt(se.paint_background["background-color"]),"background-pattern":new Zl(se.paint_background["background-pattern"]),"background-opacity":new Kt(se.paint_background["background-opacity"])})},g_={paint:new La({"raster-opacity":new Kt(se.paint_raster["raster-opacity"]),"raster-hue-rotate":new Kt(se.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Kt(se.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Kt(se.paint_raster["raster-brightness-max"]),"raster-saturation":new Kt(se.paint_raster["raster-saturation"]),"raster-contrast":new Kt(se.paint_raster["raster-contrast"]),"raster-resampling":new Kt(se.paint_raster["raster-resampling"]),"raster-fade-duration":new Kt(se.paint_raster["raster-fade-duration"])})};class __ extends Zr{constructor(e){super(e,{}),this.onAdd=n=>{this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)},this.onRemove=n=>{this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)},this.implementation=e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const y_={circle:class extends Zr{constructor(i){super(i,Xm)}createBucket(i){return new eh(i)}queryRadius(i){const e=i;return Jl("circle-radius",this,e)+Jl("circle-stroke-width",this,e)+Kc(this.paint.get("circle-translate"))}queryIntersectsFeature(i,e,n,c,p,_,b,w){const S=Wc(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),_.angle,b),D=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),z=this.paint.get("circle-pitch-alignment")==="map",N=z?S:function(H,q){return H.map(ue=>_d(ue,q))}(S,w),j=z?D*b:D;for(const H of c)for(const q of H){const ue=z?q:_d(q,w);let re=j;const Se=Xc([],[q.x,q.y,0,1],w);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?re*=Se[3]/_.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(re*=_.cameraToCenterDistance/Se[3]),Hm(N,ue,re))return!0}return!1}},heatmap:class extends Zr{constructor(i){super(i,Jm),this._updateColorRamp()}createBucket(i){return new yd(i)}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=vd({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Zr{constructor(i){super(i,Qm)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Zr{constructor(i){super(i,fg)}recalculate(i,e){super.recalculate(i,e);const n=this.paint._values["fill-outline-color"];n.value.kind==="constant"&&n.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new dh(i)}queryRadius(){return Kc(this.paint.get("fill-translate"))}queryIntersectsFeature(i,e,n,c,p,_,b){return cd(Wc(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),_.angle,b),c)}isTileClipped(){return!0}},"fill-extrusion":class extends Zr{constructor(i){super(i,Ag)}createBucket(i){return new fh(i)}queryRadius(){return Kc(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(i,e,n,c,p,_,b,w){const S=Wc(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),_.angle,b),D=this.paint.get("fill-extrusion-height").evaluate(e,n),z=this.paint.get("fill-extrusion-base").evaluate(e,n),N=function(H,q,ue,re){const Se=[];for(const Fe of H){const xe=[Fe.x,Fe.y,0,1];Xc(xe,xe,q),Se.push(new Ne(xe[0]/xe[3],xe[1]/xe[3]))}return Se}(S,w),j=function(H,q,ue,re){const Se=[],Fe=[],xe=re[8]*q,Pe=re[9]*q,$e=re[10]*q,Je=re[11]*q,Bt=re[8]*ue,Ht=re[9]*ue,kt=re[10]*ue,xt=re[11]*ue;for(const gt of H){const Mt=[],Tt=[];for(const ct of gt){const ri=ct.x,Xt=ct.y,Si=re[0]*ri+re[4]*Xt+re[12],Vn=re[1]*ri+re[5]*Xt+re[13],qn=re[2]*ri+re[6]*Xt+re[14],ba=re[3]*ri+re[7]*Xt+re[15],jr=qn+$e,Ua=ba+Je,pa=Si+Bt,Ia=Vn+Ht,Va=qn+kt,Wa=ba+xt,gr=new Ne((Si+xe)/Ua,(Vn+Pe)/Ua);gr.z=jr/Ua,Mt.push(gr);const fa=new Ne(pa/Wa,Ia/Wa);fa.z=Va/Wa,Tt.push(fa)}Se.push(Mt),Fe.push(Tt)}return[Se,Fe]}(c,z,D,w);return function(H,q,ue){let re=1/0;cd(ue,q)&&(re=kd(ue,q[0]));for(let Se=0;Se<q.length;Se++){const Fe=q[Se],xe=H[Se];for(let Pe=0;Pe<Fe.length-1;Pe++){const $e=Fe[Pe],Je=[$e,Fe[Pe+1],xe[Pe+1],xe[Pe],$e];ld(ue,Je)&&(re=Math.min(re,kd(ue,Je)))}}return re!==1/0&&re}(j[0],j[1],N)}},line:class extends Zr{constructor(i){super(i,Dd),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(i){i==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Za,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,e){super.recalculate(i,e),this.paint._values["line-floorwidth"]=Pd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new mh(i)}queryRadius(i){const e=i,n=Ld(Jl("line-width",this,e),Jl("line-gap-width",this,e)),c=Jl("line-offset",this,e);return n/2+Math.abs(c)+Kc(this.paint.get("line-translate"))}queryIntersectsFeature(i,e,n,c,p,_,b){const w=Wc(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),_.angle,b),S=b/2*Ld(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),D=this.paint.get("line-offset").evaluate(e,n);return D&&(c=function(z,N){const j=[];for(let H=0;H<z.length;H++){const q=z[H],ue=[];for(let re=0;re<q.length;re++){const Se=q[re-1],Fe=q[re],xe=q[re+1],Pe=re===0?new Ne(0,0):Fe.sub(Se)._unit()._perp(),$e=re===q.length-1?new Ne(0,0):xe.sub(Fe)._unit()._perp(),Je=Pe._add($e)._unit(),Bt=Je.x*$e.x+Je.y*$e.y;Bt!==0&&Je._mult(1/Bt),ue.push(Je._mult(N)._add(Fe))}j.push(ue)}return j}(c,D*b)),function(z,N,j){for(let H=0;H<N.length;H++){const q=N[H];if(z.length>=3){for(let ue=0;ue<q.length;ue++)if(fl(z,q[ue]))return!0}if(qm(z,q,j))return!0}return!1}(w,c,S)}isTileClipped(){return!0}},symbol:uu,background:class extends Zr{constructor(i){super(i,m_)}},raster:class extends Zr{constructor(i){super(i,g_)}}};class b_{constructor(e){this._callback=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const op=63710088e-1;class na{constructor(e,n){if(isNaN(e)||isNaN(n))throw new Error(`Invalid LngLat object: (${e}, ${n})`);if(this.lng=+e,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new na(K(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const n=Math.PI/180,c=this.lat*n,p=e.lat*n,_=Math.sin(c)*Math.sin(p)+Math.cos(c)*Math.cos(p)*Math.cos((e.lng-this.lng)*n);return op*Math.acos(Math.min(_,1))}toBounds(e=0){const n=360*e/40075017,c=n/Math.cos(Math.PI/180*this.lat);return new Ko(new na(this.lng-c,this.lat-n),new na(this.lng+c,this.lat+n))}static convert(e){if(e instanceof na)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new na(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new na(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Ko{constructor(e,n){e&&(n?this.setSouthWest(e).setNorthEast(n):e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof na?new na(e.lng,e.lat):na.convert(e),this}setSouthWest(e){return this._sw=e instanceof na?new na(e.lng,e.lat):na.convert(e),this}extend(e){const n=this._sw,c=this._ne;let p,_;if(e instanceof na)p=e,_=e;else{if(!(e instanceof Ko))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Ko.convert(e)):this.extend(na.convert(e)):this;if(p=e._sw,_=e._ne,!p||!_)return this}return n||c?(n.lng=Math.min(p.lng,n.lng),n.lat=Math.min(p.lat,n.lat),c.lng=Math.max(_.lng,c.lng),c.lat=Math.max(_.lat,c.lat)):(this._sw=new na(p.lng,p.lat),this._ne=new na(_.lng,_.lat)),this}getCenter(){return new na((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new na(this.getWest(),this.getNorth())}getSouthEast(){return new na(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:n,lat:c}=na.convert(e);let p=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&p}static convert(e){return e instanceof Ko?e:e&&new Ko(e)}}const lp=2*Math.PI*op;function cp(i){return lp*Math.cos(i*Math.PI/180)}function up(i){return(180+i)/360}function hp(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function dp(i,e){return i/cp(e)}function Ah(i){return 360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90}class hu{constructor(e,n,c=0){this.x=+e,this.y=+n,this.z=+c}static fromLngLat(e,n=0){const c=na.convert(e);return new hu(up(c.lng),hp(c.lat),dp(n,c.lat))}toLngLat(){return new na(360*this.x-180,Ah(this.y))}toAltitude(){return this.z*cp(Ah(this.y))}meterInMercatorCoordinateUnits(){return 1/lp*(e=Ah(this.y),1/Math.cos(e*Math.PI/180));var e}}function pp(i,e,n){var c=2*Math.PI*6378137/256/Math.pow(2,n);return[i*c-2*Math.PI*6378137/2,e*c-2*Math.PI*6378137/2]}class kh{constructor(e,n,c){if(e<0||e>25||c<0||c>=Math.pow(2,e)||n<0||n>=Math.pow(2,e))throw new Error(`x=${n}, y=${c}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=n,this.y=c,this.key=lc(0,e,e,n,c)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,n,c){const p=(b=this.y,w=this.z,S=pp(256*(_=this.x),256*(b=Math.pow(2,w)-b-1),w),D=pp(256*(_+1),256*(b+1),w),S[0]+","+S[1]+","+D[0]+","+D[1]);var _,b,w,S,D;const z=function(N,j,H){let q,ue="";for(let re=N;re>0;re--)q=1<<re-1,ue+=(j&q?1:0)+(H&q?2:0);return ue}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(c==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,n>1?"@2x":"").replace(/{quadkey}/g,z).replace(/{bbox-epsg-3857}/g,p)}isChildOf(e){const n=this.z-e.z;return n>0&&e.x===this.x>>n&&e.y===this.y>>n}getTilePoint(e){const n=Math.pow(2,this.z);return new Ne((e.x*n-this.x)*ya,(e.y*n-this.y)*ya)}toString(){return`${this.z}/${this.x}/${this.y}`}}class fp{constructor(e,n){this.wrap=e,this.canonical=n,this.key=lc(e,n.z,n.z,n.x,n.y)}}class Vr{constructor(e,n,c,p,_){if(e<c)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${c}`);this.overscaledZ=e,this.wrap=n,this.canonical=new kh(c,+p,+_),this.key=lc(n,e,c,p,_)}clone(){return new Vr(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const n=this.canonical.z-e;return e>this.canonical.z?new Vr(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Vr(e,this.wrap,e,this.canonical.x>>n,this.canonical.y>>n)}calculateScaledKey(e,n){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const c=this.canonical.z-e;return e>this.canonical.z?lc(this.wrap*+n,e,this.canonical.z,this.canonical.x,this.canonical.y):lc(this.wrap*+n,e,e,this.canonical.x>>c,this.canonical.y>>c)}isChildOf(e){if(e.wrap!==this.wrap)return!1;const n=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>n&&e.canonical.y===this.canonical.y>>n}children(e){if(this.overscaledZ>=e)return[new Vr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const n=this.canonical.z+1,c=2*this.canonical.x,p=2*this.canonical.y;return[new Vr(n,this.wrap,n,c,p),new Vr(n,this.wrap,n,c+1,p),new Vr(n,this.wrap,n,c,p+1),new Vr(n,this.wrap,n,c+1,p+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Vr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Vr(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new fp(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new hu(e.x-this.wrap,e.y))}}function lc(i,e,n,c,p){(i*=2)<0&&(i=-1*i-1);const _=1<<n;return(_*_*i+_*p+c).toString(36)+n.toString(36)+e.toString(36)}Ot("CanonicalTileID",kh),Ot("OverscaledTileID",Vr,{omit:["posMatrix"]});class mp{constructor(e,n,c){if(this.uid=e,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(c&&c!=="mapbox"&&c!=="terrarium")return void Oe(`"${c}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=n.height;const p=this.dim=n.height-2;this.data=new Uint32Array(n.data.buffer),this.encoding=c||"mapbox";for(let _=0;_<p;_++)this.data[this._idx(-1,_)]=this.data[this._idx(0,_)],this.data[this._idx(p,_)]=this.data[this._idx(p-1,_)],this.data[this._idx(_,-1)]=this.data[this._idx(_,0)],this.data[this._idx(_,p)]=this.data[this._idx(_,p-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(p,-1)]=this.data[this._idx(p-1,0)],this.data[this._idx(-1,p)]=this.data[this._idx(0,p-1)],this.data[this._idx(p,p)]=this.data[this._idx(p-1,p-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let _=0;_<p;_++)for(let b=0;b<p;b++){const w=this.get(_,b);w>this.max&&(this.max=w),w<this.min&&(this.min=w)}}get(e,n){const c=new Uint8Array(this.data.buffer),p=4*this._idx(e,n);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(c[p],c[p+1],c[p+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(e,n){if(e<-1||e>=this.dim+1||n<-1||n>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(n+1)*this.stride+(e+1)}_unpackMapbox(e,n,c){return(256*e*256+256*n+c)/10-1e4}_unpackTerrarium(e,n,c){return 256*e+n+c/256-32768}getPixels(){return new Ur({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,n,c){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let p=n*this.dim,_=n*this.dim+this.dim,b=c*this.dim,w=c*this.dim+this.dim;switch(n){case-1:p=_-1;break;case 1:_=p+1}switch(c){case-1:b=w-1;break;case 1:w=b+1}const S=-n*this.dim,D=-c*this.dim;for(let z=b;z<w;z++)for(let N=p;N<_;N++)this.data[this._idx(N,z)]=e.data[this._idx(N+S,z+D)]}}Ot("DEMData",mp);class gp{constructor(e){this._stringToNumber={},this._numberToString=[];for(let n=0;n<e.length;n++){const c=e[n];this._stringToNumber[c]=n,this._numberToString[n]=c}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}}class _p{constructor(e,n,c,p,_){this.type="Feature",this._vectorTileFeature=e,e._z=n,e._x=c,e._y=p,this.properties=e.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const n in this)n!=="_geometry"&&n!=="_vectorTileFeature"&&(e[n]=this[n]);return e}}class yp{constructor(e,n){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new No(ya,16,0),this.grid3D=new No(ya,16,0),this.featureIndexArray=new Ti,this.promoteId=n}insert(e,n,c,p,_,b){const w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(c,p,_);const S=b?this.grid3D:this.grid;for(let D=0;D<n.length;D++){const z=n[D],N=[1/0,1/0,-1/0,-1/0];for(let j=0;j<z.length;j++){const H=z[j];N[0]=Math.min(N[0],H.x),N[1]=Math.min(N[1],H.y),N[2]=Math.max(N[2],H.x),N[3]=Math.max(N[3],H.y)}N[0]<ya&&N[1]<ya&&N[2]>=0&&N[3]>=0&&S.insert(w,N[0],N[1],N[2],N[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new uo.VectorTile(new gh(this.rawTileData)).layers,this.sourceLayerCoder=new gp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,n,c,p){this.loadVTLayers();const _=e.params||{},b=ya/e.tileSize/e.scale,w=sl(_.filter),S=e.queryGeometry,D=e.queryPadding*b,z=vp(S),N=this.grid.query(z.minX-D,z.minY-D,z.maxX+D,z.maxY+D),j=vp(e.cameraQueryGeometry),H=this.grid3D.query(j.minX-D,j.minY-D,j.maxX+D,j.maxY+D,(re,Se,Fe,xe)=>function(Pe,$e,Je,Bt,Ht){for(const xt of Pe)if($e<=xt.x&&Je<=xt.y&&Bt>=xt.x&&Ht>=xt.y)return!0;const kt=[new Ne($e,Je),new Ne($e,Ht),new Ne(Bt,Ht),new Ne(Bt,Je)];if(Pe.length>2){for(const xt of kt)if(fl(Pe,xt))return!0}for(let xt=0;xt<Pe.length-1;xt++)if(Km(Pe[xt],Pe[xt+1],kt))return!0;return!1}(e.cameraQueryGeometry,re-D,Se-D,Fe+D,xe+D));for(const re of H)N.push(re);N.sort(v_);const q={};let ue;for(let re=0;re<N.length;re++){const Se=N[re];if(Se===ue)continue;ue=Se;const Fe=this.featureIndexArray.get(Se);let xe=null;this.loadMatchingFeature(q,Fe.bucketIndex,Fe.sourceLayerIndex,Fe.featureIndex,w,_.layers,_.availableImages,n,c,p,(Pe,$e,Je)=>(xe||(xe=Ho(Pe)),$e.queryIntersectsFeature(S,Pe,Je,xe,this.z,e.transform,b,e.pixelPosMatrix)))}return q}loadMatchingFeature(e,n,c,p,_,b,w,S,D,z,N){const j=this.bucketLayerIDs[n];if(b&&!function(re,Se){for(let Fe=0;Fe<re.length;Fe++)if(Se.indexOf(re[Fe])>=0)return!0;return!1}(b,j))return;const H=this.sourceLayerCoder.decode(c),q=this.vtLayers[H].feature(p);if(_.needGeometry){const re=qo(q,!0);if(!_.filter(new Gn(this.tileID.overscaledZ),re,this.tileID.canonical))return}else if(!_.filter(new Gn(this.tileID.overscaledZ),q))return;const ue=this.getId(q,H);for(let re=0;re<j.length;re++){const Se=j[re];if(b&&b.indexOf(Se)<0)continue;const Fe=S[Se];if(!Fe)continue;let xe={};ue&&z&&(xe=z.getState(Fe.sourceLayer||"_geojsonTileLayer",ue));const Pe=$({},D[Se]);Pe.paint=bp(Pe.paint,Fe.paint,q,xe,w),Pe.layout=bp(Pe.layout,Fe.layout,q,xe,w);const $e=!N||N(q,Fe,xe);if(!$e)continue;const Je=new _p(q,this.z,this.x,this.y,ue);Je.layer=Pe;let Bt=e[Se];Bt===void 0&&(Bt=e[Se]=[]),Bt.push({featureIndex:p,feature:Je,intersectionZ:$e})}}lookupSymbolFeatures(e,n,c,p,_,b,w,S){const D={};this.loadVTLayers();const z=sl(_);for(const N of e)this.loadMatchingFeature(D,c,p,N,z,b,w,S,n);return D}hasLayer(e){for(const n of this.bucketLayerIDs)for(const c of n)if(e===c)return!0;return!1}getId(e,n){let c=e.id;return this.promoteId&&(c=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[n]],typeof c=="boolean"&&(c=Number(c))),c}}function bp(i,e,n,c,p){return Te(i,(_,b)=>{const w=e instanceof jo?e.get(b):null;return w&&w.evaluate?w.evaluate(n,c,p):w})}function vp(i){let e=1/0,n=1/0,c=-1/0,p=-1/0;for(const _ of i)e=Math.min(e,_.x),n=Math.min(n,_.y),c=Math.max(c,_.x),p=Math.max(p,_.y);return{minX:e,minY:n,maxX:c,maxY:p}}function v_(i,e){return e-i}var Mh;Ot("FeatureIndex",yp,{omit:["rawTileData","sourceLayerCoder"]}),r.PerformanceMarkers=void 0,(Mh=r.PerformanceMarkers||(r.PerformanceMarkers={})).create="create",Mh.load="load",Mh.fullLoad="fullLoad";let du=null,cc=[];const Dh=1e3/30,x_={mark(i){performance.mark(i)},frame(i){const e=i;du!=null&&cc.push(e-du),du=e},clearMetrics(){du=null,cc=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const i in r.PerformanceMarkers)performance.clearMarks(r.PerformanceMarkers[i])},getPerformanceMetrics(){performance.measure("loadTime",r.PerformanceMarkers.create,r.PerformanceMarkers.load),performance.measure("fullLoadTime",r.PerformanceMarkers.create,r.PerformanceMarkers.fullLoad);const i=performance.getEntriesByName("loadTime")[0].duration,e=performance.getEntriesByName("fullLoadTime")[0].duration,n=cc.length,c=1/(cc.reduce((_,b)=>_+b,0)/n/1e3),p=cc.filter(_=>_>Dh).reduce((_,b)=>_+(b-Dh)/Dh,0);return{loadTime:i,fullLoadTime:e,fps:c,percentDroppedFrames:p/(n+p)*100}}};r.AJAXError=Qe,r.ARRAY_TYPE=nr,r.Actor=class{constructor(i,e,n){this.target=i,this.parent=e,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},we(["receive","process"],this),this.invoker=new b_(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ve()?i:window}send(i,e,n,c,p=!1){const _=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[_]=n);const b=He(this.globalScope)?void 0:[];return this.target.postMessage({id:_,type:i,hasCallback:!!n,targetMapId:c,mustQueue:p,sourceMapId:this.mapId,data:Os(e,b)},b),{cancel:()=>{n&&delete this.callbacks[_],this.target.postMessage({id:_,type:"<cancel>",targetMapId:c,sourceMapId:this.mapId})}}}receive(i){const e=i.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if(e.type==="<cancel>"){delete this.tasks[n];const c=this.cancelCallbacks[n];delete this.cancelCallbacks[n],c&&c()}else Ve()||e.mustQueue?(this.tasks[n]=e,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,e)}process(){if(!this.taskQueue.length)return;const i=this.taskQueue.shift(),e=this.tasks[i];delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(i,e)}processTask(i,e){if(e.type==="<response>"){const n=this.callbacks[i];delete this.callbacks[i],n&&(e.error?n(bs(e.error)):n(null,bs(e.data)))}else{let n=!1;const c=He(this.globalScope)?void 0:[],p=e.hasCallback?(w,S)=>{n=!0,delete this.cancelCallbacks[i],this.target.postMessage({id:i,type:"<response>",sourceMapId:this.mapId,error:w?Os(w):null,data:Os(S,c)},c)}:w=>{n=!0};let _=null;const b=bs(e.data);if(this.parent[e.type])_=this.parent[e.type](e.sourceMapId,b,p);else if(this.parent.getWorkerSource){const w=e.type.split(".");_=this.parent.getWorkerSource(e.sourceMapId,w[0],b.source)[w[1]](b,p)}else p(new Error(`Could not find function ${e.type}`));!n&&_&&_.cancel&&(this.cancelCallbacks[i]=_.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},r.AlphaImage=$l,r.CanonicalTileID=kh,r.CollisionBoxArray=qe,r.CollisionCircleLayoutArray=class extends F{},r.Color=U,r.DEMData=mp,r.DataConstantProperty=Kt,r.DictionaryCoder=gp,r.EXTENT=ya,r.ErrorEvent=mn,r.EvaluationParameters=Gn,r.Event=ti,r.Evented=xn,r.FeatureIndex=yp,r.FillBucket=dh,r.FillExtrusionBucket=fh,r.GeoJSONFeature=_p,r.ImageAtlas=jd,r.ImagePosition=yh,r.LineBucket=mh,r.LineStripIndexArray=class extends ae{},r.LngLat=na,r.LngLatBounds=Ko,r.MercatorCoordinate=hu,r.ONE_EM=Ra,r.OverscaledTileID=Vr,r.PerformanceUtils=x_,r.PosArray=ai,r.Properties=La,r.QuadTriangleArray=class extends G{},r.RGBAImage=Ur,r.RasterBoundsArray=class extends d{},r.RequestPerformance=class{constructor(i){this._marks={start:[i.url,"start"].join("#"),end:[i.url,"end"].join("#"),measure:i.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let i=performance.getEntriesByName(this._marks.measure);return i.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),i=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),i}},r.ResourceType=wi,r.SegmentVector=Li,r.SymbolBucket=xl,r.Transitionable=Vc,r.TriangleIndexArray=tr,r.Uniform1f=js,r.Uniform1i=class extends Vs{constructor(i,e){super(i,e),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}},r.Uniform2f=class extends Vs{constructor(i,e){super(i,e),this.current=[0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1]))}},r.Uniform3f=class extends Vs{constructor(i,e){super(i,e),this.current=[0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2]))}},r.Uniform4f=dl,r.UniformColor=ad,r.UniformMatrix4f=class extends Vs{constructor(i,e){super(i,e),this.current=jm}set(i){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let e=1;e<16;e++)if(i[e]!==this.current[e]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}},r.UnwrappedTileID=fp,r.ValidationError=Ie,r.ZoomHistory=Ol,r.add=function(i,e,n){return i[0]=e[0]+n[0],i[1]=e[1]+n[1],i[2]=e[2]+n[2],i},r.addDynamicAttributes=Ch,r.asyncAll=function(i,e,n){if(!i.length)return n(null,[]);let c=i.length;const p=new Array(i.length);let _=null;i.forEach((b,w)=>{e(b,(S,D)=>{S&&(_=S),p[w]=D,--c==0&&n(_,p)})})},r.bezier=C,r.bindAll=we,r.cacheEntryPossiblyAdded=function(i){vi++,vi>gi&&(i.getActor().send("enforceCacheSizeLimit",bi),vi=0)},r.clamp=k,r.clearTileCache=function(i){const e=caches.delete(jt);i&&e.catch(i).then(()=>i())},r.clipLine=ep,r.clone=function(i){var e=new nr(16);return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],e},r.clone$1=Le,r.clone$2=function(i){var e=new nr(3);return e[0]=i[0],e[1]=i[1],e[2]=i[2],e},r.collisionCircleLayout=Ng,r.config=ut,r.copy=function(i,e){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],i},r.create=function(){var i=new nr(16);return nr!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i},r.create$1=dd,r.createExpression=Ao,r.createFilter=sl,r.createLayout=da,r.createStyleLayer=function(i){return i.type==="custom"?new __(i):new y_[i.type](i)},r.cross=function(i,e,n){var c=e[0],p=e[1],_=e[2],b=n[0],w=n[1],S=n[2];return i[0]=p*S-_*w,i[1]=_*b-c*S,i[2]=c*w-p*b,i},r.dot=function(i,e){return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]},r.dot$1=function(i,e){return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]+i[3]*e[3]},r.ease=I,r.emitValidationErrors=ll,r.enforceCacheSizeLimit=function(i){Lt(),yt&&yt.then(e=>{e.keys().then(n=>{for(let c=0;c<n.length-i;c++)e.delete(n[c])})})},r.equals=function(i,e){var n=i[0],c=i[1],p=i[2],_=i[3],b=i[4],w=i[5],S=i[6],D=i[7],z=i[8],N=i[9],j=i[10],H=i[11],q=i[12],ue=i[13],re=i[14],Se=i[15],Fe=e[0],xe=e[1],Pe=e[2],$e=e[3],Je=e[4],Bt=e[5],Ht=e[6],kt=e[7],xt=e[8],gt=e[9],Mt=e[10],Tt=e[11],ct=e[12],ri=e[13],Xt=e[14],Si=e[15];return Math.abs(n-Fe)<=ir*Math.max(1,Math.abs(n),Math.abs(Fe))&&Math.abs(c-xe)<=ir*Math.max(1,Math.abs(c),Math.abs(xe))&&Math.abs(p-Pe)<=ir*Math.max(1,Math.abs(p),Math.abs(Pe))&&Math.abs(_-$e)<=ir*Math.max(1,Math.abs(_),Math.abs($e))&&Math.abs(b-Je)<=ir*Math.max(1,Math.abs(b),Math.abs(Je))&&Math.abs(w-Bt)<=ir*Math.max(1,Math.abs(w),Math.abs(Bt))&&Math.abs(S-Ht)<=ir*Math.max(1,Math.abs(S),Math.abs(Ht))&&Math.abs(D-kt)<=ir*Math.max(1,Math.abs(D),Math.abs(kt))&&Math.abs(z-xt)<=ir*Math.max(1,Math.abs(z),Math.abs(xt))&&Math.abs(N-gt)<=ir*Math.max(1,Math.abs(N),Math.abs(gt))&&Math.abs(j-Mt)<=ir*Math.max(1,Math.abs(j),Math.abs(Mt))&&Math.abs(H-Tt)<=ir*Math.max(1,Math.abs(H),Math.abs(Tt))&&Math.abs(q-ct)<=ir*Math.max(1,Math.abs(q),Math.abs(ct))&&Math.abs(ue-ri)<=ir*Math.max(1,Math.abs(ue),Math.abs(ri))&&Math.abs(re-Xt)<=ir*Math.max(1,Math.abs(re),Math.abs(Xt))&&Math.abs(Se-Si)<=ir*Math.max(1,Math.abs(Se),Math.abs(Si))},r.evaluateSizeForFeature=function(i,{uSize:e,uSizeT:n},{lowerSize:c,upperSize:p}){return i.kind==="source"?c/qs:i.kind==="composite"?ln(c/qs,p/qs,n):e},r.evaluateSizeForZoom=function(i,e){let n=0,c=0;if(i.kind==="constant")c=i.layoutSize;else if(i.kind!=="source"){const{interpolationType:p,minZoom:_,maxZoom:b}=i,w=p?k(Ka.interpolationFactor(p,e,_,b),0,1):0;i.kind==="camera"?c=ln(i.minSize,i.maxSize,w):n=w}return{uSizeT:n,uSize:c}},r.evaluateVariableOffset=np,r.evented=ql,r.exported=pt,r.exported$1=Qt,r.extend=$,r.filterObject=me,r.fromRotation=function(i,e){var n=Math.sin(e),c=Math.cos(e);return i[0]=c,i[1]=n,i[2]=0,i[3]=-n,i[4]=c,i[5]=0,i[6]=0,i[7]=0,i[8]=1,i},r.fromScaling=function(i,e){return i[0]=e[0],i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=e[1],i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=e[2],i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i},r.getAnchorAlignment=vh,r.getAnchorJustification=wh,r.getArrayBuffer=fn,r.getImage=ei,r.getJSON=function(i,e){return Vi($(i,{type:"json"}),e)},r.getOverlapMode=Ih,r.getRTLTextPluginStatus=Uo,r.getReferrer=Nt,r.getVideo=function(i,e){const n=window.document.createElement("video");n.muted=!0,n.onloadstart=function(){e(null,n)};for(let c=0;c<i.length;c++){const p=window.document.createElement("source");Mi(i[c])||(n.crossOrigin="Anonymous"),p.src=i[c],n.appendChild(p)}return{cancel:()=>{}}},r.identity=nh,r.invert=function(i,e){var n=e[0],c=e[1],p=e[2],_=e[3],b=e[4],w=e[5],S=e[6],D=e[7],z=e[8],N=e[9],j=e[10],H=e[11],q=e[12],ue=e[13],re=e[14],Se=e[15],Fe=n*w-c*b,xe=n*S-p*b,Pe=n*D-_*b,$e=c*S-p*w,Je=c*D-_*w,Bt=p*D-_*S,Ht=z*ue-N*q,kt=z*re-j*q,xt=z*Se-H*q,gt=N*re-j*ue,Mt=N*Se-H*ue,Tt=j*Se-H*re,ct=Fe*Tt-xe*Mt+Pe*gt+$e*xt-Je*kt+Bt*Ht;return ct?(i[0]=(w*Tt-S*Mt+D*gt)*(ct=1/ct),i[1]=(p*Mt-c*Tt-_*gt)*ct,i[2]=(ue*Bt-re*Je+Se*$e)*ct,i[3]=(j*Je-N*Bt-H*$e)*ct,i[4]=(S*xt-b*Tt-D*kt)*ct,i[5]=(n*Tt-p*xt+_*kt)*ct,i[6]=(re*Pe-q*Bt-Se*xe)*ct,i[7]=(z*Bt-j*Pe+H*xe)*ct,i[8]=(b*Mt-w*xt+D*Ht)*ct,i[9]=(c*xt-n*Mt-_*Ht)*ct,i[10]=(q*Je-ue*Pe+Se*Fe)*ct,i[11]=(N*Pe-z*Je-H*Fe)*ct,i[12]=(w*kt-b*gt-S*Ht)*ct,i[13]=(n*gt-c*kt+p*Ht)*ct,i[14]=(ue*xe-q*$e-re*Fe)*ct,i[15]=(z*$e-N*xe+j*Fe)*ct,i):null},r.isImageBitmap=Xe,r.isSafari=He,r.isWorker=Ve,r.keysDifference=function(i,e){const n=[];for(const c in i)c in e||n.push(c);return n},r.lazyLoadRTLTextPlugin=function(){Ir.isLoading()||Ir.isLoaded()||Uo()!=="deferred"||Uc()},r.makeRequest=Vi,r.mapObject=Te,r.mercatorXfromLng=up,r.mercatorYfromLat=hp,r.mercatorZfromAltitude=dp,r.mul=Ym,r.mul$1=function(i,e,n){return i[0]=e[0]*n[0],i[1]=e[1]*n[1],i[2]=e[2]*n[2],i[3]=e[3]*n[3],i},r.multiply=pd,r.nextPowerOfTwo=function(i){return i<=1?1:Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))},r.normalize=function(i,e){var n=e[0],c=e[1],p=e[2],_=n*n+c*c+p*p;return _>0&&(_=1/Math.sqrt(_)),i[0]=e[0]*_,i[1]=e[1]*_,i[2]=e[2]*_,i},r.number=ln,r.ortho=function(i,e,n,c,p,_,b){var w=1/(e-n),S=1/(c-p),D=1/(_-b);return i[0]=-2*w,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*S,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*D,i[11]=0,i[12]=(e+n)*w,i[13]=(p+c)*S,i[14]=(b+_)*D,i[15]=1,i},r.parseCacheControl=tt,r.parseGlyphPbf=function(i){return new gh(i).readFields(Yg,[])},r.pbf=gh,r.performSymbolLayout=function(i){i.bucket.createArrays(),i.bucket.tilePixelRatio=ya/(512*i.bucket.overscaling),i.bucket.compareText={},i.bucket.iconsNeedLinear=!1;const e=i.bucket.layers[0].layout,n=i.bucket.layers[0]._unevaluatedLayout._values,c={layoutIconSize:n["icon-size"].possiblyEvaluate(new Gn(i.bucket.zoom+1),i.canonical),layoutTextSize:n["text-size"].possiblyEvaluate(new Gn(i.bucket.zoom+1),i.canonical),textMaxSize:n["text-size"].possiblyEvaluate(new Gn(18))};if(i.bucket.textSizeData.kind==="composite"){const{minZoom:S,maxZoom:D}=i.bucket.textSizeData;c.compositeTextSizes=[n["text-size"].possiblyEvaluate(new Gn(S),i.canonical),n["text-size"].possiblyEvaluate(new Gn(D),i.canonical)]}if(i.bucket.iconSizeData.kind==="composite"){const{minZoom:S,maxZoom:D}=i.bucket.iconSizeData;c.compositeIconSizes=[n["icon-size"].possiblyEvaluate(new Gn(S),i.canonical),n["icon-size"].possiblyEvaluate(new Gn(D),i.canonical)]}const p=e.get("text-line-height")*Ra,_=e.get("text-rotation-alignment")!=="viewport"&&e.get("symbol-placement")!=="point",b=e.get("text-keep-upright"),w=e.get("text-size");for(const S of i.bucket.features){const D=e.get("text-font").evaluate(S,{},i.canonical).join(","),z=w.evaluate(S,{},i.canonical),N=c.layoutTextSize.evaluate(S,{},i.canonical),j=c.layoutIconSize.evaluate(S,{},i.canonical),H={horizontal:{},vertical:void 0},q=S.text;let ue,re=[0,0];if(q){const xe=q.toString(),Pe=e.get("text-letter-spacing").evaluate(S,{},i.canonical)*Ra,$e=Xu(xe)?Pe:0,Je=e.get("text-anchor").evaluate(S,{},i.canonical),Bt=e.get("text-variable-anchor");if(!Bt){const Mt=e.get("text-radial-offset").evaluate(S,{},i.canonical);re=Mt?np(Je,[Mt*Ra,xh]):e.get("text-offset").evaluate(S,{},i.canonical).map(Tt=>Tt*Ra)}let Ht=_?"center":e.get("text-justify").evaluate(S,{},i.canonical);const kt=e.get("symbol-placement"),xt=kt==="point"?e.get("text-max-width").evaluate(S,{},i.canonical)*Ra:0,gt=()=>{i.bucket.allowVerticalPlacement&&cl(xe)&&(H.vertical=nu(q,i.glyphMap,i.glyphPositions,i.imagePositions,D,xt,p,Je,"left",$e,re,r.WritingMode.vertical,!0,kt,N,z))};if(!_&&Bt){const Mt=Ht==="auto"?Bt.map(ct=>wh(ct)):[Ht];let Tt=!1;for(let ct=0;ct<Mt.length;ct++){const ri=Mt[ct];if(!H.horizontal[ri])if(Tt)H.horizontal[ri]=H.horizontal[0];else{const Xt=nu(q,i.glyphMap,i.glyphPositions,i.imagePositions,D,xt,p,"center",ri,$e,re,r.WritingMode.horizontal,!1,kt,N,z);Xt&&(H.horizontal[ri]=Xt,Tt=Xt.positionedLines.length===1)}}gt()}else{Ht==="auto"&&(Ht=wh(Je));const Mt=nu(q,i.glyphMap,i.glyphPositions,i.imagePositions,D,xt,p,Je,Ht,$e,re,r.WritingMode.horizontal,!1,kt,N,z);Mt&&(H.horizontal[Ht]=Mt),gt(),cl(xe)&&_&&b&&(H.vertical=nu(q,i.glyphMap,i.glyphPositions,i.imagePositions,D,xt,p,Je,Ht,$e,re,r.WritingMode.vertical,!1,kt,N,z))}}let Se=!1;if(S.icon&&S.icon.name){const xe=i.imageMap[S.icon.name];xe&&(ue=i_(i.imagePositions[S.icon.name],e.get("icon-offset").evaluate(S,{},i.canonical),e.get("icon-anchor").evaluate(S,{},i.canonical)),Se=!!xe.sdf,i.bucket.sdfIcons===void 0?i.bucket.sdfIcons=Se:i.bucket.sdfIcons!==Se&&Oe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xe.pixelRatio!==i.bucket.pixelRatio||e.get("icon-rotate").constantOr(1)!==0)&&(i.bucket.iconsNeedLinear=!0))}const Fe=rp(H.horizontal)||H.vertical;i.bucket.iconsInText=!!Fe&&Fe.iconsInText,(Fe||ue)&&c_(i.bucket,S,H,ue,i.imageMap,c,N,j,re,Se,i.canonical)}i.showCollisionBoxes&&i.bucket.generateCollisionDebugBuffers()},r.perspective=function(i,e,n,c,p){var _,b=1/Math.tan(e/2);return i[0]=b/n,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=b,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=-1,i[12]=0,i[13]=0,i[15]=0,p!=null&&p!==1/0?(i[10]=(p+c)*(_=1/(c-p)),i[14]=2*p*c*_):(i[10]=-1,i[14]=-2*c),i},r.pick=function(i,e){const n={};for(let c=0;c<e.length;c++){const p=e[c];p in i&&(n[p]=i[p])}return n},r.plugin=Ir,r.pointGeometry=Ne,r.polygonIntersectsPolygon=ld,r.potpack=Vd,r.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],r.register=Ot,r.registerForPluginStateChange=function(i){return i({pluginStatus:er,pluginURL:vs}),ql.on("pluginStateChange",i),i},r.renderColorRamp=vd,r.rotateX=function(i,e,n){var c=Math.sin(n),p=Math.cos(n),_=e[4],b=e[5],w=e[6],S=e[7],D=e[8],z=e[9],N=e[10],j=e[11];return e!==i&&(i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i[4]=_*p+D*c,i[5]=b*p+z*c,i[6]=w*p+N*c,i[7]=S*p+j*c,i[8]=D*p-_*c,i[9]=z*p-b*c,i[10]=N*p-w*c,i[11]=j*p-S*c,i},r.rotateZ=function(i,e,n){var c=Math.sin(n),p=Math.cos(n),_=e[0],b=e[1],w=e[2],S=e[3],D=e[4],z=e[5],N=e[6],j=e[7];return e!==i&&(i[8]=e[8],i[9]=e[9],i[10]=e[10],i[11]=e[11],i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15]),i[0]=_*p+D*c,i[1]=b*p+z*c,i[2]=w*p+N*c,i[3]=S*p+j*c,i[4]=D*p-_*c,i[5]=z*p-b*c,i[6]=N*p-w*c,i[7]=j*p-S*c,i},r.scale=function(i,e,n){var c=n[0],p=n[1],_=n[2];return i[0]=e[0]*c,i[1]=e[1]*c,i[2]=e[2]*c,i[3]=e[3]*c,i[4]=e[4]*p,i[5]=e[5]*p,i[6]=e[6]*p,i[7]=e[7]*p,i[8]=e[8]*_,i[9]=e[9]*_,i[10]=e[10]*_,i[11]=e[11]*_,i[12]=e[12],i[13]=e[13],i[14]=e[14],i[15]=e[15],i},r.scale$1=function(i,e,n){return i[0]=e[0]*n,i[1]=e[1]*n,i[2]=e[2]*n,i},r.setCacheLimits=function(i,e){bi=i,gi=e},r.setRTLTextPlugin=function(i,e,n=!1){if(er===Vl||er===jl||er===Gl)throw new Error("setRTLTextPlugin cannot be called multiple times.");vs=pt.resolveURL(i),er=Vl,Hl=e,so(),n||Uc()},r.spec=se,r.sphericalToCartesian=function([i,e,n]){return e+=90,e*=Math.PI/180,n*=Math.PI/180,{x:i*Math.cos(e)*Math.sin(n),y:i*Math.sin(e)*Math.sin(n),z:i*Math.cos(n)}},r.sqrLen=function(i){var e=i[0],n=i[1];return e*e+n*n},r.sub=function(i,e,n){return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],i},r.toEvaluationFeature=qo,r.transformMat3=function(i,e,n){var c=e[0],p=e[1],_=e[2];return i[0]=c*n[0]+p*n[3]+_*n[6],i[1]=c*n[1]+p*n[4]+_*n[7],i[2]=c*n[2]+p*n[5]+_*n[8],i},r.transformMat4=Xc,r.transformMat4$1=function(i,e,n){var c=e[0],p=e[1];return i[0]=n[0]*c+n[4]*p+n[12],i[1]=n[1]*c+n[5]*p+n[13],i},r.translate=function(i,e,n){var c,p,_,b,w,S,D,z,N,j,H,q,ue=n[0],re=n[1],Se=n[2];return e===i?(i[12]=e[0]*ue+e[4]*re+e[8]*Se+e[12],i[13]=e[1]*ue+e[5]*re+e[9]*Se+e[13],i[14]=e[2]*ue+e[6]*re+e[10]*Se+e[14],i[15]=e[3]*ue+e[7]*re+e[11]*Se+e[15]):(p=e[1],_=e[2],b=e[3],w=e[4],S=e[5],D=e[6],z=e[7],N=e[8],j=e[9],H=e[10],q=e[11],i[0]=c=e[0],i[1]=p,i[2]=_,i[3]=b,i[4]=w,i[5]=S,i[6]=D,i[7]=z,i[8]=N,i[9]=j,i[10]=H,i[11]=q,i[12]=c*ue+w*re+N*Se+e[12],i[13]=p*ue+S*re+j*Se+e[13],i[14]=_*ue+D*re+H*Se+e[14],i[15]=b*ue+z*re+q*Se+e[15]),i},r.triggerPluginCompletionEvent=Nc,r.unicodeBlockLookup=At,r.uniqueId=function(){return he++},r.validateCustomStyleLayer=function(i){const e=[],n=i.id;return n===void 0&&e.push({message:`layers.${n}: missing required property "id"`}),i.render===void 0&&e.push({message:`layers.${n}: missing required method "render"`}),i.renderingMode&&i.renderingMode!=="2d"&&i.renderingMode!=="3d"&&e.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),e},r.validateLight=Fl,r.validateStyle=Oo,r.vectorTile=uo,r.warnOnce=Oe,r.wrap=K}),g(["./shared"],function(r){function T(W){const L=typeof W;if(L==="number"||L==="boolean"||L==="string"||W==null)return JSON.stringify(W);if(Array.isArray(W)){let U="[";for(const X of W)U+=`${T(X)},`;return`${U}]`}const B=Object.keys(W).sort();let R="{";for(let U=0;U<B.length;U++)R+=`${JSON.stringify(B[U])}:${T(W[B[U]])},`;return`${R}}`}function A(W){let L="";for(const B of r.refProperties)L+=`/${T(W[B])}`;return L}class C{constructor(L){this.keyCache={},L&&this.replace(L)}replace(L){this._layerConfigs={},this._layers={},this.update(L,[])}update(L,B){for(const U of L){this._layerConfigs[U.id]=U;const X=this._layers[U.id]=r.createStyleLayer(U);X._featureFilter=r.createFilter(X.filter),this.keyCache[U.id]&&delete this.keyCache[U.id]}for(const U of B)delete this.keyCache[U],delete this._layerConfigs[U],delete this._layers[U];this.familiesBySource={};const R=function(U,X){const ce={};for(let oe=0;oe<U.length;oe++){const fe=X&&X[U[oe].id]||A(U[oe]);X&&(X[U[oe].id]=fe);let Be=ce[fe];Be||(Be=ce[fe]=[]),Be.push(U[oe])}const ne=[];for(const oe in ce)ne.push(ce[oe]);return ne}(Object.values(this._layerConfigs),this.keyCache);for(const U of R){const X=U.map(Ye=>this._layers[Ye.id]),ce=X[0];if(ce.visibility==="none")continue;const ne=ce.source||"";let oe=this.familiesBySource[ne];oe||(oe=this.familiesBySource[ne]={});const fe=ce.sourceLayer||"_geojsonTileLayer";let Be=oe[fe];Be||(Be=oe[fe]=[]),Be.push(X)}}}class I{constructor(L){const B={},R=[];for(const ne in L){const oe=L[ne],fe=B[ne]={};for(const Be in oe){const Ye=oe[+Be];if(!Ye||Ye.bitmap.width===0||Ye.bitmap.height===0)continue;const Re={x:0,y:0,w:Ye.bitmap.width+2,h:Ye.bitmap.height+2};R.push(Re),fe[Be]={rect:Re,metrics:Ye.metrics}}}const{w:U,h:X}=r.potpack(R),ce=new r.AlphaImage({width:U||1,height:X||1});for(const ne in L){const oe=L[ne];for(const fe in oe){const Be=oe[+fe];if(!Be||Be.bitmap.width===0||Be.bitmap.height===0)continue;const Ye=B[ne][fe].rect;r.AlphaImage.copy(Be.bitmap,ce,{x:0,y:0},{x:Ye.x+1,y:Ye.y+1},Be.bitmap)}}this.image=ce,this.positions=B}}r.register("GlyphAtlas",I);class k{constructor(L){this.tileID=new r.OverscaledTileID(L.tileID.overscaledZ,L.tileID.wrap,L.tileID.canonical.z,L.tileID.canonical.x,L.tileID.canonical.y),this.uid=L.uid,this.zoom=L.zoom,this.pixelRatio=L.pixelRatio,this.tileSize=L.tileSize,this.source=L.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=L.showCollisionBoxes,this.collectResourceTiming=!!L.collectResourceTiming,this.returnDependencies=!!L.returnDependencies,this.promoteId=L.promoteId}parse(L,B,R,U,X){this.status="parsing",this.data=L,this.collisionBoxArray=new r.CollisionBoxArray;const ce=new r.DictionaryCoder(Object.keys(L.layers).sort()),ne=new r.FeatureIndex(this.tileID,this.promoteId);ne.bucketLayerIDs=[];const oe={},fe={featureIndex:ne,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:R},Be=B.familiesBySource[this.source];for(const Zt in Be){const Rt=L.layers[Zt];if(!Rt)continue;Rt.version===1&&r.warnOnce(`Vector tile source "${this.source}" layer "${Zt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const oi=ce.encode(Zt),ji=[];for(let yn=0;yn<Rt.length;yn++){const Ji=Rt.feature(yn),Pn=ne.getId(Ji,Zt);ji.push({feature:Ji,id:Pn,index:yn,sourceLayerIndex:oi})}for(const yn of Be[Zt]){const Ji=yn[0];Ji.source!==this.source&&r.warnOnce(`layer.source = ${Ji.source} does not equal this.source = ${this.source}`),Ji.minzoom&&this.zoom<Math.floor(Ji.minzoom)||Ji.maxzoom&&this.zoom>=Ji.maxzoom||Ji.visibility!=="none"&&(K(yn,this.zoom,R),(oe[Ji.id]=Ji.createBucket({index:ne.bucketLayerIDs.length,layers:yn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:oi,sourceID:this.source})).populate(ji,fe,this.tileID.canonical),ne.bucketLayerIDs.push(yn.map(Pn=>Pn.id)))}}let Ye,Re,ht,ft;const Ee=r.mapObject(fe.glyphDependencies,Zt=>Object.keys(Zt).map(Number));Object.keys(Ee).length?U.send("getGlyphs",{uid:this.uid,stacks:Ee},(Zt,Rt)=>{Ye||(Ye=Zt,Re=Rt,bt.call(this))}):Re={};const rt=Object.keys(fe.iconDependencies);rt.length?U.send("getImages",{icons:rt,source:this.source,tileID:this.tileID,type:"icons"},(Zt,Rt)=>{Ye||(Ye=Zt,ht=Rt,bt.call(this))}):ht={};const lt=Object.keys(fe.patternDependencies);function bt(){if(Ye)return X(Ye);if(Re&&ht&&ft){const Zt=new I(Re),Rt=new r.ImageAtlas(ht,ft);for(const oi in oe){const ji=oe[oi];ji instanceof r.SymbolBucket?(K(ji.layers,this.zoom,R),r.performSymbolLayout({bucket:ji,glyphMap:Re,glyphPositions:Zt.positions,imageMap:ht,imagePositions:Rt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):ji.hasPattern&&(ji instanceof r.LineBucket||ji instanceof r.FillBucket||ji instanceof r.FillExtrusionBucket)&&(K(ji.layers,this.zoom,R),ji.addFeatures(fe,this.tileID.canonical,Rt.patternPositions))}this.status="done",X(null,{buckets:Object.values(oe).filter(oi=>!oi.isEmpty()),featureIndex:ne,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Zt.image,imageAtlas:Rt,glyphMap:this.returnDependencies?Re:null,iconMap:this.returnDependencies?ht:null,glyphPositions:this.returnDependencies?Zt.positions:null})}}lt.length?U.send("getImages",{icons:lt,source:this.source,tileID:this.tileID,type:"patterns"},(Zt,Rt)=>{Ye||(Ye=Zt,ft=Rt,bt.call(this))}):ft={},bt.call(this)}}function K(W,L,B){const R=new r.EvaluationParameters(L);for(const U of W)U.recalculate(R,B)}function $(W,L){const B=r.getArrayBuffer(W.request,(R,U,X,ce)=>{R?L(R):U&&L(null,{vectorTile:new r.vectorTile.VectorTile(new r.pbf(U)),rawData:U,cacheControl:X,expires:ce})});return()=>{B.cancel(),L()}}class he{constructor(L,B,R,U){this.actor=L,this.layerIndex=B,this.availableImages=R,this.loadVectorData=U||$,this.loading={},this.loaded={}}loadTile(L,B){const R=L.uid;this.loading||(this.loading={});const U=!!(L&&L.request&&L.request.collectResourceTiming)&&new r.RequestPerformance(L.request),X=this.loading[R]=new k(L);X.abort=this.loadVectorData(L,(ce,ne)=>{if(delete this.loading[R],ce||!ne)return X.status="done",this.loaded[R]=X,B(ce);const oe=ne.rawData,fe={};ne.expires&&(fe.expires=ne.expires),ne.cacheControl&&(fe.cacheControl=ne.cacheControl);const Be={};if(U){const Ye=U.finish();Ye&&(Be.resourceTiming=JSON.parse(JSON.stringify(Ye)))}X.vectorTile=ne.vectorTile,X.parse(ne.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ye,Re)=>{if(Ye||!Re)return B(Ye);B(null,r.extend({rawTileData:oe.slice(0)},Re,fe,Be))}),this.loaded=this.loaded||{},this.loaded[R]=X})}reloadTile(L,B){const R=this.loaded,U=L.uid,X=this;if(R&&R[U]){const ce=R[U];ce.showCollisionBoxes=L.showCollisionBoxes;const ne=(oe,fe)=>{const Be=ce.reloadCallback;Be&&(delete ce.reloadCallback,ce.parse(ce.vectorTile,X.layerIndex,this.availableImages,X.actor,Be)),B(oe,fe)};ce.status==="parsing"?ce.reloadCallback=ne:ce.status==="done"&&(ce.vectorTile?ce.parse(ce.vectorTile,this.layerIndex,this.availableImages,this.actor,ne):ne())}}abortTile(L,B){const R=this.loading,U=L.uid;R&&R[U]&&R[U].abort&&(R[U].abort(),delete R[U]),B()}removeTile(L,B){const R=this.loaded,U=L.uid;R&&R[U]&&delete R[U],B()}}class we{constructor(){this.loaded={}}loadTile(L,B){const{uid:R,encoding:U,rawImageData:X}=L,ce=r.isImageBitmap(X)?this.getImageData(X):X,ne=new r.DEMData(R,ce,U);this.loaded=this.loaded||{},this.loaded[R]=ne,B(null,ne)}getImageData(L){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(L.width,L.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=L.width,this.offscreenCanvas.height=L.height,this.offscreenCanvasContext.drawImage(L,0,0,L.width,L.height);const B=this.offscreenCanvasContext.getImageData(-1,-1,L.width+2,L.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new r.RGBAImage({width:B.width,height:B.height},B.data)}removeTile(L){const B=this.loaded,R=L.uid;B&&B[R]&&delete B[R]}}var Te=function W(L,B){var R,U=L&&L.type;if(U==="FeatureCollection")for(R=0;R<L.features.length;R++)W(L.features[R],B);else if(U==="GeometryCollection")for(R=0;R<L.geometries.length;R++)W(L.geometries[R],B);else if(U==="Feature")W(L.geometry,B);else if(U==="Polygon")me(L.coordinates,B);else if(U==="MultiPolygon")for(R=0;R<L.coordinates.length;R++)me(L.coordinates[R],B);return L};function me(W,L){if(W.length!==0){Le(W[0],L);for(var B=1;B<W.length;B++)Le(W[B],!L)}}function Le(W,L){for(var B=0,R=0,U=0,X=W.length,ce=X-1;U<X;ce=U++){var ne=(W[U][0]-W[ce][0])*(W[ce][1]+W[U][1]),oe=B+ne;R+=Math.abs(B)>=Math.abs(ne)?B-oe+ne:ne-oe+B,B=oe}B+R>=0!=!!L&&W.reverse()}const Ue=r.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Oe{constructor(L){this._feature=L,this.extent=r.EXTENT,this.type=L.type,this.properties=L.tags,"id"in L&&!isNaN(L.id)&&(this.id=parseInt(L.id,10))}loadGeometry(){if(this._feature.type===1){const L=[];for(const B of this._feature.geometry)L.push([new r.pointGeometry(B[0],B[1])]);return L}{const L=[];for(const B of this._feature.geometry){const R=[];for(const U of B)R.push(new r.pointGeometry(U[0],U[1]));L.push(R)}return L}}toGeoJSON(L,B,R){return Ue.call(this,L,B,R)}}class We{constructor(L){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=r.EXTENT,this.length=L.length,this._features=L}feature(L){return new Oe(this._features[L])}}var Me={exports:{}},Ve=r.pointGeometry,tt=r.vectorTile.VectorTileFeature,it=dt;function dt(W,L){this.options=L||{},this.features=W,this.length=W.length}function Dt(W,L){this.id=typeof W.id=="number"?W.id:void 0,this.type=W.type,this.rawGeometry=W.type===1?[W.geometry]:W.geometry,this.properties=W.tags,this.extent=L||4096}dt.prototype.feature=function(W){return new Dt(this.features[W],this.options.extent)},Dt.prototype.loadGeometry=function(){var W=this.rawGeometry;this.geometry=[];for(var L=0;L<W.length;L++){for(var B=W[L],R=[],U=0;U<B.length;U++)R.push(new Ve(B[U][0],B[U][1]));this.geometry.push(R)}return this.geometry},Dt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var W=this.geometry,L=1/0,B=-1/0,R=1/0,U=-1/0,X=0;X<W.length;X++)for(var ce=W[X],ne=0;ne<ce.length;ne++){var oe=ce[ne];L=Math.min(L,oe.x),B=Math.max(B,oe.x),R=Math.min(R,oe.y),U=Math.max(U,oe.y)}return[L,R,B,U]},Dt.prototype.toGeoJSON=tt.prototype.toGeoJSON;var He=r.pbf,Xe=it;function pt(W){var L=new He;return function(B,R){for(var U in B.layers)R.writeMessage(3,Ne,B.layers[U])}(W,L),L.finish()}function Ne(W,L){var B;L.writeVarintField(15,W.version||1),L.writeStringField(1,W.name||""),L.writeVarintField(5,W.extent||4096);var R={keys:[],values:[],keycache:{},valuecache:{}};for(B=0;B<W.length;B++)R.feature=W.feature(B),L.writeMessage(2,Ft,R);var U=R.keys;for(B=0;B<U.length;B++)L.writeStringField(3,U[B]);var X=R.values;for(B=0;B<X.length;B++)L.writeMessage(4,bi,X[B])}function Ft(W,L){var B=W.feature;B.id!==void 0&&L.writeVarintField(1,B.id),L.writeMessage(2,ut,W),L.writeVarintField(3,B.type),L.writeMessage(4,mi,B)}function ut(W,L){var B=W.feature,R=W.keys,U=W.values,X=W.keycache,ce=W.valuecache;for(var ne in B.properties){var oe=B.properties[ne],fe=X[ne];if(oe!==null){fe===void 0&&(R.push(ne),X[ne]=fe=R.length-1),L.writeVarint(fe);var Be=typeof oe;Be!=="string"&&Be!=="boolean"&&Be!=="number"&&(oe=JSON.stringify(oe));var Ye=Be+":"+oe,Re=ce[Ye];Re===void 0&&(U.push(oe),ce[Ye]=Re=U.length-1),L.writeVarint(Re)}}}function jt(W,L){return(L<<3)+(7&W)}function yt(W){return W<<1^W>>31}function mi(W,L){for(var B=W.loadGeometry(),R=W.type,U=0,X=0,ce=B.length,ne=0;ne<ce;ne++){var oe=B[ne],fe=1;R===1&&(fe=oe.length),L.writeVarint(jt(1,fe));for(var Be=R===3?oe.length-1:oe.length,Ye=0;Ye<Be;Ye++){Ye===1&&R!==1&&L.writeVarint(jt(2,Be-1));var Re=oe[Ye].x-U,ht=oe[Ye].y-X;L.writeVarint(yt(Re)),L.writeVarint(yt(ht)),U+=Re,X+=ht}R===3&&L.writeVarint(jt(7,1))}}function bi(W,L){var B=typeof W;B==="string"?L.writeStringField(1,W):B==="boolean"?L.writeBooleanField(7,W):B==="number"&&(W%1!=0?L.writeDoubleField(3,W):W<0?L.writeSVarintField(6,W):L.writeVarintField(5,W))}function gi(W,L,B,R,U,X){if(U-R<=B)return;const ce=R+U>>1;Lt(W,L,ce,R,U,X%2),gi(W,L,B,R,ce-1,X+1),gi(W,L,B,ce+1,U,X+1)}function Lt(W,L,B,R,U,X){for(;U>R;){if(U-R>600){const fe=U-R+1,Be=B-R+1,Ye=Math.log(fe),Re=.5*Math.exp(2*Ye/3),ht=.5*Math.sqrt(Ye*Re*(fe-Re)/fe)*(Be-fe/2<0?-1:1);Lt(W,L,B,Math.max(R,Math.floor(B-Be*Re/fe+ht)),Math.min(U,Math.floor(B+(fe-Be)*Re/fe+ht)),X)}const ce=L[2*B+X];let ne=R,oe=U;for(vi(W,L,R,B),L[2*U+X]>ce&&vi(W,L,R,U);ne<oe;){for(vi(W,L,ne,oe),ne++,oe--;L[2*ne+X]<ce;)ne++;for(;L[2*oe+X]>ce;)oe--}L[2*R+X]===ce?vi(W,L,R,oe):(oe++,vi(W,L,oe,U)),oe<=B&&(R=oe+1),B<=oe&&(U=oe-1)}}function vi(W,L,B,R){Qt(W,B,R),Qt(L,2*B,2*R),Qt(L,2*B+1,2*R+1)}function Qt(W,L,B){const R=W[L];W[L]=W[B],W[B]=R}function ui(W,L,B,R){const U=W-B,X=L-R;return U*U+X*X}Me.exports=pt,Me.exports.fromVectorTileJs=pt,Me.exports.fromGeojsonVt=function(W,L){L=L||{};var B={};for(var R in W)B[R]=new Xe(W[R].features,L),B[R].name=R,B[R].version=L.version,B[R].extent=L.extent;return pt({layers:B})},Me.exports.GeoJSONWrapper=Xe;const Ui=W=>W[0],pi=W=>W[1];class ot{constructor(L,B=Ui,R=pi,U=64,X=Float64Array){this.nodeSize=U,this.points=L;const ce=L.length<65536?Uint16Array:Uint32Array,ne=this.ids=new ce(L.length),oe=this.coords=new X(2*L.length);for(let fe=0;fe<L.length;fe++)ne[fe]=fe,oe[2*fe]=B(L[fe]),oe[2*fe+1]=R(L[fe]);gi(ne,oe,U,0,ne.length-1,0)}range(L,B,R,U){return function(X,ce,ne,oe,fe,Be,Ye){const Re=[0,X.length-1,0],ht=[];let ft,Ee;for(;Re.length;){const rt=Re.pop(),lt=Re.pop(),bt=Re.pop();if(lt-bt<=Ye){for(let oi=bt;oi<=lt;oi++)ft=ce[2*oi],Ee=ce[2*oi+1],ft>=ne&&ft<=fe&&Ee>=oe&&Ee<=Be&&ht.push(X[oi]);continue}const Zt=Math.floor((bt+lt)/2);ft=ce[2*Zt],Ee=ce[2*Zt+1],ft>=ne&&ft<=fe&&Ee>=oe&&Ee<=Be&&ht.push(X[Zt]);const Rt=(rt+1)%2;(rt===0?ne<=ft:oe<=Ee)&&(Re.push(bt),Re.push(Zt-1),Re.push(Rt)),(rt===0?fe>=ft:Be>=Ee)&&(Re.push(Zt+1),Re.push(lt),Re.push(Rt))}return ht}(this.ids,this.coords,L,B,R,U,this.nodeSize)}within(L,B,R){return function(U,X,ce,ne,oe,fe){const Be=[0,U.length-1,0],Ye=[],Re=oe*oe;for(;Be.length;){const ht=Be.pop(),ft=Be.pop(),Ee=Be.pop();if(ft-Ee<=fe){for(let Rt=Ee;Rt<=ft;Rt++)ui(X[2*Rt],X[2*Rt+1],ce,ne)<=Re&&Ye.push(U[Rt]);continue}const rt=Math.floor((Ee+ft)/2),lt=X[2*rt],bt=X[2*rt+1];ui(lt,bt,ce,ne)<=Re&&Ye.push(U[rt]);const Zt=(ht+1)%2;(ht===0?ce-oe<=lt:ne-oe<=bt)&&(Be.push(Ee),Be.push(rt-1),Be.push(Zt)),(ht===0?ce+oe>=lt:ne+oe>=bt)&&(Be.push(rt+1),Be.push(ft),Be.push(Zt))}return Ye}(this.ids,this.coords,L,B,R,this.nodeSize)}}const Bi={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:W=>W},wi=Math.fround||(Qe=new Float32Array(1),W=>(Qe[0]=+W,Qe[0]));var Qe;class Nt{constructor(L){this.options=ei(Object.create(Bi),L),this.trees=new Array(this.options.maxZoom+1)}load(L){const{log:B,minZoom:R,maxZoom:U,nodeSize:X}=this.options;B&&console.time("total time");const ce=`prepare ${L.length} points`;B&&console.time(ce),this.points=L;let ne=[];for(let oe=0;oe<L.length;oe++)L[oe].geometry&&ne.push(Vi(L[oe],oe));this.trees[U+1]=new ot(ne,qt,Xi,X,Float32Array),B&&console.timeEnd(ce);for(let oe=U;oe>=R;oe--){const fe=+Date.now();ne=this._cluster(ne,oe),this.trees[oe]=new ot(ne,qt,Xi,X,Float32Array),B&&console.log("z%d: %d clusters in %dms",oe,ne.length,+Date.now()-fe)}return B&&console.timeEnd("total time"),this}getClusters(L,B){let R=((L[0]+180)%360+360)%360-180;const U=Math.max(-90,Math.min(90,L[1]));let X=L[2]===180?180:((L[2]+180)%360+360)%360-180;const ce=Math.max(-90,Math.min(90,L[3]));if(L[2]-L[0]>=360)R=-180,X=180;else if(R>X){const Be=this.getClusters([R,U,180,ce],B),Ye=this.getClusters([-180,U,X,ce],B);return Be.concat(Ye)}const ne=this.trees[this._limitZoom(B)],oe=ne.range(ni(R),si(ce),ni(X),si(U)),fe=[];for(const Be of oe){const Ye=ne.points[Be];fe.push(Ye.numPoints?fn(Ye):this.points[Ye.index])}return fe}getChildren(L){const B=this._getOriginId(L),R=this._getOriginZoom(L),U="No cluster with the specified id.",X=this.trees[R];if(!X)throw new Error(U);const ce=X.points[B];if(!ce)throw new Error(U);const ne=this.options.radius/(this.options.extent*Math.pow(2,R-1)),oe=X.within(ce.x,ce.y,ne),fe=[];for(const Be of oe){const Ye=X.points[Be];Ye.parentId===L&&fe.push(Ye.numPoints?fn(Ye):this.points[Ye.index])}if(fe.length===0)throw new Error(U);return fe}getLeaves(L,B,R){const U=[];return this._appendLeaves(U,L,B=B||10,R=R||0,0),U}getTile(L,B,R){const U=this.trees[this._limitZoom(L)],X=Math.pow(2,L),{extent:ce,radius:ne}=this.options,oe=ne/ce,fe=(R-oe)/X,Be=(R+1+oe)/X,Ye={features:[]};return this._addTileFeatures(U.range((B-oe)/X,fe,(B+1+oe)/X,Be),U.points,B,R,X,Ye),B===0&&this._addTileFeatures(U.range(1-oe/X,fe,1,Be),U.points,X,R,X,Ye),B===X-1&&this._addTileFeatures(U.range(0,fe,oe/X,Be),U.points,-1,R,X,Ye),Ye.features.length?Ye:null}getClusterExpansionZoom(L){let B=this._getOriginZoom(L)-1;for(;B<=this.options.maxZoom;){const R=this.getChildren(L);if(B++,R.length!==1)break;L=R[0].properties.cluster_id}return B}_appendLeaves(L,B,R,U,X){const ce=this.getChildren(B);for(const ne of ce){const oe=ne.properties;if(oe&&oe.cluster?X+oe.point_count<=U?X+=oe.point_count:X=this._appendLeaves(L,oe.cluster_id,R,U,X):X<U?X++:L.push(ne),L.length===R)break}return X}_addTileFeatures(L,B,R,U,X,ce){for(const ne of L){const oe=B[ne],fe=oe.numPoints;let Be,Ye,Re;if(fe)Be=Mi(oe),Ye=oe.x,Re=oe.y;else{const Ee=this.points[oe.index];Be=Ee.properties,Ye=ni(Ee.geometry.coordinates[0]),Re=si(Ee.geometry.coordinates[1])}const ht={type:1,geometry:[[Math.round(this.options.extent*(Ye*X-R)),Math.round(this.options.extent*(Re*X-U))]],tags:Be};let ft;fe?ft=oe.id:this.options.generateId?ft=oe.index:this.points[oe.index].id&&(ft=this.points[oe.index].id),ft!==void 0&&(ht.id=ft),ce.features.push(ht)}}_limitZoom(L){return Math.max(this.options.minZoom,Math.min(Math.floor(+L),this.options.maxZoom+1))}_cluster(L,B){const R=[],{radius:U,extent:X,reduce:ce,minPoints:ne}=this.options,oe=U/(X*Math.pow(2,B));for(let fe=0;fe<L.length;fe++){const Be=L[fe];if(Be.zoom<=B)continue;Be.zoom=B;const Ye=this.trees[B+1],Re=Ye.within(Be.x,Be.y,oe),ht=Be.numPoints||1;let ft=ht;for(const Ee of Re){const rt=Ye.points[Ee];rt.zoom>B&&(ft+=rt.numPoints||1)}if(ft>ht&&ft>=ne){let Ee=Be.x*ht,rt=Be.y*ht,lt=ce&&ht>1?this._map(Be,!0):null;const bt=(fe<<5)+(B+1)+this.points.length;for(const Zt of Re){const Rt=Ye.points[Zt];if(Rt.zoom<=B)continue;Rt.zoom=B;const oi=Rt.numPoints||1;Ee+=Rt.x*oi,rt+=Rt.y*oi,Rt.parentId=bt,ce&&(lt||(lt=this._map(Be,!0)),ce(lt,this._map(Rt)))}Be.parentId=bt,R.push(ki(Ee/ft,rt/ft,bt,ft,lt))}else if(R.push(Be),ft>1)for(const Ee of Re){const rt=Ye.points[Ee];rt.zoom<=B||(rt.zoom=B,R.push(rt))}}return R}_getOriginId(L){return L-this.points.length>>5}_getOriginZoom(L){return(L-this.points.length)%32}_map(L,B){if(L.numPoints)return B?ei({},L.properties):L.properties;const R=this.points[L.index].properties,U=this.options.map(R);return B&&U===R?ei({},U):U}}function ki(W,L,B,R,U){return{x:wi(W),y:wi(L),zoom:1/0,id:B,parentId:-1,numPoints:R,properties:U}}function Vi(W,L){const[B,R]=W.geometry.coordinates;return{x:wi(ni(B)),y:wi(si(R)),zoom:1/0,index:L,parentId:-1}}function fn(W){return{type:"Feature",id:W.id,properties:Mi(W),geometry:{type:"Point",coordinates:[(L=W.x,360*(L-.5)),Dn(W.y)]}};var L}function Mi(W){const L=W.numPoints,B=L>=1e4?`${Math.round(L/1e3)}k`:L>=1e3?Math.round(L/100)/10+"k":L;return ei(ei({},W.properties),{cluster:!0,cluster_id:W.id,point_count:L,point_count_abbreviated:B})}function ni(W){return W/360+.5}function si(W){const L=Math.sin(W*Math.PI/180),B=.5-.25*Math.log((1+L)/(1-L))/Math.PI;return B<0?0:B>1?1:B}function Dn(W){const L=(180-360*W)*Math.PI/180;return 360*Math.atan(Math.exp(L))/Math.PI-90}function ei(W,L){for(const B in L)W[B]=L[B];return W}function qt(W){return W.x}function Xi(W){return W.y}function ti(W,L,B,R){for(var U,X=R,ce=B-L>>1,ne=B-L,oe=W[L],fe=W[L+1],Be=W[B],Ye=W[B+1],Re=L+3;Re<B;Re+=3){var ht=mn(W[Re],W[Re+1],oe,fe,Be,Ye);if(ht>X)U=Re,X=ht;else if(ht===X){var ft=Math.abs(Re-ce);ft<ne&&(U=Re,ne=ft)}}X>R&&(U-L>3&&ti(W,L,U,R),W[U+2]=X,B-U>3&&ti(W,U,B,R))}function mn(W,L,B,R,U,X){var ce=U-B,ne=X-R;if(ce!==0||ne!==0){var oe=((W-B)*ce+(L-R)*ne)/(ce*ce+ne*ne);oe>1?(B=U,R=X):oe>0&&(B+=ce*oe,R+=ne*oe)}return(ce=W-B)*ce+(ne=L-R)*ne}function xn(W,L,B,R){var U={id:W===void 0?null:W,type:L,geometry:B,tags:R,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(X){var ce=X.geometry,ne=X.type;if(ne==="Point"||ne==="MultiPoint"||ne==="LineString")se(X,ce);else if(ne==="Polygon"||ne==="MultiLineString")for(var oe=0;oe<ce.length;oe++)se(X,ce[oe]);else if(ne==="MultiPolygon")for(oe=0;oe<ce.length;oe++)for(var fe=0;fe<ce[oe].length;fe++)se(X,ce[oe][fe])}(U),U}function se(W,L){for(var B=0;B<L.length;B+=3)W.minX=Math.min(W.minX,L[B]),W.minY=Math.min(W.minY,L[B+1]),W.maxX=Math.max(W.maxX,L[B]),W.maxY=Math.max(W.maxY,L[B+1])}function Ie(W,L,B,R){if(L.geometry){var U=L.geometry.coordinates,X=L.geometry.type,ce=Math.pow(B.tolerance/((1<<B.maxZoom)*B.extent),2),ne=[],oe=L.id;if(B.promoteId?oe=L.properties[B.promoteId]:B.generateId&&(oe=R||0),X==="Point")mt(U,ne);else if(X==="MultiPoint")for(var fe=0;fe<U.length;fe++)mt(U[fe],ne);else if(X==="LineString")li(U,ne,ce,!1);else if(X==="MultiLineString"){if(B.lineMetrics){for(fe=0;fe<U.length;fe++)li(U[fe],ne=[],ce,!1),W.push(xn(oe,"LineString",ne,L.properties));return}$t(U,ne,ce,!1)}else if(X==="Polygon")$t(U,ne,ce,!0);else{if(X!=="MultiPolygon"){if(X==="GeometryCollection"){for(fe=0;fe<L.geometry.geometries.length;fe++)Ie(W,{id:oe,geometry:L.geometry.geometries[fe],properties:L.properties},B,R);return}throw new Error("Input data is not a valid GeoJSON object.")}for(fe=0;fe<U.length;fe++){var Be=[];$t(U[fe],Be,ce,!0),ne.push(Be)}}W.push(xn(oe,X,ne,L.properties))}}function mt(W,L){L.push(di(W[0])),L.push(Pi(W[1])),L.push(0)}function li(W,L,B,R){for(var U,X,ce=0,ne=0;ne<W.length;ne++){var oe=di(W[ne][0]),fe=Pi(W[ne][1]);L.push(oe),L.push(fe),L.push(0),ne>0&&(ce+=R?(U*fe-oe*X)/2:Math.sqrt(Math.pow(oe-U,2)+Math.pow(fe-X,2))),U=oe,X=fe}var Be=L.length-3;L[2]=1,ti(L,0,Be,B),L[Be+2]=1,L.size=Math.abs(ce),L.start=0,L.end=L.size}function $t(W,L,B,R){for(var U=0;U<W.length;U++){var X=[];li(W[U],X,B,R),L.push(X)}}function di(W){return W/360+.5}function Pi(W){var L=Math.sin(W*Math.PI/180),B=.5-.25*Math.log((1+L)/(1-L))/Math.PI;return B<0?0:B>1?1:B}function tn(W,L,B,R,U,X,ce,ne){if(R/=L,X>=(B/=L)&&ce<R)return W;if(ce<B||X>=R)return null;for(var oe=[],fe=0;fe<W.length;fe++){var Be=W[fe],Ye=Be.geometry,Re=Be.type,ht=U===0?Be.minX:Be.minY,ft=U===0?Be.maxX:Be.maxY;if(ht>=B&&ft<R)oe.push(Be);else if(!(ft<B||ht>=R)){var Ee=[];if(Re==="Point"||Re==="MultiPoint")xi(Ye,Ee,B,R,U);else if(Re==="LineString")nt(Ye,Ee,B,R,U,!1,ne.lineMetrics);else if(Re==="MultiLineString")Ut(Ye,Ee,B,R,U,!1);else if(Re==="Polygon")Ut(Ye,Ee,B,R,U,!0);else if(Re==="MultiPolygon")for(var rt=0;rt<Ye.length;rt++){var lt=[];Ut(Ye[rt],lt,B,R,U,!0),lt.length&&Ee.push(lt)}if(Ee.length){if(ne.lineMetrics&&Re==="LineString"){for(rt=0;rt<Ee.length;rt++)oe.push(xn(Be.id,Re,Ee[rt],Be.tags));continue}Re!=="LineString"&&Re!=="MultiLineString"||(Ee.length===1?(Re="LineString",Ee=Ee[0]):Re="MultiLineString"),Re!=="Point"&&Re!=="MultiPoint"||(Re=Ee.length===3?"Point":"MultiPoint"),oe.push(xn(Be.id,Re,Ee,Be.tags))}}}return oe.length?oe:null}function xi(W,L,B,R,U){for(var X=0;X<W.length;X+=3){var ce=W[X+U];ce>=B&&ce<=R&&(L.push(W[X]),L.push(W[X+1]),L.push(W[X+2]))}}function nt(W,L,B,R,U,X,ce){for(var ne,oe,fe=ii(W),Be=U===0?wn:Vt,Ye=W.start,Re=0;Re<W.length-3;Re+=3){var ht=W[Re],ft=W[Re+1],Ee=W[Re+2],rt=W[Re+3],lt=W[Re+4],bt=U===0?ht:ft,Zt=U===0?rt:lt,Rt=!1;ce&&(ne=Math.sqrt(Math.pow(ht-rt,2)+Math.pow(ft-lt,2))),bt<B?Zt>B&&(oe=Be(fe,ht,ft,rt,lt,B),ce&&(fe.start=Ye+ne*oe)):bt>R?Zt<R&&(oe=Be(fe,ht,ft,rt,lt,R),ce&&(fe.start=Ye+ne*oe)):Yi(fe,ht,ft,Ee),Zt<B&&bt>=B&&(oe=Be(fe,ht,ft,rt,lt,B),Rt=!0),Zt>R&&bt<=R&&(oe=Be(fe,ht,ft,rt,lt,R),Rt=!0),!X&&Rt&&(ce&&(fe.end=Ye+ne*oe),L.push(fe),fe=ii(W)),ce&&(Ye+=ne)}var oi=W.length-3;ht=W[oi],ft=W[oi+1],Ee=W[oi+2],(bt=U===0?ht:ft)>=B&&bt<=R&&Yi(fe,ht,ft,Ee),oi=fe.length-3,X&&oi>=3&&(fe[oi]!==fe[0]||fe[oi+1]!==fe[1])&&Yi(fe,fe[0],fe[1],fe[2]),fe.length&&L.push(fe)}function ii(W){var L=[];return L.size=W.size,L.start=W.start,L.end=W.end,L}function Ut(W,L,B,R,U,X){for(var ce=0;ce<W.length;ce++)nt(W[ce],L,B,R,U,X,!1)}function Yi(W,L,B,R){W.push(L),W.push(B),W.push(R)}function wn(W,L,B,R,U,X){var ce=(X-L)/(R-L);return W.push(X),W.push(B+(U-B)*ce),W.push(1),ce}function Vt(W,L,B,R,U,X){var ce=(X-B)/(U-B);return W.push(L+(R-L)*ce),W.push(X),W.push(1),ce}function Cn(W,L){for(var B=[],R=0;R<W.length;R++){var U,X=W[R],ce=X.type;if(ce==="Point"||ce==="MultiPoint"||ce==="LineString")U=Zi(X.geometry,L);else if(ce==="MultiLineString"||ce==="Polygon"){U=[];for(var ne=0;ne<X.geometry.length;ne++)U.push(Zi(X.geometry[ne],L))}else if(ce==="MultiPolygon")for(U=[],ne=0;ne<X.geometry.length;ne++){for(var oe=[],fe=0;fe<X.geometry[ne].length;fe++)oe.push(Zi(X.geometry[ne][fe],L));U.push(oe)}B.push(xn(X.id,ce,U,X.tags))}return B}function Zi(W,L){var B=[];B.size=W.size,W.start!==void 0&&(B.start=W.start,B.end=W.end);for(var R=0;R<W.length;R+=3)B.push(W[R]+L,W[R+1],W[R+2]);return B}function sa(W,L){if(W.transformed)return W;var B,R,U,X=1<<W.z,ce=W.x,ne=W.y;for(B=0;B<W.features.length;B++){var oe=W.features[B],fe=oe.geometry,Be=oe.type;if(oe.geometry=[],Be===1)for(R=0;R<fe.length;R+=2)oe.geometry.push(Fi(fe[R],fe[R+1],L,X,ce,ne));else for(R=0;R<fe.length;R++){var Ye=[];for(U=0;U<fe[R].length;U+=2)Ye.push(Fi(fe[R][U],fe[R][U+1],L,X,ce,ne));oe.geometry.push(Ye)}}return W.transformed=!0,W}function Fi(W,L,B,R,U,X){return[Math.round(B*(W*R-U)),Math.round(B*(L*R-X))]}function on(W,L,B,R,U){for(var X=L===U.maxZoom?0:U.tolerance/((1<<L)*U.extent),ce={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:B,y:R,z:L,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ne=0;ne<W.length;ne++){ce.numFeatures++,fi(ce,W[ne],X,U);var oe=W[ne].minX,fe=W[ne].minY,Be=W[ne].maxX,Ye=W[ne].maxY;oe<ce.minX&&(ce.minX=oe),fe<ce.minY&&(ce.minY=fe),Be>ce.maxX&&(ce.maxX=Be),Ye>ce.maxY&&(ce.maxY=Ye)}return ce}function fi(W,L,B,R){var U=L.geometry,X=L.type,ce=[];if(X==="Point"||X==="MultiPoint")for(var ne=0;ne<U.length;ne+=3)ce.push(U[ne]),ce.push(U[ne+1]),W.numPoints++,W.numSimplified++;else if(X==="LineString")Bn(ce,U,W,B,!1,!1);else if(X==="MultiLineString"||X==="Polygon")for(ne=0;ne<U.length;ne++)Bn(ce,U[ne],W,B,X==="Polygon",ne===0);else if(X==="MultiPolygon")for(var oe=0;oe<U.length;oe++){var fe=U[oe];for(ne=0;ne<fe.length;ne++)Bn(ce,fe[ne],W,B,!0,ne===0)}if(ce.length){var Be=L.tags||null;if(X==="LineString"&&R.lineMetrics){for(var Ye in Be={},L.tags)Be[Ye]=L.tags[Ye];Be.mapbox_clip_start=U.start/U.size,Be.mapbox_clip_end=U.end/U.size}var Re={geometry:ce,type:X==="Polygon"||X==="MultiPolygon"?3:X==="LineString"||X==="MultiLineString"?2:1,tags:Be};L.id!==null&&(Re.id=L.id),W.features.push(Re)}}function Bn(W,L,B,R,U,X){var ce=R*R;if(R>0&&L.size<(U?ce:R))B.numPoints+=L.length/3;else{for(var ne=[],oe=0;oe<L.length;oe+=3)(R===0||L[oe+2]>ce)&&(B.numSimplified++,ne.push(L[oe]),ne.push(L[oe+1])),B.numPoints++;U&&function(fe,Be){for(var Ye=0,Re=0,ht=fe.length,ft=ht-2;Re<ht;ft=Re,Re+=2)Ye+=(fe[Re]-fe[ft])*(fe[Re+1]+fe[ft+1]);if(Ye>0===Be)for(Re=0,ht=fe.length;Re<ht/2;Re+=2){var Ee=fe[Re],rt=fe[Re+1];fe[Re]=fe[ht-2-Re],fe[Re+1]=fe[ht-1-Re],fe[ht-2-Re]=Ee,fe[ht-1-Re]=rt}}(ne,X),W.push(ne)}}function gn(W,L){var B=(L=this.options=function(U,X){for(var ce in X)U[ce]=X[ce];return U}(Object.create(this.options),L)).debug;if(B&&console.time("preprocess data"),L.maxZoom<0||L.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(L.promoteId&&L.generateId)throw new Error("promoteId and generateId cannot be used together.");var R=function(U,X){var ce=[];if(U.type==="FeatureCollection")for(var ne=0;ne<U.features.length;ne++)Ie(ce,U.features[ne],X,ne);else Ie(ce,U.type==="Feature"?U:{geometry:U},X);return ce}(W,L);this.tiles={},this.tileCoords=[],B&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",L.indexMaxZoom,L.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),R=function(U,X){var ce=X.buffer/X.extent,ne=U,oe=tn(U,1,-1-ce,ce,0,-1,2,X),fe=tn(U,1,1-ce,2+ce,0,-1,2,X);return(oe||fe)&&(ne=tn(U,1,-ce,1+ce,0,-1,2,X)||[],oe&&(ne=Cn(oe,1).concat(ne)),fe&&(ne=ne.concat(Cn(fe,-1)))),ne}(R,L),R.length&&this.splitTile(R,0,0,0),B&&(R.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function _n(W,L,B){return 32*((1<<W)*B+L)+W}function Sn(W,L){const B=W.tileID.canonical;if(!this._geoJSONIndex)return L(null,null);const R=this._geoJSONIndex.getTile(B.z,B.x,B.y);if(!R)return L(null,null);const U=new We(R.features);let X=Me.exports(U);X.byteOffset===0&&X.byteLength===X.buffer.byteLength||(X=new Uint8Array(X)),L(null,{vectorTile:U,rawData:X.buffer})}gn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},gn.prototype.splitTile=function(W,L,B,R,U,X,ce){for(var ne=[W,L,B,R],oe=this.options,fe=oe.debug;ne.length;){R=ne.pop(),B=ne.pop(),L=ne.pop(),W=ne.pop();var Be=1<<L,Ye=_n(L,B,R),Re=this.tiles[Ye];if(!Re&&(fe>1&&console.time("creation"),Re=this.tiles[Ye]=on(W,L,B,R,oe),this.tileCoords.push({z:L,x:B,y:R}),fe)){fe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",L,B,R,Re.numFeatures,Re.numPoints,Re.numSimplified),console.timeEnd("creation"));var ht="z"+L;this.stats[ht]=(this.stats[ht]||0)+1,this.total++}if(Re.source=W,U){if(L===oe.maxZoom||L===U)continue;var ft=1<<U-L;if(B!==Math.floor(X/ft)||R!==Math.floor(ce/ft))continue}else if(L===oe.indexMaxZoom||Re.numPoints<=oe.indexMaxPoints)continue;if(Re.source=null,W.length!==0){fe>1&&console.time("clipping");var Ee,rt,lt,bt,Zt,Rt,oi=.5*oe.buffer/oe.extent,ji=.5-oi,yn=.5+oi,Ji=1+oi;Ee=rt=lt=bt=null,Zt=tn(W,Be,B-oi,B+yn,0,Re.minX,Re.maxX,oe),Rt=tn(W,Be,B+ji,B+Ji,0,Re.minX,Re.maxX,oe),W=null,Zt&&(Ee=tn(Zt,Be,R-oi,R+yn,1,Re.minY,Re.maxY,oe),rt=tn(Zt,Be,R+ji,R+Ji,1,Re.minY,Re.maxY,oe),Zt=null),Rt&&(lt=tn(Rt,Be,R-oi,R+yn,1,Re.minY,Re.maxY,oe),bt=tn(Rt,Be,R+ji,R+Ji,1,Re.minY,Re.maxY,oe),Rt=null),fe>1&&console.timeEnd("clipping"),ne.push(Ee||[],L+1,2*B,2*R),ne.push(rt||[],L+1,2*B,2*R+1),ne.push(lt||[],L+1,2*B+1,2*R),ne.push(bt||[],L+1,2*B+1,2*R+1)}}},gn.prototype.getTile=function(W,L,B){var R=this.options,U=R.extent,X=R.debug;if(W<0||W>24)return null;var ce=1<<W,ne=_n(W,L=(L%ce+ce)%ce,B);if(this.tiles[ne])return sa(this.tiles[ne],U);X>1&&console.log("drilling down to z%d-%d-%d",W,L,B);for(var oe,fe=W,Be=L,Ye=B;!oe&&fe>0;)fe--,Be=Math.floor(Be/2),Ye=Math.floor(Ye/2),oe=this.tiles[_n(fe,Be,Ye)];return oe&&oe.source?(X>1&&console.log("found parent tile z%d-%d-%d",fe,Be,Ye),X>1&&console.time("drilling down"),this.splitTile(oe.source,fe,Be,Ye,W,L,B),X>1&&console.timeEnd("drilling down"),this.tiles[ne]?sa(this.tiles[ne],U):null):null};class Zn extends he{constructor(L,B,R,U){super(L,B,R,Sn),U&&(this.loadGeoJSON=U)}loadData(L,B){var R;(R=this._pendingRequest)===null||R===void 0||R.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const U=!!(L&&L.request&&L.request.collectResourceTiming)&&new r.RequestPerformance(L.request);this._pendingCallback=B,this._pendingRequest=this.loadGeoJSON(L,(X,ce)=>{if(delete this._pendingCallback,delete this._pendingRequest,X||!ce)return B(X);if(typeof ce!="object")return B(new Error(`Input data given to '${L.source}' is not a valid GeoJSON object.`));{Te(ce,!0);try{if(L.filter){const oe=r.createExpression(L.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(oe.result==="error")throw new Error(oe.value.map(Be=>`${Be.key}: ${Be.message}`).join(", "));const fe=ce.features.filter(Be=>oe.value.evaluate({zoom:0},Be));ce={type:"FeatureCollection",features:fe}}this._geoJSONIndex=L.cluster?new Nt(function({superclusterOptions:oe,clusterProperties:fe}){if(!fe||!oe)return oe;const Be={},Ye={},Re={accumulated:null,zoom:0},ht={properties:null},ft=Object.keys(fe);for(const Ee of ft){const[rt,lt]=fe[Ee],bt=r.createExpression(lt),Zt=r.createExpression(typeof rt=="string"?[rt,["accumulated"],["get",Ee]]:rt);Be[Ee]=bt.value,Ye[Ee]=Zt.value}return oe.map=Ee=>{ht.properties=Ee;const rt={};for(const lt of ft)rt[lt]=Be[lt].evaluate(Re,ht);return rt},oe.reduce=(Ee,rt)=>{ht.properties=rt;for(const lt of ft)Re.accumulated=Ee[lt],Ee[lt]=Ye[lt].evaluate(Re,ht)},oe}(L)).load(ce.features):function(oe,fe){return new gn(oe,fe)}(ce,L.geojsonVtOptions)}catch(oe){return B(oe)}this.loaded={};const ne={};if(U){const oe=U.finish();oe&&(ne.resourceTiming={},ne.resourceTiming[L.source]=JSON.parse(JSON.stringify(oe)))}B(null,ne)}})}reloadTile(L,B){const R=this.loaded;return R&&R[L.uid]?super.reloadTile(L,B):this.loadTile(L,B)}loadGeoJSON(L,B){if(L.request)return r.getJSON(L.request,B);if(typeof L.data=="string")try{B(null,JSON.parse(L.data))}catch{B(new Error(`Input data given to '${L.source}' is not a valid GeoJSON object.`))}else B(new Error(`Input data given to '${L.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(L,B){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),B()}getClusterExpansionZoom(L,B){try{B(null,this._geoJSONIndex.getClusterExpansionZoom(L.clusterId))}catch(R){B(R)}}getClusterChildren(L,B){try{B(null,this._geoJSONIndex.getChildren(L.clusterId))}catch(R){B(R)}}getClusterLeaves(L,B){try{B(null,this._geoJSONIndex.getLeaves(L.clusterId,L.limit,L.offset))}catch(R){B(R)}}}class hn{constructor(L){this.self=L,this.actor=new r.Actor(L,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:he,geojson:Zn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(B,R)=>{if(this.workerSourceTypes[B])throw new Error(`Worker source with name "${B}" already registered.`);this.workerSourceTypes[B]=R},this.self.registerRTLTextPlugin=B=>{if(r.plugin.isParsed())throw new Error("RTL text plugin already registered.");r.plugin.applyArabicShaping=B.applyArabicShaping,r.plugin.processBidirectionalText=B.processBidirectionalText,r.plugin.processStyledBidirectionalText=B.processStyledBidirectionalText}}setReferrer(L,B){this.referrer=B}setImages(L,B,R){this.availableImages[L]=B;for(const U in this.workerSources[L]){const X=this.workerSources[L][U];for(const ce in X)X[ce].availableImages=B}R()}setLayers(L,B,R){this.getLayerIndex(L).replace(B),R()}updateLayers(L,B,R){this.getLayerIndex(L).update(B.layers,B.removedIds),R()}loadTile(L,B,R){this.getWorkerSource(L,B.type,B.source).loadTile(B,R)}loadDEMTile(L,B,R){this.getDEMWorkerSource(L,B.source).loadTile(B,R)}reloadTile(L,B,R){this.getWorkerSource(L,B.type,B.source).reloadTile(B,R)}abortTile(L,B,R){this.getWorkerSource(L,B.type,B.source).abortTile(B,R)}removeTile(L,B,R){this.getWorkerSource(L,B.type,B.source).removeTile(B,R)}removeDEMTile(L,B){this.getDEMWorkerSource(L,B.source).removeTile(B)}removeSource(L,B,R){if(!this.workerSources[L]||!this.workerSources[L][B.type]||!this.workerSources[L][B.type][B.source])return;const U=this.workerSources[L][B.type][B.source];delete this.workerSources[L][B.type][B.source],U.removeSource!==void 0?U.removeSource(B,R):R()}loadWorkerSource(L,B,R){try{this.self.importScripts(B.url),R()}catch(U){R(U.toString())}}syncRTLPluginState(L,B,R){try{r.plugin.setState(B);const U=r.plugin.getPluginURL();if(r.plugin.isLoaded()&&!r.plugin.isParsed()&&U!=null){this.self.importScripts(U);const X=r.plugin.isParsed();R(X?void 0:new Error(`RTL Text Plugin failed to import scripts from ${U}`),X)}}catch(U){R(U.toString())}}getAvailableImages(L){let B=this.availableImages[L];return B||(B=[]),B}getLayerIndex(L){let B=this.layerIndexes[L];return B||(B=this.layerIndexes[L]=new C),B}getWorkerSource(L,B,R){if(this.workerSources[L]||(this.workerSources[L]={}),this.workerSources[L][B]||(this.workerSources[L][B]={}),!this.workerSources[L][B][R]){const U={send:(X,ce,ne)=>{this.actor.send(X,ce,ne,L)}};this.workerSources[L][B][R]=new this.workerSourceTypes[B](U,this.getLayerIndex(L),this.getAvailableImages(L))}return this.workerSources[L][B][R]}getDEMWorkerSource(L,B){return this.demWorkerSources[L]||(this.demWorkerSources[L]={}),this.demWorkerSources[L][B]||(this.demWorkerSources[L][B]=new we),this.demWorkerSources[L][B]}enforceCacheSizeLimit(L,B){r.enforceCacheSizeLimit(B)}}return r.isWorker()&&(self.worker=new hn(self)),hn}),g(["./shared"],function(r){var T=A;function A(d){return!function(t){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var h,f,y=new Blob([""],{type:"text/javascript"}),x=URL.createObjectURL(y);try{f=new Worker(x),h=!0}catch{h=!1}return f&&f.terminate(),URL.revokeObjectURL(x),h}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var h=document.createElement("canvas");h.width=h.height=1;var f=h.getContext("2d");if(!f)return!1;var y=f.getImageData(0,0,1,1);return y&&y.width===h.width}()?(C[o=t&&t.failIfMajorPerformanceCaveat]===void 0&&(C[o]=function(h){var f,y=function(x){var E=document.createElement("canvas"),M=Object.create(A.webGLContextAttributes);return M.failIfMajorPerformanceCaveat=x,E.getContext("webgl",M)||E.getContext("experimental-webgl",M)}(h);if(!y)return!1;try{f=y.createShader(y.VERTEX_SHADER)}catch{return!1}return!(!f||y.isContextLost())&&(y.shaderSource(f,"void main() {}"),y.compileShader(f),y.getShaderParameter(f,y.COMPILE_STATUS)===!0)}(o)),C[o]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var o}(d)}var C={};function I(d,t){if(Array.isArray(d)){if(!Array.isArray(t)||d.length!==t.length)return!1;for(let o=0;o<d.length;o++)if(!I(d[o],t[o]))return!1;return!0}if(typeof d=="object"&&d!==null&&t!==null){if(typeof t!="object"||Object.keys(d).length!==Object.keys(t).length)return!1;for(const o in d)if(!I(d[o],t[o]))return!1;return!0}return d===t}A.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class k{static testProp(t){if(!k.docStyle)return t[0];for(let o=0;o<t.length;o++)if(t[o]in k.docStyle)return t[o];return t[0]}static create(t,o,h){const f=window.document.createElement(t);return o!==void 0&&(f.className=o),h&&h.appendChild(f),f}static createNS(t,o){return window.document.createElementNS(t,o)}static disableDrag(){k.docStyle&&k.selectProp&&(k.userSelect=k.docStyle[k.selectProp],k.docStyle[k.selectProp]="none")}static enableDrag(){k.docStyle&&k.selectProp&&(k.docStyle[k.selectProp]=k.userSelect)}static setTransform(t,o){t.style[k.transformProp]=o}static addEventListener(t,o,h,f={}){t.addEventListener(o,h,"passive"in f?f:f.capture)}static removeEventListener(t,o,h,f={}){t.removeEventListener(o,h,"passive"in f?f:f.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",k.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",k.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",k.suppressClickInternal,!0)},0)}static mousePos(t,o){const h=t.getBoundingClientRect();return new r.pointGeometry(o.clientX-h.left-t.clientLeft,o.clientY-h.top-t.clientTop)}static touchPos(t,o){const h=t.getBoundingClientRect(),f=[];for(let y=0;y<o.length;y++)f.push(new r.pointGeometry(o[y].clientX-h.left-t.clientLeft,o[y].clientY-h.top-t.clientTop));return f}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}}k.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,k.selectProp=k.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),k.transformProp=k.testProp(["transform","WebkitTransform"]);class K{constructor(t){this._transformRequestFn=t}transformRequest(t,o){return this._transformRequestFn&&this._transformRequestFn(t,o)||{url:t}}normalizeSpriteURL(t,o,h){const f=function(y){const x=y.match($);if(!x)throw new Error(`Unable to parse URL "${y}"`);return{protocol:x[1],authority:x[2],path:x[3]||"/",params:x[4]?x[4].split("&"):[]}}(t);return f.path+=`${o}${h}`,function(y){const x=y.params.length?`?${y.params.join("&")}`:"";return`${y.protocol}://${y.authority}${y.path}${x}`}(f)}setTransformRequest(t){this._transformRequestFn=t}}const $=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class he{constructor(t,o,h,f){this.context=t,this.format=h,this.texture=t.gl.createTexture(),this.update(o,f)}update(t,o,h){const{width:f,height:y}=t,x=!(this.size&&this.size[0]===f&&this.size[1]===y||h),{context:E}=this,{gl:M}=E;if(this.useMipmap=Boolean(o&&o.useMipmap),M.bindTexture(M.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!o||o.premultiply!==!1)),x)this.size=[f,y],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||r.isImageBitmap(t)?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,t):M.texImage2D(M.TEXTURE_2D,0,this.format,f,y,0,this.format,M.UNSIGNED_BYTE,t.data);else{const{x:P,y:F}=h||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||r.isImageBitmap(t)?M.texSubImage2D(M.TEXTURE_2D,0,P,F,M.RGBA,M.UNSIGNED_BYTE,t):M.texSubImage2D(M.TEXTURE_2D,0,P,F,f,y,M.RGBA,M.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&M.generateMipmap(M.TEXTURE_2D)}bind(t,o,h){const{context:f}=this,{gl:y}=f;y.bindTexture(y.TEXTURE_2D,this.texture),h!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=y.LINEAR),t!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,t),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,h||t),this.filter=t),o!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,o),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}function we(d){const{userImage:t}=d;return!!(t&&t.render&&t.render())&&(d.data.replace(new Uint8Array(t.data.buffer)),!0)}class Te extends r.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new r.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:o,callback:h}of this.requestors)this._notify(o,h);this.requestors=[]}}getImage(t){return this.images[t]}addImage(t,o){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,o)&&(this.images[t]=o)}_validate(t,o){let h=!0;return this._validateStretch(o.stretchX,o.data&&o.data.width)||(this.fire(new r.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),h=!1),this._validateStretch(o.stretchY,o.data&&o.data.height)||(this.fire(new r.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),h=!1),this._validateContent(o.content,o)||(this.fire(new r.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),h=!1),h}_validateStretch(t,o){if(!t)return!0;let h=0;for(const f of t){if(f[0]<h||f[1]<f[0]||o<f[1])return!1;h=f[1]}return!0}_validateContent(t,o){return!(t&&(t.length!==4||t[0]<0||o.data.width<t[0]||t[1]<0||o.data.height<t[1]||t[2]<0||o.data.width<t[2]||t[3]<0||o.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))}updateImage(t,o){const h=this.images[t];if(h.data.width!==o.data.width||h.data.height!==o.data.height)throw new Error(`size mismatch between old image (${h.data.width}x${h.data.height}) and new image (${o.data.width}x${o.data.height}).`);o.version=h.version+1,this.images[t]=o,this.updatedImages[t]=!0}removeImage(t){const o=this.images[t];delete this.images[t],delete this.patterns[t],o.userImage&&o.userImage.onRemove&&o.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t,o){let h=!0;if(!this.isLoaded())for(const f of t)this.images[f]||(h=!1);this.isLoaded()||h?this._notify(t,o):this.requestors.push({ids:t,callback:o})}_notify(t,o){const h={};for(const f of t){this.images[f]||this.fire(new r.Event("styleimagemissing",{id:f}));const y=this.images[f];y?h[f]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,hasRenderCallback:Boolean(y.userImage&&y.userImage.render)}:r.warnOnce(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}o(null,h)}getPixelSize(){const{width:t,height:o}=this.atlasImage;return{width:t,height:o}}getPattern(t){const o=this.patterns[t],h=this.getImage(t);if(!h)return null;if(o&&o.position.version===h.version)return o.position;if(o)o.position.version=h.version;else{const f={w:h.data.width+2,h:h.data.height+2,x:0,y:0},y=new r.ImagePosition(f,h);this.patterns[t]={bin:f,position:y}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const o=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new he(t,this.atlasImage,o.RGBA),this.atlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const y in this.patterns)t.push(this.patterns[y].bin);const{w:o,h}=r.potpack(t),f=this.atlasImage;f.resize({width:o||1,height:h||1});for(const y in this.patterns){const{bin:x}=this.patterns[y],E=x.x+1,M=x.y+1,P=this.images[y].data,F=P.width,V=P.height;r.RGBAImage.copy(P,f,{x:0,y:0},{x:E,y:M},{width:F,height:V}),r.RGBAImage.copy(P,f,{x:0,y:V-1},{x:E,y:M-1},{width:F,height:1}),r.RGBAImage.copy(P,f,{x:0,y:0},{x:E,y:M+V},{width:F,height:1}),r.RGBAImage.copy(P,f,{x:F-1,y:0},{x:E-1,y:M},{width:1,height:V}),r.RGBAImage.copy(P,f,{x:0,y:0},{x:E+F,y:M},{width:1,height:V})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const o of t){if(this.callbackDispatchedThisFrame[o])continue;this.callbackDispatchedThisFrame[o]=!0;const h=this.images[o];h||r.warnOnce(`Image with ID: "${o}" was not found`),we(h)&&this.updateImage(o,h)}}}const me=1e20;function Le(d,t,o,h,f,y,x,E,M){for(let P=t;P<t+h;P++)Ue(d,o*y+P,y,f,x,E,M);for(let P=o;P<o+f;P++)Ue(d,P*y+t,1,h,x,E,M)}function Ue(d,t,o,h,f,y,x){y[0]=0,x[0]=-me,x[1]=me,f[0]=d[t];for(let E=1,M=0,P=0;E<h;E++){f[E]=d[t+E*o];const F=E*E;do{const V=y[M];P=(f[E]-f[V]+F-V*V)/(E-V)/2}while(P<=x[M]&&--M>-1);M++,y[M]=E,x[M]=P,x[M+1]=me}for(let E=0,M=0;E<h;E++){for(;x[M+1]<E;)M++;const P=y[M],F=E-P;d[t+E*o]=f[P]+F*F}}class Oe{constructor(t,o){this.requestManager=t,this.localIdeographFontFamily=o,this.entries={}}setURL(t){this.url=t}getGlyphs(t,o){const h=[];for(const f in t)for(const y of t[f])h.push({stack:f,id:y});r.asyncAll(h,({stack:f,id:y},x)=>{let E=this.entries[f];E||(E=this.entries[f]={glyphs:{},requests:{},ranges:{}});let M=E.glyphs[y];if(M!==void 0)return void x(null,{stack:f,id:y,glyph:M});if(M=this._tinySDF(E,f,y),M)return E.glyphs[y]=M,void x(null,{stack:f,id:y,glyph:M});const P=Math.floor(y/256);if(256*P>65535)return void x(new Error("glyphs > 65535 not supported"));if(E.ranges[P])return void x(null,{stack:f,id:y,glyph:M});let F=E.requests[P];F||(F=E.requests[P]=[],Oe.loadGlyphRange(f,P,this.url,this.requestManager,(V,G)=>{if(G){for(const te in G)this._doesCharSupportLocalGlyph(+te)||(E.glyphs[+te]=G[+te]);E.ranges[P]=!0}for(const te of F)te(V,G);delete E.requests[P]})),F.push((V,G)=>{V?x(V):G&&x(null,{stack:f,id:y,glyph:G[y]||null})})},(f,y)=>{if(f)o(f);else if(y){const x={};for(const{stack:E,id:M,glyph:P}of y)(x[E]||(x[E]={}))[M]=P&&{id:P.id,bitmap:P.bitmap.clone(),metrics:P.metrics};o(null,x)}})}_doesCharSupportLocalGlyph(t){return!!this.localIdeographFontFamily&&(r.unicodeBlockLookup["CJK Unified Ideographs"](t)||r.unicodeBlockLookup["Hangul Syllables"](t)||r.unicodeBlockLookup.Hiragana(t)||r.unicodeBlockLookup.Katakana(t))}_tinySDF(t,o,h){const f=this.localIdeographFontFamily;if(!f||!this._doesCharSupportLocalGlyph(h))return;let y=t.tinySDF;if(!y){let E="400";/bold/i.test(o)?E="900":/medium/i.test(o)?E="500":/light/i.test(o)&&(E="200"),y=t.tinySDF=new Oe.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:f,fontWeight:E})}const x=y.draw(String.fromCharCode(h));return{id:h,bitmap:new r.AlphaImage({width:x.width||30,height:x.height||30},x.data),metrics:{width:x.glyphWidth||24,height:x.glyphHeight||24,left:x.glyphLeft||0,top:x.glyphTop-27||-8,advance:x.glyphAdvance||24}}}}Oe.loadGlyphRange=function(d,t,o,h,f){const y=256*t,x=y+255,E=h.transformRequest(o.replace("{fontstack}",d).replace("{range}",`${y}-${x}`),r.ResourceType.Glyphs);r.getArrayBuffer(E,(M,P)=>{if(M)f(M);else if(P){const F={};for(const V of r.parseGlyphPbf(P))F[V.id]=V;f(null,F)}})},Oe.TinySDF=class{constructor({fontSize:d=24,buffer:t=3,radius:o=8,cutoff:h=.25,fontFamily:f="sans-serif",fontWeight:y="normal",fontStyle:x="normal"}={}){this.buffer=t,this.cutoff=h,this.radius=o;const E=this.size=d+4*t,M=this._createCanvas(E),P=this.ctx=M.getContext("2d",{willReadFrequently:!0});P.font=`${x} ${y} ${d}px ${f}`,P.textBaseline="alphabetic",P.textAlign="left",P.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Uint16Array(E)}_createCanvas(d){const t=document.createElement("canvas");return t.width=t.height=d,t}draw(d){const{width:t,actualBoundingBoxAscent:o,actualBoundingBoxDescent:h,actualBoundingBoxLeft:f,actualBoundingBoxRight:y}=this.ctx.measureText(d),x=Math.ceil(o),E=Math.min(this.size-this.buffer,Math.ceil(y-f)),M=Math.min(this.size-this.buffer,x+Math.ceil(h)),P=E+2*this.buffer,F=M+2*this.buffer,V=Math.max(P*F,0),G=new Uint8ClampedArray(V),te={data:G,width:P,height:F,glyphWidth:E,glyphHeight:M,glyphTop:x,glyphLeft:0,glyphAdvance:t};if(E===0||M===0)return te;const{ctx:J,buffer:Q,gridInner:pe,gridOuter:be}=this;J.clearRect(Q,Q,E,M),J.fillText(d,Q,Q+x);const Ae=J.getImageData(Q,Q,E,M);be.fill(me,0,V),pe.fill(0,0,V);for(let ae=0;ae<M;ae++)for(let ze=0;ze<E;ze++){const De=Ae.data[4*(ae*E+ze)+3]/255;if(De===0)continue;const qe=(ae+Q)*P+ze+Q;if(De===1)be[qe]=0,pe[qe]=me;else{const Ze=.5-De;be[qe]=Ze>0?Ze*Ze:0,pe[qe]=Ze<0?Ze*Ze:0}}Le(be,0,0,P,F,P,this.f,this.v,this.z),Le(pe,Q,Q,E,M,P,this.f,this.v,this.z);for(let ae=0;ae<V;ae++){const ze=Math.sqrt(be[ae])-Math.sqrt(pe[ae]);G[ae]=Math.round(255-255*(ze/this.radius+this.cutoff))}return te}};const We=new r.Properties({anchor:new r.DataConstantProperty(r.spec.light.anchor),position:new class{constructor(){this.specification=r.spec.light.position}possiblyEvaluate(d,t){return r.sphericalToCartesian(d.expression.evaluate(t))}interpolate(d,t,o){return{x:r.number(d.x,t.x,o),y:r.number(d.y,t.y,o),z:r.number(d.z,t.z,o)}}},color:new r.DataConstantProperty(r.spec.light.color),intensity:new r.DataConstantProperty(r.spec.light.intensity)}),Me="-transition";class Ve extends r.Evented{constructor(t){super(),this._transitionable=new r.Transitionable(We),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,o={}){if(!this._validate(r.validateLight,t,o))for(const h in t){const f=t[h];h.endsWith(Me)?this._transitionable.setTransition(h.slice(0,-Me.length),f):this._transitionable.setValue(h,f)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,o,h){return(!h||h.validate!==!1)&&r.emitValidationErrors(this,t.call(r.validateStyle,r.extend({value:o,style:{glyphs:!0,sprite:!0},styleSpec:r.spec})))}}class tt{constructor(t,o){this.width=t,this.height=o,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,o){const h=t.join(",")+String(o);return this.dashEntry[h]||(this.dashEntry[h]=this.addDash(t,o)),this.dashEntry[h]}getDashRanges(t,o,h){const f=[];let y=t.length%2==1?-t[t.length-1]*h:0,x=t[0]*h,E=!0;f.push({left:y,right:x,isDash:E,zeroLength:t[0]===0});let M=t[0];for(let P=1;P<t.length;P++){E=!E;const F=t[P];y=M*h,M+=F,x=M*h,f.push({left:y,right:x,isDash:E,zeroLength:F===0})}return f}addRoundDash(t,o,h){const f=o/2;for(let y=-h;y<=h;y++){const x=this.width*(this.nextRow+h+y);let E=0,M=t[E];for(let P=0;P<this.width;P++){P/M.right>1&&(M=t[++E]);const F=Math.abs(P-M.left),V=Math.abs(P-M.right),G=Math.min(F,V);let te;const J=y/h*(f+1);if(M.isDash){const Q=f-Math.abs(J);te=Math.sqrt(G*G+Q*Q)}else te=f-Math.sqrt(G*G+J*J);this.data[x+P]=Math.max(0,Math.min(255,te+128))}}}addRegularDash(t){for(let E=t.length-1;E>=0;--E){const M=t[E],P=t[E+1];M.zeroLength?t.splice(E,1):P&&P.isDash===M.isDash&&(P.left=M.left,t.splice(E,1))}const o=t[0],h=t[t.length-1];o.isDash===h.isDash&&(o.left=h.left-this.width,h.right=o.right+this.width);const f=this.width*this.nextRow;let y=0,x=t[y];for(let E=0;E<this.width;E++){E/x.right>1&&(x=t[++y]);const M=Math.abs(E-x.left),P=Math.abs(E-x.right),F=Math.min(M,P);this.data[f+E]=Math.max(0,Math.min(255,(x.isDash?F:-F)+128))}}addDash(t,o){const h=o?7:0,f=2*h+1;if(this.nextRow+f>this.height)return r.warnOnce("LineAtlas out of space"),null;let y=0;for(let E=0;E<t.length;E++)y+=t[E];if(y!==0){const E=this.width/y,M=this.getDashRanges(t,this.width,E);o?this.addRoundDash(M,E,h):this.addRegularDash(M)}const x={y:(this.nextRow+h+.5)/this.height,height:2*h/this.height,width:y};return this.nextRow+=f,this.dirty=!0,x}bind(t){const o=t.gl;this.texture?(o.bindTexture(o.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,o.texSubImage2D(o.TEXTURE_2D,0,0,0,this.width,this.height,o.ALPHA,o.UNSIGNED_BYTE,this.data))):(this.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,this.width,this.height,0,o.ALPHA,o.UNSIGNED_BYTE,this.data))}}class it{constructor(t,o){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=r.uniqueId();const h=this.workerPool.acquire(this.id);for(let f=0;f<h.length;f++){const y=new it.Actor(h[f],o,this.id);y.name=`Worker ${f}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,o,h){r.asyncAll(this.actors,(f,y)=>{f.send(t,o,y)},h=h||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(t=>{t.remove()}),this.actors=[],this.workerPool.release(this.id)}}function dt(d,t,o){const h=function(f,y){if(f)return o(f);if(y){const x=r.pick(r.extend(y,d),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);y.vector_layers&&(x.vectorLayers=y.vector_layers,x.vectorLayerIds=x.vectorLayers.map(E=>E.id)),o(null,x)}};return d.url?r.getJSON(t.transformRequest(d.url,r.ResourceType.Source),h):r.exported.frame(()=>h(null,d))}it.Actor=r.Actor;class Dt{constructor(t,o,h){this.bounds=r.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=o||0,this.maxzoom=h||24}validateBounds(t){return Array.isArray(t)&&t.length===4?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const o=Math.pow(2,t.z),h=Math.floor(r.mercatorXfromLng(this.bounds.getWest())*o),f=Math.floor(r.mercatorYfromLat(this.bounds.getNorth())*o),y=Math.ceil(r.mercatorXfromLng(this.bounds.getEast())*o),x=Math.ceil(r.mercatorYfromLat(this.bounds.getSouth())*o);return t.x>=h&&t.x<y&&t.y>=f&&t.y<x}}class He extends r.Evented{constructor(t,o,h,f){if(super(),this.id=t,this.dispatcher=h,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,r.extend(this,r.pick(o,["url","scheme","tileSize","promoteId"])),this._options=r.extend({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(f)}load(){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=dt(this._options,this.map._requestManager,(t,o)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),t?this.fire(new r.ErrorEvent(t)):o&&(r.extend(this,o),o.bounds&&(this.tileBounds=new Dt(o.bounds,this.minzoom,this.maxzoom)),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.cancel(),t(),this.load()}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return r.extend({},this._options)}loadTile(t,o){const h=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(h,r.ResourceType.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function y(x,E){return delete t.request,t.aborted?o(null):x&&x.status!==404?o(x):(E&&E.resourceTiming&&(t.resourceTiming=E.resourceTiming),this.map._refreshExpiredTiles&&E&&t.setExpiryData(E),t.loadVectorData(E,this.map.painter),r.cacheEntryPossiblyAdded(this.dispatcher),o(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}f.request.collectResourceTiming=this._collectResourceTiming,t.actor&&t.state!=="expired"?t.state==="loading"?t.reloadCallback=o:t.request=t.actor.send("reloadTile",f,y.bind(this)):(t.actor=this.dispatcher.getActor(),t.request=t.actor.send("loadTile",f,y.bind(this)))}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)}unloadTile(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Xe extends r.Evented{constructor(t,o,h,f){super(),this.id=t,this.dispatcher=h,this.setEventedParent(f),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({type:"raster"},o),r.extend(this,r.pick(o,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=dt(this._options,this.map._requestManager,(t,o)=>{this._tileJSONRequest=null,this._loaded=!0,t?this.fire(new r.ErrorEvent(t)):o&&(r.extend(this,o),o.bounds&&(this.tileBounds=new Dt(o.bounds,this.minzoom,this.maxzoom)),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return r.extend({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t,o){const h=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.request=r.getImage(this.map._requestManager.transformRequest(h,r.ResourceType.Tile),(f,y,x)=>{if(delete t.request,t.aborted)t.state="unloaded",o(null);else if(f)t.state="errored",o(f);else if(y){this.map._refreshExpiredTiles&&t.setExpiryData(x);const E=this.map.painter.context,M=E.gl;t.texture=this.map.painter.getTileTexture(y.width),t.texture?t.texture.update(y,{useMipmap:!0}):(t.texture=new he(E,y,M.RGBA,{useMipmap:!0}),t.texture.bind(M.LINEAR,M.CLAMP_TO_EDGE,M.LINEAR_MIPMAP_NEAREST),E.extTextureFilterAnisotropic&&M.texParameterf(M.TEXTURE_2D,E.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,E.extTextureFilterAnisotropicMax)),t.state="loaded",r.cacheEntryPossiblyAdded(this.dispatcher),o(null)}})}abortTile(t,o){t.request&&(t.request.cancel(),delete t.request),o()}unloadTile(t,o){t.texture&&this.map.painter.saveTileTexture(t.texture),o()}hasTransition(){return!1}}let pt;class Ne extends Xe{constructor(t,o,h,f){super(t,o,h,f),this.type="raster-dem",this.maxzoom=22,this._options=r.extend({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(t,o){const h=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function f(y,x){y&&(t.state="errored",o(y)),x&&(t.dem=x,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded",o(null))}t.request=r.getImage(this.map._requestManager.transformRequest(h,r.ResourceType.Tile),function(y,x){if(delete t.request,t.aborted)t.state="unloaded",o(null);else if(y)t.state="errored",o(y);else if(x){this.map._refreshExpiredTiles&&t.setExpiryData(x),delete x.cacheControl,delete x.expires;const E=r.isImageBitmap(x)&&(pt==null&&(pt=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),pt)?x:r.exported.getImageData(x,1),M={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:E,encoding:this.encoding};t.actor&&t.state!=="expired"||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",M,f.bind(this)))}}.bind(this)),t.neighboringTiles=this._getNeighboringTiles(t.tileID)}_getNeighboringTiles(t){const o=t.canonical,h=Math.pow(2,o.z),f=(o.x-1+h)%h,y=o.x===0?t.wrap-1:t.wrap,x=(o.x+1+h)%h,E=o.x+1===h?t.wrap+1:t.wrap,M={};return M[new r.OverscaledTileID(t.overscaledZ,y,o.z,f,o.y).key]={backfilled:!1},M[new r.OverscaledTileID(t.overscaledZ,E,o.z,x,o.y).key]={backfilled:!1},o.y>0&&(M[new r.OverscaledTileID(t.overscaledZ,y,o.z,f,o.y-1).key]={backfilled:!1},M[new r.OverscaledTileID(t.overscaledZ,t.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},M[new r.OverscaledTileID(t.overscaledZ,E,o.z,x,o.y-1).key]={backfilled:!1}),o.y+1<h&&(M[new r.OverscaledTileID(t.overscaledZ,y,o.z,f,o.y+1).key]={backfilled:!1},M[new r.OverscaledTileID(t.overscaledZ,t.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},M[new r.OverscaledTileID(t.overscaledZ,E,o.z,x,o.y+1).key]={backfilled:!1}),M}unloadTile(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})}}class Ft extends r.Evented{constructor(t,o,h,f){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=h.getActor(),this.setEventedParent(f),this._data=o.data,this._options=r.extend({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId;const y=r.EXTENT/this.tileSize;this.workerOptions=r.extend({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(o.buffer!==void 0?o.buffer:128)*y,tolerance:(o.tolerance!==void 0?o.tolerance:.375)*y,extent:r.EXTENT,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:o.clusterMaxZoom!==void 0?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:r.EXTENT,radius:(o.clusterRadius||50)*y,log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter},o.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._updateWorkerData("content"),this}getClusterExpansionZoom(t,o){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},o),this}getClusterChildren(t,o){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},o),this}getClusterLeaves(t,o,h,f){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:o,offset:h},f),this}_updateWorkerData(t){const o=r.extend({},this.workerOptions),h=this._data;typeof h=="string"?(o.request=this.map._requestManager.transformRequest(r.exported.resolveURL(h),r.ResourceType.Source),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(h),this._pendingLoads++,this.fire(new r.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,o,(f,y)=>{if(this._pendingLoads--,this._removed||y&&y.abandoned)return void this.fire(new r.Event("dataabort",{dataType:"source",sourceDataType:t}));let x=null;if(y&&y.resourceTiming&&y.resourceTiming[this.id]&&(x=y.resourceTiming[this.id].slice(0)),f)return void this.fire(new r.ErrorEvent(f));const E={dataType:"source",sourceDataType:t};this._collectResourceTiming&&x&&x.length>0&&r.extend(E,{resourceTiming:x}),this.fire(new r.Event("data",E))})}loaded(){return this._pendingLoads===0}loadTile(t,o){const h=t.actor?"reloadTile":"loadTile";t.actor=this.actor;const f={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};t.request=this.actor.send(h,f,(y,x)=>(delete t.request,t.unloadVectorData(),t.aborted?o(null):y?o(y):(t.loadVectorData(x,this.map.painter,h==="reloadTile"),o(null))))}abortTile(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0}unloadTile(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return r.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var ut=r.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class jt extends r.Evented{constructor(t,o,h,f){super(),this.id=t,this.dispatcher=h,this.coordinates=o.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(f),this.options=o}load(t,o){this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this.url=this.options.url,r.getImage(this.map._requestManager.transformRequest(this.url,r.ResourceType.Image),(h,f)=>{this._loaded=!0,h?this.fire(new r.ErrorEvent(h)):f&&(this.image=f,t&&(this.coordinates=t),o&&o(),this._finishLoading())})}loaded(){return this._loaded}updateImage(t){return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}setCoordinates(t){this.coordinates=t;const o=t.map(r.MercatorCoordinate.fromLngLat);this.tileID=function(f){let y=1/0,x=1/0,E=-1/0,M=-1/0;for(const G of f)y=Math.min(y,G.x),x=Math.min(x,G.y),E=Math.max(E,G.x),M=Math.max(M,G.y);const P=Math.max(E-y,M-x),F=Math.max(0,Math.floor(-Math.log(P)/Math.LN2)),V=Math.pow(2,F);return new r.CanonicalTileID(F,Math.floor((y+E)/2*V),Math.floor((x+M)/2*V))}(o),this.minzoom=this.maxzoom=this.tileID.z;const h=o.map(f=>this.tileID.getTilePoint(f)._round());return this._boundsArray=new r.RasterBoundsArray,this._boundsArray.emplaceBack(h[0].x,h[0].y,0,0),this._boundsArray.emplaceBack(h[1].x,h[1].y,r.EXTENT,0),this._boundsArray.emplaceBack(h[3].x,h[3].y,0,r.EXTENT),this._boundsArray.emplaceBack(h[2].x,h[2].y,r.EXTENT,r.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const t=this.map.painter.context,o=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,ut.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new he(t,this.image,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));for(const h in this.tiles){const f=this.tiles[h];f.state!=="loaded"&&(f.state="loaded",f.texture=this.texture)}}loadTile(t,o){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},o(null)):(t.state="errored",o(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class yt extends jt{constructor(t,o,h,f){super(t,o,h,f),this.roundZoom=!0,this.type="video",this.options=o}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const o of t.urls)this.urls.push(this.map._requestManager.transformRequest(o,r.ResourceType.Source).url);r.getVideo(this.urls,(o,h)=>{this._loaded=!0,o?this.fire(new r.ErrorEvent(o)):h&&(this.video=h,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const o=this.video.seekable;t<o.start(0)||t>o.end(0)?this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const t=this.map.painter.context,o=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,ut.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new he(t,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));for(const h in this.tiles){const f=this.tiles[h];f.state!=="loaded"&&(f.state="loaded",f.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class mi extends jt{constructor(t,o,h,f){super(t,o,h,f),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(x=>typeof x!="number"))||this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${t}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new r.ErrorEvent(new r.ValidationError(`sources.${t}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new r.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context,h=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,ut.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new he(o,this.canvas,h.RGBA,{premultiply:!0});for(const f in this.tiles){const y=this.tiles[f];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const bi={vector:He,raster:Xe,"raster-dem":Ne,geojson:Ft,video:yt,image:jt,canvas:mi};function gi(d,t){const o=r.create();return r.translate(o,o,[1,1,0]),r.scale(o,o,[.5*d.width,.5*d.height,1]),r.multiply(o,o,d.calculatePosMatrix(t.toUnwrapped()))}function Lt(d,t,o,h,f,y){const x=function(V,G,te){if(V)for(const J of V){const Q=G[J];if(Q&&Q.source===te&&Q.type==="fill-extrusion")return!0}else for(const J in G){const Q=G[J];if(Q.source===te&&Q.type==="fill-extrusion")return!0}return!1}(f&&f.layers,t,d.id),E=y.maxPitchScaleFactor(),M=d.tilesIn(h,E,x);M.sort(vi);const P=[];for(const V of M)P.push({wrappedTileID:V.tileID.wrapped().key,queryResults:V.tile.queryRenderedFeatures(t,o,d._state,V.queryGeometry,V.cameraQueryGeometry,V.scale,f,y,E,gi(d.transform,V.tileID))});const F=function(V){const G={},te={};for(const J of V){const Q=J.queryResults,pe=J.wrappedTileID,be=te[pe]=te[pe]||{};for(const Ae in Q){const ae=Q[Ae],ze=be[Ae]=be[Ae]||{},De=G[Ae]=G[Ae]||[];for(const qe of ae)ze[qe.featureIndex]||(ze[qe.featureIndex]=!0,De.push(qe))}}return G}(P);for(const V in F)F[V].forEach(G=>{const te=G.feature,J=d.getFeatureState(te.layer["source-layer"],te.id);te.source=te.layer.source,te.layer["source-layer"]&&(te.sourceLayer=te.layer["source-layer"]),te.state=J});return F}function vi(d,t){const o=d.tileID,h=t.tileID;return o.overscaledZ-h.overscaledZ||o.canonical.y-h.canonical.y||o.wrap-h.wrap||o.canonical.x-h.canonical.x}class Qt{constructor(t,o){this.tileID=t,this.uid=r.uniqueId(),this.uses=0,this.tileSize=o,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){const o=t+this.timeAdded;o<r.exported.now()||this.fadeEndTime&&o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.textures.forEach(o=>t.saveTileTexture(o)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(t,o,h){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(f,y){const x={};if(!y)return x;for(const E of f){const M=E.layerIds.map(P=>y.getLayer(P)).filter(Boolean);if(M.length!==0){E.layers=M,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(P=>M.filter(F=>F.id===P)[0]));for(const P of M)x[P.id]=E}}return x}(t.buckets,o.style),this.hasSymbolBuckets=!1;for(const f in this.buckets){const y=this.buckets[f];if(y instanceof r.SymbolBucket){if(this.hasSymbolBuckets=!0,!h)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const f in this.buckets){const y=this.buckets[f];if(y instanceof r.SymbolBucket&&y.hasRTLText){this.hasRTLText=!0,r.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const f in this.buckets){const y=this.buckets[f];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(f).queryRadius(y))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new r.CollisionBoxArray}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const h in this.buckets){const f=this.buckets[h];f.uploadPending()&&f.upload(t)}const o=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new he(t,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new he(t,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,o,h,f,y,x,E,M,P,F){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:f,cameraQueryGeometry:y,scale:x,tileSize:this.tileSize,pixelPosMatrix:F,transform:M,params:E,queryPadding:this.queryPadding*P},t,o,h):{}}querySourceFeatures(t,o){const h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;const f=h.loadVTLayers(),y=o?o.sourceLayer:"",x=f._geojsonTileLayer||f[y];if(!x)return;const E=r.createFilter(o&&o.filter),{z:M,x:P,y:F}=this.tileID.canonical,V={z:M,x:P,y:F};for(let G=0;G<x.length;G++){const te=x.feature(G);if(E.needGeometry){const pe=r.toEvaluationFeature(te,!0);if(!E.filter(new r.EvaluationParameters(this.tileID.overscaledZ),pe,this.tileID.canonical))continue}else if(!E.filter(new r.EvaluationParameters(this.tileID.overscaledZ),te))continue;const J=h.getId(te,y),Q=new r.GeoJSONFeature(te,M,P,F,J);Q.tile=V,t.push(Q)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const o=this.expirationTime;if(t.cacheControl){const h=r.parseCacheControl(t.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const h=Date.now();let f=!1;if(this.expirationTime>h)f=!1;else if(o)if(this.expirationTime<o)f=!0;else{const y=this.expirationTime-o;y?this.expirationTime=h+Math.max(y,3e4):f=!0}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(t,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0)return;const h=this.latestFeatureIndex.loadVTLayers();for(const f in this.buckets){if(!o.style.hasLayer(f))continue;const y=this.buckets[f],x=y.layers[0].sourceLayer||"_geojsonTileLayer",E=h[x],M=t[x];if(!E||!M||Object.keys(M).length===0)continue;y.update(M,E,this.imageAtlas&&this.imageAtlas.patternPositions||{});const P=o&&o.style&&o.style.getLayer(f);P&&(this.queryPadding=Math.max(this.queryPadding,P.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<r.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=r.exported.now()+t}setDependencies(t,o){const h={};for(const f of o)h[f]=!0;this.dependencies[t]=h}hasDependency(t,o){for(const h of t){const f=this.dependencies[h];if(f){for(const y of o)if(f[y])return!0}}return!1}}class ui{constructor(t,o){this.max=t,this.onRemove=o,this.reset()}reset(){for(const t in this.data)for(const o of this.data[t])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(t,o,h){const f=t.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);const y={value:o,timeout:void 0};if(h!==void 0&&(y.timeout=setTimeout(()=>{this.remove(t,y)},h)),this.data[f].push(y),this.order.push(f),this.order.length>this.max){const x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const o=this.data[t].shift();return o.timeout&&clearTimeout(o.timeout),this.data[t].length===0&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),o.value}getByKey(t){const o=this.data[t];return o?o[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,o){if(!this.has(t))return this;const h=t.wrapped().key,f=o===void 0?0:this.data[h].indexOf(o),y=this.data[h][f];return this.data[h].splice(f,1),y.timeout&&clearTimeout(y.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(y.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(t){const o=[];for(const h in this.data)for(const f of this.data[h])t(f.value)||o.push(f);for(const h of o)this.remove(h.value.tileID,h)}}class Ui{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,o,h){const f=String(o);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][f]=this.stateChanges[t][f]||{},r.extend(this.stateChanges[t][f],h),this.deletedStates[t]===null){this.deletedStates[t]={};for(const y in this.state[t])y!==f&&(this.deletedStates[t][y]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][f]===null){this.deletedStates[t][f]={};for(const y in this.state[t][f])h[y]||(this.deletedStates[t][f][y]=null)}else for(const y in h)this.deletedStates[t]&&this.deletedStates[t][f]&&this.deletedStates[t][f][y]===null&&delete this.deletedStates[t][f][y]}removeFeatureState(t,o,h){if(this.deletedStates[t]===null)return;const f=String(o);if(this.deletedStates[t]=this.deletedStates[t]||{},h&&o!==void 0)this.deletedStates[t][f]!==null&&(this.deletedStates[t][f]=this.deletedStates[t][f]||{},this.deletedStates[t][f][h]=null);else if(o!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][f])for(h in this.deletedStates[t][f]={},this.stateChanges[t][f])this.deletedStates[t][f][h]=null;else this.deletedStates[t][f]=null;else this.deletedStates[t]=null}getState(t,o){const h=String(o),f=r.extend({},(this.state[t]||{})[h],(this.stateChanges[t]||{})[h]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){const y=this.deletedStates[t][o];if(y===null)return{};for(const x in y)delete f[x]}return f}initializeTileState(t,o){t.setFeatureState(this.state,o)}coalesceChanges(t,o){const h={};for(const f in this.stateChanges){this.state[f]=this.state[f]||{};const y={};for(const x in this.stateChanges[f])this.state[f][x]||(this.state[f][x]={}),r.extend(this.state[f][x],this.stateChanges[f][x]),y[x]=this.state[f][x];h[f]=y}for(const f in this.deletedStates){this.state[f]=this.state[f]||{};const y={};if(this.deletedStates[f]===null)for(const x in this.state[f])y[x]={},this.state[f][x]={};else for(const x in this.deletedStates[f]){if(this.deletedStates[f][x]===null)this.state[f][x]={};else for(const E of Object.keys(this.deletedStates[f][x]))delete this.state[f][x][E];y[x]=this.state[f][x]}h[f]=h[f]||{},r.extend(h[f],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(const f in t)t[f].setFeatureState(h,o)}}class pi extends r.Evented{constructor(t,o,h){super(),this.id=t,this.dispatcher=h,this.on("data",f=>{f.dataType==="source"&&f.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&f.dataType==="source"&&f.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(f,y,x,E){const M=new bi[y.type](f,y,x,E);if(M.id!==f)throw new Error(`Expected Source id to be ${f} instead of ${M.id}`);return r.bindAll(["load","abort","unload","serialize","prepare"],M),M}(t,o,h,this),this._tiles={},this._cache=new ui(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ui}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const t in this._tiles){const o=this._tiles[t];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,o){return this._source.loadTile(t,o)}_unloadTile(t){if(this._source.unloadTile)return this._source.unloadTile(t,()=>{})}_abortTile(t){this._source.abortTile&&this._source.abortTile(t,()=>{}),this._source.fire(new r.Event("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const h=this._tiles[o];h.upload(t),h.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(t=>t.tileID).sort(ot).map(t=>t.key)}getRenderableIds(t){const o=[];for(const h in this._tiles)this._isIdRenderable(h,t)&&o.push(this._tiles[h]);return t?o.sort((h,f)=>{const y=h.tileID,x=f.tileID,E=new r.pointGeometry(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),M=new r.pointGeometry(x.canonical.x,x.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-x.overscaledZ||M.y-E.y||M.x-E.x}).map(h=>h.tileID.key):o.map(h=>h.tileID).sort(ot).map(h=>h.key)}hasRenderableParent(t){const o=this.findLoadedParent(t,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(t,o){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(o||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)this._tiles[t].state!=="errored"&&this._reloadTile(t,"reloading")}}_reloadTile(t,o){const h=this._tiles[t];h&&(h.state!=="loading"&&(h.state=o),this._loadTile(h,this._tileLoaded.bind(this,h,t,o)))}_tileLoaded(t,o,h,f){if(f)return t.state="errored",void(f.status!==404?this._source.fire(new r.ErrorEvent(f,{tile:t})):this.update(this.transform,this.terrain));t.timeAdded=r.exported.now(),h==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(o,t),this.getSource().type==="raster-dem"&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new r.Event("data",{dataType:"source",tile:t,coord:t.tileID}))}_backfillDEM(t){const o=this.getRenderableIds();for(let f=0;f<o.length;f++){const y=o[f];if(t.neighboringTiles&&t.neighboringTiles[y]){const x=this.getTileByID(y);h(t,x),h(x,t)}}function h(f,y){f.needsHillshadePrepare=!0,f.needsTerrainPrepare=!0;let x=y.tileID.canonical.x-f.tileID.canonical.x;const E=y.tileID.canonical.y-f.tileID.canonical.y,M=Math.pow(2,f.tileID.canonical.z),P=y.tileID.key;x===0&&E===0||Math.abs(E)>1||(Math.abs(x)>1&&(Math.abs(x+M)===1?x+=M:Math.abs(x-M)===1&&(x-=M)),y.dem&&f.dem&&(f.dem.backfillBorder(y.dem,x,E),f.neighboringTiles&&f.neighboringTiles[P]&&(f.neighboringTiles[P].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,o,h,f){for(const y in this._tiles){let x=this._tiles[y];if(f[y]||!x.hasData()||x.tileID.overscaledZ<=o||x.tileID.overscaledZ>h)continue;let E=x.tileID;for(;x&&x.tileID.overscaledZ>o+1;){const P=x.tileID.scaledTo(x.tileID.overscaledZ-1);x=this._tiles[P.key],x&&x.hasData()&&(E=P)}let M=E;for(;M.overscaledZ>o;)if(M=M.scaledTo(M.overscaledZ-1),t[M.key]){f[E.key]=E;break}}}findLoadedParent(t,o){if(t.key in this._loadedParentTiles){const h=this._loadedParentTiles[t.key];return h&&h.tileID.overscaledZ>=o?h:null}for(let h=t.overscaledZ-1;h>=o;h--){const f=t.scaledTo(h),y=this._getLoadedTile(f);if(y)return y}}_getLoadedTile(t){const o=this._tiles[t.key];return o&&o.hasData()?o:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){const o=Math.ceil(t.width/this._source.tileSize)+1,h=Math.ceil(t.height/this._source.tileSize)+1,f=Math.floor(o*h*5),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,f):f;this._cache.setMaxSize(y)}handleWrapJump(t){const o=Math.round((t-(this._prevLng===void 0?t:this._prevLng))/360);if(this._prevLng=t,o){const h={};for(const f in this._tiles){const y=this._tiles[f];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+o),h[y.tileID.key]=y}this._tiles=h;for(const f in this._timers)clearTimeout(this._timers[f]),delete this._timers[f];for(const f in this._tiles)this._setTileReloadTimer(f,this._tiles[f])}}update(t,o){if(this.transform=t,this.terrain=o,!this._sourceLoaded||this._paused)return;let h;this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?h=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(P=>new r.OverscaledTileID(P.canonical.z,P.wrap,P.canonical.z,P.canonical.x,P.canonical.y)):(h=t.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:o}),this._source.hasTile&&(h=h.filter(P=>this._source.hasTile(P)))):h=[];const f=t.coveringZoomLevel(this._source),y=Math.max(f-pi.maxOverzooming,this._source.minzoom),x=Math.max(f+pi.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const P={};for(const F of h)if(F.canonical.z>this._source.minzoom){const V=F.scaledTo(F.canonical.z-1);P[V.key]=V;const G=F.scaledTo(Math.max(this._source.minzoom,Math.min(F.canonical.z,5)));P[G.key]=G}h=h.concat(Object.values(P))}const E=this._updateRetainedTiles(h,f);if(Bi(this._source.type)){const P={},F={},V=Object.keys(E);for(const G of V){const te=E[G],J=this._tiles[G];if(!J||J.fadeEndTime&&J.fadeEndTime<=r.exported.now())continue;const Q=this.findLoadedParent(te,y);Q&&(this._addTile(Q.tileID),P[Q.tileID.key]=Q.tileID),F[G]=te}this._retainLoadedChildren(F,f,x,E);for(const G in P)E[G]||(this._coveredTiles[G]=!0,E[G]=P[G]);if(o){const G={},te={};for(const J of h)this._tiles[J.key].hasData()?G[J.key]=J:te[J.key]=J;for(const J in te){const Q=te[J].children(this._source.maxzoom);this._tiles[Q[0].key]&&this._tiles[Q[1].key]&&this._tiles[Q[2].key]&&this._tiles[Q[3].key]&&(G[Q[0].key]=E[Q[0].key]=Q[0],G[Q[1].key]=E[Q[1].key]=Q[1],G[Q[2].key]=E[Q[2].key]=Q[2],G[Q[3].key]=E[Q[3].key]=Q[3],delete te[J])}for(const J in te){const Q=this.findLoadedParent(te[J],this._source.minzoom);if(Q){G[Q.tileID.key]=E[Q.tileID.key]=Q.tileID;for(const pe in G)G[pe].isChildOf(Q.tileID)&&delete G[pe]}}for(const J in this._tiles)G[J]||(this._coveredTiles[J]=!0)}}for(const P in E)this._tiles[P].clearFadeHold();const M=r.keysDifference(this._tiles,E);for(const P of M){const F=this._tiles[P];F.hasSymbolBuckets&&!F.holdingForFade()?F.setHoldDuration(this.map._fadeDuration):F.hasSymbolBuckets&&!F.symbolFadeFinished()||this._removeTile(P)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,o){const h={},f={},y=Math.max(o-pi.maxOverzooming,this._source.minzoom),x=Math.max(o+pi.maxUnderzooming,this._source.minzoom),E={};for(const M of t){const P=this._addTile(M);h[M.key]=M,P.hasData()||o<this._source.maxzoom&&(E[M.key]=M)}this._retainLoadedChildren(E,o,x,h);for(const M of t){let P=this._tiles[M.key];if(P.hasData())continue;if(o+1>this._source.maxzoom){const V=M.children(this._source.maxzoom)[0],G=this.getTile(V);if(G&&G.hasData()){h[V.key]=V;continue}}else{const V=M.children(this._source.maxzoom);if(h[V[0].key]&&h[V[1].key]&&h[V[2].key]&&h[V[3].key])continue}let F=P.wasRequested();for(let V=M.overscaledZ-1;V>=y;--V){const G=M.scaledTo(V);if(f[G.key]||(f[G.key]=!0,P=this.getTile(G),!P&&F&&(P=this._addTile(G)),P&&(h[G.key]=G,F=P.wasRequested(),P.hasData())))break}}return h}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const o=[];let h,f=this._tiles[t].tileID;for(;f.overscaledZ>0;){if(f.key in this._loadedParentTiles){h=this._loadedParentTiles[f.key];break}o.push(f.key);const y=f.scaledTo(f.overscaledZ-1);if(h=this._getLoadedTile(y),h)break;f=y}for(const y of o)this._loadedParentTiles[y]=h}}_addTile(t){let o=this._tiles[t.key];if(o)return o;o=this._cache.getAndRemove(t),o&&(this._setTileReloadTimer(t.key,o),o.tileID=t,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,o)));const h=o;return o||(o=new Qt(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(o,this._tileLoaded.bind(this,o,t.key,o.state))),o.uses++,this._tiles[t.key]=o,h||this._source.fire(new r.Event("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o}_setTileReloadTimer(t,o){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const h=o.getExpiryTimeout();h&&(this._timers[t]=setTimeout(()=>{this._reloadTile(t,"expired"),delete this._timers[t]},h))}_removeTile(t){const o=this._tiles[t];o&&(o.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(t,o,h){const f=[],y=this.transform;if(!y)return f;const x=h?y.getCameraQueryGeometry(t):t,E=t.map(J=>y.pointCoordinate(J,this.terrain)),M=x.map(J=>y.pointCoordinate(J,this.terrain)),P=this.getIds();let F=1/0,V=1/0,G=-1/0,te=-1/0;for(const J of M)F=Math.min(F,J.x),V=Math.min(V,J.y),G=Math.max(G,J.x),te=Math.max(te,J.y);for(let J=0;J<P.length;J++){const Q=this._tiles[P[J]];if(Q.holdingForFade())continue;const pe=Q.tileID,be=Math.pow(2,y.zoom-Q.tileID.overscaledZ),Ae=o*Q.queryPadding*r.EXTENT/Q.tileSize/be,ae=[pe.getTilePoint(new r.MercatorCoordinate(F,V)),pe.getTilePoint(new r.MercatorCoordinate(G,te))];if(ae[0].x-Ae<r.EXTENT&&ae[0].y-Ae<r.EXTENT&&ae[1].x+Ae>=0&&ae[1].y+Ae>=0){const ze=E.map(qe=>pe.getTilePoint(qe)),De=M.map(qe=>pe.getTilePoint(qe));f.push({tile:Q,tileID:pe,queryGeometry:ze,cameraQueryGeometry:De,scale:be})}}return f}getVisibleCoordinates(t){const o=this.getRenderableIds(t).map(h=>this._tiles[h].tileID);for(const h of o)h.posMatrix=this.transform.calculatePosMatrix(h.toUnwrapped());return o}hasTransition(){if(this._source.hasTransition())return!0;if(Bi(this._source.type))for(const t in this._tiles){const o=this._tiles[t];if(o.fadeEndTime!==void 0&&o.fadeEndTime>=r.exported.now())return!0}return!1}setFeatureState(t,o,h){this._state.updateState(t=t||"_geojsonTileLayer",o,h)}removeFeatureState(t,o,h){this._state.removeFeatureState(t=t||"_geojsonTileLayer",o,h)}getFeatureState(t,o){return this._state.getState(t=t||"_geojsonTileLayer",o)}setDependencies(t,o,h){const f=this._tiles[t];f&&f.setDependencies(o,h)}reloadTilesForDependencies(t,o){for(const h in this._tiles)this._tiles[h].hasDependency(t,o)&&this._reloadTile(h,"reloading");this._cache.filter(h=>!h.hasDependency(t,o))}}function ot(d,t){const o=Math.abs(2*d.wrap)-+(d.wrap<0),h=Math.abs(2*t.wrap)-+(t.wrap<0);return d.overscaledZ-t.overscaledZ||h-o||t.canonical.y-d.canonical.y||t.canonical.x-d.canonical.x}function Bi(d){return d==="raster"||d==="image"||d==="video"}pi.maxOverzooming=10,pi.maxUnderzooming=3;const wi="mapboxgl_preloaded_worker_pool";class Qe{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<Qe.workerCount;)this.workers.push(new Worker(Ns.workerUrl));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.numActive()===0&&(this.workers.forEach(o=>{o.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[wi]}numActive(){return Object.keys(this.active).length}}const Nt=Math.floor(r.exported.hardwareConcurrency/2);let ki;function Vi(){return ki||(ki=new Qe),ki}function fn(d,t){const o={};for(const h in d)h!=="ref"&&(o[h]=d[h]);return r.refProperties.forEach(h=>{h in t&&(o[h]=t[h])}),o}function Mi(d){d=d.slice();const t=Object.create(null);for(let o=0;o<d.length;o++)t[d[o].id]=d[o];for(let o=0;o<d.length;o++)"ref"in d[o]&&(d[o]=fn(d[o],t[d[o].ref]));return d}Qe.workerCount=Math.max(Math.min(Nt,6),1);const ni={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function si(d,t,o){o.push({command:ni.addSource,args:[d,t[d]]})}function Dn(d,t,o){t.push({command:ni.removeSource,args:[d]}),o[d]=!0}function ei(d,t,o,h){Dn(d,o,h),si(d,t,o)}function qt(d,t,o){let h;for(h in d[o])if(Object.prototype.hasOwnProperty.call(d[o],h)&&h!=="data"&&!I(d[o][h],t[o][h]))return!1;for(h in t[o])if(Object.prototype.hasOwnProperty.call(t[o],h)&&h!=="data"&&!I(d[o][h],t[o][h]))return!1;return!0}function Xi(d,t,o,h,f,y){let x;for(x in t=t||{},d=d||{})Object.prototype.hasOwnProperty.call(d,x)&&(I(d[x],t[x])||o.push({command:y,args:[h,x,t[x],f]}));for(x in t)Object.prototype.hasOwnProperty.call(t,x)&&!Object.prototype.hasOwnProperty.call(d,x)&&(I(d[x],t[x])||o.push({command:y,args:[h,x,t[x],f]}))}function ti(d){return d.id}function mn(d,t){return d[t.id]=t,d}class xn{constructor(t,o){this.reset(t,o)}reset(t,o){this.points=t||[],this._distances=[0];for(let h=1;h<this.points.length;h++)this._distances[h]=this._distances[h-1]+this.points[h].dist(this.points[h-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(this.points.length===1)return this.points[0];t=r.clamp(t,0,1);let o=1,h=this._distances[o];const f=t*this.paddedLength+this.padding;for(;h<f&&o<this._distances.length;)h=this._distances[++o];const y=o-1,x=this._distances[y],E=h-x,M=E>0?(f-x)/E:0;return this.points[y].mult(1-M).add(this.points[o].mult(M))}}function se(d,t){let o=!0;return d==="always"||d!=="never"&&t!=="never"||(o=!1),o}class Ie{constructor(t,o,h){const f=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(t/h),this.yCellCount=Math.ceil(o/h);for(let x=0;x<this.xCellCount*this.yCellCount;x++)f.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=o,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,o,h,f,y){this._forEachCell(o,h,f,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(o),this.bboxes.push(h),this.bboxes.push(f),this.bboxes.push(y)}insertCircle(t,o,h,f){this._forEachCell(o-f,h-f,o+f,h+f,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(o),this.circles.push(h),this.circles.push(f)}_insertBoxCell(t,o,h,f,y,x){this.boxCells[y].push(x)}_insertCircleCell(t,o,h,f,y,x){this.circleCells[y].push(x)}_query(t,o,h,f,y,x,E){if(h<0||t>this.width||f<0||o>this.height)return[];const M=[];if(t<=0&&o<=0&&this.width<=h&&this.height<=f){if(y)return[{key:null,x1:t,y1:o,x2:h,y2:f}];for(let P=0;P<this.boxKeys.length;P++)M.push({key:this.boxKeys[P],x1:this.bboxes[4*P],y1:this.bboxes[4*P+1],x2:this.bboxes[4*P+2],y2:this.bboxes[4*P+3]});for(let P=0;P<this.circleKeys.length;P++){const F=this.circles[3*P],V=this.circles[3*P+1],G=this.circles[3*P+2];M.push({key:this.circleKeys[P],x1:F-G,y1:V-G,x2:F+G,y2:V+G})}}else this._forEachCell(t,o,h,f,this._queryCell,M,{hitTest:y,overlapMode:x,seenUids:{box:{},circle:{}}},E);return M}query(t,o,h,f){return this._query(t,o,h,f,!1,null)}hitTest(t,o,h,f,y,x){return this._query(t,o,h,f,!0,y,x).length>0}hitTestCircle(t,o,h,f,y){const x=t-h,E=t+h,M=o-h,P=o+h;if(E<0||x>this.width||P<0||M>this.height)return!1;const F=[];return this._forEachCell(x,M,E,P,this._queryCellCircle,F,{hitTest:!0,overlapMode:f,circle:{x:t,y:o,radius:h},seenUids:{box:{},circle:{}}},y),F.length>0}_queryCell(t,o,h,f,y,x,E,M){const{seenUids:P,hitTest:F,overlapMode:V}=E,G=this.boxCells[y];if(G!==null){const J=this.bboxes;for(const Q of G)if(!P.box[Q]){P.box[Q]=!0;const pe=4*Q,be=this.boxKeys[Q];if(t<=J[pe+2]&&o<=J[pe+3]&&h>=J[pe+0]&&f>=J[pe+1]&&(!M||M(be))&&(!F||!se(V,be.overlapMode))&&(x.push({key:be,x1:J[pe],y1:J[pe+1],x2:J[pe+2],y2:J[pe+3]}),F))return!0}}const te=this.circleCells[y];if(te!==null){const J=this.circles;for(const Q of te)if(!P.circle[Q]){P.circle[Q]=!0;const pe=3*Q,be=this.circleKeys[Q];if(this._circleAndRectCollide(J[pe],J[pe+1],J[pe+2],t,o,h,f)&&(!M||M(be))&&(!F||!se(V,be.overlapMode))){const Ae=J[pe],ae=J[pe+1],ze=J[pe+2];if(x.push({key:be,x1:Ae-ze,y1:ae-ze,x2:Ae+ze,y2:ae+ze}),F)return!0}}}return!1}_queryCellCircle(t,o,h,f,y,x,E,M){const{circle:P,seenUids:F,overlapMode:V}=E,G=this.boxCells[y];if(G!==null){const J=this.bboxes;for(const Q of G)if(!F.box[Q]){F.box[Q]=!0;const pe=4*Q,be=this.boxKeys[Q];if(this._circleAndRectCollide(P.x,P.y,P.radius,J[pe+0],J[pe+1],J[pe+2],J[pe+3])&&(!M||M(be))&&!se(V,be.overlapMode))return x.push(!0),!0}}const te=this.circleCells[y];if(te!==null){const J=this.circles;for(const Q of te)if(!F.circle[Q]){F.circle[Q]=!0;const pe=3*Q,be=this.circleKeys[Q];if(this._circlesCollide(J[pe],J[pe+1],J[pe+2],P.x,P.y,P.radius)&&(!M||M(be))&&!se(V,be.overlapMode))return x.push(!0),!0}}}_forEachCell(t,o,h,f,y,x,E,M){const P=this._convertToXCellCoord(t),F=this._convertToYCellCoord(o),V=this._convertToXCellCoord(h),G=this._convertToYCellCoord(f);for(let te=P;te<=V;te++)for(let J=F;J<=G;J++)if(y.call(this,t,o,h,f,this.xCellCount*J+te,x,E,M))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,o,h,f,y,x){const E=f-t,M=y-o,P=h+x;return P*P>E*E+M*M}_circleAndRectCollide(t,o,h,f,y,x,E){const M=(x-f)/2,P=Math.abs(t-(f+M));if(P>M+h)return!1;const F=(E-y)/2,V=Math.abs(o-(y+F));if(V>F+h)return!1;if(P<=M||V<=F)return!0;const G=P-M,te=V-F;return G*G+te*te<=h*h}}function mt(d,t,o,h,f){const y=r.create();return t?(r.scale(y,y,[1/f,1/f,1]),o||r.rotateZ(y,y,h.angle)):r.multiply(y,h.labelPlaneMatrix,d),y}function li(d,t,o,h,f){if(t){const y=r.clone(d);return r.scale(y,y,[f,f,1]),o||r.rotateZ(y,y,-h.angle),y}return h.glCoordMatrix}function $t(d,t,o){let h;o?(h=[d.x,d.y,o(d.x,d.y),1],r.transformMat4(h,h,t)):(h=[d.x,d.y,0,1],Cn(h,h,t));const f=h[3];return{point:new r.pointGeometry(h[0]/f,h[1]/f),signedDistanceFromCamera:f}}function di(d,t){return .5+d/t*.5}function Pi(d,t){const o=d[0]/d[3],h=d[1]/d[3];return o>=-t[0]&&o<=t[0]&&h>=-t[1]&&h<=t[1]}function tn(d,t,o,h,f,y,x,E,M,P){const F=h?d.textSizeData:d.iconSizeData,V=r.evaluateSizeForZoom(F,o.transform.zoom),G=[256/o.width*2+1,256/o.height*2+1],te=h?d.text.dynamicLayoutVertexArray:d.icon.dynamicLayoutVertexArray;te.clear();const J=d.lineVertexArray,Q=h?d.text.placedSymbolArray:d.icon.placedSymbolArray,pe=o.transform.width/o.transform.height;let be=!1;for(let Ae=0;Ae<Q.length;Ae++){const ae=Q.get(Ae);if(ae.hidden||ae.writingMode===r.WritingMode.vertical&&!be){Vt(ae.numGlyphs,te);continue}let ze;if(be=!1,P?(ze=[ae.anchorX,ae.anchorY,P(ae.anchorX,ae.anchorY),1],r.transformMat4(ze,ze,t)):(ze=[ae.anchorX,ae.anchorY,0,1],Cn(ze,ze,t)),!Pi(ze,G)){Vt(ae.numGlyphs,te);continue}const De=di(o.transform.cameraToCenterDistance,ze[3]),qe=r.evaluateSizeForFeature(F,V,ae),Ze=x?qe/De:qe*De,st=new r.pointGeometry(ae.anchorX,ae.anchorY),Ge=$t(st,f,P).point,Pt={},vt=ii(ae,Ze,!1,E,t,f,y,d.glyphOffsetArray,J,te,Ge,st,Pt,pe,M,P);be=vt.useVertical,(vt.notEnoughRoom||be||vt.needsFlipping&&ii(ae,Ze,!0,E,t,f,y,d.glyphOffsetArray,J,te,Ge,st,Pt,pe,M,P).notEnoughRoom)&&Vt(ae.numGlyphs,te)}h?d.text.dynamicLayoutVertexBuffer.updateData(te):d.icon.dynamicLayoutVertexBuffer.updateData(te)}function xi(d,t,o,h,f,y,x,E,M,P,F,V,G){const te=E.glyphStartIndex+E.numGlyphs,J=E.lineStartIndex,Q=E.lineStartIndex+E.lineLength,pe=t.getoffsetX(E.glyphStartIndex),be=t.getoffsetX(te-1),Ae=Yi(d*pe,o,h,f,y,x,E.segment,J,Q,M,P,F,V,G);if(!Ae)return null;const ae=Yi(d*be,o,h,f,y,x,E.segment,J,Q,M,P,F,V,G);return ae?{first:Ae,last:ae}:null}function nt(d,t,o,h){return d===r.WritingMode.horizontal&&Math.abs(o.y-t.y)>Math.abs(o.x-t.x)*h?{useVertical:!0}:(d===r.WritingMode.vertical?t.y<o.y:t.x>o.x)?{needsFlipping:!0}:null}function ii(d,t,o,h,f,y,x,E,M,P,F,V,G,te,J,Q){const pe=t/24,be=d.lineOffsetX*pe,Ae=d.lineOffsetY*pe;let ae;if(d.numGlyphs>1){const ze=d.glyphStartIndex+d.numGlyphs,De=d.lineStartIndex,qe=d.lineStartIndex+d.lineLength,Ze=xi(pe,E,be,Ae,o,F,V,d,M,y,G,J,Q);if(!Ze)return{notEnoughRoom:!0};const st=$t(Ze.first.point,x,Q).point,Ge=$t(Ze.last.point,x,Q).point;if(h&&!o){const Pt=nt(d.writingMode,st,Ge,te);if(Pt)return Pt}ae=[Ze.first];for(let Pt=d.glyphStartIndex+1;Pt<ze-1;Pt++)ae.push(Yi(pe*E.getoffsetX(Pt),be,Ae,o,F,V,d.segment,De,qe,M,y,G,J,Q));ae.push(Ze.last)}else{if(h&&!o){const De=$t(V,f,Q).point,qe=d.lineStartIndex+d.segment+1,Ze=new r.pointGeometry(M.getx(qe),M.gety(qe)),st=$t(Ze,f,Q),Ge=st.signedDistanceFromCamera>0?st.point:Ut(V,Ze,De,1,f,Q),Pt=nt(d.writingMode,De,Ge,te);if(Pt)return Pt}const ze=Yi(pe*E.getoffsetX(d.glyphStartIndex),be,Ae,o,F,V,d.segment,d.lineStartIndex,d.lineStartIndex+d.lineLength,M,y,G,J,Q);if(!ze)return{notEnoughRoom:!0};ae=[ze]}for(const ze of ae)r.addDynamicAttributes(P,ze.point,ze.angle);return{}}function Ut(d,t,o,h,f,y){const x=$t(d.add(d.sub(t)._unit()),f,y).point,E=o.sub(x);return o.add(E._mult(h/E.mag()))}function Yi(d,t,o,h,f,y,x,E,M,P,F,V,G,te){const J=h?d-t:d+t;let Q=J>0?1:-1,pe=0;h&&(Q*=-1,pe=Math.PI),Q<0&&(pe+=Math.PI);let be=Q>0?E+x:E+x+1,Ae=f,ae=f,ze=0,De=0;const qe=Math.abs(J),Ze=[];for(;ze+De<=qe;){if(be+=Q,be<E||be>=M)return null;if(ae=Ae,Ze.push(Ae),Ae=V[be],Ae===void 0){const zt=new r.pointGeometry(P.getx(be),P.gety(be)),yi=$t(zt,F,te);if(yi.signedDistanceFromCamera>0)Ae=V[be]=yi.point;else{const Ti=be-Q;Ae=Ut(ze===0?y:new r.pointGeometry(P.getx(Ti),P.gety(Ti)),zt,ae,qe-ze+1,F,te)}}ze+=De,De=ae.dist(Ae)}const st=(qe-ze)/De,Ge=Ae.sub(ae),Pt=Ge.mult(st)._add(ae);Pt._add(Ge._unit()._perp()._mult(o*Q));const vt=pe+Math.atan2(Ae.y-ae.y,Ae.x-ae.x);return Ze.push(Pt),{point:Pt,angle:G?vt:0,path:Ze}}const wn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Vt(d,t){for(let o=0;o<d;o++){const h=t.length;t.resize(h+4),t.float32.set(wn,3*h)}}function Cn(d,t,o){const h=t[0],f=t[1];return d[0]=o[0]*h+o[4]*f+o[12],d[1]=o[1]*h+o[5]*f+o[13],d[3]=o[3]*h+o[7]*f+o[15],d}const Zi=100;class sa{constructor(t,o=new Ie(t.width+200,t.height+200,25),h=new Ie(t.width+200,t.height+200,25)){this.transform=t,this.grid=o,this.ignoredGrid=h,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+Zi,this.screenBottomBoundary=t.height+Zi,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,o,h,f,y,x){const E=this.projectAndGetPerspectiveRatio(f,t.anchorPointX,t.anchorPointY,x),M=h*E.perspectiveRatio,P=t.x1*M+E.point.x,F=t.y1*M+E.point.y,V=t.x2*M+E.point.x,G=t.y2*M+E.point.y;return!this.isInsideGrid(P,F,V,G)||o!=="always"&&this.grid.hitTest(P,F,V,G,o,y)||E.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[P,F,V,G],offscreen:this.isOffscreen(P,F,V,G)}}placeCollisionCircles(t,o,h,f,y,x,E,M,P,F,V,G,te,J){const Q=[],pe=new r.pointGeometry(o.anchorX,o.anchorY),be=$t(pe,x,J),Ae=di(this.transform.cameraToCenterDistance,be.signedDistanceFromCamera),ae=(F?y/Ae:y*Ae)/r.ONE_EM,ze=$t(pe,E,J).point,De=xi(ae,f,o.lineOffsetX*ae,o.lineOffsetY*ae,!1,ze,pe,o,h,E,{},!1,J);let qe=!1,Ze=!1,st=!0;if(De){const Ge=.5*G*Ae+te,Pt=new r.pointGeometry(-100,-100),vt=new r.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),zt=new xn,yi=De.first,Ti=De.last;let ai=[];for(let Ki=yi.path.length-1;Ki>=1;Ki--)ai.push(yi.path[Ki]);for(let Ki=1;Ki<Ti.path.length;Ki++)ai.push(Ti.path[Ki]);const bn=2.5*Ge;if(M){const Ki=ai.map(Qi=>$t(Qi,M,J));ai=Ki.some(Qi=>Qi.signedDistanceFromCamera<=0)?[]:Ki.map(Qi=>Qi.point)}let vn=[];if(ai.length>0){const Ki=ai[0].clone(),Qi=ai[0].clone();for(let Tn=1;Tn<ai.length;Tn++)Ki.x=Math.min(Ki.x,ai[Tn].x),Ki.y=Math.min(Ki.y,ai[Tn].y),Qi.x=Math.max(Qi.x,ai[Tn].x),Qi.y=Math.max(Qi.y,ai[Tn].y);vn=Ki.x>=Pt.x&&Qi.x<=vt.x&&Ki.y>=Pt.y&&Qi.y<=vt.y?[ai]:Qi.x<Pt.x||Ki.x>vt.x||Qi.y<Pt.y||Ki.y>vt.y?[]:r.clipLine([ai],Pt.x,Pt.y,vt.x,vt.y)}for(const Ki of vn){zt.reset(Ki,.25*Ge);let Qi=0;Qi=zt.length<=.5*Ge?1:Math.ceil(zt.paddedLength/bn)+1;for(let Tn=0;Tn<Qi;Tn++){const Ta=Tn/Math.max(Qi-1,1),Kr=zt.lerp(Ta),Nr=Kr.x+Zi,Wr=Kr.y+Zi;Q.push(Nr,Wr,Ge,0);const Ts=Nr-Ge,Ar=Wr-Ge,tr=Nr+Ge,os=Wr+Ge;if(st=st&&this.isOffscreen(Ts,Ar,tr,os),Ze=Ze||this.isInsideGrid(Ts,Ar,tr,os),t!=="always"&&this.grid.hitTestCircle(Nr,Wr,Ge,t,V)&&(qe=!0,!P))return{circles:[],offscreen:!1,collisionDetected:qe}}}}return{circles:!P&&qe||!Ze||Ae<this.perspectiveRatioCutoff?[]:Q,offscreen:st,collisionDetected:qe}}queryRenderedSymbols(t){if(t.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const o=[];let h=1/0,f=1/0,y=-1/0,x=-1/0;for(const F of t){const V=new r.pointGeometry(F.x+Zi,F.y+Zi);h=Math.min(h,V.x),f=Math.min(f,V.y),y=Math.max(y,V.x),x=Math.max(x,V.y),o.push(V)}const E=this.grid.query(h,f,y,x).concat(this.ignoredGrid.query(h,f,y,x)),M={},P={};for(const F of E){const V=F.key;if(M[V.bucketInstanceId]===void 0&&(M[V.bucketInstanceId]={}),M[V.bucketInstanceId][V.featureIndex])continue;const G=[new r.pointGeometry(F.x1,F.y1),new r.pointGeometry(F.x2,F.y1),new r.pointGeometry(F.x2,F.y2),new r.pointGeometry(F.x1,F.y2)];r.polygonIntersectsPolygon(o,G)&&(M[V.bucketInstanceId][V.featureIndex]=!0,P[V.bucketInstanceId]===void 0&&(P[V.bucketInstanceId]=[]),P[V.bucketInstanceId].push(V.featureIndex))}return P}insertCollisionBox(t,o,h,f,y,x){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:f,featureIndex:y,collisionGroupID:x,overlapMode:o},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,o,h,f,y,x){const E=h?this.ignoredGrid:this.grid,M={bucketInstanceId:f,featureIndex:y,collisionGroupID:x,overlapMode:o};for(let P=0;P<t.length;P+=4)E.insertCircle(M,t[P],t[P+1],t[P+2])}projectAndGetPerspectiveRatio(t,o,h,f){let y;return f?(y=[o,h,f(o,h),1],r.transformMat4(y,y,t)):(y=[o,h,0,1],Cn(y,y,t)),{point:new r.pointGeometry((y[0]/y[3]+1)/2*this.transform.width+Zi,(-y[1]/y[3]+1)/2*this.transform.height+Zi),perspectiveRatio:.5+this.transform.cameraToCenterDistance/y[3]*.5}}isOffscreen(t,o,h,f){return h<Zi||t>=this.screenRightBoundary||f<Zi||o>this.screenBottomBoundary}isInsideGrid(t,o,h,f){return h>=0&&t<this.gridRightBoundary&&f>=0&&o<this.gridBottomBoundary}getViewportMatrix(){const t=r.identity([]);return r.translate(t,t,[-100,-100,0]),t}}function Fi(d,t,o){return t*(r.EXTENT/(d.tileSize*Math.pow(2,o-d.tileID.overscaledZ)))}class on{constructor(t,o,h,f){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?o:-o))):f&&h?1:0,this.placed=h}isHidden(){return this.opacity===0&&!this.placed}}class fi{constructor(t,o,h,f,y){this.text=new on(t?t.text:null,o,h,y),this.icon=new on(t?t.icon:null,o,f,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Bn{constructor(t,o,h){this.text=t,this.icon=o,this.skipFade=h}}class gn{constructor(){this.invProjMatrix=r.create(),this.viewportMatrix=r.create(),this.circles=[]}}class _n{constructor(t,o,h,f,y){this.bucketInstanceId=t,this.featureIndex=o,this.sourceLayerIndex=h,this.bucketIndex=f,this.tileID=y}}class Sn{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const o=++this.maxGroupID;this.collisionGroups[t]={ID:o,predicate:h=>h.collisionGroupID===o}}return this.collisionGroups[t]}}function Zn(d,t,o,h,f){const{horizontalAlign:y,verticalAlign:x}=r.getAnchorAlignment(d),E=-(y-.5)*t,M=-(x-.5)*o,P=r.evaluateVariableOffset(d,h);return new r.pointGeometry(E+P[0]*f,M+P[1]*f)}function hn(d,t,o,h,f,y){const{x1:x,x2:E,y1:M,y2:P,anchorPointX:F,anchorPointY:V}=d,G=new r.pointGeometry(t,o);return h&&G._rotate(f?y:-y),{x1:x+G.x,y1:M+G.y,x2:E+G.x,y2:P+G.y,anchorPointX:F,anchorPointY:V}}class W{constructor(t,o,h,f,y){this.transform=t.clone(),this.terrain=o,this.collisionIndex=new sa(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new Sn(f),this.collisionCircleArrays={},this.prevPlacement=y,y&&(y.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,o,h,f){const y=h.getBucket(o),x=h.latestFeatureIndex;if(!y||!x||o.id!==y.layerIds[0])return;const E=h.collisionBoxArray,M=y.layers[0].layout,P=Math.pow(2,this.transform.zoom-h.tileID.overscaledZ),F=h.tileSize/r.EXTENT,V=this.transform.calculatePosMatrix(h.tileID.toUnwrapped()),G=M.get("text-pitch-alignment")==="map",te=M.get("text-rotation-alignment")==="map",J=Fi(h,1,this.transform.zoom),Q=mt(V,G,te,this.transform,J);let pe=null;if(G){const Ae=li(V,G,te,this.transform,J);pe=r.multiply([],this.transform.labelPlaneMatrix,Ae)}this.retainedQueryData[y.bucketInstanceId]=new _n(y.bucketInstanceId,x,y.sourceLayerIndex,y.index,h.tileID);const be={bucket:y,layout:M,posMatrix:V,textLabelPlaneMatrix:Q,labelToScreenMatrix:pe,scale:P,textPixelRatio:F,holdingForFade:h.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:r.evaluateSizeForZoom(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(f)for(const Ae of y.sortKeyRanges){const{sortKey:ae,symbolInstanceStart:ze,symbolInstanceEnd:De}=Ae;t.push({sortKey:ae,symbolInstanceStart:ze,symbolInstanceEnd:De,parameters:be})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:be})}attemptAnchorPlacement(t,o,h,f,y,x,E,M,P,F,V,G,te,J,Q,pe){const be=[G.textOffset0,G.textOffset1],Ae=Zn(t,h,f,be,y),ae=this.collisionIndex.placeCollisionBox(hn(o,Ae.x,Ae.y,x,E,this.transform.angle),V,M,P,F.predicate,pe);if((!Q||this.collisionIndex.placeCollisionBox(hn(Q,Ae.x,Ae.y,x,E,this.transform.angle),V,M,P,F.predicate,pe).box.length!==0)&&ae.box.length>0){let ze;if(this.prevPlacement&&this.prevPlacement.variableOffsets[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID].text&&(ze=this.prevPlacement.variableOffsets[G.crossTileID].anchor),G.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[G.crossTileID]={textOffset:be,width:h,height:f,anchor:t,textBoxScale:y,prevAnchor:ze},this.markUsedJustification(te,t,G,J),te.allowVerticalPlacement&&(this.markUsedOrientation(te,J,G),this.placedOrientations[G.crossTileID]=J),{shift:Ae,placedGlyphBoxes:ae}}}placeLayerBucketPart(t,o,h){const{bucket:f,layout:y,posMatrix:x,textLabelPlaneMatrix:E,labelToScreenMatrix:M,textPixelRatio:P,holdingForFade:F,collisionBoxArray:V,partiallyEvaluatedTextSize:G,collisionGroup:te}=t.parameters,J=y.get("text-optional"),Q=y.get("icon-optional"),pe=r.getOverlapMode(y,"text-overlap","text-allow-overlap"),be=pe==="always",Ae=r.getOverlapMode(y,"icon-overlap","icon-allow-overlap"),ae=Ae==="always",ze=y.get("text-rotation-alignment")==="map",De=y.get("text-pitch-alignment")==="map",qe=y.get("icon-text-fit")!=="none",Ze=y.get("symbol-z-order")==="viewport-y",st=be&&(ae||!f.hasIconData()||Q),Ge=ae&&(be||!f.hasTextData()||J);!f.collisionArrays&&V&&f.deserializeCollisionBoxes(V);const Pt=(vt,zt)=>{if(o[vt.crossTileID])return;if(F)return void(this.placements[vt.crossTileID]=new Bn(!1,!1,!1));let yi=!1,Ti=!1,ai=!0,bn=null,vn={box:null,offscreen:null},Ki={box:null,offscreen:null},Qi=null,Tn=null,Ta=null,Kr=0,Nr=0,Wr=0;zt.textFeatureIndex?Kr=zt.textFeatureIndex:vt.useRuntimeCollisionCircles&&(Kr=vt.featureIndex),zt.verticalTextFeatureIndex&&(Nr=zt.verticalTextFeatureIndex);const Ts=this.retainedQueryData[f.bucketInstanceId].tileID,Ar=this.terrain?(_a,Li)=>this.terrain.getElevation(Ts,_a,Li):null;for(const _a of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const Li=zt[_a];Li&&(Li.elevation=Ar?Ar(Li.anchorPointX,Li.anchorPointY):0)}const tr=zt.textBox;if(tr){const _a=pn=>{let Sa=r.WritingMode.horizontal;if(f.allowVerticalPlacement&&!pn&&this.prevPlacement){const Ea=this.prevPlacement.placedOrientations[vt.crossTileID];Ea&&(this.placedOrientations[vt.crossTileID]=Ea,Sa=Ea,this.markUsedOrientation(f,Sa,vt))}return Sa},Li=(pn,Sa)=>{if(f.allowVerticalPlacement&&vt.numVerticalGlyphVertices>0&&zt.verticalTextBox){for(const Ea of f.writingModes)if(Ea===r.WritingMode.vertical?(vn=Sa(),Ki=vn):vn=pn(),vn&&vn.box&&vn.box.length)break}else vn=pn()};if(y.get("text-variable-anchor")){let pn=y.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[vt.crossTileID]){const Hn=this.prevPlacement.variableOffsets[vt.crossTileID];pn.indexOf(Hn.anchor)>0&&(pn=pn.filter(kr=>kr!==Hn.anchor),pn.unshift(Hn.anchor))}const Sa=(Hn,kr,Us)=>{const Wl=Hn.x2-Hn.x1,lo=Hn.y2-Hn.y1,qc=vt.textBoxScale,Xl=qe&&Ae==="never"?kr:null;let Ss={box:[],offscreen:!1};const Vs=pe!=="never"?2*pn.length:pn.length;for(let js=0;js<Vs;++js){const dl=this.attemptAnchorPlacement(pn[js%pn.length],Hn,Wl,lo,qc,ze,De,P,x,te,js>=pn.length?pe:"never",vt,f,Us,Xl,Ar);if(dl&&(Ss=dl.placedGlyphBoxes,Ss&&Ss.box&&Ss.box.length)){yi=!0,bn=dl.shift;break}}return Ss};Li(()=>Sa(tr,zt.iconBox,r.WritingMode.horizontal),()=>{const Hn=zt.verticalTextBox;return f.allowVerticalPlacement&&!(vn&&vn.box&&vn.box.length)&&vt.numVerticalGlyphVertices>0&&Hn?Sa(Hn,zt.verticalIconBox,r.WritingMode.vertical):{box:null,offscreen:null}}),vn&&(yi=vn.box,ai=vn.offscreen);const Ea=_a(vn&&vn.box);if(!yi&&this.prevPlacement){const Hn=this.prevPlacement.variableOffsets[vt.crossTileID];Hn&&(this.variableOffsets[vt.crossTileID]=Hn,this.markUsedJustification(f,Hn.anchor,vt,Ea))}}else{const pn=(Sa,Ea)=>{const Hn=this.collisionIndex.placeCollisionBox(Sa,pe,P,x,te.predicate,Ar);return Hn&&Hn.box&&Hn.box.length&&(this.markUsedOrientation(f,Ea,vt),this.placedOrientations[vt.crossTileID]=Ea),Hn};Li(()=>pn(tr,r.WritingMode.horizontal),()=>{const Sa=zt.verticalTextBox;return f.allowVerticalPlacement&&vt.numVerticalGlyphVertices>0&&Sa?pn(Sa,r.WritingMode.vertical):{box:null,offscreen:null}}),_a(vn&&vn.box&&vn.box.length)}}if(Qi=vn,yi=Qi&&Qi.box&&Qi.box.length>0,ai=Qi&&Qi.offscreen,vt.useRuntimeCollisionCircles){const _a=f.text.placedSymbolArray.get(vt.centerJustifiedTextSymbolIndex),Li=r.evaluateSizeForFeature(f.textSizeData,G,_a),pn=y.get("text-padding");Tn=this.collisionIndex.placeCollisionCircles(pe,_a,f.lineVertexArray,f.glyphOffsetArray,Li,x,E,M,h,De,te.predicate,vt.collisionCircleDiameter,pn,Ar),Tn.circles.length&&Tn.collisionDetected&&!h&&r.warnOnce("Collisions detected, but collision boxes are not shown"),yi=be||Tn.circles.length>0&&!Tn.collisionDetected,ai=ai&&Tn.offscreen}if(zt.iconFeatureIndex&&(Wr=zt.iconFeatureIndex),zt.iconBox){const _a=Li=>{const pn=qe&&bn?hn(Li,bn.x,bn.y,ze,De,this.transform.angle):Li;return this.collisionIndex.placeCollisionBox(pn,Ae,P,x,te.predicate,Ar)};Ki&&Ki.box&&Ki.box.length&&zt.verticalIconBox?(Ta=_a(zt.verticalIconBox),Ti=Ta.box.length>0):(Ta=_a(zt.iconBox),Ti=Ta.box.length>0),ai=ai&&Ta.offscreen}const os=J||vt.numHorizontalGlyphVertices===0&&vt.numVerticalGlyphVertices===0,hl=Q||vt.numIconVertices===0;if(os||hl?hl?os||(Ti=Ti&&yi):yi=Ti&&yi:Ti=yi=Ti&&yi,yi&&Qi&&Qi.box&&this.collisionIndex.insertCollisionBox(Qi.box,pe,y.get("text-ignore-placement"),f.bucketInstanceId,Ki&&Ki.box&&Nr?Nr:Kr,te.ID),Ti&&Ta&&this.collisionIndex.insertCollisionBox(Ta.box,Ae,y.get("icon-ignore-placement"),f.bucketInstanceId,Wr,te.ID),Tn&&(yi&&this.collisionIndex.insertCollisionCircles(Tn.circles,pe,y.get("text-ignore-placement"),f.bucketInstanceId,Kr,te.ID),h)){const _a=f.bucketInstanceId;let Li=this.collisionCircleArrays[_a];Li===void 0&&(Li=this.collisionCircleArrays[_a]=new gn);for(let pn=0;pn<Tn.circles.length;pn+=4)Li.circles.push(Tn.circles[pn+0]),Li.circles.push(Tn.circles[pn+1]),Li.circles.push(Tn.circles[pn+2]),Li.circles.push(Tn.collisionDetected?1:0)}if(vt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(f.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[vt.crossTileID]=new Bn(yi||st,Ti||Ge,ai||f.justReloaded),o[vt.crossTileID]=!0};if(Ze){if(t.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const vt=f.getSortedSymbolIndexes(this.transform.angle);for(let zt=vt.length-1;zt>=0;--zt){const yi=vt[zt];Pt(f.symbolInstances.get(yi),f.collisionArrays[yi])}}else for(let vt=t.symbolInstanceStart;vt<t.symbolInstanceEnd;vt++)Pt(f.symbolInstances.get(vt),f.collisionArrays[vt]);if(h&&f.bucketInstanceId in this.collisionCircleArrays){const vt=this.collisionCircleArrays[f.bucketInstanceId];r.invert(vt.invProjMatrix,x),vt.viewportMatrix=this.collisionIndex.getViewportMatrix()}f.justReloaded=!1}markUsedJustification(t,o,h,f){let y;y=f===r.WritingMode.vertical?h.verticalPlacedTextSymbolIndex:{left:h.leftJustifiedTextSymbolIndex,center:h.centerJustifiedTextSymbolIndex,right:h.rightJustifiedTextSymbolIndex}[r.getAnchorJustification(o)];const x=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex,h.verticalPlacedTextSymbolIndex];for(const E of x)E>=0&&(t.text.placedSymbolArray.get(E).crossTileID=y>=0&&E!==y?0:h.crossTileID)}markUsedOrientation(t,o,h){const f=o===r.WritingMode.horizontal||o===r.WritingMode.horizontalOnly?o:0,y=o===r.WritingMode.vertical?o:0,x=[h.leftJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.rightJustifiedTextSymbolIndex];for(const E of x)t.text.placedSymbolArray.get(E).placedOrientation=f;h.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(h.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const o=this.prevPlacement;let h=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;const f=o?o.symbolFadeChange(t):1,y=o?o.opacities:{},x=o?o.variableOffsets:{},E=o?o.placedOrientations:{};for(const M in this.placements){const P=this.placements[M],F=y[M];F?(this.opacities[M]=new fi(F,f,P.text,P.icon),h=h||P.text!==F.text.placed||P.icon!==F.icon.placed):(this.opacities[M]=new fi(null,f,P.text,P.icon,P.skipFade),h=h||P.text||P.icon)}for(const M in y){const P=y[M];if(!this.opacities[M]){const F=new fi(P,f,!1,!1);F.isHidden()||(this.opacities[M]=F,h=h||P.text.placed||P.icon.placed)}}for(const M in x)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=x[M]);for(const M in E)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=E[M]);if(o&&o.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");h?this.lastPlacementChangeTime=t:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:t)}updateLayerOpacities(t,o){const h={};for(const f of o){const y=f.getBucket(t);y&&f.latestFeatureIndex&&t.id===y.layerIds[0]&&this.updateBucketOpacities(y,h,f.collisionBoxArray)}}updateBucketOpacities(t,o,h){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const f=t.layers[0].layout,y=new fi(null,0,!1,!1,!0),x=f.get("text-allow-overlap"),E=f.get("icon-allow-overlap"),M=f.get("text-variable-anchor"),P=f.get("text-rotation-alignment")==="map",F=f.get("text-pitch-alignment")==="map",V=f.get("icon-text-fit")!=="none",G=new fi(null,0,x&&(E||!t.hasIconData()||f.get("icon-optional")),E&&(x||!t.hasTextData()||f.get("text-optional")),!0);!t.collisionArrays&&h&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(h);const te=(J,Q,pe)=>{for(let be=0;be<Q/4;be++)J.opacityVertexArray.emplaceBack(pe)};for(let J=0;J<t.symbolInstances.length;J++){const Q=t.symbolInstances.get(J),{numHorizontalGlyphVertices:pe,numVerticalGlyphVertices:be,crossTileID:Ae}=Q;let ae=this.opacities[Ae];o[Ae]?ae=y:ae||(ae=G,this.opacities[Ae]=ae),o[Ae]=!0;const ze=Q.numIconVertices>0,De=this.placedOrientations[Q.crossTileID],qe=De===r.WritingMode.vertical,Ze=De===r.WritingMode.horizontal||De===r.WritingMode.horizontalOnly;if(pe>0||be>0){const st=fe(ae.text);te(t.text,pe,qe?Be:st),te(t.text,be,Ze?Be:st);const Ge=ae.text.isHidden();[Q.rightJustifiedTextSymbolIndex,Q.centerJustifiedTextSymbolIndex,Q.leftJustifiedTextSymbolIndex].forEach(zt=>{zt>=0&&(t.text.placedSymbolArray.get(zt).hidden=Ge||qe?1:0)}),Q.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(Q.verticalPlacedTextSymbolIndex).hidden=Ge||Ze?1:0);const Pt=this.variableOffsets[Q.crossTileID];Pt&&this.markUsedJustification(t,Pt.anchor,Q,De);const vt=this.placedOrientations[Q.crossTileID];vt&&(this.markUsedJustification(t,"left",Q,vt),this.markUsedOrientation(t,vt,Q))}if(ze){const st=fe(ae.icon),Ge=!(V&&Q.verticalPlacedIconSymbolIndex&&qe);Q.placedIconSymbolIndex>=0&&(te(t.icon,Q.numIconVertices,Ge?st:Be),t.icon.placedSymbolArray.get(Q.placedIconSymbolIndex).hidden=ae.icon.isHidden()),Q.verticalPlacedIconSymbolIndex>=0&&(te(t.icon,Q.numVerticalIconVertices,Ge?Be:st),t.icon.placedSymbolArray.get(Q.verticalPlacedIconSymbolIndex).hidden=ae.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const st=t.collisionArrays[J];if(st){let Ge=new r.pointGeometry(0,0);if(st.textBox||st.verticalTextBox){let vt=!0;if(M){const zt=this.variableOffsets[Ae];zt?(Ge=Zn(zt.anchor,zt.width,zt.height,zt.textOffset,zt.textBoxScale),P&&Ge._rotate(F?this.transform.angle:-this.transform.angle)):vt=!1}st.textBox&&L(t.textCollisionBox.collisionVertexArray,ae.text.placed,!vt||qe,Ge.x,Ge.y),st.verticalTextBox&&L(t.textCollisionBox.collisionVertexArray,ae.text.placed,!vt||Ze,Ge.x,Ge.y)}const Pt=Boolean(!Ze&&st.verticalIconBox);st.iconBox&&L(t.iconCollisionBox.collisionVertexArray,ae.icon.placed,Pt,V?Ge.x:0,V?Ge.y:0),st.verticalIconBox&&L(t.iconCollisionBox.collisionVertexArray,ae.icon.placed,!Pt,V?Ge.x:0,V?Ge.y:0)}}}if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);if(t.bucketInstanceId in this.collisionCircleArrays){const J=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=J.invProjMatrix,t.placementViewportMatrix=J.viewportMatrix,t.collisionCircleArray=J.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(t){return this.fadeDuration===0?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,o){const h=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*h>t}setStale(){this.stale=!0}}function L(d,t,o,h,f){d.emplaceBack(t?1:0,o?1:0,h||0,f||0),d.emplaceBack(t?1:0,o?1:0,h||0,f||0),d.emplaceBack(t?1:0,o?1:0,h||0,f||0),d.emplaceBack(t?1:0,o?1:0,h||0,f||0)}const B=Math.pow(2,25),R=Math.pow(2,24),U=Math.pow(2,17),X=Math.pow(2,16),ce=Math.pow(2,9),ne=Math.pow(2,8),oe=Math.pow(2,1);function fe(d){if(d.opacity===0&&!d.placed)return 0;if(d.opacity===1&&d.placed)return 4294967295;const t=d.placed?1:0,o=Math.floor(127*d.opacity);return o*B+t*R+o*U+t*X+o*ce+t*ne+o*oe+t}const Be=0;class Ye{constructor(t){this._sortAcrossTiles=t.layout.get("symbol-z-order")!=="viewport-y"&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,o,h,f,y){const x=this._bucketParts;for(;this._currentTileIndex<t.length;)if(o.getBucketParts(x,f,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,x.sort((E,M)=>E.sortKey-M.sortKey));this._currentPartIndex<x.length;)if(o.placeLayerBucketPart(x[this._currentPartIndex],this._seenCrossTileIDs,h),this._currentPartIndex++,y())return!0;return!1}}class Re{constructor(t,o,h,f,y,x,E,M){this.placement=new W(t,o,x,E,M),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=f,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(t,o,h){const f=r.exported.now(),y=()=>{const x=r.exported.now()-f;return!this._forceFullPlacement&&x>2};for(;this._currentPlacementIndex>=0;){const x=o[t[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(x.type==="symbol"&&(!x.minzoom||x.minzoom<=E)&&(!x.maxzoom||x.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new Ye(x)),this._inProgressLayer.continuePlacement(h[x.source],this.placement,this._showCollisionBoxes,x,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const ht=512/r.EXTENT/2;class ft{constructor(t,o,h){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=h;for(let f=0;f<o.length;f++){const y=o.get(f),x=y.key;this.indexedSymbolInstances[x]||(this.indexedSymbolInstances[x]=[]),this.indexedSymbolInstances[x].push({crossTileID:y.crossTileID,coord:this.getScaledCoordinates(y,t)})}}getScaledCoordinates(t,o){const h=ht/Math.pow(2,o.canonical.z-this.tileID.canonical.z);return{x:Math.floor((o.canonical.x*r.EXTENT+t.anchorX)*h),y:Math.floor((o.canonical.y*r.EXTENT+t.anchorY)*h)}}findMatches(t,o,h){const f=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z);for(let y=0;y<t.length;y++){const x=t.get(y);if(x.crossTileID)continue;const E=this.indexedSymbolInstances[x.key];if(!E)continue;const M=this.getScaledCoordinates(x,o);for(const P of E)if(Math.abs(P.coord.x-M.x)<=f&&Math.abs(P.coord.y-M.y)<=f&&!h[P.crossTileID]){h[P.crossTileID]=!0,x.crossTileID=P.crossTileID;break}}}}class Ee{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class rt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const o=Math.round((t-this.lng)/360);if(o!==0)for(const h in this.indexes){const f=this.indexes[h],y={};for(const x in f){const E=f[x];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+o),y[E.tileID.key]=E}this.indexes[h]=y}this.lng=t}addBucket(t,o,h){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let y=0;y<o.symbolInstances.length;y++)o.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const f=this.usedCrossTileIDs[t.overscaledZ];for(const y in this.indexes){const x=this.indexes[y];if(Number(y)>t.overscaledZ)for(const E in x){const M=x[E];M.tileID.isChildOf(t)&&M.findMatches(o.symbolInstances,t,f)}else{const E=x[t.scaledTo(Number(y)).key];E&&E.findMatches(o.symbolInstances,t,f)}}for(let y=0;y<o.symbolInstances.length;y++){const x=o.symbolInstances.get(y);x.crossTileID||(x.crossTileID=h.generate(),f[x.crossTileID]=!0)}return this.indexes[t.overscaledZ]===void 0&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new ft(t,o.symbolInstances,o.bucketInstanceId),!0}removeBucketCrossTileIDs(t,o){for(const h in o.indexedSymbolInstances)for(const f of o.indexedSymbolInstances[h])delete this.usedCrossTileIDs[t][f.crossTileID]}removeStaleBuckets(t){let o=!1;for(const h in this.indexes){const f=this.indexes[h];for(const y in f)t[f[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(h,f[y]),delete f[y],o=!0)}return o}}class lt{constructor(){this.layerIndexes={},this.crossTileIDs=new Ee,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,o,h){let f=this.layerIndexes[t.id];f===void 0&&(f=this.layerIndexes[t.id]=new rt);let y=!1;const x={};f.handleWrapJump(h);for(const E of o){const M=E.getBucket(t);M&&t.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),f.addBucket(E.tileID,M,this.crossTileIDs)&&(y=!0),x[M.bucketInstanceId]=!0)}return f.removeStaleBuckets(x)&&(y=!0),y}pruneUnusedLayers(t){const o={};t.forEach(h=>{o[h]=!0});for(const h in this.layerIndexes)o[h]||delete this.layerIndexes[h]}}var bt=r.createLayout([{name:"a_pos",type:"Int16",components:2}]);class Zt extends r.Evented{constructor(t){super(),this.sourceCache=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=t._cache.max,t.usedForTerrain=!0,t.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const t in this._tiles){const o=this._tiles[t];o.textures.forEach(h=>h.destroy()),o.textures=[]}}update(t,o){this.sourceCache.update(t,o),this._renderableTilesKeys=[];for(const h of t.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:o}))this._renderableTilesKeys.push(h.key),this._tiles[h.key]||(h.posMatrix=new Float64Array(16),r.ortho(h.posMatrix,0,r.EXTENT,0,r.EXTENT,0,1),this._tiles[h.key]=new Qt(h,this.tileSize))}removeOutdated(t){const o={};this.renderHistory=this.renderHistory.filter((h,f)=>this.renderHistory.indexOf(h)===f).slice(0,this.renderHistorySize);for(const h of this._renderableTilesKeys)o[h]=!0;for(const h of this.renderHistory)o[h]=!0;for(const h in this._tiles)o[h]||(this._tiles[h].clearTextures(t),delete this._tiles[h])}getRenderableTiles(){return this._renderableTilesKeys.map(t=>this.getTileByID(t))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t){const o={};for(const h of this._renderableTilesKeys){const f=this._tiles[h].tileID;if(f.canonical.equals(t.canonical)){const y=t.clone();y.posMatrix=new Float64Array(16),r.ortho(y.posMatrix,0,r.EXTENT,0,r.EXTENT,0,1),o[h]=y}else if(f.canonical.isChildOf(t.canonical)){const y=t.clone();y.posMatrix=new Float64Array(16);const x=f.canonical.z-t.canonical.z,E=f.canonical.x-(f.canonical.x>>x<<x),M=f.canonical.y-(f.canonical.y>>x<<x),P=r.EXTENT>>x;r.ortho(y.posMatrix,0,P,0,P,0,1),r.translate(y.posMatrix,y.posMatrix,[-E*P,-M*P,0]),o[h]=y}else if(t.canonical.isChildOf(f.canonical)){const y=t.clone();y.posMatrix=new Float64Array(16);const x=t.canonical.z-f.canonical.z,E=t.canonical.x-(t.canonical.x>>x<<x),M=t.canonical.y-(t.canonical.y>>x<<x),P=r.EXTENT>>x;r.ortho(y.posMatrix,0,r.EXTENT,0,r.EXTENT,0,1),r.translate(y.posMatrix,y.posMatrix,[E*P,M*P,0]),r.scale(y.posMatrix,y.posMatrix,[1/2**x,1/2**x,0]),o[h]=y}}return o}getSourceTile(t,o){const h=this.sourceCache._source;let f=t.overscaledZ-this.deltaZoom;if(f>h.maxzoom&&(f=h.maxzoom),f<h.minzoom)return null;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(f).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[t.key]);if((!y||!y.dem)&&o)for(;f>=h.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(t.scaledTo(f--).key);return y}tilesAfterTime(t=Date.now()){return Object.values(this._tiles).filter(o=>o.timeLoaded>=t)}}class Rt{constructor(t,o,h){this.style=t,this.sourceCache=new Zt(o),this.options=h,this.exaggeration=typeof h.exaggeration=="number"?h.exaggeration:1,this.elevationOffset=typeof h.elevationOffset=="number"?h.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(t,o,h,f=r.EXTENT){if(!(o>=0&&o<f&&h>=0&&h<f))return this.elevationOffset;let y=0;const x=this.getTerrainData(t);if(x.tile&&x.tile.dem){const E=r.transformMat4$1([],[o/f*r.EXTENT,h/f*r.EXTENT],x.u_terrain_matrix),M=[E[0]*x.tile.dem.dim,E[1]*x.tile.dem.dim],P=[Math.floor(M[0]),Math.floor(M[1])],F=x.tile.dem.get(P[0],P[1]),V=x.tile.dem.get(P[0],P[1]+1),G=x.tile.dem.get(P[0]+1,P[1]),te=x.tile.dem.get(P[0]+1,P[1]+1);y=r.number(r.number(F,V,M[0]-P[0]),r.number(G,te,M[0]-P[0]),M[1]-P[1])}return y}rememberForRerender(t,o){for(const h in this.sourceCache._tiles){const f=this.sourceCache._tiles[h];(f.tileID.equals(o)||f.tileID.isChildOf(o))&&(t===this.sourceCache.sourceCache.id&&(f.timeLoaded=Date.now()),this._rerender[t]=this._rerender[t]||{},this._rerender[t][f.tileID.key]=!0)}}needsRerender(t,o){return this._rerender[t]&&this._rerender[t][o.key]}clearRerenderCache(){this._rerender={}}getElevation(t,o,h,f=r.EXTENT){return(this.getDEMElevation(t,o,h,f)+this.elevationOffset)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){const f=this.style.map.painter.context,y=new r.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new he(f,y,f.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new he(f,new r.RGBAImage({width:1,height:1}),f.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(f.gl.NEAREST,f.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=r.identity([])}const o=this.sourceCache.getSourceTile(t,!0);if(o&&o.dem&&(!o.demTexture||o.needsTerrainPrepare)){const f=this.style.map.painter.context;o.demTexture=this.style.map.painter.getTileTexture(o.dem.stride),o.demTexture?o.demTexture.update(o.dem.getPixels(),{premultiply:!1}):o.demTexture=new he(f,o.dem.getPixels(),f.gl.RGBA,{premultiply:!1}),o.demTexture.bind(f.gl.NEAREST,f.gl.CLAMP_TO_EDGE),o.needsTerrainPrepare=!1}const h=o&&o+o.tileID.key+t.key;if(h&&!this._demMatrixCache[h]){const f=this.sourceCache.sourceCache._source.maxzoom;let y=t.canonical.z-o.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=f?y=t.canonical.z-f:r.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const x=t.canonical.x-(t.canonical.x>>y<<y),E=t.canonical.y-(t.canonical.y>>y<<y),M=r.fromScaling(new Float64Array(16),[1/(r.EXTENT<<y),1/(r.EXTENT<<y),0]);r.translate(M,M,[x*r.EXTENT,E*r.EXTENT,0]),this._demMatrixCache[t.key]={matrix:M,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:o&&o.dem&&o.dem.dim||1,u_terrain_matrix:h?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:o&&o.dem&&o.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(o&&o.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:o}}getRTTFramebuffer(){const t=this.style.map.painter;if(!this._rttFramebuffer){const o=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=t.context.createFramebuffer(o,o,!0),this._rttFramebuffer.depthAttachment.set(t.context.createRenderbuffer(t.context.gl.DEPTH_COMPONENT16,o,o))}return this._rttFramebuffer}getFramebuffer(t){const o=this.style.map.painter,h=o.width/devicePixelRatio,f=o.height/devicePixelRatio;return!this._fbo||this._fbo.width===h&&this._fbo.height===f||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new he(o.context,{width:h,height:f,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new he(o.context,{width:h,height:f,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=o.context.createFramebuffer(h,f,!0),this._fbo.depthAttachment.set(o.context.createRenderbuffer(o.context.gl.DEPTH_COMPONENT16,h,f))),this._fbo.colorAttachment.set(t==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const t=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const o=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,x=0;y<this._coordsTextureSize;y++)for(let E=0;E<this._coordsTextureSize;E++,x+=4)o[x+0]=255&E,o[x+1]=255&y,o[x+2]=E>>8<<4|y>>8,o[x+3]=0;const h=new r.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(o.buffer)),f=new he(t,h,t.gl.RGBA,{premultiply:!1});return f.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=f,f}pointCoordinate(t){const o=new Uint8Array(4),h=this.style.map.painter,f=h.context,y=f.gl;f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(t.x,h.height/devicePixelRatio-t.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,o),f.bindFramebuffer.set(null);const x=o[0]+(o[2]>>4<<8),E=o[1]+((15&o[2])<<8),M=this.coordsIndex[255-o[3]],P=M&&this.sourceCache.getTileByID(M);if(!P)return null;const F=this._coordsTextureSize,V=(1<<P.tileID.canonical.z)*F;return new r.MercatorCoordinate((P.tileID.canonical.x*F+x)/V,(P.tileID.canonical.y*F+E)/V,this.getElevation(P.tileID,x,E,F))}getTerrainMesh(){if(this._mesh)return this._mesh;const t=this.style.map.painter.context,o=new r.PosArray,h=new r.TriangleIndexArray,f=this.meshSize,y=r.EXTENT/f,x=f*f;for(let E=0;E<=f;E++)for(let M=0;M<=f;M++)o.emplaceBack(M*y,E*y);for(let E=0;E<x;E+=f+1)for(let M=0;M<f;M++)h.emplaceBack(M+E,f+M+E+1,f+M+E+2),h.emplaceBack(M+E,f+M+E+2,M+E+1);return this._mesh={indexBuffer:t.createIndexBuffer(h),vertexBuffer:t.createVertexBuffer(o,bt.members),segments:r.SegmentVector.simpleSegment(0,0,o.length,h.length)},this._mesh}getMinMaxElevation(t){const o=this.getTerrainData(t).tile,h={minElevation:null,maxElevation:null};return o&&o.dem&&(h.minElevation=(o.dem.min+this.elevationOffset)*this.exaggeration,h.maxElevation=(o.dem.max+this.elevationOffset)*this.exaggeration),h}}const oi=(d,t)=>r.emitValidationErrors(d,t&&t.filter(o=>o.identifier!=="source.canvas")),ji=r.pick(ni,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),yn=r.pick(ni,["setCenter","setZoom","setBearing","setPitch"]),Ji=function(){const d={},t=r.spec.$version;for(const o in r.spec.$root){const h=r.spec.$root[o];if(h.required){let f=null;f=o==="version"?t:h.type==="array"?[]:{},f!=null&&(d[o]=f)}}return d}();class Pn extends r.Evented{constructor(t,o={}){super(),this.map=t,this.dispatcher=new it(Vi(),this),this.imageManager=new Te,this.imageManager.setEventedParent(this),this.glyphManager=new Oe(t._requestManager,o.localIdeographFontFamily),this.lineAtlas=new tt(256,512),this.crossTileSymbolIndex=new lt,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new r.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",r.getReferrer());const h=this;this._rtlTextPluginCallback=Pn.registerForPluginStateChange(f=>{h.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:f.pluginStatus,pluginURL:f.pluginURL},(y,x)=>{if(r.triggerPluginCompletionEvent(y),x&&x.every(E=>E))for(const E in h.sourceCaches)h.sourceCaches[E].reload()})}),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;const y=this.sourceCaches[f.sourceId];if(!y)return;const x=y.getSource();if(x&&x.vectorLayerIds)for(const E in this._layers){const M=this._layers[E];M.source===x.id&&this._validateLayer(M)}})}loadURL(t,o={}){this.fire(new r.Event("dataloading",{dataType:"style"}));const h=typeof o.validate!="boolean"||o.validate,f=this.map._requestManager.transformRequest(t,r.ResourceType.Style);this._request=r.getJSON(f,(y,x)=>{this._request=null,y?this.fire(new r.ErrorEvent(y)):x&&this._load(x,h)})}loadJSON(t,o={}){this.fire(new r.Event("dataloading",{dataType:"style"})),this._request=r.exported.frame(()=>{this._request=null,this._load(t,o.validate!==!1)})}loadEmpty(){this.fire(new r.Event("dataloading",{dataType:"style"})),this._load(Ji,!1)}_load(t,o){if(o&&oi(this,r.validateStyle(t)))return;this._loaded=!0,this.stylesheet=t;for(const f in t.sources)this.addSource(f,t.sources[f],{validate:!1});t.sprite?this._loadSprite(t.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);const h=Mi(this.stylesheet.layers);this._order=h.map(f=>f.id),this._layers={},this._serializedLayers={};for(let f of h)f=r.createStyleLayer(f),f.setEventedParent(this,{layer:{id:f.id}}),this._layers[f.id]=f,this._serializedLayers[f.id]=f.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Ve(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new r.Event("data",{dataType:"style"})),this.fire(new r.Event("style.load"))}_loadSprite(t){this._spriteRequest=function(o,h,f,y){let x,E,M;const P=f>1?"@2x":"";let F=r.getJSON(h.transformRequest(h.normalizeSpriteURL(o,P,".json"),r.ResourceType.SpriteJSON),(te,J)=>{F=null,M||(M=te,x=J,G())}),V=r.getImage(h.transformRequest(h.normalizeSpriteURL(o,P,".png"),r.ResourceType.SpriteImage),(te,J)=>{V=null,M||(M=te,E=J,G())});function G(){if(M)y(M);else if(x&&E){const te=r.exported.getImageData(E),J={};for(const Q in x){const{width:pe,height:be,x:Ae,y:ae,sdf:ze,pixelRatio:De,stretchX:qe,stretchY:Ze,content:st}=x[Q],Ge=new r.RGBAImage({width:pe,height:be});r.RGBAImage.copy(te,Ge,{x:Ae,y:ae},{x:0,y:0},{width:pe,height:be}),J[Q]={data:Ge,pixelRatio:De,sdf:ze,stretchX:qe,stretchY:Ze,content:st}}y(null,J)}}return{cancel(){F&&(F.cancel(),F=null),V&&(V.cancel(),V=null)}}}(t,this.map._requestManager,this.map.getPixelRatio(),(o,h)=>{if(this._spriteRequest=null,o)this.fire(new r.ErrorEvent(o));else if(h)for(const f in h)this.imageManager.addImage(f,h[f]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new r.Event("data",{dataType:"style"}))})}_validateLayer(t){const o=this.sourceCaches[t.source];if(!o)return;const h=t.sourceLayer;if(!h)return;const f=o.getSource();(f.type==="geojson"||f.vectorLayerIds&&f.vectorLayerIds.indexOf(h)===-1)&&this.fire(new r.ErrorEvent(new Error(`Source layer "${h}" does not exist on source "${f.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(t){const o=[];for(const h of t){const f=this._layers[h];f.type!=="custom"&&o.push(f.serialize())}return o}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;const o=this._changed;if(this._changed){const f=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(f.length||y.length)&&this._updateWorkerLayers(f,y);for(const x in this._updatedSources){const E=this._updatedSources[x];if(E==="reload")this._reloadSource(x);else{if(E!=="clear")throw new Error(`Invalid action ${E}`);this._clearSource(x)}}this._updateTilesForChangedImages();for(const x in this._updatedPaintProps)this._layers[x].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}const h={};for(const f in this.sourceCaches){const y=this.sourceCaches[f];h[f]=y.used,y.used=!1}for(const f of this._order){const y=this._layers[f];y.recalculate(t,this._availableImages),!y.isHidden(t.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(const f in h){const y=this.sourceCaches[f];h[f]!==y.used&&y.fire(new r.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:f}))}this.light.recalculate(t),this.z=t.zoom,o&&this.fire(new r.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateWorkerLayers(t,o){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:o})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(t){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),t){const o=this.sourceCaches[t.source];if(!o)throw new Error(`cannot load terrain, because there exists no source with ID: ${t.source}`);this.terrain=new Rt(this,o,t),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=h=>{h.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=h=>{h.tile&&(h.sourceId===t.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(h.sourceId,h.tile.tileID)):h.source.type==="geojson"&&this.terrain.rememberForRerender(h.sourceId,h.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new r.Event("terrain",{terrain:t}))}setState(t){if(this._checkLoaded(),oi(this,r.validateStyle(t)))return!1;(t=r.clone$1(t)).layers=Mi(t.layers);const o=function(f,y){if(!f)return[{command:ni.setStyle,args:[y]}];let x=[];try{if(!I(f.version,y.version))return[{command:ni.setStyle,args:[y]}];I(f.center,y.center)||x.push({command:ni.setCenter,args:[y.center]}),I(f.zoom,y.zoom)||x.push({command:ni.setZoom,args:[y.zoom]}),I(f.bearing,y.bearing)||x.push({command:ni.setBearing,args:[y.bearing]}),I(f.pitch,y.pitch)||x.push({command:ni.setPitch,args:[y.pitch]}),I(f.sprite,y.sprite)||x.push({command:ni.setSprite,args:[y.sprite]}),I(f.glyphs,y.glyphs)||x.push({command:ni.setGlyphs,args:[y.glyphs]}),I(f.transition,y.transition)||x.push({command:ni.setTransition,args:[y.transition]}),I(f.light,y.light)||x.push({command:ni.setLight,args:[y.light]});const E={},M=[];(function(F,V,G,te){let J;for(J in V=V||{},F=F||{})Object.prototype.hasOwnProperty.call(F,J)&&(Object.prototype.hasOwnProperty.call(V,J)||Dn(J,G,te));for(J in V)Object.prototype.hasOwnProperty.call(V,J)&&(Object.prototype.hasOwnProperty.call(F,J)?I(F[J],V[J])||(F[J].type==="geojson"&&V[J].type==="geojson"&&qt(F,V,J)?G.push({command:ni.setGeoJSONSourceData,args:[J,V[J].data]}):ei(J,V,G,te)):si(J,V,G))})(f.sources,y.sources,M,E);const P=[];f.layers&&f.layers.forEach(F=>{E[F.source]?x.push({command:ni.removeLayer,args:[F.id]}):P.push(F)}),x=x.concat(M),function(F,V,G){V=V||[];const te=(F=F||[]).map(ti),J=V.map(ti),Q=F.reduce(mn,{}),pe=V.reduce(mn,{}),be=te.slice(),Ae=Object.create(null);let ae,ze,De,qe,Ze,st,Ge;for(ae=0,ze=0;ae<te.length;ae++)De=te[ae],Object.prototype.hasOwnProperty.call(pe,De)?ze++:(G.push({command:ni.removeLayer,args:[De]}),be.splice(be.indexOf(De,ze),1));for(ae=0,ze=0;ae<J.length;ae++)De=J[J.length-1-ae],be[be.length-1-ae]!==De&&(Object.prototype.hasOwnProperty.call(Q,De)?(G.push({command:ni.removeLayer,args:[De]}),be.splice(be.lastIndexOf(De,be.length-ze),1)):ze++,st=be[be.length-ae],G.push({command:ni.addLayer,args:[pe[De],st]}),be.splice(be.length-ae,0,De),Ae[De]=!0);for(ae=0;ae<J.length;ae++)if(De=J[ae],qe=Q[De],Ze=pe[De],!Ae[De]&&!I(qe,Ze))if(I(qe.source,Ze.source)&&I(qe["source-layer"],Ze["source-layer"])&&I(qe.type,Ze.type)){for(Ge in Xi(qe.layout,Ze.layout,G,De,null,ni.setLayoutProperty),Xi(qe.paint,Ze.paint,G,De,null,ni.setPaintProperty),I(qe.filter,Ze.filter)||G.push({command:ni.setFilter,args:[De,Ze.filter]}),I(qe.minzoom,Ze.minzoom)&&I(qe.maxzoom,Ze.maxzoom)||G.push({command:ni.setLayerZoomRange,args:[De,Ze.minzoom,Ze.maxzoom]}),qe)Object.prototype.hasOwnProperty.call(qe,Ge)&&Ge!=="layout"&&Ge!=="paint"&&Ge!=="filter"&&Ge!=="metadata"&&Ge!=="minzoom"&&Ge!=="maxzoom"&&(Ge.indexOf("paint.")===0?Xi(qe[Ge],Ze[Ge],G,De,Ge.slice(6),ni.setPaintProperty):I(qe[Ge],Ze[Ge])||G.push({command:ni.setLayerProperty,args:[De,Ge,Ze[Ge]]}));for(Ge in Ze)Object.prototype.hasOwnProperty.call(Ze,Ge)&&!Object.prototype.hasOwnProperty.call(qe,Ge)&&Ge!=="layout"&&Ge!=="paint"&&Ge!=="filter"&&Ge!=="metadata"&&Ge!=="minzoom"&&Ge!=="maxzoom"&&(Ge.indexOf("paint.")===0?Xi(qe[Ge],Ze[Ge],G,De,Ge.slice(6),ni.setPaintProperty):I(qe[Ge],Ze[Ge])||G.push({command:ni.setLayerProperty,args:[De,Ge,Ze[Ge]]}))}else G.push({command:ni.removeLayer,args:[De]}),st=be[be.lastIndexOf(De)+1],G.push({command:ni.addLayer,args:[Ze,st]})}(P,y.layers,x)}catch(E){console.warn("Unable to compute style diff:",E),x=[{command:ni.setStyle,args:[y]}]}return x}(this.serialize(),t).filter(f=>!(f.command in yn));if(o.length===0)return!1;const h=o.filter(f=>!(f.command in ji));if(h.length>0)throw new Error(`Unimplemented: ${h.map(f=>f.command).join(", ")}.`);return o.forEach(f=>{f.command!=="setTransition"&&this[f.command].apply(this,f.args)}),this.stylesheet=t,!0}addImage(t,o){if(this.getImage(t))return this.fire(new r.ErrorEvent(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,o),this._afterImageUpdated(t)}updateImage(t,o){this.imageManager.updateImage(t,o)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new r.ErrorEvent(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new r.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,o,h={}){if(this._checkLoaded(),this.sourceCaches[t]!==void 0)throw new Error(`Source "${t}" already exists.`);if(!o.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(o).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(o.type)>=0&&this._validate(r.validateStyle.source,`sources.${t}`,o,null,h))return;this.map&&this.map._collectResourceTiming&&(o.collectResourceTiming=!0);const f=this.sourceCaches[t]=new pi(t,o,this.dispatcher);f.style=this,f.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:f.serialize(),sourceId:t})),f.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error("There is no source with this ID");for(const h in this._layers)if(this._layers[h].source===t)return this.fire(new r.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${h}" is using it.`)));const o=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],o.fire(new r.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),o.setEventedParent(null),o.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,o){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error(`There is no source with this ID=${t}`);const h=this.sourceCaches[t].getSource();if(h.type!=="geojson")throw new Error(`geojsonSource.type is ${h.type}, which is !== 'geojson`);h.setData(o),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(t,o,h={}){this._checkLoaded();const f=t.id;if(this.getLayer(f))return void this.fire(new r.ErrorEvent(new Error(`Layer "${f}" already exists on this map.`)));let y;if(t.type==="custom"){if(oi(this,r.validateCustomStyleLayer(t)))return;y=r.createStyleLayer(t)}else{if(typeof t.source=="object"&&(this.addSource(f,t.source),t=r.clone$1(t),t=r.extend(t,{source:f})),this._validate(r.validateStyle.layer,`layers.${f}`,t,{arrayIndex:-1},h))return;y=r.createStyleLayer(t),this._validateLayer(y),y.setEventedParent(this,{layer:{id:f}}),this._serializedLayers[y.id]=y.serialize()}const x=o?this._order.indexOf(o):this._order.length;if(o&&x===-1)this.fire(new r.ErrorEvent(new Error(`Cannot add layer "${f}" before non-existing layer "${o}".`)));else{if(this._order.splice(x,0,f),this._layerOrderChanged=!0,this._layers[f]=y,this._removedLayers[f]&&y.source&&y.type!=="custom"){const E=this._removedLayers[f];delete this._removedLayers[f],E.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(t,o){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new r.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===o)return;const h=this._order.indexOf(t);this._order.splice(h,1);const f=o?this._order.indexOf(o):this._order.length;o&&f===-1?this.fire(new r.ErrorEvent(new Error(`Cannot move layer "${t}" before non-existing layer "${o}".`))):(this._order.splice(f,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const o=this._layers[t];if(!o)return void this.fire(new r.ErrorEvent(new Error(`Cannot remove non-existing layer "${t}".`)));o.setEventedParent(null);const h=this._order.indexOf(t);this._order.splice(h,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=o,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],o.onRemove&&o.onRemove(this.map)}getLayer(t){return this._layers[t]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,o,h){this._checkLoaded();const f=this.getLayer(t);f?f.minzoom===o&&f.maxzoom===h||(o!=null&&(f.minzoom=o),h!=null&&(f.maxzoom=h),this._updateLayer(f)):this.fire(new r.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,o,h={}){this._checkLoaded();const f=this.getLayer(t);if(f){if(!I(f.filter,o))return o==null?(f.filter=void 0,void this._updateLayer(f)):void(this._validate(r.validateStyle.filter,`layers.${f.id}.filter`,o,null,h)||(f.filter=r.clone$1(o),this._updateLayer(f)))}else this.fire(new r.ErrorEvent(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return r.clone$1(this.getLayer(t).filter)}setLayoutProperty(t,o,h,f={}){this._checkLoaded();const y=this.getLayer(t);y?I(y.getLayoutProperty(o),h)||(y.setLayoutProperty(o,h,f),this._updateLayer(y)):this.fire(new r.ErrorEvent(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,o){const h=this.getLayer(t);if(h)return h.getLayoutProperty(o);this.fire(new r.ErrorEvent(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,o,h,f={}){this._checkLoaded();const y=this.getLayer(t);y?I(y.getPaintProperty(o),h)||(y.setPaintProperty(o,h,f)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new r.ErrorEvent(new Error(`Cannot style non-existing layer "${t}".`)))}getPaintProperty(t,o){return this.getLayer(t).getPaintProperty(o)}setFeatureState(t,o){this._checkLoaded();const h=t.source,f=t.sourceLayer,y=this.sourceCaches[h];if(y===void 0)return void this.fire(new r.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)));const x=y.getSource().type;x==="geojson"&&f?this.fire(new r.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):x!=="vector"||f?(t.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),y.setFeatureState(f,t.id,o)):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,o){this._checkLoaded();const h=t.source,f=this.sourceCaches[h];if(f===void 0)return void this.fire(new r.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)));const y=f.getSource().type,x=y==="vector"?t.sourceLayer:void 0;y!=="vector"||x?o&&typeof t.id!="string"&&typeof t.id!="number"?this.fire(new r.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):f.removeFeatureState(x,t.id,o):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();const o=t.source,h=t.sourceLayer,f=this.sourceCaches[o];if(f!==void 0)return f.getSource().type!=="vector"||h?(t.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),f.getFeatureState(h,t.id)):void this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new r.ErrorEvent(new Error(`The source '${o}' does not exist in the map's style.`)))}getTransition(){return r.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return r.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:r.mapObject(this.sourceCaches,t=>t.serialize()),layers:this._serializeLayers(this._order)},t=>t!==void 0)}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&this.sourceCaches[t.source].getSource().type!=="raster"&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(t){const o=x=>this._layers[x].type==="fill-extrusion",h={},f=[];for(let x=this._order.length-1;x>=0;x--){const E=this._order[x];if(o(E)){h[E]=x;for(const M of t){const P=M[E];if(P)for(const F of P)f.push(F)}}}f.sort((x,E)=>E.intersectionZ-x.intersectionZ);const y=[];for(let x=this._order.length-1;x>=0;x--){const E=this._order[x];if(o(E))for(let M=f.length-1;M>=0;M--){const P=f[M].feature;if(h[P.layer.id]<x)break;y.push(P),f.pop()}else for(const M of t){const P=M[E];if(P)for(const F of P)y.push(F.feature)}}return y}queryRenderedFeatures(t,o,h){o&&o.filter&&this._validate(r.validateStyle.filter,"queryRenderedFeatures.filter",o.filter,null,o);const f={};if(o&&o.layers){if(!Array.isArray(o.layers))return this.fire(new r.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const x of o.layers){const E=this._layers[x];if(!E)return this.fire(new r.ErrorEvent(new Error(`The layer '${x}' does not exist in the map's style and cannot be queried for features.`))),[];f[E.source]=!0}}const y=[];o.availableImages=this._availableImages;for(const x in this.sourceCaches)o.layers&&!f[x]||y.push(Lt(this.sourceCaches[x],this._layers,this._serializedLayers,t,o,h));return this.placement&&y.push(function(x,E,M,P,F,V,G){const te={},J=V.queryRenderedSymbols(P),Q=[];for(const pe of Object.keys(J).map(Number))Q.push(G[pe]);Q.sort(vi);for(const pe of Q){const be=pe.featureIndex.lookupSymbolFeatures(J[pe.bucketInstanceId],E,pe.bucketIndex,pe.sourceLayerIndex,F.filter,F.layers,F.availableImages,x);for(const Ae in be){const ae=te[Ae]=te[Ae]||[],ze=be[Ae];ze.sort((De,qe)=>{const Ze=pe.featureSortOrder;if(Ze){const st=Ze.indexOf(De.featureIndex);return Ze.indexOf(qe.featureIndex)-st}return qe.featureIndex-De.featureIndex});for(const De of ze)ae.push(De)}}for(const pe in te)te[pe].forEach(be=>{const Ae=be.feature,ae=M[x[pe].source].getFeatureState(Ae.layer["source-layer"],Ae.id);Ae.source=Ae.layer.source,Ae.layer["source-layer"]&&(Ae.sourceLayer=Ae.layer["source-layer"]),Ae.state=ae});return te}(this._layers,this._serializedLayers,this.sourceCaches,t,o,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(t,o){o&&o.filter&&this._validate(r.validateStyle.filter,"querySourceFeatures.filter",o.filter,null,o);const h=this.sourceCaches[t];return h?function(f,y){const x=f.getRenderableIds().map(P=>f.getTileByID(P)),E=[],M={};for(let P=0;P<x.length;P++){const F=x[P],V=F.tileID.canonical.key;M[V]||(M[V]=!0,F.querySourceFeatures(E,y))}return E}(h,o):[]}addSourceType(t,o,h){return Pn.getSourceType(t)?h(new Error(`A source type called "${t}" already exists.`)):(Pn.setSourceType(t,o),o.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:o.workerSourceURL},h):h(null,null))}getLight(){return this.light.getLight()}setLight(t,o={}){this._checkLoaded();const h=this.light.getLight();let f=!1;for(const x in t)if(!I(t[x],h[x])){f=!0;break}if(!f)return;const y={now:r.exported.now(),transition:r.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,o),this.light.updateTransitions(y)}_validate(t,o,h,f,y={}){return(!y||y.validate!==!1)&&oi(this,t.call(r.validateStyle,r.extend({key:o,style:this.serialize(),value:h,styleSpec:r.spec},f)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),r.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this.sourceCaches){const o=this.sourceCaches[t];o.setEventedParent(null),o.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(const o in this.sourceCaches)this.sourceCaches[o].update(t,this.terrain)}_generateCollisionBoxes(){for(const t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(t,o,h,f,y=!1){let x=!1,E=!1;const M={};for(const P of this._order){const F=this._layers[P];if(F.type!=="symbol")continue;if(!M[F.source]){const G=this.sourceCaches[F.source];M[F.source]=G.getRenderableIds(!0).map(te=>G.getTileByID(te)).sort((te,J)=>J.tileID.overscaledZ-te.tileID.overscaledZ||(te.tileID.isLessThan(J.tileID)?-1:1))}const V=this.crossTileSymbolIndex.addLayer(F,M[F.source],t.center.lng);x=x||V}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||h===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(r.exported.now(),t.zoom))&&(this.pauseablePlacement=new Re(t,this.terrain,this._order,y,o,h,f,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(r.exported.now()),E=!0),x&&this.pauseablePlacement.placement.setStale()),E||x)for(const P of this._order){const F=this._layers[P];F.type==="symbol"&&this.placement.updateLayerOpacities(F,M[F.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(r.exported.now())}_releaseSymbolFadeTiles(){for(const t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,o,h){this.imageManager.getImages(o.icons,h),this._updateTilesForChangedImages();const f=this.sourceCaches[o.source];f&&f.setDependencies(o.tileID.key,o.type,o.icons)}getGlyphs(t,o,h){this.glyphManager.getGlyphs(o.stacks,h)}getResource(t,o,h){return r.makeRequest(o,h)}}Pn.getSourceType=function(d){return bi[d]},Pn.setSourceType=function(d,t){bi[d]=t},Pn.registerForPluginStateChange=r.registerForPluginStateChange;var Da="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const Fa={prelude:ee(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:ee(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:ee(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ee(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:ee("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ee(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:ee(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ee("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ee("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ee("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:ee(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:ee(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:ee(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:ee(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:ee(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:ee(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:ee(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ee(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:ee(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:ee(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:ee(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:ee(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:ee(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:ee(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:ee(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:ee(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:ee("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Da),terrainDepth:ee("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Da),terrainCoords:ee("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Da)};function ee(d,t){const o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,h=t.match(/attribute ([\w]+) ([\w]+)/g),f=d.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=y?y.concat(f):f,E={};return{fragmentSource:d=d.replace(o,(M,P,F,V,G)=>(E[G]=!0,P==="define"?`
#ifndef HAS_UNIFORM_u_${G}
varying ${F} ${V} ${G};
#else
uniform ${F} ${V} u_${G};
#endif
`:`
#ifdef HAS_UNIFORM_u_${G}
    ${F} ${V} ${G} = u_${G};
#endif
`)),vertexSource:t=t.replace(o,(M,P,F,V,G)=>{const te=V==="float"?"vec2":"vec4",J=G.match(/color/)?"color":te;return E[G]?P==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
attribute ${F} ${te} a_${G};
varying ${F} ${V} ${G};
#else
uniform ${F} ${V} u_${G};
#endif
`:J==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = a_${G};
#else
    ${F} ${V} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${G} = unpack_mix_${J}(a_${G}, u_${G}_t);
#else
    ${F} ${V} ${G} = u_${G};
#endif
`:P==="define"?`
#ifndef HAS_UNIFORM_u_${G}
uniform lowp float u_${G}_t;
attribute ${F} ${te} a_${G};
#else
uniform ${F} ${V} u_${G};
#endif
`:J==="vec4"?`
#ifndef HAS_UNIFORM_u_${G}
    ${F} ${V} ${G} = a_${G};
#else
    ${F} ${V} ${G} = u_${G};
#endif
`:`
#ifndef HAS_UNIFORM_u_${G}
    ${F} ${V} ${G} = unpack_mix_${J}(a_${G}, u_${G}_t);
#else
    ${F} ${V} ${G} = u_${G};
#endif
`}),staticAttributes:h,staticUniforms:x}}class Gt{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,o,h,f,y,x,E,M,P){this.context=t;let F=this.boundPaintVertexBuffers.length!==f.length;for(let V=0;!F&&V<f.length;V++)this.boundPaintVertexBuffers[V]!==f[V]&&(F=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===o&&this.boundLayoutVertexBuffer===h&&!F&&this.boundIndexBuffer===y&&this.boundVertexOffset===x&&this.boundDynamicVertexBuffer===E&&this.boundDynamicVertexBuffer2===M&&this.boundDynamicVertexBuffer3===P?(t.bindVertexArrayOES.set(this.vao),E&&E.bind(),y&&y.dynamicDraw&&y.bind(),M&&M.bind(),P&&P.bind()):this.freshBind(o,h,f,y,x,E,M,P)}freshBind(t,o,h,f,y,x,E,M){let P;const F=t.numAttributes,V=this.context,G=V.gl;if(V.extVertexArrayObject)this.vao&&this.destroy(),this.vao=V.extVertexArrayObject.createVertexArrayOES(),V.bindVertexArrayOES.set(this.vao),P=0,this.boundProgram=t,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=h,this.boundIndexBuffer=f,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=x,this.boundDynamicVertexBuffer2=E,this.boundDynamicVertexBuffer3=M;else{P=V.currentNumAttributes||0;for(let te=F;te<P;te++)G.disableVertexAttribArray(te)}o.enableAttributes(G,t);for(const te of h)te.enableAttributes(G,t);x&&x.enableAttributes(G,t),E&&E.enableAttributes(G,t),M&&M.enableAttributes(G,t),o.bind(),o.setVertexAttribPointers(G,t,y);for(const te of h)te.bind(),te.setVertexAttribPointers(G,t,y);x&&(x.bind(),x.setVertexAttribPointers(G,t,y)),f&&f.bind(),E&&(E.bind(),E.setVertexAttribPointers(G,t,y)),M&&(M.bind(),M.setVertexAttribPointers(G,t,y)),V.currentNumAttributes=F}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Wt(d){const t=[];for(let o=0;o<d.length;o++){if(d[o]===null)continue;const h=d[o].split(" ");t.push(h.pop())}return t}class Ci{constructor(t,o,h,f,y,x,E){const M=t.gl;this.program=M.createProgram();const P=Wt(h.staticAttributes),F=f?f.getBinderAttributes():[],V=P.concat(F),G=Fa.prelude.staticUniforms?Wt(Fa.prelude.staticUniforms):[],te=h.staticUniforms?Wt(h.staticUniforms):[],J=f?f.getBinderUniforms():[],Q=G.concat(te).concat(J),pe=[];for(const Ze of Q)pe.indexOf(Ze)<0&&pe.push(Ze);const be=f?f.defines():[];x&&be.push("#define OVERDRAW_INSPECTOR;"),E&&be.push("#define TERRAIN3D;");const Ae=be.concat(Fa.prelude.fragmentSource,h.fragmentSource).join(`
`),ae=be.concat(Fa.prelude.vertexSource,h.vertexSource).join(`
`),ze=M.createShader(M.FRAGMENT_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);M.shaderSource(ze,Ae),M.compileShader(ze),M.attachShader(this.program,ze);const De=M.createShader(M.VERTEX_SHADER);if(M.isContextLost())return void(this.failedToCreate=!0);M.shaderSource(De,ae),M.compileShader(De),M.attachShader(this.program,De),this.attributes={};const qe={};this.numAttributes=V.length;for(let Ze=0;Ze<this.numAttributes;Ze++)V[Ze]&&(M.bindAttribLocation(this.program,Ze,V[Ze]),this.attributes[V[Ze]]=Ze);M.linkProgram(this.program),M.deleteShader(De),M.deleteShader(ze);for(let Ze=0;Ze<pe.length;Ze++){const st=pe[Ze];if(st&&!qe[st]){const Ge=M.getUniformLocation(this.program,st);Ge&&(qe[st]=Ge)}}this.fixedUniforms=y(t,qe),this.terrainUniforms=((Ze,st)=>({u_depth:new r.Uniform1i(Ze,st.u_depth),u_terrain:new r.Uniform1i(Ze,st.u_terrain),u_terrain_dim:new r.Uniform1f(Ze,st.u_terrain_dim),u_terrain_matrix:new r.UniformMatrix4f(Ze,st.u_terrain_matrix),u_terrain_unpack:new r.Uniform4f(Ze,st.u_terrain_unpack),u_terrain_offset:new r.Uniform1f(Ze,st.u_terrain_offset),u_terrain_exaggeration:new r.Uniform1f(Ze,st.u_terrain_exaggeration)}))(t,qe),this.binderUniforms=f?f.getUniforms(t,qe):[]}draw(t,o,h,f,y,x,E,M,P,F,V,G,te,J,Q,pe,be,Ae){const ae=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(h),t.setStencilMode(f),t.setColorMode(y),t.setCullFace(x),M){t.activeTexture.set(ae.TEXTURE2),ae.bindTexture(ae.TEXTURE_2D,M.depthTexture),t.activeTexture.set(ae.TEXTURE3),ae.bindTexture(ae.TEXTURE_2D,M.texture);for(const De in this.terrainUniforms)this.terrainUniforms[De].set(M[De])}for(const De in this.fixedUniforms)this.fixedUniforms[De].set(E[De]);Q&&Q.setUniforms(t,this.binderUniforms,te,{zoom:J});let ze=0;switch(o){case ae.LINES:ze=2;break;case ae.TRIANGLES:ze=3;break;case ae.LINE_STRIP:ze=1}for(const De of G.get()){const qe=De.vaos||(De.vaos={});(qe[P]||(qe[P]=new Gt)).bind(t,this,F,Q?Q.getPaintVertexBuffers():[],V,De.vertexOffset,pe,be,Ae),ae.drawElements(o,De.primitiveLength*ze,ae.UNSIGNED_SHORT,De.primitiveOffset*ze*2)}}}function Ln(d,t,o){const h=1/Fi(o,1,t.transform.tileZoom),f=Math.pow(2,o.tileID.overscaledZ),y=o.tileSize*Math.pow(2,t.transform.tileZoom)/f,x=y*(o.tileID.canonical.x+o.tileID.wrap*f),E=y*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[h,d.fromScale,d.toScale],u_fade:d.t,u_pixel_coord_upper:[x>>16,E>>16],u_pixel_coord_lower:[65535&x,65535&E]}}const En=(d,t,o,h)=>{const f=t.style.light,y=f.properties.get("position"),x=[y.x,y.y,y.z],E=r.create$1();f.properties.get("anchor")==="viewport"&&r.fromRotation(E,-t.transform.angle),r.transformMat3(x,x,E);const M=f.properties.get("color");return{u_matrix:d,u_lightpos:x,u_lightintensity:f.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+o,u_opacity:h}},Oa=(d,t,o,h,f,y,x)=>r.extend(En(d,t,o,h),Ln(y,t,x),{u_height_factor:-Math.pow(2,f.overscaledZ)/x.tileSize/8}),ga=d=>({u_matrix:d}),oa=(d,t,o,h)=>r.extend(ga(d),Ln(o,t,h)),dn=(d,t)=>({u_matrix:d,u_world:t}),Wn=(d,t,o,h,f)=>r.extend(oa(d,t,o,h),{u_world:f}),On=(d,t,o,h)=>{const f=d.transform;let y,x;if(h.paint.get("circle-pitch-alignment")==="map"){const E=Fi(o,1,f.zoom);y=!0,x=[E,E]}else y=!1,x=f.pixelsToGLUnits;return{u_camera_to_center_distance:f.cameraToCenterDistance,u_scale_with_map:+(h.paint.get("circle-pitch-scale")==="map"),u_matrix:d.translatePosMatrix(t.posMatrix,o,h.paint.get("circle-translate"),h.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:d.pixelRatio,u_extrude_scale:x}},ta=(d,t,o)=>{const h=Fi(o,1,t.zoom),f=Math.pow(2,t.zoom-o.tileID.overscaledZ),y=o.tileID.overscaleFactor();return{u_matrix:d,u_camera_to_center_distance:t.cameraToCenterDistance,u_pixels_to_tile_units:h,u_extrude_scale:[t.pixelsToGLUnits[0]/(h*f),t.pixelsToGLUnits[1]/(h*f)],u_overscale_factor:y}},Ca=(d,t,o=1)=>({u_matrix:d,u_color:t,u_overlay:0,u_overlay_scale:o}),la=d=>({u_matrix:d}),ur=(d,t,o,h)=>({u_matrix:d,u_extrude_scale:Fi(t,1,o),u_intensity:h});function hr(d,t){const o=Math.pow(2,t.canonical.z),h=t.canonical.y;return[new r.MercatorCoordinate(0,h/o).toLngLat().lat,new r.MercatorCoordinate(0,(h+1)/o).toLngLat().lat]}const Nn=(d,t,o,h)=>{const f=d.transform;return{u_matrix:Qa(d,t,o,h),u_ratio:1/Fi(t,1,f.zoom),u_device_pixel_ratio:d.pixelRatio,u_units_to_pixels:[1/f.pixelsToGLUnits[0],1/f.pixelsToGLUnits[1]]}},Br=(d,t,o,h,f)=>r.extend(Nn(d,t,o,f),{u_image:0,u_image_height:h}),Na=(d,t,o,h,f)=>{const y=d.transform,x=ln(t,y);return{u_matrix:Qa(d,t,o,f),u_texsize:t.imageAtlasTexture.size,u_ratio:1/Fi(t,1,y.zoom),u_device_pixel_ratio:d.pixelRatio,u_image:0,u_scale:[x,h.fromScale,h.toScale],u_fade:h.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},Za=(d,t,o,h,f,y)=>{const x=d.lineAtlas,E=ln(t,d.transform),M=o.layout.get("line-cap")==="round",P=x.getDash(h.from,M),F=x.getDash(h.to,M),V=P.width*f.fromScale,G=F.width*f.toScale;return r.extend(Nn(d,t,o,y),{u_patternscale_a:[E/V,-P.height/2],u_patternscale_b:[E/G,-F.height/2],u_sdfgamma:x.width/(256*Math.min(V,G)*d.pixelRatio)/2,u_image:0,u_tex_y_a:P.y,u_tex_y_b:F.y,u_mix:f.t})};function ln(d,t){return 1/Fi(d,1,t.tileZoom)}function Qa(d,t,o,h){return d.translatePosMatrix(h?h.posMatrix:t.tileID.posMatrix,t,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}const Er=(d,t,o,h,f)=>{return{u_matrix:d,u_tl_parent:t,u_scale_parent:o,u_buffer_scale:1,u_fade_t:h.mix,u_opacity:h.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(x=f.paint.get("raster-saturation"),x>0?1-1/(1.001-x):-x),u_contrast_factor:(y=f.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:dr(f.paint.get("raster-hue-rotate"))};var y,x};function dr(d){d*=Math.PI/180;const t=Math.sin(d),o=Math.cos(d);return[(2*o+1)/3,(-Math.sqrt(3)*t-o+1)/3,(Math.sqrt(3)*t-o+1)/3]}const Fr=(d,t,o,h,f,y,x,E,M,P)=>{const F=f.transform;return{u_is_size_zoom_constant:+(d==="constant"||d==="source"),u_is_size_feature_constant:+(d==="constant"||d==="camera"),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:F.cameraToCenterDistance,u_pitch:F.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:F.width/F.height,u_fade_change:f.options.fadeDuration?f.symbolFadeChange:1,u_matrix:y,u_label_plane_matrix:x,u_coord_matrix:E,u_is_text:+M,u_pitch_with_map:+h,u_texsize:P,u_texture:0}},$a=(d,t,o,h,f,y,x,E,M,P,F)=>{const V=f.transform;return r.extend(Fr(d,t,o,h,f,y,x,E,M,P),{u_gamma_scale:h?Math.cos(V._pitch)*V.cameraToCenterDistance:1,u_device_pixel_ratio:f.pixelRatio,u_is_halo:+F})},ks=(d,t,o,h,f,y,x,E,M,P)=>r.extend($a(d,t,o,h,f,y,x,E,!0,M,!0),{u_texsize_icon:P,u_texture_icon:1}),Js=(d,t,o)=>({u_matrix:d,u_opacity:t,u_color:o}),Ms=(d,t,o,h,f,y)=>r.extend(function(x,E,M,P){const F=M.imageManager.getPattern(x.from.toString()),V=M.imageManager.getPattern(x.to.toString()),{width:G,height:te}=M.imageManager.getPixelSize(),J=Math.pow(2,P.tileID.overscaledZ),Q=P.tileSize*Math.pow(2,M.transform.tileZoom)/J,pe=Q*(P.tileID.canonical.x+P.tileID.wrap*J),be=Q*P.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:F.tl,u_pattern_br_a:F.br,u_pattern_tl_b:V.tl,u_pattern_br_b:V.br,u_texsize:[G,te],u_mix:E.t,u_pattern_size_a:F.displaySize,u_pattern_size_b:V.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/Fi(P,1,M.transform.tileZoom),u_pixel_coord_upper:[pe>>16,be>>16],u_pixel_coord_lower:[65535&pe,65535&be]}}(h,y,o,f),{u_matrix:d,u_opacity:t}),ts={fillExtrusion:(d,t)=>({u_matrix:new r.UniformMatrix4f(d,t.u_matrix),u_lightpos:new r.Uniform3f(d,t.u_lightpos),u_lightintensity:new r.Uniform1f(d,t.u_lightintensity),u_lightcolor:new r.Uniform3f(d,t.u_lightcolor),u_vertical_gradient:new r.Uniform1f(d,t.u_vertical_gradient),u_opacity:new r.Uniform1f(d,t.u_opacity)}),fillExtrusionPattern:(d,t)=>({u_matrix:new r.UniformMatrix4f(d,t.u_matrix),u_lightpos:new r.Uniform3f(d,t.u_lightpos),u_lightintensity:new r.Uniform1f(d,t.u_lightintensity),u_lightcolor:new r.Uniform3f(d,t.u_lightcolor),u_vertical_gradient:new r.Uniform1f(d,t.u_vertical_gradient),u_height_factor:new r.Uniform1f(d,t.u_height_factor),u_image:new r.Uniform1i(d,t.u_image),u_texsize:new r.Uniform2f(d,t.u_texsize),u_pixel_coord_upper:new r.Uniform2f(d,t.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(d,t.u_pixel_coord_lower),u_scale:new r.Uniform3f(d,t.u_scale),u_fade:new r.Uniform1f(d,t.u_fade),u_opacity:new r.Uniform1f(d,t.u_opacity)}),fill:(d,t)=>({u_matrix:new r.UniformMatrix4f(d,t.u_matrix)}),fillPattern:(d,t)=>({u_matrix:new r.UniformMatrix4f(d,t.u_matrix),u_image:new r.Uniform1i(d,t.u_image),u_texsize:new r.Uniform2f(d,t.u_texsize),u_pixel_coord_upper:new r.Uniform2f(d,t.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(d,t.u_pixel_coord_lower),u_scale:new r.Uniform3f(d,t.u_scale),u_fade:new r.Uniform1f(d,t.u_fade)}),fillOutline:(d,t)=>({u_matrix:new r.UniformMatrix4f(d,t.u_matrix),u_world:new r.Uniform2f(d,t.u_world)}),fillOutlinePattern:(d,t)=>({u_matrix:new r.UniformMatrix4f(d,t.u_matrix),u_world:new r.Uniform2f(d,t.u_world),u_image:new r.Uniform1i(d,t.u_image),u_texsize:new r.Uniform2f(d,t.u_texsize),u_pixel_coord_upper:new r.Uniform2f(d,t.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(d,t.u_pixel_coord_lower),u_scale:new r.Uniform3f(d,t.u_scale),u_fade:new r.Uniform1f(d,t.u_fade)}),circle:(d,t)=>({u_camera_to_center_distance:new r.Uniform1f(d,t.u_camera_to_center_distance),u_scale_with_map:new r.Uniform1i(d,t.u_scale_with_map),u_pitch_with_map:new r.Uniform1i(d,t.u_pitch_with_map),u_extrude_scale:new r.Uniform2f(d,t.u_extrude_scale),u_device_pixel_ratio:new r.Uniform1f(d,t.u_device_pixel_ratio),u_matrix:new r.UniformMatrix4f(d,t.u_matrix)}),collisionBox:(d,t)=>({u_matrix:new r.UniformMatrix4f(d,t.u_matrix),u_camera_to_center_distance:new r.Uniform1f(d,t.u_camera_to_center_distance),u_pixels_to_tile_units:new r.Uniform1f(d,t.u_pixels_to_tile_units),u_extrude_scale:new r.Uniform2f(d,t.u_extrude_scale),u_overscale_factor:new r.Uniform1f(d,t.u_overscale_factor)}),collisionCircle:(d,t)=>({u_matrix:new r.UniformMatrix4f(d,t.u_matrix),u_inv_matrix:new r.UniformMatrix4f(d,t.u_inv_matrix),u_camera_to_center_distance:new r.Uniform1f(d,t.u_camera_to_center_distance),u_viewport_size:new r.Uniform2f(d,t.u_viewport_size)}),debug:(d,t)=>({u_color:new r.UniformColor(d,t.u_color),u_matrix:new r.UniformMatrix4f(d,t.u_matrix),u_overlay:new r.Uniform1i(d,t.u_overlay),u_overlay_scale:new r.Uniform1f(d,t.u_overlay_scale)}),clippingMask:(d,t)=>({u_matrix:new r.UniformMatrix4f(d,t.u_matrix)}),heatmap:(d,t)=>({u_extrude_scale:new r.Uniform1f(d,t.u_extrude_scale),u_intensity:new r.Uniform1f(d,t.u_intensity),u_matrix:new r.UniformMatrix4f(d,t.u_matrix)}),heatmapTexture:(d,t)=>({u_matrix:new r.UniformMatrix4f(d,t.u_matrix),u_world:new r.Uniform2f(d,t.u_world),u_image:new r.Uniform1i(d,t.u_image),u_color_ramp:new r.Uniform1i(d,t.u_color_ramp),u_opacity:new r.Uniform1f(d,t.u_opacity)}),hillshade:(d,t)=>({u_matrix:new r.UniformMatrix4f(d,t.u_matrix),u_image:new r.Uniform1i(d,t.u_image),u_latrange:new r.Uniform2f(d,t.u_latrange),u_light:new r.Uniform2f(d,t.u_light),u_shadow:new r.UniformColor(d,t.u_shadow),u_highlight:new r.UniformColor(d,t.u_highlight),u_accent:new r.UniformColor(d,t.u_accent)}),hillshadePrepare:(d,t)=>({u_matrix:new r.UniformMatrix4f(d,t.u_matrix),u_image:new r.Uniform1i(d,t.u_image),u_dimension:new r.Uniform2f(d,t.u_dimension),u_zoom:new r.Uniform1f(d,t.u_zoom),u_unpack:new r.Uniform4f(d,t.u_unpack)}),line:(d,t)=>({u_matrix:new r.UniformMatrix4f(d,t.u_matrix),u_ratio:new r.Uniform1f(d,t.u_ratio),u_device_pixel_ratio:new r.Uniform1f(d,t.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(d,t.u_units_to_pixels)}),lineGradient:(d,t)=>({u_matrix:new r.UniformMatrix4f(d,t.u_matrix),u_ratio:new r.Uniform1f(d,t.u_ratio),u_device_pixel_ratio:new r.Uniform1f(d,t.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(d,t.u_units_to_pixels),u_image:new r.Uniform1i(d,t.u_image),u_image_height:new r.Uniform1f(d,t.u_image_height)}),linePattern:(d,t)=>({u_matrix:new r.UniformMatrix4f(d,t.u_matrix),u_texsize:new r.Uniform2f(d,t.u_texsize),u_ratio:new r.Uniform1f(d,t.u_ratio),u_device_pixel_ratio:new r.Uniform1f(d,t.u_device_pixel_ratio),u_image:new r.Uniform1i(d,t.u_image),u_units_to_pixels:new r.Uniform2f(d,t.u_units_to_pixels),u_scale:new r.Uniform3f(d,t.u_scale),u_fade:new r.Uniform1f(d,t.u_fade)}),lineSDF:(d,t)=>({u_matrix:new r.UniformMatrix4f(d,t.u_matrix),u_ratio:new r.Uniform1f(d,t.u_ratio),u_device_pixel_ratio:new r.Uniform1f(d,t.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(d,t.u_units_to_pixels),u_patternscale_a:new r.Uniform2f(d,t.u_patternscale_a),u_patternscale_b:new r.Uniform2f(d,t.u_patternscale_b),u_sdfgamma:new r.Uniform1f(d,t.u_sdfgamma),u_image:new r.Uniform1i(d,t.u_image),u_tex_y_a:new r.Uniform1f(d,t.u_tex_y_a),u_tex_y_b:new r.Uniform1f(d,t.u_tex_y_b),u_mix:new r.Uniform1f(d,t.u_mix)}),raster:(d,t)=>({u_matrix:new r.UniformMatrix4f(d,t.u_matrix),u_tl_parent:new r.Uniform2f(d,t.u_tl_parent),u_scale_parent:new r.Uniform1f(d,t.u_scale_parent),u_buffer_scale:new r.Uniform1f(d,t.u_buffer_scale),u_fade_t:new r.Uniform1f(d,t.u_fade_t),u_opacity:new r.Uniform1f(d,t.u_opacity),u_image0:new r.Uniform1i(d,t.u_image0),u_image1:new r.Uniform1i(d,t.u_image1),u_brightness_low:new r.Uniform1f(d,t.u_brightness_low),u_brightness_high:new r.Uniform1f(d,t.u_brightness_high),u_saturation_factor:new r.Uniform1f(d,t.u_saturation_factor),u_contrast_factor:new r.Uniform1f(d,t.u_contrast_factor),u_spin_weights:new r.Uniform3f(d,t.u_spin_weights)}),symbolIcon:(d,t)=>({u_is_size_zoom_constant:new r.Uniform1i(d,t.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(d,t.u_is_size_feature_constant),u_size_t:new r.Uniform1f(d,t.u_size_t),u_size:new r.Uniform1f(d,t.u_size),u_camera_to_center_distance:new r.Uniform1f(d,t.u_camera_to_center_distance),u_pitch:new r.Uniform1f(d,t.u_pitch),u_rotate_symbol:new r.Uniform1i(d,t.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(d,t.u_aspect_ratio),u_fade_change:new r.Uniform1f(d,t.u_fade_change),u_matrix:new r.UniformMatrix4f(d,t.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(d,t.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(d,t.u_coord_matrix),u_is_text:new r.Uniform1i(d,t.u_is_text),u_pitch_with_map:new r.Uniform1i(d,t.u_pitch_with_map),u_texsize:new r.Uniform2f(d,t.u_texsize),u_texture:new r.Uniform1i(d,t.u_texture)}),symbolSDF:(d,t)=>({u_is_size_zoom_constant:new r.Uniform1i(d,t.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(d,t.u_is_size_feature_constant),u_size_t:new r.Uniform1f(d,t.u_size_t),u_size:new r.Uniform1f(d,t.u_size),u_camera_to_center_distance:new r.Uniform1f(d,t.u_camera_to_center_distance),u_pitch:new r.Uniform1f(d,t.u_pitch),u_rotate_symbol:new r.Uniform1i(d,t.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(d,t.u_aspect_ratio),u_fade_change:new r.Uniform1f(d,t.u_fade_change),u_matrix:new r.UniformMatrix4f(d,t.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(d,t.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(d,t.u_coord_matrix),u_is_text:new r.Uniform1i(d,t.u_is_text),u_pitch_with_map:new r.Uniform1i(d,t.u_pitch_with_map),u_texsize:new r.Uniform2f(d,t.u_texsize),u_texture:new r.Uniform1i(d,t.u_texture),u_gamma_scale:new r.Uniform1f(d,t.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(d,t.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(d,t.u_is_halo)}),symbolTextAndIcon:(d,t)=>({u_is_size_zoom_constant:new r.Uniform1i(d,t.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(d,t.u_is_size_feature_constant),u_size_t:new r.Uniform1f(d,t.u_size_t),u_size:new r.Uniform1f(d,t.u_size),u_camera_to_center_distance:new r.Uniform1f(d,t.u_camera_to_center_distance),u_pitch:new r.Uniform1f(d,t.u_pitch),u_rotate_symbol:new r.Uniform1i(d,t.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(d,t.u_aspect_ratio),u_fade_change:new r.Uniform1f(d,t.u_fade_change),u_matrix:new r.UniformMatrix4f(d,t.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(d,t.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(d,t.u_coord_matrix),u_is_text:new r.Uniform1i(d,t.u_is_text),u_pitch_with_map:new r.Uniform1i(d,t.u_pitch_with_map),u_texsize:new r.Uniform2f(d,t.u_texsize),u_texsize_icon:new r.Uniform2f(d,t.u_texsize_icon),u_texture:new r.Uniform1i(d,t.u_texture),u_texture_icon:new r.Uniform1i(d,t.u_texture_icon),u_gamma_scale:new r.Uniform1f(d,t.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(d,t.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(d,t.u_is_halo)}),background:(d,t)=>({u_matrix:new r.UniformMatrix4f(d,t.u_matrix),u_opacity:new r.Uniform1f(d,t.u_opacity),u_color:new r.UniformColor(d,t.u_color)}),backgroundPattern:(d,t)=>({u_matrix:new r.UniformMatrix4f(d,t.u_matrix),u_opacity:new r.Uniform1f(d,t.u_opacity),u_image:new r.Uniform1i(d,t.u_image),u_pattern_tl_a:new r.Uniform2f(d,t.u_pattern_tl_a),u_pattern_br_a:new r.Uniform2f(d,t.u_pattern_br_a),u_pattern_tl_b:new r.Uniform2f(d,t.u_pattern_tl_b),u_pattern_br_b:new r.Uniform2f(d,t.u_pattern_br_b),u_texsize:new r.Uniform2f(d,t.u_texsize),u_mix:new r.Uniform1f(d,t.u_mix),u_pattern_size_a:new r.Uniform2f(d,t.u_pattern_size_a),u_pattern_size_b:new r.Uniform2f(d,t.u_pattern_size_b),u_scale_a:new r.Uniform1f(d,t.u_scale_a),u_scale_b:new r.Uniform1f(d,t.u_scale_b),u_pixel_coord_upper:new r.Uniform2f(d,t.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(d,t.u_pixel_coord_lower),u_tile_units_to_pixels:new r.Uniform1f(d,t.u_tile_units_to_pixels)}),terrain:(d,t)=>({u_matrix:new r.UniformMatrix4f(d,t.u_matrix),u_texture:new r.Uniform1i(d,t.u_texture)}),terrainDepth:(d,t)=>({u_matrix:new r.UniformMatrix4f(d,t.u_matrix)}),terrainCoords:(d,t)=>({u_matrix:new r.UniformMatrix4f(d,t.u_matrix),u_texture:new r.Uniform1i(d,t.u_texture),u_terrain_coords_id:new r.Uniform1f(d,t.u_terrain_coords_id)})};class ms{constructor(t,o,h){this.context=t;const f=t.gl;this.buffer=f.createBuffer(),this.dynamicDraw=Boolean(h),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),f.bufferData(f.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?f.DYNAMIC_DRAW:f.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const o=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Qs={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ds{constructor(t,o,h,f){this.length=o.length,this.attributes=h,this.itemSize=o.bytesPerElement,this.dynamicDraw=f,this.context=t;const y=t.gl;this.buffer=y.createBuffer(),t.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);const o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,o){for(let h=0;h<this.attributes.length;h++){const f=o.attributes[this.attributes[h].name];f!==void 0&&t.enableVertexAttribArray(f)}}setVertexAttribPointers(t,o,h){for(let f=0;f<this.attributes.length;f++){const y=this.attributes[f],x=o.attributes[y.name];x!==void 0&&t.vertexAttribPointer(x,y.components,t[Qs[y.type]],!1,this.itemSize,y.offset+this.itemSize*(h||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Hi{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class So extends Hi{getDefault(){return r.Color.transparent}set(t){const o=this.current;(t.r!==o.r||t.g!==o.g||t.b!==o.b||t.a!==o.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Dl extends Hi{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class is extends Hi{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class Ps extends Hi{getDefault(){return[!0,!0,!0,!0]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||t[3]!==o[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class $s extends Hi{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class Ka extends Hi{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class Ls extends Hi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const o=this.current;(t.func!==o.func||t.ref!==o.ref||t.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class Rs extends Hi{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class gs extends Hi{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=t,this.dirty=!1}}class O extends Hi{getDefault(){return[0,1]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class Z extends Hi{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=t,this.dirty=!1}}class le extends Hi{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class de extends Hi{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.BLEND):o.disable(o.BLEND),this.current=t,this.dirty=!1}}class ke extends Hi{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class ye extends Hi{getDefault(){return r.Color.transparent}set(t){const o=this.current;(t.r!==o.r||t.g!==o.g||t.b!==o.b||t.a!==o.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class je extends Hi{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class at extends Hi{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;t?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=t,this.dirty=!1}}class hi extends Hi{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class _i extends Hi{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class Rn extends Hi{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class Pa extends Hi{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class ns extends Hi{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const o=this.current;(t[0]!==o[0]||t[1]!==o[1]||t[2]!==o[2]||t[3]!==o[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class as extends Hi{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class pr extends Hi{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class _s extends Hi{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindTexture(o.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class zs extends Hi{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Pl extends Hi{getDefault(){return null}set(t){const o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Ll extends Hi{constructor(t){super(t),this.vao=t.extVertexArrayObject}getDefault(){return null}set(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)}}class eo extends Hi{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class bc extends Hi{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class vc extends Hi{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class il extends Hi{constructor(t,o){super(t),this.context=t,this.parent=o}getDefault(){return null}}class Bs extends il{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class xc extends il{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class to{constructor(t,o,h,f){this.context=t,this.width=o,this.height=h;const y=t.gl,x=this.framebuffer=y.createFramebuffer();if(this.colorAttachment=new Bs(t,x),f&&(this.depthAttachment=new xc(t,x)),y.checkFramebufferStatus(y.FRAMEBUFFER)!==y.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const t=this.context.gl,o=this.colorAttachment.get();if(o&&t.deleteTexture(o),this.depthAttachment){const h=this.depthAttachment.get();h&&t.deleteRenderbuffer(h)}t.deleteFramebuffer(this.framebuffer)}}class Un{constructor(t,o,h){this.blendFunction=t,this.blendColor=o,this.mask=h}}Un.Replace=[1,0],Un.disabled=new Un(Un.Replace,r.Color.transparent,[!1,!1,!1,!1]),Un.unblended=new Un(Un.Replace,r.Color.transparent,[!0,!0,!0,!0]),Un.alphaBlended=new Un([1,771],r.Color.transparent,[!0,!0,!0,!0]);class wc{constructor(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new So(this),this.clearDepth=new Dl(this),this.clearStencil=new is(this),this.colorMask=new Ps(this),this.depthMask=new $s(this),this.stencilMask=new Ka(this),this.stencilFunc=new Ls(this),this.stencilOp=new Rs(this),this.stencilTest=new gs(this),this.depthRange=new O(this),this.depthTest=new Z(this),this.depthFunc=new le(this),this.blend=new de(this),this.blendFunc=new ke(this),this.blendColor=new ye(this),this.blendEquation=new je(this),this.cullFace=new at(this),this.cullFaceSide=new hi(this),this.frontFace=new _i(this),this.program=new Rn(this),this.activeTexture=new Pa(this),this.viewport=new ns(this),this.bindFramebuffer=new as(this),this.bindRenderbuffer=new pr(this),this.bindTexture=new _s(this),this.bindVertexBuffer=new zs(this),this.bindElementBuffer=new Pl(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ll(this),this.pixelStoreUnpack=new eo(this),this.pixelStoreUnpackPremultiplyAlpha=new bc(this),this.pixelStoreUnpackFlipY=new vc(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(t.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=t.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,o){return new ms(this,t,o)}createVertexBuffer(t,o,h){return new Ds(this,t,o,h)}createRenderbuffer(t,o,h){const f=this.gl,y=f.createRenderbuffer();return this.bindRenderbuffer.set(y),f.renderbufferStorage(f.RENDERBUFFER,t,o,h),this.bindRenderbuffer.set(null),y}createFramebuffer(t,o,h){return new to(this,t,o,h)}clear({color:t,depth:o}){const h=this.gl;let f=0;t&&(f|=h.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(f|=h.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),h.clear(f)}setCullFace(t){t.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){I(t.blendFunction,Un.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Gi{constructor(t,o,h){this.func=t,this.mask=o,this.range=h}}Gi.ReadOnly=!1,Gi.ReadWrite=!0,Gi.disabled=new Gi(519,Gi.ReadOnly,[0,1]);const cn=7680;class Fn{constructor(t,o,h,f,y,x){this.test=t,this.ref=o,this.mask=h,this.fail=f,this.depthFail=y,this.pass=x}}Fn.disabled=new Fn({func:519,mask:0},0,0,cn,cn,cn);class jn{constructor(t,o,h){this.enable=t,this.mode=o,this.frontFace=h}}let Eo;function io(d,t,o,h,f,y,x){const E=d.context,M=E.gl,P=d.useProgram("collisionBox"),F=[];let V=0,G=0;for(let ae=0;ae<h.length;ae++){const ze=h[ae],De=t.getTile(ze),qe=De.getBucket(o);if(!qe)continue;let Ze=ze.posMatrix;f[0]===0&&f[1]===0||(Ze=d.translatePosMatrix(ze.posMatrix,De,f,y));const st=x?qe.textCollisionBox:qe.iconCollisionBox,Ge=qe.collisionCircleArray;if(Ge.length>0){const Pt=r.create(),vt=Ze;r.mul(Pt,qe.placementInvProjMatrix,d.transform.glCoordMatrix),r.mul(Pt,Pt,qe.placementViewportMatrix),F.push({circleArray:Ge,circleOffset:G,transform:vt,invTransform:Pt,coord:ze}),V+=Ge.length/4,G=V}st&&P.draw(E,M.LINES,Gi.disabled,Fn.disabled,d.colorModeForRenderPass(),jn.disabled,ta(Ze,d.transform,De),d.style.terrain&&d.style.terrain.getTerrainData(ze),o.id,st.layoutVertexBuffer,st.indexBuffer,st.segments,null,d.transform.zoom,null,null,st.collisionVertexBuffer)}if(!x||!F.length)return;const te=d.useProgram("collisionCircle"),J=new r.CollisionCircleLayoutArray;J.resize(4*V),J._trim();let Q=0;for(const ae of F)for(let ze=0;ze<ae.circleArray.length/4;ze++){const De=4*ze,qe=ae.circleArray[De+0],Ze=ae.circleArray[De+1],st=ae.circleArray[De+2],Ge=ae.circleArray[De+3];J.emplace(Q++,qe,Ze,st,Ge,0),J.emplace(Q++,qe,Ze,st,Ge,1),J.emplace(Q++,qe,Ze,st,Ge,2),J.emplace(Q++,qe,Ze,st,Ge,3)}(!Eo||Eo.length<2*V)&&(Eo=function(ae){const ze=2*ae,De=new r.QuadTriangleArray;De.resize(ze),De._trim();for(let qe=0;qe<ze;qe++){const Ze=6*qe;De.uint16[Ze+0]=4*qe+0,De.uint16[Ze+1]=4*qe+1,De.uint16[Ze+2]=4*qe+2,De.uint16[Ze+3]=4*qe+2,De.uint16[Ze+4]=4*qe+3,De.uint16[Ze+5]=4*qe+0}return De}(V));const pe=E.createIndexBuffer(Eo,!0),be=E.createVertexBuffer(J,r.collisionCircleLayout.members,!0);for(const ae of F){const ze={u_matrix:ae.transform,u_inv_matrix:ae.invTransform,u_camera_to_center_distance:(Ae=d.transform).cameraToCenterDistance,u_viewport_size:[Ae.width,Ae.height]};te.draw(E,M.TRIANGLES,Gi.disabled,Fn.disabled,d.colorModeForRenderPass(),jn.disabled,ze,d.style.terrain&&d.style.terrain.getTerrainData(ae.coord),o.id,be,pe,r.SegmentVector.simpleSegment(0,2*ae.circleOffset,ae.circleArray.length,ae.circleArray.length/2),null,d.transform.zoom,null,null,null)}var Ae;be.destroy(),pe.destroy()}jn.disabled=new jn(!1,1029,2305),jn.backCCW=new jn(!0,1029,2305);const ju=r.identity(new Float32Array(16));function Gu(d,t,o,h,f,y){const{horizontalAlign:x,verticalAlign:E}=r.getAnchorAlignment(d),M=-(x-.5)*t,P=-(E-.5)*o,F=r.evaluateVariableOffset(d,h);return new r.pointGeometry((M/f+F[0])*y,(P/f+F[1])*y)}function Cc(d,t,o,h,f,y,x,E,M,P,F){const V=d.text.placedSymbolArray,G=d.text.dynamicLayoutVertexArray,te=d.icon.dynamicLayoutVertexArray,J={};G.clear();for(let Q=0;Q<V.length;Q++){const pe=V.get(Q),be=d.allowVerticalPlacement&&!pe.placedOrientation,Ae=pe.hidden||!pe.crossTileID||be?null:h[pe.crossTileID];if(Ae){const ae=new r.pointGeometry(pe.anchorX,pe.anchorY),ze=$t(ae,o?x:y,F),De=di(f.cameraToCenterDistance,ze.signedDistanceFromCamera);let qe=r.evaluateSizeForFeature(d.textSizeData,M,pe)*De/r.ONE_EM;o&&(qe*=d.tilePixelRatio/E);const{width:Ze,height:st,anchor:Ge,textOffset:Pt,textBoxScale:vt}=Ae,zt=Gu(Ge,Ze,st,Pt,vt,qe),yi=o?$t(ae.add(zt),y,F).point:ze.point.add(t?zt.rotate(-f.angle):zt),Ti=d.allowVerticalPlacement&&pe.placedOrientation===r.WritingMode.vertical?Math.PI/2:0;for(let ai=0;ai<pe.numGlyphs;ai++)r.addDynamicAttributes(G,yi,Ti);P&&pe.associatedIconIndex>=0&&(J[pe.associatedIconIndex]={shiftedAnchor:yi,angle:Ti})}else Vt(pe.numGlyphs,G)}if(P){te.clear();const Q=d.icon.placedSymbolArray;for(let pe=0;pe<Q.length;pe++){const be=Q.get(pe);if(be.hidden)Vt(be.numGlyphs,te);else{const Ae=J[pe];if(Ae)for(let ae=0;ae<be.numGlyphs;ae++)r.addDynamicAttributes(te,Ae.shiftedAnchor,Ae.angle);else Vt(be.numGlyphs,te)}}d.icon.dynamicLayoutVertexBuffer.updateData(te)}d.text.dynamicLayoutVertexBuffer.updateData(G)}function Hu(d,t,o){return o.iconsInText&&t?"symbolTextAndIcon":d?"symbolSDF":"symbolIcon"}function nl(d,t,o,h,f,y,x,E,M,P,F,V){const G=d.context,te=G.gl,J=d.transform,Q=E==="map",pe=M==="map",be=E!=="viewport"&&o.layout.get("symbol-placement")!=="point",Ae=Q&&!pe&&!be,ae=!o.layout.get("symbol-sort-key").isConstant();let ze=!1;const De=d.depthModeForSublayer(0,Gi.ReadOnly),qe=o.layout.get("text-variable-anchor"),Ze=[];for(const st of h){const Ge=t.getTile(st),Pt=Ge.getBucket(o);if(!Pt)continue;const vt=f?Pt.text:Pt.icon;if(!vt||!vt.segments.get().length)continue;const zt=vt.programConfigurations.get(o.id),yi=f||Pt.sdfIcons,Ti=f?Pt.textSizeData:Pt.iconSizeData,ai=pe||J.pitch!==0,bn=d.useProgram(Hu(yi,f,Pt),zt),vn=r.evaluateSizeForZoom(Ti,J.zoom),Ki=d.style.terrain&&d.style.terrain.getTerrainData(st);let Qi,Tn,Ta,Kr,Nr=[0,0],Wr=null;if(f){if(Tn=Ge.glyphAtlasTexture,Ta=te.LINEAR,Qi=Ge.glyphAtlasTexture.size,Pt.iconsInText){Nr=Ge.imageAtlasTexture.size,Wr=Ge.imageAtlasTexture;const kr=Ti.kind==="composite"||Ti.kind==="camera";Kr=ai||d.options.rotating||d.options.zooming||kr?te.LINEAR:te.NEAREST}}else{const kr=o.layout.get("icon-size").constantOr(0)!==1||Pt.iconsNeedLinear;Tn=Ge.imageAtlasTexture,Ta=yi||d.options.rotating||d.options.zooming||kr||ai?te.LINEAR:te.NEAREST,Qi=Ge.imageAtlasTexture.size}const Ts=Fi(Ge,1,d.transform.zoom),Ar=mt(st.posMatrix,pe,Q,d.transform,Ts),tr=li(st.posMatrix,pe,Q,d.transform,Ts),os=qe&&Pt.hasTextData(),hl=o.layout.get("icon-text-fit")!=="none"&&os&&Pt.hasIconData();if(be){const kr=d.style.terrain?(Wl,lo)=>d.style.terrain.getElevation(st,Wl,lo):null,Us=o.layout.get("text-rotation-alignment")==="map";tn(Pt,st.posMatrix,d,f,Ar,tr,pe,P,Us,kr)}const _a=d.translatePosMatrix(st.posMatrix,Ge,y,x),Li=be||f&&qe||hl?ju:Ar,pn=d.translatePosMatrix(tr,Ge,y,x,!0),Sa=yi&&o.paint.get(f?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ea;Ea=yi?Pt.iconsInText?ks(Ti.kind,vn,Ae,pe,d,_a,Li,pn,Qi,Nr):$a(Ti.kind,vn,Ae,pe,d,_a,Li,pn,f,Qi,!0):Fr(Ti.kind,vn,Ae,pe,d,_a,Li,pn,f,Qi);const Hn={program:bn,buffers:vt,uniformValues:Ea,atlasTexture:Tn,atlasTextureIcon:Wr,atlasInterpolation:Ta,atlasInterpolationIcon:Kr,isSDF:yi,hasHalo:Sa};if(ae&&Pt.canOverlap){ze=!0;const kr=vt.segments.get();for(const Us of kr)Ze.push({segments:new r.SegmentVector([Us]),sortKey:Us.sortKey,state:Hn,terrainData:Ki})}else Ze.push({segments:vt.segments,sortKey:0,state:Hn,terrainData:Ki})}ze&&Ze.sort((st,Ge)=>st.sortKey-Ge.sortKey);for(const st of Ze){const Ge=st.state;if(G.activeTexture.set(te.TEXTURE0),Ge.atlasTexture.bind(Ge.atlasInterpolation,te.CLAMP_TO_EDGE),Ge.atlasTextureIcon&&(G.activeTexture.set(te.TEXTURE1),Ge.atlasTextureIcon&&Ge.atlasTextureIcon.bind(Ge.atlasInterpolationIcon,te.CLAMP_TO_EDGE)),Ge.isSDF){const Pt=Ge.uniformValues;Ge.hasHalo&&(Pt.u_is_halo=1,Io(Ge.buffers,st.segments,o,d,Ge.program,De,F,V,Pt,st.terrainData)),Pt.u_is_halo=0}Io(Ge.buffers,st.segments,o,d,Ge.program,De,F,V,Ge.uniformValues,st.terrainData)}}function Io(d,t,o,h,f,y,x,E,M,P){const F=h.context;f.draw(F,F.gl.TRIANGLES,y,x,E,jn.disabled,M,P,o.id,d.layoutVertexBuffer,d.indexBuffer,t,o.paint,h.transform.zoom,d.programConfigurations.get(o.id),d.dynamicLayoutVertexBuffer,d.opacityVertexBuffer)}function Ao(d,t,o,h,f,y,x){const E=d.context.gl,M=o.paint.get("fill-pattern"),P=M&&M.constantOr(1),F=o.getCrossfadeParameters();let V,G,te,J,Q;x?(G=P&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",V=E.LINES):(G=P?"fillPattern":"fill",V=E.TRIANGLES);for(const pe of h){const be=t.getTile(pe);if(P&&!be.patternsLoaded())continue;const Ae=be.getBucket(o);if(!Ae)continue;const ae=Ae.programConfigurations.get(o.id),ze=d.useProgram(G,ae),De=d.style.terrain&&d.style.terrain.getTerrainData(pe);P&&(d.context.activeTexture.set(E.TEXTURE0),be.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),ae.updatePaintBuffers(F));const qe=M.constantOr(null);if(qe&&be.imageAtlas){const Ge=be.imageAtlas,Pt=Ge.patternPositions[qe.to.toString()],vt=Ge.patternPositions[qe.from.toString()];Pt&&vt&&ae.setConstantPatternPositions(Pt,vt)}const Ze=De?pe:null,st=d.translatePosMatrix(Ze?Ze.posMatrix:pe.posMatrix,be,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(x){J=Ae.indexBuffer2,Q=Ae.segments2;const Ge=[E.drawingBufferWidth,E.drawingBufferHeight];te=G==="fillOutlinePattern"&&P?Wn(st,d,F,be,Ge):dn(st,Ge)}else J=Ae.indexBuffer,Q=Ae.segments,te=P?oa(st,d,F,be):ga(st);ze.draw(d.context,V,f,d.stencilModeForClipping(pe),y,jn.disabled,te,De,o.id,Ae.layoutVertexBuffer,J,Q,o.paint,d.transform.zoom,ae)}}function ko(d,t,o,h,f,y,x){const E=d.context,M=E.gl,P=o.paint.get("fill-extrusion-pattern"),F=P.constantOr(1),V=o.getCrossfadeParameters(),G=o.paint.get("fill-extrusion-opacity");for(const te of h){const J=t.getTile(te),Q=J.getBucket(o);if(!Q)continue;const pe=d.style.terrain&&d.style.terrain.getTerrainData(te),be=Q.programConfigurations.get(o.id),Ae=d.useProgram(F?"fillExtrusionPattern":"fillExtrusion",be);F&&(d.context.activeTexture.set(M.TEXTURE0),J.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),be.updatePaintBuffers(V));const ae=P.constantOr(null);if(ae&&J.imageAtlas){const Ze=J.imageAtlas,st=Ze.patternPositions[ae.to.toString()],Ge=Ze.patternPositions[ae.from.toString()];st&&Ge&&be.setConstantPatternPositions(st,Ge)}const ze=d.translatePosMatrix(te.posMatrix,J,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),De=o.paint.get("fill-extrusion-vertical-gradient"),qe=F?Oa(ze,d,De,G,te,V,J):En(ze,d,De,G);Ae.draw(E,E.gl.TRIANGLES,f,y,x,jn.backCCW,qe,pe,o.id,Q.layoutVertexBuffer,Q.indexBuffer,Q.segments,o.paint,d.transform.zoom,be,d.style.terrain&&Q.centroidVertexBuffer)}}function Rl(d,t,o,h,f,y,x){const E=d.context,M=E.gl,P=o.fbo;if(!P)return;const F=d.useProgram("hillshade"),V=d.style.terrain&&d.style.terrain.getTerrainData(t);E.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,P.colorAttachment.get()),F.draw(E,M.TRIANGLES,f,y,x,jn.disabled,((G,te,J,Q)=>{const pe=J.paint.get("hillshade-shadow-color"),be=J.paint.get("hillshade-highlight-color"),Ae=J.paint.get("hillshade-accent-color");let ae=J.paint.get("hillshade-illumination-direction")*(Math.PI/180);J.paint.get("hillshade-illumination-anchor")==="viewport"&&(ae-=G.transform.angle);const ze=!G.options.moving;return{u_matrix:Q?Q.posMatrix:G.transform.calculatePosMatrix(te.tileID.toUnwrapped(),ze),u_image:0,u_latrange:hr(0,te.tileID),u_light:[J.paint.get("hillshade-exaggeration"),ae],u_shadow:pe,u_highlight:be,u_accent:Ae}})(d,o,h,V?t:null),V,h.id,d.rasterBoundsBuffer,d.quadTriangleIndexBuffer,d.rasterBoundsSegments)}function Tc(d,t,o,h,f,y){const x=d.context,E=x.gl,M=t.dem;if(M&&M.data){const P=M.dim,F=M.stride,V=M.getPixels();if(x.activeTexture.set(E.TEXTURE1),x.pixelStoreUnpackPremultiplyAlpha.set(!1),t.demTexture=t.demTexture||d.getTileTexture(F),t.demTexture){const te=t.demTexture;te.update(V,{premultiply:!1}),te.bind(E.NEAREST,E.CLAMP_TO_EDGE)}else t.demTexture=new he(x,V,E.RGBA,{premultiply:!1}),t.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE);x.activeTexture.set(E.TEXTURE0);let G=t.fbo;if(!G){const te=new he(x,{width:P,height:P,data:null},E.RGBA);te.bind(E.LINEAR,E.CLAMP_TO_EDGE),G=t.fbo=x.createFramebuffer(P,P,!0),G.colorAttachment.set(te.texture)}x.bindFramebuffer.set(G.framebuffer),x.viewport.set([0,0,P,P]),d.useProgram("hillshadePrepare").draw(x,E.TRIANGLES,h,f,y,jn.disabled,((te,J)=>{const Q=J.stride,pe=r.create();return r.ortho(pe,0,r.EXTENT,-r.EXTENT,0,0,1),r.translate(pe,pe,[0,-r.EXTENT,0]),{u_matrix:pe,u_image:1,u_dimension:[Q,Q],u_zoom:te.overscaledZ,u_unpack:J.getUnpackVector()}})(t.tileID,M),null,o.id,d.rasterBoundsBuffer,d.quadTriangleIndexBuffer,d.rasterBoundsSegments),t.needsHillshadePrepare=!1}}function al(d,t,o,h,f,y){const x=h.paint.get("raster-fade-duration");if(!y&&x>0){const E=r.exported.now(),M=(E-d.timeAdded)/x,P=t?(E-t.timeAdded)/x:-1,F=o.getSource(),V=f.coveringZoomLevel({tileSize:F.tileSize,roundZoom:F.roundZoom}),G=!t||Math.abs(t.tileID.overscaledZ-V)>Math.abs(d.tileID.overscaledZ-V),te=G&&d.refreshedUponExpiration?1:r.clamp(G?M:1-P,0,1);return d.refreshedUponExpiration&&M>=1&&(d.refreshedUponExpiration=!1),t?{opacity:1,mix:1-te}:{opacity:te,mix:0}}return{opacity:1,mix:0}}const rl=new r.Color(1,0,0,1),Or=new r.Color(0,1,0,1),Sc=new r.Color(0,0,1,1),zl=new r.Color(1,0,1,1),Ec=new r.Color(0,1,1,1);function Fs(d,t,o,h){no(d,0,t+o/2,d.transform.width,o,h)}function Mo(d,t,o,h){no(d,t-o/2,0,o,d.transform.height,h)}function no(d,t,o,h,f,y){const x=d.context,E=x.gl;E.enable(E.SCISSOR_TEST),E.scissor(t*d.pixelRatio,o*d.pixelRatio,h*d.pixelRatio,f*d.pixelRatio),x.clear({color:y}),E.disable(E.SCISSOR_TEST)}function qu(d,t,o){const h=d.context,f=h.gl,y=o.posMatrix,x=d.useProgram("debug"),E=Gi.disabled,M=Fn.disabled,P=d.colorModeForRenderPass(),F="$debug",V=d.style.terrain&&d.style.terrain.getTerrainData(o);h.activeTexture.set(f.TEXTURE0),d.emptyTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE);const G=t.getTileByID(o.key).latestRawTileData,te=Math.floor((G&&G.byteLength||0)/1024),J=t.getTile(o).tileSize,Q=512/Math.min(J,512)*(o.overscaledZ/d.transform.zoom)*.5;let pe=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(pe+=` => ${o.overscaledZ}`),function(be,Ae){be.initDebugOverlayCanvas();const ae=be.debugOverlayCanvas,ze=be.context.gl,De=be.debugOverlayCanvas.getContext("2d");De.clearRect(0,0,ae.width,ae.height),De.shadowColor="white",De.shadowBlur=2,De.lineWidth=1.5,De.strokeStyle="white",De.textBaseline="top",De.font="bold 36px Open Sans, sans-serif",De.fillText(Ae,5,5),De.strokeText(Ae,5,5),be.debugOverlayTexture.update(ae),be.debugOverlayTexture.bind(ze.LINEAR,ze.CLAMP_TO_EDGE)}(d,`${pe} ${te}kB`),x.draw(h,f.TRIANGLES,E,M,Un.alphaBlended,jn.disabled,Ca(y,r.Color.transparent,Q),null,F,d.debugBuffer,d.quadTriangleIndexBuffer,d.debugSegments),x.draw(h,f.LINE_STRIP,E,M,P,jn.disabled,Ca(y,r.Color.red),V,F,d.debugBuffer,d.tileBorderIndexBuffer,d.debugSegments)}function sl(d,t,o){const h=d.context,f=h.gl,y=d.colorModeForRenderPass(),x=new Gi(f.LEQUAL,Gi.ReadWrite,d.depthRangeFor3D),E=d.useProgram("terrain"),M=t.getTerrainMesh(),P=t.getTerrainData(o.tileID);h.bindFramebuffer.set(null),h.viewport.set([0,0,d.width,d.height]),h.activeTexture.set(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,t.getRTTFramebuffer().colorAttachment.get());const F=d.transform.calculatePosMatrix(o.tileID.toUnwrapped());E.draw(h,f.TRIANGLES,x,Fn.disabled,y,jn.backCCW,{u_matrix:F,u_texture:0},P,"terrain",M.vertexBuffer,M.indexBuffer,M.segments)}function Ic(d,t,o,h){const f=d.context,y=o.tileSize*t.qualityFactor;o.textures[h]||(o.textures[h]=d.getTileTexture(y)||new he(f,{width:y,height:y,data:null},f.gl.RGBA),o.textures[h].bind(f.gl.LINEAR,f.gl.CLAMP_TO_EDGE),h===0&&t.sourceCache.renderHistory.unshift(o.tileID.key));const x=t.getRTTFramebuffer();x.colorAttachment.set(o.textures[h].texture),f.bindFramebuffer.set(x.framebuffer),f.viewport.set([0,0,y,y])}class Ac{constructor(t){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=t,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=t.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const t=this.painter.style,o=t.terrain;for(const h in t.sourceCaches){this._coordsDescendingInv[h]={};const f=t.sourceCaches[h].getVisibleCoordinates();for(const y of f){const x=o.sourceCache.getTerrainCoords(y);for(const E in x)this._coordsDescendingInv[h][E]||(this._coordsDescendingInv[h][E]=[]),this._coordsDescendingInv[h][E].push(x[E])}}for(const h of t._order){const f=t._layers[h],y=f.source;if(this._renderToTexture[f.type]&&!this._coordsDescendingInvStr[y]){this._coordsDescendingInvStr[y]={};for(const x in this._coordsDescendingInv[y])this._coordsDescendingInvStr[y][x]=this._coordsDescendingInv[y][x].map(E=>E.key).sort().join()}}return this._renderableTiles.forEach(h=>{for(const f in this._coordsDescendingInvStr){const y=this._coordsDescendingInvStr[f][h.tileID.key];y&&y!==h.textureCoords[f]&&h.clearTextures(this.painter),o.needsRerender(f,h.tileID)&&h.clearTextures(this.painter)}this._rerender[h.tileID.key]=!h.textures.length}),o.clearRerenderCache(),o.sourceCache.removeOutdated(this.painter),this}renderLayer(t){const o=t.type,h=this.painter,f=h.style._order,y=h.currentLayer,x=y+1===f.length;if(this._renderToTexture[o]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=o,this._stacks[this._stacks.length-1].push(f[y]),!x))return!0;if(this._renderToTexture[this._prevType]||o==="hillshade"||this._renderToTexture[o]&&x){this._prevType=o;const E=this._stacks.length-1,M=this._stacks[E]||[];for(const P of this._renderableTiles){if(Ic(h,h.style.terrain,P,E),this._rerender[P.tileID.key]){h.context.clear({color:r.Color.transparent});for(let F=0;F<M.length;F++){const V=h.style._layers[M[F]],G=V.source?this._coordsDescendingInv[V.source][P.tileID.key]:[P.tileID];h._renderTileClippingMasks(V,G),h.renderLayer(h,h.style.sourceCaches[V.source],V,G),V.source&&(P.textureCoords[V.source]=this._coordsDescendingInvStr[V.source][P.tileID.key])}}sl(h,h.style.terrain,P)}if(o==="hillshade"){this._stacks.push([f[y]]);for(const P of this._renderableTiles){const F=this._coordsDescendingInv[t.source][P.tileID.key];Ic(h,h.style.terrain,P,this._stacks.length-1),h.context.clear({color:r.Color.transparent}),h._renderTileClippingMasks(t,F),h.renderLayer(h,h.style.sourceCaches[t.source],t,F),sl(h,h.style.terrain,P)}return!0}return this._renderToTexture[o]}return!1}}const Do={symbol:function(d,t,o,h,f){if(d.renderPass!=="translucent")return;const y=Fn.disabled,x=d.colorModeForRenderPass();o.layout.get("text-variable-anchor")&&function(E,M,P,F,V,G,te){const J=M.transform,Q=V==="map",pe=G==="map";for(const be of E){const Ae=F.getTile(be),ae=Ae.getBucket(P);if(!ae||!ae.text||!ae.text.segments.get().length)continue;const ze=r.evaluateSizeForZoom(ae.textSizeData,J.zoom),De=Fi(Ae,1,M.transform.zoom),qe=mt(be.posMatrix,pe,Q,M.transform,De),Ze=P.layout.get("icon-text-fit")!=="none"&&ae.hasIconData();if(ze){const st=Math.pow(2,J.zoom-Ae.tileID.overscaledZ);Cc(ae,Q,pe,te,J,qe,be.posMatrix,st,ze,Ze,M.style.terrain?(Ge,Pt)=>M.style.terrain.getElevation(be,Ge,Pt):null)}}}(h,d,o,t,o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),f),o.paint.get("icon-opacity").constantOr(1)!==0&&nl(d,t,o,h,!1,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),o.layout.get("icon-rotation-alignment"),o.layout.get("icon-pitch-alignment"),o.layout.get("icon-keep-upright"),y,x),o.paint.get("text-opacity").constantOr(1)!==0&&nl(d,t,o,h,!0,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),o.layout.get("text-keep-upright"),y,x),t.map.showCollisionBoxes&&(io(d,t,o,h,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),!0),io(d,t,o,h,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),!1))},circle:function(d,t,o,h){if(d.renderPass!=="translucent")return;const f=o.paint.get("circle-opacity"),y=o.paint.get("circle-stroke-width"),x=o.paint.get("circle-stroke-opacity"),E=!o.layout.get("circle-sort-key").isConstant();if(f.constantOr(1)===0&&(y.constantOr(1)===0||x.constantOr(1)===0))return;const M=d.context,P=M.gl,F=d.depthModeForSublayer(0,Gi.ReadOnly),V=Fn.disabled,G=d.colorModeForRenderPass(),te=[];for(let J=0;J<h.length;J++){const Q=h[J],pe=t.getTile(Q),be=pe.getBucket(o);if(!be)continue;const Ae=be.programConfigurations.get(o.id),ae=d.useProgram("circle",Ae),ze=be.layoutVertexBuffer,De=be.indexBuffer,qe=d.style.terrain&&d.style.terrain.getTerrainData(Q),Ze={programConfiguration:Ae,program:ae,layoutVertexBuffer:ze,indexBuffer:De,uniformValues:On(d,Q,pe,o),terrainData:qe};if(E){const st=be.segments.get();for(const Ge of st)te.push({segments:new r.SegmentVector([Ge]),sortKey:Ge.sortKey,state:Ze})}else te.push({segments:be.segments,sortKey:0,state:Ze})}E&&te.sort((J,Q)=>J.sortKey-Q.sortKey);for(const J of te){const{programConfiguration:Q,program:pe,layoutVertexBuffer:be,indexBuffer:Ae,uniformValues:ae,terrainData:ze}=J.state;pe.draw(M,P.TRIANGLES,F,V,G,jn.disabled,ae,ze,o.id,be,Ae,J.segments,o.paint,d.transform.zoom,Q)}},heatmap:function(d,t,o,h){if(o.paint.get("heatmap-opacity")!==0)if(d.renderPass==="offscreen"){const f=d.context,y=f.gl,x=Fn.disabled,E=new Un([y.ONE,y.ONE],r.Color.transparent,[!0,!0,!0,!0]);(function(M,P,F){const V=M.gl;M.activeTexture.set(V.TEXTURE1),M.viewport.set([0,0,P.width/4,P.height/4]);let G=F.heatmapFbo;if(G)V.bindTexture(V.TEXTURE_2D,G.colorAttachment.get()),M.bindFramebuffer.set(G.framebuffer);else{const te=V.createTexture();V.bindTexture(V.TEXTURE_2D,te),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_WRAP_S,V.CLAMP_TO_EDGE),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_WRAP_T,V.CLAMP_TO_EDGE),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MIN_FILTER,V.LINEAR),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MAG_FILTER,V.LINEAR),G=F.heatmapFbo=M.createFramebuffer(P.width/4,P.height/4,!1),function(J,Q,pe,be){const Ae=J.gl;Ae.texImage2D(Ae.TEXTURE_2D,0,Ae.RGBA,Q.width/4,Q.height/4,0,Ae.RGBA,J.extRenderToTextureHalfFloat?J.extTextureHalfFloat.HALF_FLOAT_OES:Ae.UNSIGNED_BYTE,null),be.colorAttachment.set(pe)}(M,P,te,G)}})(f,d,o),f.clear({color:r.Color.transparent});for(let M=0;M<h.length;M++){const P=h[M];if(t.hasRenderableParent(P))continue;const F=t.getTile(P),V=F.getBucket(o);if(!V)continue;const G=V.programConfigurations.get(o.id),te=d.useProgram("heatmap",G),{zoom:J}=d.transform;te.draw(f,y.TRIANGLES,Gi.disabled,x,E,jn.disabled,ur(P.posMatrix,F,J,o.paint.get("heatmap-intensity")),null,o.id,V.layoutVertexBuffer,V.indexBuffer,V.segments,o.paint,d.transform.zoom,G)}f.viewport.set([0,0,d.width,d.height])}else d.renderPass==="translucent"&&(d.context.setColorMode(d.colorModeForRenderPass()),function(f,y){const x=f.context,E=x.gl,M=y.heatmapFbo;if(!M)return;x.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,M.colorAttachment.get()),x.activeTexture.set(E.TEXTURE1);let P=y.colorRampTexture;P||(P=y.colorRampTexture=new he(x,y.colorRamp,E.RGBA)),P.bind(E.LINEAR,E.CLAMP_TO_EDGE),f.useProgram("heatmapTexture").draw(x,E.TRIANGLES,Gi.disabled,Fn.disabled,f.colorModeForRenderPass(),jn.disabled,((F,V,G,te)=>{const J=r.create();r.ortho(J,0,F.width,F.height,0,0,1);const Q=F.context.gl;return{u_matrix:J,u_world:[Q.drawingBufferWidth,Q.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:V.paint.get("heatmap-opacity")}})(f,y),null,y.id,f.viewportBuffer,f.quadTriangleIndexBuffer,f.viewportSegments,y.paint,f.transform.zoom)}(d,o))},line:function(d,t,o,h){if(d.renderPass!=="translucent")return;const f=o.paint.get("line-opacity"),y=o.paint.get("line-width");if(f.constantOr(1)===0||y.constantOr(1)===0)return;const x=d.depthModeForSublayer(0,Gi.ReadOnly),E=d.colorModeForRenderPass(),M=o.paint.get("line-dasharray"),P=o.paint.get("line-pattern"),F=P.constantOr(1),V=o.paint.get("line-gradient"),G=o.getCrossfadeParameters(),te=F?"linePattern":M?"lineSDF":V?"lineGradient":"line",J=d.context,Q=J.gl;let pe=!0;for(const be of h){const Ae=t.getTile(be);if(F&&!Ae.patternsLoaded())continue;const ae=Ae.getBucket(o);if(!ae)continue;const ze=ae.programConfigurations.get(o.id),De=d.context.program.get(),qe=d.useProgram(te,ze),Ze=pe||qe.program!==De,st=d.style.terrain&&d.style.terrain.getTerrainData(be),Ge=P.constantOr(null);if(Ge&&Ae.imageAtlas){const zt=Ae.imageAtlas,yi=zt.patternPositions[Ge.to.toString()],Ti=zt.patternPositions[Ge.from.toString()];yi&&Ti&&ze.setConstantPatternPositions(yi,Ti)}const Pt=st?be:null,vt=F?Na(d,Ae,o,G,Pt):M?Za(d,Ae,o,M,G,Pt):V?Br(d,Ae,o,ae.lineClipsArray.length,Pt):Nn(d,Ae,o,Pt);if(F)J.activeTexture.set(Q.TEXTURE0),Ae.imageAtlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),ze.updatePaintBuffers(G);else if(M&&(Ze||d.lineAtlas.dirty))J.activeTexture.set(Q.TEXTURE0),d.lineAtlas.bind(J);else if(V){const zt=ae.gradients[o.id];let yi=zt.texture;if(o.gradientVersion!==zt.version){let Ti=256;if(o.stepInterpolant){const ai=t.getSource().maxzoom,bn=be.canonical.z===ai?Math.ceil(1<<d.transform.maxZoom-be.canonical.z):1;Ti=r.clamp(r.nextPowerOfTwo(ae.maxLineLength/r.EXTENT*1024*bn),256,J.maxTextureSize)}zt.gradient=r.renderColorRamp({expression:o.gradientExpression(),evaluationKey:"lineProgress",resolution:Ti,image:zt.gradient||void 0,clips:ae.lineClipsArray}),zt.texture?zt.texture.update(zt.gradient):zt.texture=new he(J,zt.gradient,Q.RGBA),zt.version=o.gradientVersion,yi=zt.texture}J.activeTexture.set(Q.TEXTURE0),yi.bind(o.stepInterpolant?Q.NEAREST:Q.LINEAR,Q.CLAMP_TO_EDGE)}qe.draw(J,Q.TRIANGLES,x,d.stencilModeForClipping(be),E,jn.disabled,vt,st,o.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,o.paint,d.transform.zoom,ze,ae.layoutVertexBuffer2),pe=!1}},fill:function(d,t,o,h){const f=o.paint.get("fill-color"),y=o.paint.get("fill-opacity");if(y.constantOr(1)===0)return;const x=d.colorModeForRenderPass(),E=o.paint.get("fill-pattern"),M=d.opaquePassEnabledForLayer()&&!E.constantOr(1)&&f.constantOr(r.Color.transparent).a===1&&y.constantOr(0)===1?"opaque":"translucent";if(d.renderPass===M){const P=d.depthModeForSublayer(1,d.renderPass==="opaque"?Gi.ReadWrite:Gi.ReadOnly);Ao(d,t,o,h,P,x,!1)}if(d.renderPass==="translucent"&&o.paint.get("fill-antialias")){const P=d.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,Gi.ReadOnly);Ao(d,t,o,h,P,x,!0)}},"fill-extrusion":function(d,t,o,h){const f=o.paint.get("fill-extrusion-opacity");if(f!==0&&d.renderPass==="translucent"){const y=new Gi(d.context.gl.LEQUAL,Gi.ReadWrite,d.depthRangeFor3D);if(f!==1||o.paint.get("fill-extrusion-pattern").constantOr(1))ko(d,t,o,h,y,Fn.disabled,Un.disabled),ko(d,t,o,h,y,d.stencilModeFor3D(),d.colorModeForRenderPass());else{const x=d.colorModeForRenderPass();ko(d,t,o,h,y,Fn.disabled,x)}}},hillshade:function(d,t,o,h){if(d.renderPass!=="offscreen"&&d.renderPass!=="translucent")return;const f=d.context,y=d.depthModeForSublayer(0,Gi.ReadOnly),x=d.colorModeForRenderPass(),[E,M]=d.renderPass==="translucent"?d.stencilConfigForOverlap(h):[{},h];for(const P of M){const F=t.getTile(P);F.needsHillshadePrepare!==void 0&&F.needsHillshadePrepare&&d.renderPass==="offscreen"?Tc(d,F,o,y,Fn.disabled,x):d.renderPass==="translucent"&&Rl(d,P,F,o,y,E[P.overscaledZ],x)}f.viewport.set([0,0,d.width,d.height])},raster:function(d,t,o,h){if(d.renderPass!=="translucent"||o.paint.get("raster-opacity")===0||!h.length)return;const f=d.context,y=f.gl,x=t.getSource(),E=d.useProgram("raster"),M=d.colorModeForRenderPass(),[P,F]=x instanceof jt?[{},h]:d.stencilConfigForOverlap(h),V=F[F.length-1].overscaledZ,G=!d.options.moving;for(const te of F){const J=d.depthModeForSublayer(te.overscaledZ-V,o.paint.get("raster-opacity")===1?Gi.ReadWrite:Gi.ReadOnly,y.LESS),Q=t.getTile(te);Q.registerFadeDuration(o.paint.get("raster-fade-duration"));const pe=t.findLoadedParent(te,0),be=al(Q,pe,t,o,d.transform,d.style.terrain);let Ae,ae;const ze=o.paint.get("raster-resampling")==="nearest"?y.NEAREST:y.LINEAR;f.activeTexture.set(y.TEXTURE0),Q.texture.bind(ze,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST),f.activeTexture.set(y.TEXTURE1),pe?(pe.texture.bind(ze,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST),Ae=Math.pow(2,pe.tileID.overscaledZ-Q.tileID.overscaledZ),ae=[Q.tileID.canonical.x*Ae%1,Q.tileID.canonical.y*Ae%1]):Q.texture.bind(ze,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST);const De=d.style.terrain&&d.style.terrain.getTerrainData(te),qe=De?te:null,Ze=qe?qe.posMatrix:d.transform.calculatePosMatrix(te.toUnwrapped(),G),st=Er(Ze,ae||[0,0],Ae||1,be,o);x instanceof jt?E.draw(f,y.TRIANGLES,J,Fn.disabled,M,jn.disabled,st,De,o.id,x.boundsBuffer,d.quadTriangleIndexBuffer,x.boundsSegments):E.draw(f,y.TRIANGLES,J,P[te.overscaledZ],M,jn.disabled,st,De,o.id,d.rasterBoundsBuffer,d.quadTriangleIndexBuffer,d.rasterBoundsSegments)}},background:function(d,t,o,h){const f=o.paint.get("background-color"),y=o.paint.get("background-opacity");if(y===0)return;const x=d.context,E=x.gl,M=d.transform,P=M.tileSize,F=o.paint.get("background-pattern");if(d.isPatternMissing(F))return;const V=!F&&f.a===1&&y===1&&d.opaquePassEnabledForLayer()?"opaque":"translucent";if(d.renderPass!==V)return;const G=Fn.disabled,te=d.depthModeForSublayer(0,V==="opaque"?Gi.ReadWrite:Gi.ReadOnly),J=d.colorModeForRenderPass(),Q=d.useProgram(F?"backgroundPattern":"background"),pe=h||M.coveringTiles({tileSize:P,terrain:d.style.terrain});F&&(x.activeTexture.set(E.TEXTURE0),d.imageManager.bind(d.context));const be=o.getCrossfadeParameters();for(const Ae of pe){const ae=h?Ae.posMatrix:d.transform.calculatePosMatrix(Ae.toUnwrapped()),ze=F?Ms(ae,y,d,F,{tileID:Ae,tileSize:P},be):Js(ae,y,f),De=d.style.terrain&&d.style.terrain.getTerrainData(Ae);Q.draw(x,E.TRIANGLES,te,G,J,jn.disabled,ze,De,o.id,d.tileExtentBuffer,d.quadTriangleIndexBuffer,d.tileExtentSegments)}},debug:function(d,t,o){for(let h=0;h<o.length;h++)qu(d,t,o[h])},custom:function(d,t,o){const h=d.context,f=o.implementation;if(d.renderPass==="offscreen"){const y=f.prerender;y&&(d.setCustomLayerDefaults(),h.setColorMode(d.colorModeForRenderPass()),y.call(f,h.gl,d.transform.customLayerMatrix()),h.setDirty(),d.setBaseState())}else if(d.renderPass==="translucent"){d.setCustomLayerDefaults(),h.setColorMode(d.colorModeForRenderPass()),h.setStencilMode(Fn.disabled);const y=f.renderingMode==="3d"?new Gi(d.context.gl.LEQUAL,Gi.ReadWrite,d.depthRangeFor3D):d.depthModeForSublayer(0,Gi.ReadOnly);h.setDepthMode(y),f.render(h.gl,d.transform.customLayerMatrix()),h.setDirty(),d.setBaseState(),h.bindFramebuffer.set(null)}}};class Bl{constructor(t,o){this.context=new wc(t),this.transform=o,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:r.create(),renderTime:0},this.setup(),this.numSublayers=pi.maxUnderzooming+pi.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new lt,this.gpuTimers={}}resize(t,o,h){if(this.width=t*h,this.height=o*h,this.pixelRatio=h,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const f of this.style._order)this.style._layers[f].resize()}setup(){const t=this.context,o=new r.PosArray;o.emplaceBack(0,0),o.emplaceBack(r.EXTENT,0),o.emplaceBack(0,r.EXTENT),o.emplaceBack(r.EXTENT,r.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(o,bt.members),this.tileExtentSegments=r.SegmentVector.simpleSegment(0,0,4,2);const h=new r.PosArray;h.emplaceBack(0,0),h.emplaceBack(r.EXTENT,0),h.emplaceBack(0,r.EXTENT),h.emplaceBack(r.EXTENT,r.EXTENT),this.debugBuffer=t.createVertexBuffer(h,bt.members),this.debugSegments=r.SegmentVector.simpleSegment(0,0,4,5);const f=new r.RasterBoundsArray;f.emplaceBack(0,0,0,0),f.emplaceBack(r.EXTENT,0,r.EXTENT,0),f.emplaceBack(0,r.EXTENT,0,r.EXTENT),f.emplaceBack(r.EXTENT,r.EXTENT,r.EXTENT,r.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(f,ut.members),this.rasterBoundsSegments=r.SegmentVector.simpleSegment(0,0,4,2);const y=new r.PosArray;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(y,bt.members),this.viewportSegments=r.SegmentVector.simpleSegment(0,0,4,2);const x=new r.LineStripIndexArray;x.emplaceBack(0),x.emplaceBack(1),x.emplaceBack(3),x.emplaceBack(2),x.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(x);const E=new r.TriangleIndexArray;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(E),this.emptyTexture=new he(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA);const M=this.context.gl;this.stencilClearMode=new Fn({func:M.ALWAYS,mask:0},0,255,M.ZERO,M.ZERO,M.ZERO)}clearStencil(){const t=this.context,o=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const h=r.create();r.ortho(h,0,this.width,this.height,0,0,1),r.scale(h,h,[o.drawingBufferWidth,o.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,o.TRIANGLES,Gi.disabled,this.stencilClearMode,Un.disabled,jn.disabled,la(h),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,o){if(this.currentStencilSource===t.source||!t.isTileClipped()||!o||!o.length)return;this.currentStencilSource=t.source;const h=this.context,f=h.gl;this.nextStencilID+o.length>256&&this.clearStencil(),h.setColorMode(Un.disabled),h.setDepthMode(Gi.disabled);const y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const x of o){const E=this._tileClippingMaskIDs[x.key]=this.nextStencilID++,M=this.style.terrain&&this.style.terrain.getTerrainData(x);y.draw(h,f.TRIANGLES,Gi.disabled,new Fn({func:f.ALWAYS,mask:0},E,255,f.KEEP,f.KEEP,f.REPLACE),Un.disabled,jn.disabled,la(x.posMatrix),M,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,o=this.context.gl;return new Fn({func:o.NOTEQUAL,mask:255},t,255,o.KEEP,o.KEEP,o.REPLACE)}stencilModeForClipping(t){const o=this.context.gl;return new Fn({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,o.KEEP,o.KEEP,o.REPLACE)}stencilConfigForOverlap(t){const o=this.context.gl,h=t.sort((x,E)=>E.overscaledZ-x.overscaledZ),f=h[h.length-1].overscaledZ,y=h[0].overscaledZ-f+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const x={};for(let E=0;E<y;E++)x[E+f]=new Fn({func:o.GEQUAL,mask:255},E+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=y,[x,h]}return[{[f]:Fn.disabled},h]}colorModeForRenderPass(){const t=this.context.gl;return this._showOverdrawInspector?new Un([t.CONSTANT_COLOR,t.ONE],new r.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Un.unblended:Un.alphaBlended}depthModeForSublayer(t,o,h){if(!this.opaquePassEnabledForLayer())return Gi.disabled;const f=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new Gi(h||this.context.gl.LEQUAL,o,[f,f])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,o){this.style=t,this.options=o,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(r.exported.now()),this.imageManager.beginFrame();const h=this.style._order,f=this.style.sourceCaches,y=this.style.terrain&&new Ac(this);for(const P in f){const F=f[P];F.used&&F.prepare(this.context)}const x={},E={},M={};for(const P in f){const F=f[P];x[P]=F.getVisibleCoordinates(),E[P]=x[P].slice().reverse(),M[P]=F.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let P=0;P<h.length;P++)if(this.style._layers[h[P]].is3D()){this.opaquePassCutoff=P;break}if(y){this.opaquePassCutoff=0;const P=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!r.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||P.length)&&(r.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(F,V){const G=F.context,te=G.gl,J=Un.unblended,Q=new Gi(te.LEQUAL,Gi.ReadWrite,[0,1]),pe=V.getTerrainMesh(),be=V.sourceCache.getRenderableTiles(),Ae=F.useProgram("terrainDepth");G.bindFramebuffer.set(V.getFramebuffer("depth").framebuffer),G.viewport.set([0,0,F.width/devicePixelRatio,F.height/devicePixelRatio]),G.clear({color:r.Color.transparent,depth:1});for(const ae of be){const ze=V.getTerrainData(ae.tileID),De=F.transform.calculatePosMatrix(ae.tileID.toUnwrapped());Ae.draw(G,te.TRIANGLES,Q,Fn.disabled,J,jn.backCCW,{u_matrix:De},ze,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments)}G.bindFramebuffer.set(null),G.viewport.set([0,0,F.width,F.height])}(this,this.style.terrain),function(F,V){const G=F.context,te=G.gl,J=Un.unblended,Q=new Gi(te.LEQUAL,Gi.ReadWrite,[0,1]),pe=V.getTerrainMesh(),be=V.getCoordsTexture(),Ae=V.sourceCache.getRenderableTiles(),ae=F.useProgram("terrainCoords");G.bindFramebuffer.set(V.getFramebuffer("coords").framebuffer),G.viewport.set([0,0,F.width/devicePixelRatio,F.height/devicePixelRatio]),G.clear({color:r.Color.transparent,depth:1}),V.coordsIndex=[];for(const ze of Ae){const De=V.getTerrainData(ze.tileID);G.activeTexture.set(te.TEXTURE0),te.bindTexture(te.TEXTURE_2D,be.texture);const qe=F.transform.calculatePosMatrix(ze.tileID.toUnwrapped());ae.draw(G,te.TRIANGLES,Q,Fn.disabled,J,jn.backCCW,{u_matrix:qe,u_terrain_coords_id:(255-V.coordsIndex.length)/255,u_texture:0},De,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments),V.coordsIndex.push(ze.tileID.key)}G.bindFramebuffer.set(null),G.viewport.set([0,0,F.width,F.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const P of h){const F=this.style._layers[P];if(!F.hasOffscreenPass()||F.isHidden(this.transform.zoom))continue;const V=E[F.source];(F.type==="custom"||V.length)&&this.renderLayer(this,f[F.source],F,V)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:o.showOverdrawInspector?r.Color.black:r.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=o.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!y)for(this.renderPass="opaque",this.currentLayer=h.length-1;this.currentLayer>=0;this.currentLayer--){const P=this.style._layers[h[this.currentLayer]],F=f[P.source],V=x[P.source];this._renderTileClippingMasks(P,V),this.renderLayer(this,F,P,V)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<h.length;this.currentLayer++){const P=this.style._layers[h[this.currentLayer]],F=f[P.source];if(y&&y.renderLayer(P))continue;const V=(P.type==="symbol"?M:E)[P.source];this._renderTileClippingMasks(P,x[P.source]),this.renderLayer(this,F,P,V)}if(this.options.showTileBoundaries){let P,F;Object.values(this.style._layers).forEach(V=>{V.source&&!V.isHidden(this.transform.zoom)&&(V.source!==(F&&F.id)&&(F=this.style.sourceCaches[V.source]),(!P||P.getSource().maxzoom<F.getSource().maxzoom)&&(P=F))}),P&&Do.debug(this,P,P.getVisibleCoordinates())}this.options.showPadding&&function(P){const F=P.transform.padding;Fs(P,P.transform.height-(F.top||0),3,rl),Fs(P,F.bottom||0,3,Or),Mo(P,F.left||0,3,Sc),Mo(P,P.transform.width-(F.right||0),3,zl);const V=P.transform.centerPoint;(function(G,te,J,Q){no(G,te-1,J-10,2,20,Q),no(G,te-10,J-1,20,2,Q)})(P,V.x,P.transform.height-V.y,Ec)}(this),this.context.setDefault()}renderLayer(t,o,h,f){h.isHidden(this.transform.zoom)||(h.type==="background"||h.type==="custom"||(f||[]).length)&&(this.id=h.id,this.gpuTimingStart(h),Do[h.type](t,o,h,f,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(t){if(!this.options.gpuTiming)return;const o=this.context.extTimerQuery;let h=this.gpuTimers[t.id];h||(h=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:o.createQueryEXT()}),h.calls++,o.beginQueryEXT(o.TIME_ELAPSED_EXT,h.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}collectGpuTimers(){const t=this.gpuTimers;return this.gpuTimers={},t}queryGpuTimers(t){const o={};for(const h in t){const f=t[h],y=this.context.extTimerQuery,x=y.getQueryObjectEXT(f.query,y.QUERY_RESULT_EXT)/1e6;y.deleteQueryEXT(f.query),o[h]=x}return o}translatePosMatrix(t,o,h,f,y){if(!h[0]&&!h[1])return t;const x=y?f==="map"?this.transform.angle:0:f==="viewport"?-this.transform.angle:0;if(x){const P=Math.sin(x),F=Math.cos(x);h=[h[0]*F-h[1]*P,h[0]*P+h[1]*F]}const E=[y?h[0]:Fi(o,h[0],this.transform.zoom),y?h[1]:Fi(o,h[1],this.transform.zoom),0],M=new Float32Array(16);return r.translate(M,t,E),M}saveTileTexture(t){const o=this._tileTextures[t.size[0]];o?o.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const o=this._tileTextures[t];return o&&o.length>0?o.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const o=this.imageManager.getPattern(t.from.toString()),h=this.imageManager.getPattern(t.to.toString());return!o||!h}useProgram(t,o){this.cache=this.cache||{};const h=t+(o?o.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[h]||(this.cache[h]=new Ci(this.context,t,Fa[t],o,ts[t],this._showOverdrawInspector,this.style.terrain)),this.cache[h]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new he(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class ol{constructor(t,o){this.points=t,this.planes=o}static fromInvProjectionMatrix(t,o,h){const f=Math.pow(2,h),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(E=>{const M=1/(E=r.transformMat4([],E,t))[3]/o*f;return r.mul$1(E,E,[M,M,1/E[3],M])}),x=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(E=>{const M=r.sub([],y[E[0]],y[E[1]]),P=r.sub([],y[E[2]],y[E[1]]),F=r.normalize([],r.cross([],M,P)),V=-r.dot(F,y[E[1]]);return F.concat(V)});return new ol(y,x)}}class Po{constructor(t,o){this.min=t,this.max=o,this.center=r.scale$1([],r.add([],this.min,this.max),.5)}quadrant(t){const o=[t%2==0,t<2],h=r.clone$2(this.min),f=r.clone$2(this.max);for(let y=0;y<o.length;y++)h[y]=o[y]?this.min[y]:this.center[y],f[y]=o[y]?this.center[y]:this.max[y];return f[2]=this.max[2],new Po(h,f)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersects(t){const o=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let h=!0;for(let f=0;f<t.planes.length;f++){const y=t.planes[f];let x=0;for(let E=0;E<o.length;E++)r.dot$1(y,o[E])>=0&&x++;if(x===0)return 0;x!==o.length&&(h=!1)}if(h)return 2;for(let f=0;f<3;f++){let y=Number.MAX_VALUE,x=-Number.MAX_VALUE;for(let E=0;E<t.points.length;E++){const M=t.points[E][f]-this.min[f];y=Math.min(y,M),x=Math.max(x,M)}if(x<0||y>this.max[f]-this.min[f])return 0}return 1}}class ao{constructor(t=0,o=0,h=0,f=0){if(isNaN(t)||t<0||isNaN(o)||o<0||isNaN(h)||h<0||isNaN(f)||f<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=o,this.left=h,this.right=f}interpolate(t,o,h){return o.top!=null&&t.top!=null&&(this.top=r.number(t.top,o.top,h)),o.bottom!=null&&t.bottom!=null&&(this.bottom=r.number(t.bottom,o.bottom,h)),o.left!=null&&t.left!=null&&(this.left=r.number(t.left,o.left,h)),o.right!=null&&t.right!=null&&(this.right=r.number(t.right,o.right,h)),this}getCenter(t,o){const h=r.clamp((this.left+t-this.right)/2,0,t),f=r.clamp((this.top+o-this.bottom)/2,0,o);return new r.pointGeometry(h,f)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new ao(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Lo{constructor(t,o,h,f,y){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=y===void 0||!!y,this._minZoom=t||0,this._maxZoom=o||22,this._minPitch=h==null?0:h,this._maxPitch=f==null?60:f,this.setMaxBounds(),this.width=0,this.height=0,this._center=new r.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ao,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const t=new Lo(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t._elevation=this._elevation,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){t===void 0?t=!0:t===null&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new r.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(t){const o=-r.wrap(t,-180,180)*Math.PI/180;var h;this.angle!==o&&(this._unmodified=!1,this.angle=o,this._calcMatrices(),this.rotationMatrix=(h=new r.ARRAY_TYPE(4),r.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h),function(f,y,x){var E=y[0],M=y[1],P=y[2],F=y[3],V=Math.sin(x),G=Math.cos(x);f[0]=E*G+P*V,f[1]=M*G+F*V,f[2]=E*-V+P*G,f[3]=M*-V+F*G}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const o=r.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==o&&(this._unmodified=!1,this._pitch=o,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(t){const o=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==o&&(this._unmodified=!1,this._zoom=o,this.scale=this.zoomScale(o),this.tileZoom=Math.floor(o),this.zoomFraction=o-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(t){t!==this._elevation&&(this._elevation=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,o,h){this._unmodified=!1,this._edgeInsets.interpolate(t,o,h),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const o=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,o)}getVisibleUnwrappedCoordinates(t){const o=[new r.UnwrappedTileID(0,t)];if(this._renderWorldCopies){const h=this.pointCoordinate(new r.pointGeometry(0,0)),f=this.pointCoordinate(new r.pointGeometry(this.width,0)),y=this.pointCoordinate(new r.pointGeometry(this.width,this.height)),x=this.pointCoordinate(new r.pointGeometry(0,this.height)),E=Math.floor(Math.min(h.x,f.x,y.x,x.x)),M=Math.floor(Math.max(h.x,f.x,y.x,x.x)),P=1;for(let F=E-P;F<=M+P;F++)F!==0&&o.push(new r.UnwrappedTileID(F,t))}return o}coveringTiles(t){var o,h;let f=this.coveringZoomLevel(t);const y=f;if(t.minzoom!==void 0&&f<t.minzoom)return[];t.maxzoom!==void 0&&f>t.maxzoom&&(f=t.maxzoom);const x=this.pointCoordinate(this.getCameraPoint()),E=r.MercatorCoordinate.fromLngLat(this.center),M=Math.pow(2,f),P=[M*x.x,M*x.y,0],F=[M*E.x,M*E.y,0],V=ol.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,f);let G=t.minzoom||0;!t.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(G=f);const te=t.terrain?2/Math.min(this.tileSize,t.tileSize)*this.tileSize:3,J=ae=>({aabb:new Po([ae*M,0,0],[(ae+1)*M,M,0]),zoom:0,x:0,y:0,wrap:ae,fullyVisible:!1}),Q=[],pe=[],be=f,Ae=t.reparseOverscaled?y:f;if(this._renderWorldCopies)for(let ae=1;ae<=3;ae++)Q.push(J(-ae)),Q.push(J(ae));for(Q.push(J(0));Q.length>0;){const ae=Q.pop(),ze=ae.x,De=ae.y;let qe=ae.fullyVisible;if(!qe){const zt=ae.aabb.intersects(V);if(zt===0)continue;qe=zt===2}const Ze=t.terrain?P:F,st=ae.aabb.distanceX(Ze),Ge=ae.aabb.distanceY(Ze),Pt=Math.max(Math.abs(st),Math.abs(Ge)),vt=te+(1<<be-ae.zoom)-2;if(ae.zoom===be||Pt>vt&&ae.zoom>=G){const zt=be-ae.zoom,yi=P[0]-.5-(ze<<zt),Ti=P[1]-.5-(De<<zt);pe.push({tileID:new r.OverscaledTileID(ae.zoom===be?Ae:ae.zoom,ae.wrap,ae.zoom,ze,De),distanceSq:r.sqrLen([F[0]-.5-ze,F[1]-.5-De]),tileDistanceToCamera:Math.sqrt(yi*yi+Ti*Ti)})}else for(let zt=0;zt<4;zt++){const yi=(ze<<1)+zt%2,Ti=(De<<1)+(zt>>1),ai=ae.zoom+1;let bn=ae.aabb.quadrant(zt);if(t.terrain){const vn=new r.OverscaledTileID(ai,ae.wrap,ai,yi,Ti),Ki=t.terrain.getMinMaxElevation(vn),Qi=(o=Ki.minElevation)!==null&&o!==void 0?o:this.elevation,Tn=(h=Ki.maxElevation)!==null&&h!==void 0?h:this.elevation;bn=new Po([bn.min[0],bn.min[1],Qi],[bn.max[0],bn.max[1],Tn])}Q.push({aabb:bn,zoom:ai,x:yi,y:Ti,wrap:ae.wrap,fullyVisible:qe})}}return pe.sort((ae,ze)=>ae.distanceSq-ze.distanceSq).map(ae=>ae.tileID)}resize(t,o){this.width=t,this.height=o,this.pixelsToGLUnits=[2/t,-2/o],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(t){const o=r.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new r.pointGeometry(r.mercatorXfromLng(t.lng)*this.worldSize,r.mercatorYfromLat(o)*this.worldSize)}unproject(t){return new r.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(t){this.freezeElevation||(this.elevation=t?this.getElevation(this._center,t):0)}getElevation(t,o){const h=r.MercatorCoordinate.fromLngLat(t),f=(1<<this.tileZoom)*r.EXTENT,y=h.x*f,x=h.y*f,E=Math.floor(y/r.EXTENT),M=Math.floor(x/r.EXTENT),P=new r.OverscaledTileID(this.tileZoom,0,this.tileZoom,E,M);return o.getElevation(P,y%r.EXTENT,x%r.EXTENT,r.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(t){const o=this.pointLocation(this.centerPoint,t),h=this.getElevation(o,t);if(!(this.elevation-h))return;const f=this.getCameraPosition(),y=r.MercatorCoordinate.fromLngLat(f.lngLat,f.altitude),x=r.MercatorCoordinate.fromLngLat(o,h),E=y.x-x.x,M=y.y-x.y,P=y.z-x.z,F=Math.sqrt(E*E+M*M+P*P),V=this.scaleZoom(this.cameraToCenterDistance/F/this.tileSize);this._elevation=h,this._center=o,this.zoom=V}setLocationAtPoint(t,o){const h=this.pointCoordinate(o),f=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(t),x=new r.MercatorCoordinate(y.x-(h.x-f.x),y.y-(h.y-f.y));this.center=this.coordinateLocation(x),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t,o){return o?this.coordinatePoint(this.locationCoordinate(t),this.getElevation(t,o),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(t))}pointLocation(t,o){return this.coordinateLocation(this.pointCoordinate(t,o))}locationCoordinate(t){return r.MercatorCoordinate.fromLngLat(t)}coordinateLocation(t){return t&&t.toLngLat()}pointCoordinate(t,o){if(o){const G=o.pointCoordinate(t);if(G!=null)return G}const h=[t.x,t.y,0,1],f=[t.x,t.y,1,1];r.transformMat4(h,h,this.pixelMatrixInverse),r.transformMat4(f,f,this.pixelMatrixInverse);const y=h[3],x=f[3],E=h[1]/y,M=f[1]/x,P=h[2]/y,F=f[2]/x,V=P===F?0:(0-P)/(F-P);return new r.MercatorCoordinate(r.number(h[0]/y,f[0]/x,V)/this.worldSize,r.number(E,M,V)/this.worldSize)}coordinatePoint(t,o=0,h=this.pixelMatrix){const f=[t.x*this.worldSize,t.y*this.worldSize,o,1];return r.transformMat4(f,f,h),new r.pointGeometry(f[0]/f[3],f[1]/f[3])}getBounds(){const t=Math.max(0,this.height/2-this.getHorizon());return new r.LngLatBounds().extend(this.pointLocation(new r.pointGeometry(0,t))).extend(this.pointLocation(new r.pointGeometry(this.width,t))).extend(this.pointLocation(new r.pointGeometry(this.width,this.height))).extend(this.pointLocation(new r.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new r.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(t,o=!1){const h=t.key,f=o?this._alignedPosMatrixCache:this._posMatrixCache;if(f[h])return f[h];const y=t.canonical,x=this.worldSize/this.zoomScale(y.z),E=y.x+Math.pow(2,y.z)*t.wrap,M=r.identity(new Float64Array(16));return r.translate(M,M,[E*x,y.y*x,0]),r.scale(M,M,[x/r.EXTENT,x/r.EXTENT,1]),r.multiply(M,o?this.alignedProjMatrix:this.projMatrix,M),f[h]=new Float32Array(M),f[h]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let t,o,h,f,y=-90,x=90,E=-180,M=180;const P=this.size,F=this._unmodified;if(this.latRange){const te=this.latRange;y=r.mercatorYfromLat(te[1])*this.worldSize,x=r.mercatorYfromLat(te[0])*this.worldSize,t=x-y<P.y?P.y/(x-y):0}if(this.lngRange){const te=this.lngRange;E=r.wrap(r.mercatorXfromLng(te[0])*this.worldSize,0,this.worldSize),M=r.wrap(r.mercatorXfromLng(te[1])*this.worldSize,0,this.worldSize),M<E&&(M+=this.worldSize),o=M-E<P.x?P.x/(M-E):0}const V=this.point,G=Math.max(o||0,t||0);if(G)return this.center=this.unproject(new r.pointGeometry(o?(M+E)/2:V.x,t?(x+y)/2:V.y)),this.zoom+=this.scaleZoom(G),this._unmodified=F,void(this._constraining=!1);if(this.latRange){const te=V.y,J=P.y/2;te-J<y&&(f=y+J),te+J>x&&(f=x-J)}if(this.lngRange){const te=(E+M)/2,J=r.wrap(V.x,te-this.worldSize/2,te+this.worldSize/2),Q=P.x/2;J-Q<E&&(h=E+Q),J+Q>M&&(h=M-Q)}h===void 0&&f===void 0||(this.center=this.unproject(new r.pointGeometry(h!==void 0?h:V.x,f!==void 0?f:V.y)).wrap()),this._unmodified=F,this._constraining=!1}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,o=this.point.x,h=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=r.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let f=r.identity(new Float64Array(16));r.scale(f,f,[this.width/2,-this.height/2,1]),r.translate(f,f,[1,-1,0]),this.labelPlaneMatrix=f,f=r.identity(new Float64Array(16)),r.scale(f,f,[1,-1,1]),r.translate(f,f,[-1,-1,0]),r.scale(f,f,[2/this.width,2/this.height,1]),this.glCoordMatrix=f,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const y=Math.PI/2+this._pitch,x=this._fov*(.5+t.y/this.height),E=Math.sin(x)*this.cameraToSeaLevelDistance/Math.sin(r.clamp(Math.PI-y-x,.01,Math.PI-.01)),M=this.getHorizon(),P=2*Math.atan(M/this.cameraToCenterDistance)*(.5+t.y/(2*M)),F=Math.sin(P)*this.cameraToSeaLevelDistance/Math.sin(r.clamp(Math.PI-y-P,.01,Math.PI-.01)),V=Math.cos(Math.PI/2-this._pitch)*E+this.cameraToSeaLevelDistance,G=Math.cos(Math.PI/2-this._pitch)*F+this.cameraToSeaLevelDistance,te=1.01*Math.min(V,G),J=this.height/50;f=new Float64Array(16),r.perspective(f,this._fov,this.width/this.height,J,te),f[8]=2*-t.x/this.width,f[9]=2*t.y/this.height,r.scale(f,f,[1,-1,1]),r.translate(f,f,[0,0,-this.cameraToCenterDistance]),r.rotateX(f,f,this._pitch),r.rotateZ(f,f,this.angle),r.translate(f,f,[-o,-h,0]),this.mercatorMatrix=r.scale([],f,[this.worldSize,this.worldSize,this.worldSize]),r.scale(f,f,[1,1,this._pixelPerMeter]),this.pixelMatrix=r.multiply(new Float64Array(16),this.labelPlaneMatrix,f),r.translate(f,f,[0,0,-this.elevation]),this.projMatrix=f,this.invProjMatrix=r.invert([],f),this.pixelMatrix3D=r.multiply(new Float64Array(16),this.labelPlaneMatrix,f);const Q=this.width%2/2,pe=this.height%2/2,be=Math.cos(this.angle),Ae=Math.sin(this.angle),ae=o-Math.round(o)+be*Q+Ae*pe,ze=h-Math.round(h)+be*pe+Ae*Q,De=new Float64Array(f);if(r.translate(De,De,[ae>.5?ae-1:ae,ze>.5?ze-1:ze,0]),this.alignedProjMatrix=De,f=r.invert(new Float64Array(16),this.pixelMatrix),!f)throw new Error("failed to invert matrix");this.pixelMatrixInverse=f,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const t=this.pointCoordinate(new r.pointGeometry(0,0)),o=[t.x*this.worldSize,t.y*this.worldSize,0,1];return r.transformMat4(o,o,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new r.pointGeometry(0,t))}getCameraQueryGeometry(t){const o=this.getCameraPoint();if(t.length===1)return[t[0],o];{let h=o.x,f=o.y,y=o.x,x=o.y;for(const E of t)h=Math.min(h,E.x),f=Math.min(f,E.y),y=Math.max(y,E.x),x=Math.max(x,E.y);return[new r.pointGeometry(h,f),new r.pointGeometry(y,f),new r.pointGeometry(y,x),new r.pointGeometry(h,x),new r.pointGeometry(h,f)]}}}class kc{constructor(t){this._hashName=t&&encodeURIComponent(t),r.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(o,h){let f=!1,y=null;const x=()=>{y=null,f&&(o(),y=setTimeout(x,300),f=!1)};return()=>(f=!0,y||x(),y)}(this._updateHashUnthrottled.bind(this))}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(t){const o=this._map.getCenter(),h=Math.round(100*this._map.getZoom())/100,f=Math.ceil((h*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,f),x=Math.round(o.lng*y)/y,E=Math.round(o.lat*y)/y,M=this._map.getBearing(),P=this._map.getPitch();let F="";if(F+=t?`/${x}/${E}/${h}`:`${h}/${E}/${x}`,(M||P)&&(F+="/"+Math.round(10*M)/10),P&&(F+=`/${Math.round(P)}`),this._hashName){const V=this._hashName;let G=!1;const te=window.location.hash.slice(1).split("&").map(J=>{const Q=J.split("=")[0];return Q===V?(G=!0,`${Q}=${F}`):J}).filter(J=>J);return G||te.push(`${V}=${F}`),`#${te.join("&")}`}return`#${F}`}_getCurrentHash(){const t=window.location.hash.replace("#","");if(this._hashName){let o;return t.split("&").map(h=>h.split("=")).forEach(h=>{h[0]===this._hashName&&(o=h)}),(o&&o[1]||"").split("/")}return t.split("/")}_onHashChange(){const t=this._getCurrentHash();if(t.length>=3&&!t.some(o=>isNaN(o))){const o=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:o,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,t)}catch{}}}const Ro={linearity:.3,easing:r.bezier(0,0,.3,1)},Mc=r.extend({deceleration:2500,maxSpeed:1400},Ro),Dc=r.extend({deceleration:20,maxSpeed:1400},Ro),Pc=r.extend({deceleration:1e3,maxSpeed:360},Ro),ro=r.extend({deceleration:1e3,maxSpeed:90},Ro);class Lc{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:r.exported.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,o=r.exported.now();for(;t.length>0&&o-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const o={zoom:0,bearing:0,pitch:0,pan:new r.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)o.zoom+=y.zoomDelta||0,o.bearing+=y.bearingDelta||0,o.pitch+=y.pitchDelta||0,y.panDelta&&o.pan._add(y.panDelta),y.around&&(o.around=y.around),y.pinchAround&&(o.pinchAround=y.pinchAround);const h=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,f={};if(o.pan.mag()){const y=Bo(o.pan.mag(),h,r.extend({},Mc,t||{}));f.offset=o.pan.mult(y.amount/o.pan.mag()),f.center=this._map.transform.center,zo(f,y)}if(o.zoom){const y=Bo(o.zoom,h,Dc);f.zoom=this._map.transform.zoom+y.amount,zo(f,y)}if(o.bearing){const y=Bo(o.bearing,h,Pc);f.bearing=this._map.transform.bearing+r.clamp(y.amount,-179,179),zo(f,y)}if(o.pitch){const y=Bo(o.pitch,h,ro);f.pitch=this._map.transform.pitch+y.amount,zo(f,y)}if(f.zoom||f.bearing){const y=o.pinchAround===void 0?o.around:o.pinchAround;f.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),r.extend(f,{noMoveStart:!0})}}function zo(d,t){(!d.duration||d.duration<t.duration)&&(d.duration=t.duration,d.easing=t.easing)}function Bo(d,t,o){const{maxSpeed:h,linearity:f,deceleration:y}=o,x=r.clamp(d*f/(t/1e3),-h,h),E=Math.abs(x)/(y*f);return{easing:o.easing,duration:1e3*E,amount:x*(E/2)}}class fr extends r.Event{constructor(t,o,h,f={}){const y=k.mousePos(o.getCanvasContainer(),h),x=o.unproject(y);super(t,r.extend({point:y,lngLat:x,originalEvent:h},f)),this._defaultPrevented=!1,this.target=o}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Fo extends r.Event{constructor(t,o,h){const f=t==="touchend"?h.changedTouches:h.touches,y=k.touchPos(o.getCanvasContainer(),f),x=y.map(M=>o.unproject(M)),E=y.reduce((M,P,F,V)=>M.add(P.div(V.length)),new r.pointGeometry(0,0));super(t,{points:y,point:E,lngLats:x,lngLat:o.unproject(E),originalEvent:h}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class mr extends r.Event{constructor(t,o,h){super(t,{originalEvent:h}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Zu{constructor(t,o){this._map=t,this._clickTolerance=o.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new mr(t.type,this._map,t))}mousedown(t,o){return this._mousedownPos=o,this._firePreventable(new fr(t.type,this._map,t))}mouseup(t){this._map.fire(new fr(t.type,this._map,t))}click(t,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||this._map.fire(new fr(t.type,this._map,t))}dblclick(t){return this._firePreventable(new fr(t.type,this._map,t))}mouseover(t){this._map.fire(new fr(t.type,this._map,t))}mouseout(t){this._map.fire(new fr(t.type,this._map,t))}touchstart(t){return this._firePreventable(new Fo(t.type,this._map,t))}touchmove(t){this._map.fire(new Fo(t.type,this._map,t))}touchend(t){this._map.fire(new Fo(t.type,this._map,t))}touchcancel(t){this._map.fire(new Fo(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ys{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new fr(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new fr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new fr(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Rc{constructor(t,o){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=o.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,o){this.isEnabled()&&t.shiftKey&&t.button===0&&(k.disableDrag(),this._startPos=this._lastPos=o,this._active=!0)}mousemoveWindow(t,o){if(!this._active)return;const h=o;if(this._lastPos.equals(h)||!this._box&&h.dist(this._startPos)<this._clickTolerance)return;const f=this._startPos;this._lastPos=h,this._box||(this._box=k.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));const y=Math.min(f.x,h.x),x=Math.max(f.x,h.x),E=Math.min(f.y,h.y),M=Math.max(f.y,h.y);k.setTransform(this._box,`translate(${y}px,${E}px)`),this._box.style.width=x-y+"px",this._box.style.height=M-E+"px"}mouseupWindow(t,o){if(!this._active||t.button!==0)return;const h=this._startPos,f=o;if(this.reset(),k.suppressClick(),h.x!==f.x||h.y!==f.y)return this._map.fire(new r.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:y=>y.fitScreenCoordinates(h,f,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&t.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(k.remove(this._box),this._box=null),k.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,o){return this._map.fire(new r.Event(t,{originalEvent:o}))}}function rs(d,t){if(d.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${d.length}, points ${t.length}`);const o={};for(let h=0;h<d.length;h++)o[d[h].identifier]=t[h];return o}class Oo{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,o,h){(this.centroid||h.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=t.timeStamp),h.length===this.numTouches&&(this.centroid=function(f){const y=new r.pointGeometry(0,0);for(const x of f)y._add(x);return y.div(f.length)}(o),this.touches=rs(h,o)))}touchmove(t,o,h){if(this.aborted||!this.centroid)return;const f=rs(h,o);for(const y in this.touches){const x=this.touches[y],E=f[y];(!E||E.dist(x)>30)&&(this.aborted=!0)}}touchend(t,o,h){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),h.length===0){const f=!this.aborted&&this.centroid;if(this.reset(),f)return f}}}class Fl{constructor(t){this.singleTap=new Oo(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,o,h){this.singleTap.touchstart(t,o,h)}touchmove(t,o,h){this.singleTap.touchmove(t,o,h)}touchend(t,o,h){const f=this.singleTap.touchend(t,o,h);if(f){const y=t.timeStamp-this.lastTime<500,x=!this.lastTap||this.lastTap.dist(f)<30;if(y&&x||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=f,this.count===this.numTaps)return this.reset(),f}}}class Ku{constructor(){this._zoomIn=new Fl({numTouches:1,numTaps:2}),this._zoomOut=new Fl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,o,h){this._zoomIn.touchstart(t,o,h),this._zoomOut.touchstart(t,o,h)}touchmove(t,o,h){this._zoomIn.touchmove(t,o,h),this._zoomOut.touchmove(t,o,h)}touchend(t,o,h){const f=this._zoomIn.touchend(t,o,h),y=this._zoomOut.touchend(t,o,h);return f?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:x=>x.easeTo({duration:300,zoom:x.getZoom()+1,around:x.unproject(f)},{originalEvent:t})}):y?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:x=>x.easeTo({duration:300,zoom:x.getZoom()-1,around:x.unproject(y)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Wu={0:1,2:2};class ll{constructor(t){this.reset(),this._clickTolerance=t.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(t,o){return!1}_move(t,o){return{}}mousedown(t,o){if(this._lastPoint)return;const h=k.mouseButton(t);this._correctButton(t,h)&&(this._lastPoint=o,this._eventButton=h)}mousemoveWindow(t,o){const h=this._lastPoint;if(h){if(t.preventDefault(),function(f,y){const x=Wu[y];return f.buttons===void 0||(f.buttons&x)!==x}(t,this._eventButton))this.reset();else if(this._moved||!(o.dist(h)<this._clickTolerance))return this._moved=!0,this._lastPoint=o,this._move(h,o)}}mouseupWindow(t){this._lastPoint&&k.mouseButton(t)===this._eventButton&&(this._moved&&k.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class No extends ll{mousedown(t,o){super.mousedown(t,o),this._lastPoint&&(this._active=!0)}_correctButton(t,o){return o===0&&!t.ctrlKey}_move(t,o){return{around:o,panDelta:o.sub(t)}}}class ss extends ll{_correctButton(t,o){return o===0&&t.ctrlKey||o===2}_move(t,o){const h=.8*(o.x-t.x);if(h)return this._active=!0,{bearingDelta:h}}contextmenu(t){t.preventDefault()}}class Ot extends ll{_correctButton(t,o){return o===0&&t.ctrlKey||o===2}_move(t,o){const h=-.5*(o.y-t.y);if(h)return this._active=!0,{pitchDelta:h}}contextmenu(t){t.preventDefault()}}class zc{constructor(t,o){this._minTouches=t.cooperativeGestures?2:1,this._clickTolerance=t.clickTolerance||1,this._map=o,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new r.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(t,o,h){return this._calculateTransform(t,o,h)}touchmove(t,o,h){if(this._map._cooperativeGestures&&(this._minTouches===2&&h.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(t,!1,h.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(h.length<this._minTouches))return t.preventDefault(),this._calculateTransform(t,o,h)}touchend(t,o,h){this._calculateTransform(t,o,h),this._active&&h.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,o,h){h.length>0&&(this._active=!0);const f=rs(h,o),y=new r.pointGeometry(0,0),x=new r.pointGeometry(0,0);let E=0;for(const P in f){const F=f[P],V=this._touches[P];V&&(y._add(F),x._add(F.sub(V)),E++,f[P]=F)}if(this._touches=f,E<this._minTouches||!x.mag())return;const M=x.div(E);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(E),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Os{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(t){}_move(t,o,h){return{}}touchstart(t,o,h){this._firstTwoTouches||h.length<2||(this._firstTwoTouches=[h[0].identifier,h[1].identifier],this._start([o[0],o[1]]))}touchmove(t,o,h){if(!this._firstTwoTouches)return;t.preventDefault();const[f,y]=this._firstTwoTouches,x=bs(h,o,f),E=bs(h,o,y);if(!x||!E)return;const M=this._aroundCenter?null:x.add(E).div(2);return this._move([x,E],M,t)}touchend(t,o,h){if(!this._firstTwoTouches)return;const[f,y]=this._firstTwoTouches,x=bs(h,o,f),E=bs(h,o,y);x&&E||(this._active&&k.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&t.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function bs(d,t,o){for(let h=0;h<d.length;h++)if(d[h].identifier===o)return t[h]}function Ol(d,t){return Math.log(d/t)/Math.LN2}class At extends Os{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,o){const h=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Ol(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ol(this._distance,h),pinchAround:o}}}function cl(d,t){return 180*d.angleWith(t)/Math.PI}class Xu extends Os{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,o){const h=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:cl(this._vector,h),pinchAround:o}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const o=25/(Math.PI*this._minDiameter)*360,h=cl(t,this._startVector);return Math.abs(h)<o}}function Nl(d){return Math.abs(d.y)>Math.abs(d.x)}class Ul extends Os{constructor(t){super(),this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,o,h){super.touchstart(t,o,h),this._currentTouchCount=h.length}_start(t){this._lastPoints=t,Nl(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,o,h){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const f=t[0].sub(this._lastPoints[0]),y=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(f,y,h.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(f.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(t,o,h){if(this._valid!==void 0)return this._valid;const f=t.mag()>=2,y=o.mag()>=2;if(!f&&!y)return;if(!f||!y)return this._firstMove===void 0&&(this._firstMove=h),h-this._firstMove<100&&void 0;const x=t.y>0==o.y>0;return Nl(t)&&Nl(o)&&x}}const Bc={panStep:100,bearingStep:15,pitchStep:10};class Fc{constructor(){const t=Bc;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let o=0,h=0,f=0,y=0,x=0;switch(t.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:t.shiftKey?h=-1:(t.preventDefault(),y=-1);break;case 39:t.shiftKey?h=1:(t.preventDefault(),y=1);break;case 38:t.shiftKey?f=1:(t.preventDefault(),x=-1);break;case 40:t.shiftKey?f=-1:(t.preventDefault(),x=1);break;default:return}return this._rotationDisabled&&(h=0,f=0),{cameraAnimation:E=>{const M=E.getZoom();E.easeTo({duration:300,easeId:"keyboardHandler",easing:Yu,zoom:o?Math.round(M)+o*(t.shiftKey?2:1):M,bearing:E.getBearing()+h*this._bearingStep,pitch:E.getPitch()+f*this._pitchStep,offset:[-y*this._panStep,-x*this._panStep],center:E.getCenter()},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Yu(d){return d*(2-d)}const Oc=4.000244140625;class Vl{constructor(t,o){this._map=t,this._el=t.getCanvasContainer(),this._handler=o,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,r.bindAll(["_onTimeout"],this)}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&t.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(t){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;t.preventDefault()}let o=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const h=r.exported.now(),f=h-(this._lastWheelEventTime||0);this._lastWheelEventTime=h,o!==0&&o%Oc==0?this._type="wheel":o!==0&&Math.abs(o)<4?this._type="trackpad":f>400?(this._type=null,this._lastValue=o,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(f*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),t.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=t,this._delta-=o,this._active||this._start(t)),t.preventDefault()}_onTimeout(t){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(t)}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const o=k.mousePos(this._el,t);this._around=r.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(o)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const t=this._map.transform;if(this._delta!==0){const E=this._type==="wheel"&&Math.abs(this._delta)>Oc?this._wheelZoomRate:this._defaultZoomRate;let M=2/(1+Math.exp(-Math.abs(this._delta*E)));this._delta<0&&M!==0&&(M=1/M);const P=typeof this._targetZoom=="number"?t.zoomScale(this._targetZoom):t.scale;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(P*M))),this._type==="wheel"&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const o=typeof this._targetZoom=="number"?this._targetZoom:t.zoom,h=this._startZoom,f=this._easing;let y,x=!1;if(this._type==="wheel"&&h&&f){const E=Math.min((r.exported.now()-this._lastWheelEventTime)/200,1),M=f(E);y=r.number(h,o,M),E<1?this._frameId||(this._frameId=!0):x=!0}else y=o,x=!0;return this._active=!0,x&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!x,zoomDelta:y-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let o=r.ease;if(this._prevEase){const h=this._prevEase,f=(r.exported.now()-h.start)/h.duration,y=h.easing(f+.01)-h.easing(f),x=.27/Math.sqrt(y*y+1e-4)*.01,E=Math.sqrt(.0729-x*x);o=r.bezier(x,E,.25,1)}return this._prevEase={start:r.exported.now(),duration:t,easing:o},o}reset(){this._active=!1}}class jl{constructor(t,o){this._clickZoom=t,this._tapZoom=o}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Gl{constructor(){this.reset()}reset(){this._active=!1}dblclick(t,o){return t.preventDefault(),{cameraAnimation:h=>{h.easeTo({duration:300,zoom:h.getZoom()+(t.shiftKey?-1:1),around:h.unproject(o)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hl{constructor(){this._tap=new Fl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(t,o,h){this._swipePoint||(this._tapTime&&t.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?h.length>0&&(this._swipePoint=o[0],this._swipeTouch=h[0].identifier):this._tap.touchstart(t,o,h))}touchmove(t,o,h){if(this._tapTime){if(this._swipePoint){if(h[0].identifier!==this._swipeTouch)return;const f=o[0],y=f.y-this._swipePoint.y;return this._swipePoint=f,t.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(t,o,h)}touchend(t,o,h){this._tapTime?this._swipePoint&&h.length===0&&this.reset():this._tap.touchend(t,o,h)&&(this._tapTime=t.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class er{constructor(t,o,h){this._el=t,this._mousePan=o,this._touchPan=h}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class vs{constructor(t,o,h){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=o,this._mousePitch=h}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Nc{constructor(t,o,h,f){this._el=t,this._touchZoom=o,this._touchRotate=h,this._tapDragZoom=f,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const so=d=>d.zoom||d.drag||d.pitch||d.rotate;class ql extends r.Event{}function Uo(d){return d.panDelta&&d.panDelta.mag()||d.zoomDelta||d.bearingDelta||d.pitchDelta}class Uc{constructor(t,o){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Lc(t),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(o),r.bindAll(["handleEvent","handleWindowEvent"],this);const h=this._el;this._listeners=[[h,"touchstart",{passive:!0}],[h,"touchmove",{passive:!1}],[h,"touchend",void 0],[h,"touchcancel",void 0],[h,"mousedown",void 0],[h,"mousemove",void 0],[h,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[h,"mouseover",void 0],[h,"mouseout",void 0],[h,"dblclick",void 0],[h,"click",void 0],[h,"keydown",{capture:!1}],[h,"keyup",void 0],[h,"wheel",{passive:!1}],[h,"contextmenu",void 0],[window,"blur",void 0]];for(const[f,y,x]of this._listeners)k.addEventListener(f,y,f===document?this.handleWindowEvent:this.handleEvent,x)}destroy(){for(const[t,o,h]of this._listeners)k.removeEventListener(t,o,t===document?this.handleWindowEvent:this.handleEvent,h)}_addDefaultHandlers(t){const o=this._map,h=o.getCanvasContainer();this._add("mapEvent",new Zu(o,t));const f=o.boxZoom=new Rc(o,t);this._add("boxZoom",f);const y=new Ku,x=new Gl;o.doubleClickZoom=new jl(x,y),this._add("tapZoom",y),this._add("clickZoom",x);const E=new Hl;this._add("tapDragZoom",E);const M=o.touchPitch=new Ul(o);this._add("touchPitch",M);const P=new ss(t),F=new Ot(t);o.dragRotate=new vs(t,P,F),this._add("mouseRotate",P,["mousePitch"]),this._add("mousePitch",F,["mouseRotate"]);const V=new No(t),G=new zc(t,o);o.dragPan=new er(h,V,G),this._add("mousePan",V),this._add("touchPan",G,["touchZoom","touchRotate"]);const te=new Xu,J=new At;o.touchZoomRotate=new Nc(h,J,te,E),this._add("touchRotate",te,["touchPan","touchZoom"]),this._add("touchZoom",J,["touchPan","touchRotate"]);const Q=o.scrollZoom=new Vl(o,this);this._add("scrollZoom",Q,["mousePan"]);const pe=o.keyboard=new Fc;this._add("keyboard",pe),this._add("blockableMapEvent",new ys(o));for(const be of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])t.interactive&&t[be]&&o[be].enable(t[be])}_add(t,o,h){this._handlers.push({handlerName:t,handler:o,allowed:h}),this._handlersById[t]=o}stop(t){if(!this._updatingCamera){for(const{handler:o}of this._handlers)o.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(so(this._eventsInProgress))||this.isZooming()}_blockedByActive(t,o,h){for(const f in t)if(f!==h&&(!o||o.indexOf(f)<0))return!0;return!1}handleWindowEvent(t){this.handleEvent(t,`${t.type}Window`)}_getMapTouches(t){const o=[];for(const h of t)this._el.contains(h.target)&&o.push(h);return o}handleEvent(t,o){if(t.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const h=t.type==="renderFrame"?void 0:t,f={needsRenderFrame:!1},y={},x={},E=t.touches,M=E?this._getMapTouches(E):void 0,P=M?k.touchPos(this._el,M):k.mousePos(this._el,t);for(const{handlerName:G,handler:te,allowed:J}of this._handlers){if(!te.isEnabled())continue;let Q;this._blockedByActive(x,J,G)?te.reset():te[o||t.type]&&(Q=te[o||t.type](t,P,M),this.mergeHandlerResult(f,y,Q,G,h),Q&&Q.needsRenderFrame&&this._triggerRenderFrame()),(Q||te.isActive())&&(x[G]=te)}const F={};for(const G in this._previousActiveHandlers)x[G]||(F[G]=h);this._previousActiveHandlers=x,(Object.keys(F).length||Uo(f))&&(this._changes.push([f,y,F]),this._triggerRenderFrame()),(Object.keys(x).length||Uo(f))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:V}=f;V&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],V(this._map))}mergeHandlerResult(t,o,h,f,y){if(!h)return;r.extend(t,h);const x={handlerName:f,originalEvent:h.originalEvent||y};h.zoomDelta!==void 0&&(o.zoom=x),h.panDelta!==void 0&&(o.drag=x),h.pitchDelta!==void 0&&(o.pitch=x),h.bearingDelta!==void 0&&(o.rotate=x)}_applyChanges(){const t={},o={},h={};for(const[f,y,x]of this._changes)f.panDelta&&(t.panDelta=(t.panDelta||new r.pointGeometry(0,0))._add(f.panDelta)),f.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+f.zoomDelta),f.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+f.bearingDelta),f.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+f.pitchDelta),f.around!==void 0&&(t.around=f.around),f.pinchAround!==void 0&&(t.pinchAround=f.pinchAround),f.noInertia&&(t.noInertia=f.noInertia),r.extend(o,y),r.extend(h,x);this._updateMapTransform(t,o,h),this._changes=[]}_updateMapTransform(t,o,h){const f=this._map,y=f.transform,x=f.style&&f.style.terrain;if(!(Uo(t)||x&&this._drag))return this._fireEvents(o,h,!0);let{panDelta:E,zoomDelta:M,bearingDelta:P,pitchDelta:F,around:V,pinchAround:G}=t;G!==void 0&&(V=G),f._stop(!0),V=V||f.transform.centerPoint;const te=y.pointLocation(E?V.sub(E):V);P&&(y.bearing+=P),F&&(y.pitch+=F),M&&(y.zoom+=M),x?o.drag&&!this._drag?(this._drag={center:y.centerPoint,lngLat:y.pointLocation(V),point:V,handlerName:o.drag.handlerName},f.fire(new r.Event("freezeElevation",{freeze:!0}))):this._drag&&h[this._drag.handlerName]?(f.fire(new r.Event("freezeElevation",{freeze:!1})),this._drag=null):o.drag&&this._drag&&(y.center=y.pointLocation(y.centerPoint.sub(E))):y.setLocationAtPoint(te,V),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(o,h,!0)}_fireEvents(t,o,h){const f=so(this._eventsInProgress),y=so(t),x={};for(const F in t){const{originalEvent:V}=t[F];this._eventsInProgress[F]||(x[`${F}start`]=V),this._eventsInProgress[F]=t[F]}!f&&y&&this._fireEvent("movestart",y.originalEvent);for(const F in x)this._fireEvent(F,x[F]);y&&this._fireEvent("move",y.originalEvent);for(const F in t){const{originalEvent:V}=t[F];this._fireEvent(F,V)}const E={};let M;for(const F in this._eventsInProgress){const{handlerName:V,originalEvent:G}=this._eventsInProgress[F];this._handlersById[V].isActive()||(delete this._eventsInProgress[F],M=o[V]||G,E[`${F}end`]=M)}for(const F in E)this._fireEvent(F,E[F]);const P=so(this._eventsInProgress);if(h&&(f||y)&&!P){this._updatingCamera=!0;const F=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),V=G=>G!==0&&-this._bearingSnap<G&&G<this._bearingSnap;F?(V(F.bearing||this._map.getBearing())&&(F.bearing=0),this._map.easeTo(F,{originalEvent:M})):(this._map.fire(new r.Event("moveend",{originalEvent:M})),V(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,o){this._map.fire(new r.Event(t,o?{originalEvent:o}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(t=>{delete this._frameId,this.handleEvent(new ql("renderFrame",{timeStamp:t})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Ir={extend:(d,...t)=>r.extend(d,...t),run(d){d()},logToElement(d,t=!1,o="log"){const h=window.document.getElementById(o);h&&(t&&(h.innerHTML=""),h.innerHTML+=`<br>${d}`)}};class Gn extends r.Evented{constructor(t,o){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=o.bearingSnap,r.bindAll(["_renderFrameCallback"],this)}getCenter(){return new r.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(t,o){return this.jumpTo({center:t},o)}panBy(t,o,h){return t=r.pointGeometry.convert(t).mult(-1),this.panTo(this.transform.center,r.extend({offset:t},o),h)}panTo(t,o,h){return this.easeTo(r.extend({center:t},o),h)}getZoom(){return this.transform.zoom}setZoom(t,o){return this.jumpTo({zoom:t},o),this}zoomTo(t,o,h){return this.easeTo(r.extend({zoom:t},o),h)}zoomIn(t,o){return this.zoomTo(this.getZoom()+1,t,o),this}zoomOut(t,o){return this.zoomTo(this.getZoom()-1,t,o),this}getBearing(){return this.transform.bearing}setBearing(t,o){return this.jumpTo({bearing:t},o),this}getPadding(){return this.transform.padding}setPadding(t,o){return this.jumpTo({padding:t},o),this}rotateTo(t,o,h){return this.easeTo(r.extend({bearing:t},o),h)}resetNorth(t,o){return this.rotateTo(0,r.extend({duration:1e3},t),o),this}resetNorthPitch(t,o){return this.easeTo(r.extend({bearing:0,pitch:0,duration:1e3},t),o),this}snapToNorth(t,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,o):this}getPitch(){return this.transform.pitch}setPitch(t,o){return this.jumpTo({pitch:t},o),this}cameraForBounds(t,o){t=r.LngLatBounds.convert(t);const h=o&&o.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),h,o)}_cameraForBoxAndBearing(t,o,h,f){const y={top:0,bottom:0,right:0,left:0};if(typeof(f=r.extend({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},f)).padding=="number"){const De=f.padding;f.padding={top:De,bottom:De,right:De,left:De}}f.padding=r.extend(y,f.padding);const x=this.transform,E=x.padding,M=x.project(r.LngLat.convert(t)),P=x.project(r.LngLat.convert(o)),F=M.rotate(-h*Math.PI/180),V=P.rotate(-h*Math.PI/180),G=new r.pointGeometry(Math.max(F.x,V.x),Math.max(F.y,V.y)),te=new r.pointGeometry(Math.min(F.x,V.x),Math.min(F.y,V.y)),J=G.sub(te),Q=(x.width-(E.left+E.right+f.padding.left+f.padding.right))/J.x,pe=(x.height-(E.top+E.bottom+f.padding.top+f.padding.bottom))/J.y;if(pe<0||Q<0)return void r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const be=Math.min(x.scaleZoom(x.scale*Math.min(Q,pe)),f.maxZoom),Ae=r.pointGeometry.convert(f.offset),ae=new r.pointGeometry((f.padding.left-f.padding.right)/2,(f.padding.top-f.padding.bottom)/2).rotate(h*Math.PI/180),ze=Ae.add(ae).mult(x.scale/x.zoomScale(be));return{center:x.unproject(M.add(P).div(2).sub(ze)),zoom:be,bearing:h}}fitBounds(t,o,h){return this._fitInternal(this.cameraForBounds(t,o),o,h)}fitScreenCoordinates(t,o,h,f,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(r.pointGeometry.convert(t)),this.transform.pointLocation(r.pointGeometry.convert(o)),h,f),f,y)}_fitInternal(t,o,h){return t?(delete(o=r.extend(t,o)).padding,o.linear?this.easeTo(o,h):this.flyTo(o,h)):this}jumpTo(t,o){this.stop();const h=this.transform;let f=!1,y=!1,x=!1;return"zoom"in t&&h.zoom!==+t.zoom&&(f=!0,h.zoom=+t.zoom),t.center!==void 0&&(h.center=r.LngLat.convert(t.center)),"bearing"in t&&h.bearing!==+t.bearing&&(y=!0,h.bearing=+t.bearing),"pitch"in t&&h.pitch!==+t.pitch&&(x=!0,h.pitch=+t.pitch),t.padding==null||h.isPaddingEqual(t.padding)||(h.padding=t.padding),this.fire(new r.Event("movestart",o)).fire(new r.Event("move",o)),f&&this.fire(new r.Event("zoomstart",o)).fire(new r.Event("zoom",o)).fire(new r.Event("zoomend",o)),y&&this.fire(new r.Event("rotatestart",o)).fire(new r.Event("rotate",o)).fire(new r.Event("rotateend",o)),x&&this.fire(new r.Event("pitchstart",o)).fire(new r.Event("pitch",o)).fire(new r.Event("pitchend",o)),this.fire(new r.Event("moveend",o))}calculateCameraOptionsFromTo(t,o,h,f=0){const y=r.MercatorCoordinate.fromLngLat(t,o),x=r.MercatorCoordinate.fromLngLat(h,f),E=x.x-y.x,M=x.y-y.y,P=x.z-y.z,F=Math.hypot(E,M,P);if(F===0)throw new Error("Can't calculate camera options with same From and To");const V=Math.hypot(E,M),G=this.transform.scaleZoom(this.transform.cameraToCenterDistance/F/this.transform.tileSize),te=180*Math.atan2(E,-M)/Math.PI;let J=180*Math.acos(V/F)/Math.PI;return J=P<0?90-J:90+J,{center:x.toLngLat(),zoom:G,pitch:J,bearing:te}}easeTo(t,o){this._stop(!1,t.easeId),((t=r.extend({offset:[0,0],duration:500,easing:r.ease},t)).animate===!1||!t.essential&&r.exported.prefersReducedMotion)&&(t.duration=0);const h=this.transform,f=this.getZoom(),y=this.getBearing(),x=this.getPitch(),E=this.getPadding(),M="zoom"in t?+t.zoom:f,P="bearing"in t?this._normalizeBearing(t.bearing,y):y,F="pitch"in t?+t.pitch:x,V="padding"in t?t.padding:h.padding,G=r.pointGeometry.convert(t.offset);let te=h.centerPoint.add(G);const J=h.pointLocation(te),Q=r.LngLat.convert(t.center||J);this._normalizeCenter(Q);const pe=h.project(J),be=h.project(Q).sub(pe),Ae=h.zoomScale(M-f);let ae,ze;t.around&&(ae=r.LngLat.convert(t.around),ze=h.locationPoint(ae));const De={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||M!==f,this._rotating=this._rotating||y!==P,this._pitching=this._pitching||F!==x,this._padding=!h.isPaddingEqual(V),this._easeId=t.easeId,this._prepareEase(o,t.noMoveStart,De),this._ease(qe=>{if(this._zooming&&(h.zoom=r.number(f,M,qe)),this._rotating&&(h.bearing=r.number(y,P,qe)),this._pitching&&(h.pitch=r.number(x,F,qe)),this._padding&&(h.interpolatePadding(E,V,qe),te=h.centerPoint.add(G)),ae)h.setLocationAtPoint(ae,ze);else{const Ze=h.zoomScale(h.zoom-f),st=M>f?Math.min(2,Ae):Math.max(.5,Ae),Ge=Math.pow(st,1-qe),Pt=h.unproject(pe.add(be.mult(qe*Ge)).mult(Ze));h.setLocationAtPoint(h.renderWorldCopies?Pt.wrap():Pt,te)}this._fireMoveEvents(o)},qe=>{this._afterEase(o,qe)},t),this}_prepareEase(t,o,h={}){this._moving=!0,this.fire(new r.Event("freezeElevation",{freeze:!0})),o||h.moving||this.fire(new r.Event("movestart",t)),this._zooming&&!h.zooming&&this.fire(new r.Event("zoomstart",t)),this._rotating&&!h.rotating&&this.fire(new r.Event("rotatestart",t)),this._pitching&&!h.pitching&&this.fire(new r.Event("pitchstart",t))}_fireMoveEvents(t){this.fire(new r.Event("move",t)),this._zooming&&this.fire(new r.Event("zoom",t)),this._rotating&&this.fire(new r.Event("rotate",t)),this._pitching&&this.fire(new r.Event("pitch",t))}_afterEase(t,o){if(this._easeId&&o&&this._easeId===o)return;delete this._easeId,this.fire(new r.Event("freezeElevation",{freeze:!1}));const h=this._zooming,f=this._rotating,y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,h&&this.fire(new r.Event("zoomend",t)),f&&this.fire(new r.Event("rotateend",t)),y&&this.fire(new r.Event("pitchend",t)),this.fire(new r.Event("moveend",t))}flyTo(t,o){if(!t.essential&&r.exported.prefersReducedMotion){const ai=r.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ai,o)}this.stop(),t=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},t);const h=this.transform,f=this.getZoom(),y=this.getBearing(),x=this.getPitch(),E=this.getPadding(),M="zoom"in t?r.clamp(+t.zoom,h.minZoom,h.maxZoom):f,P="bearing"in t?this._normalizeBearing(t.bearing,y):y,F="pitch"in t?+t.pitch:x,V="padding"in t?t.padding:h.padding,G=h.zoomScale(M-f),te=r.pointGeometry.convert(t.offset);let J=h.centerPoint.add(te);const Q=h.pointLocation(J),pe=r.LngLat.convert(t.center||Q);this._normalizeCenter(pe);const be=h.project(Q),Ae=h.project(pe).sub(be);let ae=t.curve;const ze=Math.max(h.width,h.height),De=ze/G,qe=Ae.mag();if("minZoom"in t){const ai=r.clamp(Math.min(t.minZoom,f,M),h.minZoom,h.maxZoom),bn=ze/h.zoomScale(ai-f);ae=Math.sqrt(bn/qe*2)}const Ze=ae*ae;function st(ai){const bn=(De*De-ze*ze+(ai?-1:1)*Ze*Ze*qe*qe)/(2*(ai?De:ze)*Ze*qe);return Math.log(Math.sqrt(bn*bn+1)-bn)}function Ge(ai){return(Math.exp(ai)-Math.exp(-ai))/2}function Pt(ai){return(Math.exp(ai)+Math.exp(-ai))/2}const vt=st(0);let zt=function(ai){return Pt(vt)/Pt(vt+ae*ai)},yi=function(ai){return ze*((Pt(vt)*(Ge(bn=vt+ae*ai)/Pt(bn))-Ge(vt))/Ze)/qe;var bn},Ti=(st(1)-vt)/ae;if(Math.abs(qe)<1e-6||!isFinite(Ti)){if(Math.abs(ze-De)<1e-6)return this.easeTo(t,o);const ai=De<ze?-1:1;Ti=Math.abs(Math.log(De/ze))/ae,yi=function(){return 0},zt=function(bn){return Math.exp(ai*ae*bn)}}return t.duration="duration"in t?+t.duration:1e3*Ti/("screenSpeed"in t?+t.screenSpeed/ae:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=y!==P,this._pitching=F!==x,this._padding=!h.isPaddingEqual(V),this._prepareEase(o,!1),this._ease(ai=>{const bn=ai*Ti,vn=1/zt(bn);h.zoom=ai===1?M:f+h.scaleZoom(vn),this._rotating&&(h.bearing=r.number(y,P,ai)),this._pitching&&(h.pitch=r.number(x,F,ai)),this._padding&&(h.interpolatePadding(E,V,ai),J=h.centerPoint.add(te));const Ki=ai===1?pe:h.unproject(be.add(Ae.mult(yi(bn))).mult(vn));h.setLocationAtPoint(h.renderWorldCopies?Ki.wrap():Ki,J),this._fireMoveEvents(o)},()=>this._afterEase(o),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,o){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const h=this._onEaseEnd;delete this._onEaseEnd,h.call(this,o)}if(!t){const h=this.handlers;h&&h.stop(!1)}return this}_ease(t,o,h){h.animate===!1||h.duration===0?(t(1),o()):(this._easeStart=r.exported.now(),this._easeOptions=h,this._onEaseFrame=t,this._onEaseEnd=o,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((r.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,o){t=r.wrap(t,-180,180);const h=Math.abs(t-o);return Math.abs(t-360-o)<h&&(t-=360),Math.abs(t+360-o)<h&&(t+=360),t}_normalizeCenter(t){const o=this.transform;if(!o.renderWorldCopies||o.lngRange)return;const h=t.lng-o.center.lng;t.lng+=h>180?-360:h<-180?360:0}}class Vo{constructor(t={}){this.options=t,r.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options&&this.options.compact,this._container=k.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=k.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=k.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){k.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,o){const h=this._map._getUIString(`AttributionControl.${o}`);t.title=h,t.setAttribute("aria-label",h)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(t){!t||t.sourceDataType!=="metadata"&&t.sourceDataType!=="visibility"&&t.dataType!=="style"&&t.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(f=>typeof f!="string"?"":f)):typeof this.options.customAttribution=="string"&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const f=this._map.style.stylesheet;this.styleOwner=f.owner,this.styleId=f.id}const o=this._map.style.sourceCaches;for(const f in o){const y=o[f];if(y.used||y.usedForTerrain){const x=y.getSource();x.attribution&&t.indexOf(x.attribution)<0&&t.push(x.attribution)}}t=t.filter(f=>String(f).trim()),t.sort((f,y)=>f.length-y.length),t=t.filter((f,y)=>{for(let x=y+1;x<t.length;x++)if(t[x].indexOf(f)>=0)return!1;return!0});const h=t.join(" | ");h!==this._attribHTML&&(this._attribHTML=h,t.length?(this._innerContainer.innerHTML=h,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class ul{constructor(t={}){this.options=t,r.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=k.create("div","maplibregl-ctrl mapboxgl-ctrl");const o=k.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://maplibre.org/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){k.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const t=this._container.children;if(t.length){const o=t[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&o.classList.add("maplibregl-compact","mapboxgl-compact"):o.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Vc{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const o=++this._id;return this._queue.push({callback:t,id:o,cancelled:!1}),o}remove(t){const o=this._currentlyRunning,h=o?this._queue.concat(o):this._queue;for(const f of h)if(f.id===t)return void(f.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const o=this._currentlyRunning=this._queue;this._queue=[];for(const h of o)if(!h.cancelled&&(h.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const jc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},Gc={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Ju={showCompass:!0,showZoom:!0,visualizePitch:!1};class qr{constructor(t,o,h=!1){this._clickTolerance=10,this.element=o,this.mouseRotate=new ss({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,h&&(this.mousePitch=new Ot({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),r.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),k.addEventListener(o,"mousedown",this.mousedown),k.addEventListener(o,"touchstart",this.touchstart,{passive:!1}),k.addEventListener(o,"touchmove",this.touchmove),k.addEventListener(o,"touchend",this.touchend),k.addEventListener(o,"touchcancel",this.reset)}down(t,o){this.mouseRotate.mousedown(t,o),this.mousePitch&&this.mousePitch.mousedown(t,o),k.disableDrag()}move(t,o){const h=this.map,f=this.mouseRotate.mousemoveWindow(t,o);if(f&&f.bearingDelta&&h.setBearing(h.getBearing()+f.bearingDelta),this.mousePitch){const y=this.mousePitch.mousemoveWindow(t,o);y&&y.pitchDelta&&h.setPitch(h.getPitch()+y.pitchDelta)}}off(){const t=this.element;k.removeEventListener(t,"mousedown",this.mousedown),k.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),k.removeEventListener(t,"touchmove",this.touchmove),k.removeEventListener(t,"touchend",this.touchend),k.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){k.enableDrag(),k.removeEventListener(window,"mousemove",this.mousemove),k.removeEventListener(window,"mouseup",this.mouseup)}mousedown(t){this.down(r.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),k.mousePos(this.element,t)),k.addEventListener(window,"mousemove",this.mousemove),k.addEventListener(window,"mouseup",this.mouseup)}mousemove(t){this.move(t,k.mousePos(this.element,t))}mouseup(t){this.mouseRotate.mouseupWindow(t),this.mousePitch&&this.mousePitch.mouseupWindow(t),this.offTemp()}touchstart(t){t.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=k.touchPos(this.element,t.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>t.preventDefault()},this._startPos))}touchmove(t){t.targetTouches.length!==1?this.reset():(this._lastPos=k.touchPos(this.element,t.targetTouches)[0],this.move({preventDefault:()=>t.preventDefault()},this._lastPos))}touchend(t){t.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function jo(d,t,o){if(d=new r.LngLat(d.lng,d.lat),t){const h=new r.LngLat(d.lng-360,d.lat),f=new r.LngLat(d.lng+360,d.lat),y=o.locationPoint(d).distSqr(t);o.locationPoint(h).distSqr(t)<y?d=h:o.locationPoint(f).distSqr(t)<y&&(d=f)}for(;Math.abs(d.lng-o.center.lng)>180;){const h=o.locationPoint(d);if(h.x>=0&&h.y>=0&&h.x<=o.width&&h.y<=o.height)break;d.lng>o.center.lng?d.lng-=360:d.lng+=360}return d}const Kt={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ci(d,t,o){const h=d.classList;for(const f in Kt)h.remove(`maplibregl-${o}-anchor-${f}`,`mapboxgl-${o}-anchor-${f}`);h.add(`maplibregl-${o}-anchor-${t}`,`mapboxgl-${o}-anchor-${t}`)}class oo extends r.Evented{constructor(t,o){if(super(),(t instanceof HTMLElement||o)&&(t=r.extend({element:t},o)),r.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment!=="auto"?t.pitchAlignment:this._rotationAlignment,t&&t.element)this._element=t.element,this._offset=r.pointGeometry.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=k.create("div"),this._element.setAttribute("aria-label","Map marker");const h=k.createNS("http://www.w3.org/2000/svg","svg"),f=41,y=27;h.setAttributeNS(null,"display","block"),h.setAttributeNS(null,"height",`${f}px`),h.setAttributeNS(null,"width",`${y}px`),h.setAttributeNS(null,"viewBox",`0 0 ${y} ${f}`);const x=k.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"stroke","none"),x.setAttributeNS(null,"stroke-width","1"),x.setAttributeNS(null,"fill","none"),x.setAttributeNS(null,"fill-rule","evenodd");const E=k.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"fill-rule","nonzero");const M=k.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"transform","translate(3.0, 29.0)"),M.setAttributeNS(null,"fill","#000000");const P=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ae of P){const ae=k.createNS("http://www.w3.org/2000/svg","ellipse");ae.setAttributeNS(null,"opacity","0.04"),ae.setAttributeNS(null,"cx","10.5"),ae.setAttributeNS(null,"cy","5.80029008"),ae.setAttributeNS(null,"rx",Ae.rx),ae.setAttributeNS(null,"ry",Ae.ry),M.appendChild(ae)}const F=k.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"fill",this._color);const V=k.createNS("http://www.w3.org/2000/svg","path");V.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),F.appendChild(V);const G=k.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"opacity","0.25"),G.setAttributeNS(null,"fill","#000000");const te=k.createNS("http://www.w3.org/2000/svg","path");te.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),G.appendChild(te);const J=k.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"transform","translate(6.0, 7.0)"),J.setAttributeNS(null,"fill","#FFFFFF");const Q=k.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"transform","translate(8.0, 8.0)");const pe=k.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#000000"),pe.setAttributeNS(null,"opacity","0.25"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962");const be=k.createNS("http://www.w3.org/2000/svg","circle");be.setAttributeNS(null,"fill","#FFFFFF"),be.setAttributeNS(null,"cx","5.5"),be.setAttributeNS(null,"cy","5.5"),be.setAttributeNS(null,"r","5.4999962"),Q.appendChild(pe),Q.appendChild(be),E.appendChild(M),E.appendChild(F),E.appendChild(G),E.appendChild(J),E.appendChild(Q),h.appendChild(E),h.setAttributeNS(null,"height",f*this._scale+"px"),h.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(h),this._offset=r.pointGeometry.convert(t&&t.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",h=>{h.preventDefault()}),this._element.addEventListener("mousedown",h=>{h.preventDefault()}),ci(this._element,this._anchor,"marker"),this._popup=null}addTo(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),k.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=r.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const f=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[f,-1*(38.1-13.5+f)],"bottom-right":[-f,-1*(38.1-13.5+f)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(t){const o=t.code,h=t.charCode||t.keyCode;o!=="Space"&&o!=="Enter"&&h!==32&&h!==13||this.togglePopup()}_onMapClick(t){const o=t.originalEvent.target,h=this._element;this._popup&&(o===h||h.contains(o))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this}_update(t){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=jo(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let o="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?o=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(o=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let h="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?h="rotateX(0deg)":this._pitchAlignment==="map"&&(h=`rotateX(${this._map.getPitch()}deg)`),t&&t.type!=="moveend"||(this._pos=this._pos.round()),k.setTransform(this._element,`${Kt[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${h} ${o}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const f=this._map.unproject(this._pos),y=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=f.distanceTo(this._lngLat)>20*y?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(t){return this._offset=r.pointGeometry.convert(t),this._update(),this}_onMove(t){if(!this._isDragging){const o=this._clickTolerance||this._map._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=o}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new r.Event("dragstart"))),this.fire(new r.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new r.Event("dragend")),this._state="inactive"}_addDragHandler(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._pointerdownPos=t.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&t!=="auto"?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Zl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let xs,La=0,ws=!1;const Zr={maxWidth:100,unit:"metric"};function Hc(d,t,o){const h=o&&o.maxWidth||100,f=d._container.clientHeight/2,y=d.unproject([0,f]),x=d.unproject([h,f]),E=y.distanceTo(x);if(o&&o.unit==="imperial"){const M=3.2808*E;M>5280?Cs(t,h,M/5280,d._getUIString("ScaleControl.Miles")):Cs(t,h,M,d._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?Cs(t,h,E/1852,d._getUIString("ScaleControl.NauticalMiles")):E>=1e3?Cs(t,h,E/1e3,d._getUIString("ScaleControl.Kilometers")):Cs(t,h,E,d._getUIString("ScaleControl.Meters"))}function Cs(d,t,o,h){const f=function(y){const x=Math.pow(10,`${Math.floor(y)}`.length-1);let E=y/x;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(M){const P=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*P)/P}(E),x*E}(o);d.style.width=t*(f/o)+"px",d.innerHTML=`${f}&nbsp;${h}`}const ia={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},da=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Kl(d){if(d){if(typeof d=="number"){const t=Math.round(Math.sqrt(.5*Math.pow(d,2)));return{center:new r.pointGeometry(0,0),top:new r.pointGeometry(0,d),"top-left":new r.pointGeometry(t,t),"top-right":new r.pointGeometry(-t,t),bottom:new r.pointGeometry(0,-d),"bottom-left":new r.pointGeometry(t,-t),"bottom-right":new r.pointGeometry(-t,-t),left:new r.pointGeometry(d,0),right:new r.pointGeometry(-d,0)}}if(d instanceof r.pointGeometry||Array.isArray(d)){const t=r.pointGeometry.convert(d);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:r.pointGeometry.convert(d.center||[0,0]),top:r.pointGeometry.convert(d.top||[0,0]),"top-left":r.pointGeometry.convert(d["top-left"]||[0,0]),"top-right":r.pointGeometry.convert(d["top-right"]||[0,0]),bottom:r.pointGeometry.convert(d.bottom||[0,0]),"bottom-left":r.pointGeometry.convert(d["bottom-left"]||[0,0]),"bottom-right":r.pointGeometry.convert(d["bottom-right"]||[0,0]),left:r.pointGeometry.convert(d.left||[0,0]),right:r.pointGeometry.convert(d.right||[0,0])}}return Kl(new r.pointGeometry(0,0))}const Ns={supported:T,setRTLTextPlugin:r.setRTLTextPlugin,getRTLTextPluginStatus:r.getRTLTextPluginStatus,Map:class extends Gn{constructor(d){var t;if(r.PerformanceUtils.mark(r.PerformanceMarkers.create),(d=r.extend({},Gc,d)).minZoom!=null&&d.maxZoom!=null&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(d.minPitch!=null&&d.maxPitch!=null&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(d.minPitch!=null&&d.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(d.maxPitch!=null&&d.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Lo(d.minZoom,d.maxZoom,d.minPitch,d.maxPitch,d.renderWorldCopies),{bearingSnap:d.bearingSnap}),this._interactive=d.interactive,this._cooperativeGestures=d.cooperativeGestures,this._maxTileCacheSize=d.maxTileCacheSize,this._failIfMajorPerformanceCaveat=d.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=d.preserveDrawingBuffer,this._antialias=d.antialias,this._trackResize=d.trackResize,this._bearingSnap=d.bearingSnap,this._refreshExpiredTiles=d.refreshExpiredTiles,this._fadeDuration=d.fadeDuration,this._crossSourceCollisions=d.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=d.collectResourceTiming,this._renderTaskQueue=new Vc,this._controls=[],this._mapId=r.uniqueId(),this._locale=r.extend({},jc,d.locale),this._clickTolerance=d.clickTolerance,this._pixelRatio=(t=d.pixelRatio)!==null&&t!==void 0?t:devicePixelRatio,this._requestManager=new K(d.transformRequest),typeof d.container=="string"){if(this._container=document.getElementById(d.container),!this._container)throw new Error(`Container '${d.container}' not found.`)}else{if(!(d.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=d.container}if(d.maxBounds&&this.setMaxBounds(d.maxBounds),r.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Uc(this,d),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=d.hash&&new kc(typeof d.hash=="string"&&d.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch}),d.bounds&&(this.resize(),this.fitBounds(d.bounds,r.extend({},d.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=d.localIdeographFontFamily,d.style&&this.setStyle(d.style,{localIdeographFontFamily:d.localIdeographFontFamily}),d.attributionControl&&this.addControl(new Vo({customAttribution:d.customAttribution})),d.maplibreLogo&&this.addControl(new ul,d.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",o=>{this._update(o.dataType==="style"),this.fire(new r.Event(`${o.dataType}data`,o))}),this.on("dataloading",o=>{this.fire(new r.Event(`${o.dataType}dataloading`,o))}),this.on("dataabort",o=>{this.fire(new r.Event("sourcedataabort",o))})}_getMapId(){return this._mapId}addControl(d,t){if(t===void 0&&(t=d.getDefaultPosition?d.getDefaultPosition():"top-right"),!d||!d.onAdd)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=d.onAdd(this);this._controls.push(d);const h=this._controlPositions[t];return t.indexOf("bottom")!==-1?h.insertBefore(o,h.firstChild):h.appendChild(o),this}removeControl(d){if(!d||!d.onRemove)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const t=this._controls.indexOf(d);return t>-1&&this._controls.splice(t,1),d.onRemove(this),this}hasControl(d){return this._controls.indexOf(d)>-1}calculateCameraOptionsFromTo(d,t,o,h){return h==null&&this.style.terrain&&(h=this.transform.getElevation(o,this.style.terrain)),super.calculateCameraOptionsFromTo(d,t,o,h)}resize(d){const t=this._containerDimensions(),o=t[0],h=t[1];this._resizeCanvas(o,h,this.getPixelRatio()),this.transform.resize(o,h),this.painter.resize(o,h,this.getPixelRatio());const f=!this._moving;return f&&(this.stop(),this.fire(new r.Event("movestart",d)).fire(new r.Event("move",d))),this.fire(new r.Event("resize",d)),f&&this.fire(new r.Event("moveend",d)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(d){const[t,o]=this._containerDimensions();this._pixelRatio=d,this._resizeCanvas(t,o,d),this.painter.resize(t,o,d)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(d){return this.transform.setMaxBounds(r.LngLatBounds.convert(d)),this._update()}setMinZoom(d){if((d=d==null?-2:d)>=-2&&d<=this.transform.maxZoom)return this.transform.minZoom=d,this._update(),this.getZoom()<d&&this.setZoom(d),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(d){if((d=d==null?22:d)>=this.transform.minZoom)return this.transform.maxZoom=d,this._update(),this.getZoom()>d&&this.setZoom(d),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(d){if((d=d==null?0:d)<0)throw new Error("minPitch must be greater than or equal to 0");if(d>=0&&d<=this.transform.maxPitch)return this.transform.minPitch=d,this._update(),this.getPitch()<d&&this.setPitch(d),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(d){if((d=d==null?60:d)>85)throw new Error("maxPitch must be less than or equal to 85");if(d>=this.transform.minPitch)return this.transform.maxPitch=d,this._update(),this.getPitch()>d&&this.setPitch(d),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(d){return this.transform.renderWorldCopies=d,this._update()}project(d){return this.transform.locationPoint(r.LngLat.convert(d),this.style&&this.style.terrain)}unproject(d){return this.transform.pointLocation(r.pointGeometry.convert(d),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(d,t,o){if(d==="mouseenter"||d==="mouseover"){let h=!1;return{layer:t,listener:o,delegates:{mousemove:y=>{const x=this.getLayer(t)?this.queryRenderedFeatures(y.point,{layers:[t]}):[];x.length?h||(h=!0,o.call(this,new fr(d,this,y.originalEvent,{features:x}))):h=!1},mouseout:()=>{h=!1}}}}if(d==="mouseleave"||d==="mouseout"){let h=!1;return{layer:t,listener:o,delegates:{mousemove:x=>{(this.getLayer(t)?this.queryRenderedFeatures(x.point,{layers:[t]}):[]).length?h=!0:h&&(h=!1,o.call(this,new fr(d,this,x.originalEvent)))},mouseout:x=>{h&&(h=!1,o.call(this,new fr(d,this,x.originalEvent)))}}}}{const h=f=>{const y=this.getLayer(t)?this.queryRenderedFeatures(f.point,{layers:[t]}):[];y.length&&(f.features=y,o.call(this,f),delete f.features)};return{layer:t,listener:o,delegates:{[d]:h}}}}on(d,t,o){if(o===void 0)return super.on(d,t);const h=this._createDelegatedListener(d,t,o);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[d]=this._delegatedListeners[d]||[],this._delegatedListeners[d].push(h);for(const f in h.delegates)this.on(f,h.delegates[f]);return this}once(d,t,o){if(o===void 0)return super.once(d,t);const h=this._createDelegatedListener(d,t,o);for(const f in h.delegates)this.once(f,h.delegates[f]);return this}off(d,t,o){return o===void 0?super.off(d,t):(this._delegatedListeners&&this._delegatedListeners[d]&&(h=>{const f=this._delegatedListeners[d];for(let y=0;y<f.length;y++){const x=f[y];if(x.layer===t&&x.listener===o){for(const E in x.delegates)this.off(E,x.delegates[E]);return f.splice(y,1),this}}})(),this)}queryRenderedFeatures(d,t){if(!this.style)return[];let o;if(t!==void 0||d===void 0||d instanceof r.pointGeometry||Array.isArray(d)||(t=d,d=void 0),t=t||{},(d=d||[[0,0],[this.transform.width,this.transform.height]])instanceof r.pointGeometry||typeof d[0]=="number")o=[r.pointGeometry.convert(d)];else{const h=r.pointGeometry.convert(d[0]),f=r.pointGeometry.convert(d[1]);o=[h,new r.pointGeometry(f.x,h.y),f,new r.pointGeometry(h.x,f.y),h]}return this.style.queryRenderedFeatures(o,t,this.transform)}querySourceFeatures(d,t){return this.style.querySourceFeatures(d,t)}setStyle(d,t){return(t=r.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},t)).diff!==!1&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&d?(this._diffStyle(d,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(d,t))}setTransformRequest(d){return this._requestManager.setTransformRequest(d),this}_getUIString(d){const t=this._locale[d];if(t==null)throw new Error(`Missing UI string '${d}'`);return t}_updateStyle(d,t){return this.style&&(this.style.setEventedParent(null),this.style._remove()),d?(this.style=new Pn(this,t||{}),this.style.setEventedParent(this,{style:this.style}),typeof d=="string"?this.style.loadURL(d):this.style.loadJSON(d),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Pn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(d,t){if(typeof d=="string"){const o=this._requestManager.transformRequest(d,r.ResourceType.Style);r.getJSON(o,(h,f)=>{h?this.fire(new r.ErrorEvent(h)):f&&this._updateDiff(f,t)})}else typeof d=="object"&&this._updateDiff(d,t)}_updateDiff(d,t){try{this.style.setState(d)&&this._update(!0)}catch(o){r.warnOnce(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(d,t)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():r.warnOnce("There is no style added to the map.")}addSource(d,t){return this._lazyInitEmptyStyle(),this.style.addSource(d,t),this._update(!0)}isSourceLoaded(d){const t=this.style&&this.style.sourceCaches[d];if(t!==void 0)return t.loaded();this.fire(new r.ErrorEvent(new Error(`There is no source with ID '${d}'`)))}setTerrain(d){return this.style.setTerrain(d),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const d=this.style&&this.style.sourceCaches;for(const t in d){const o=d[t]._tiles;for(const h in o){const f=o[h];if(f.state!=="loaded"&&f.state!=="errored")return!1}}return!0}addSourceType(d,t,o){return this._lazyInitEmptyStyle(),this.style.addSourceType(d,t,o)}removeSource(d){return this.style.removeSource(d),this._update(!0)}getSource(d){return this.style.getSource(d)}addImage(d,t,{pixelRatio:o=1,sdf:h=!1,stretchX:f,stretchY:y,content:x}={}){if(this._lazyInitEmptyStyle(),t instanceof HTMLImageElement||r.isImageBitmap(t)){const{width:E,height:M,data:P}=r.exported.getImageData(t);this.style.addImage(d,{data:new r.RGBAImage({width:E,height:M},P),pixelRatio:o,stretchX:f,stretchY:y,content:x,sdf:h,version:0})}else{if(t.width===void 0||t.height===void 0)return this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:E,height:M,data:P}=t,F=t;this.style.addImage(d,{data:new r.RGBAImage({width:E,height:M},new Uint8Array(P)),pixelRatio:o,stretchX:f,stretchY:y,content:x,sdf:h,version:0,userImage:F}),F.onAdd&&F.onAdd(this,d)}}}updateImage(d,t){const o=this.style.getImage(d);if(!o)return this.fire(new r.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const h=t instanceof HTMLImageElement||r.isImageBitmap(t)?r.exported.getImageData(t):t,{width:f,height:y,data:x}=h;if(f===void 0||y===void 0)return this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(f!==o.data.width||y!==o.data.height)return this.fire(new r.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const E=!(t instanceof HTMLImageElement||r.isImageBitmap(t));o.data.replace(x,E),this.style.updateImage(d,o)}hasImage(d){return d?!!this.style.getImage(d):(this.fire(new r.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(d){this.style.removeImage(d)}loadImage(d,t){r.getImage(this._requestManager.transformRequest(d,r.ResourceType.Image),t)}listImages(){return this.style.listImages()}addLayer(d,t){return this._lazyInitEmptyStyle(),this.style.addLayer(d,t),this._update(!0)}moveLayer(d,t){return this.style.moveLayer(d,t),this._update(!0)}removeLayer(d){return this.style.removeLayer(d),this._update(!0)}getLayer(d){return this.style.getLayer(d)}setLayerZoomRange(d,t,o){return this.style.setLayerZoomRange(d,t,o),this._update(!0)}setFilter(d,t,o={}){return this.style.setFilter(d,t,o),this._update(!0)}getFilter(d){return this.style.getFilter(d)}setPaintProperty(d,t,o,h={}){return this.style.setPaintProperty(d,t,o,h),this._update(!0)}getPaintProperty(d,t){return this.style.getPaintProperty(d,t)}setLayoutProperty(d,t,o,h={}){return this.style.setLayoutProperty(d,t,o,h),this._update(!0)}getLayoutProperty(d,t){return this.style.getLayoutProperty(d,t)}setLight(d,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(d,t),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(d,t){return this.style.setFeatureState(d,t),this._update()}removeFeatureState(d,t){return this.style.removeFeatureState(d,t),this._update()}getFeatureState(d){return this.style.getFeatureState(d)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let d=0,t=0;return this._container&&(d=this._container.clientWidth||400,t=this._container.clientHeight||300),[d,t]}_setupContainer(){const d=this._container;d.classList.add("maplibregl-map","mapboxgl-map");const t=this._canvasContainer=k.create("div","maplibregl-canvas-container mapboxgl-canvas-container",d);this._interactive&&t.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=k.create("canvas","maplibregl-canvas mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const o=this._containerDimensions();this._resizeCanvas(o[0],o[1],this.getPixelRatio());const h=this._controlContainer=k.create("div","maplibregl-control-container mapboxgl-control-container",d),f=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(y=>{f[y]=k.create("div",`maplibregl-ctrl-${y} mapboxgl-ctrl-${y}`,h)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const d=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=k.create("div","maplibregl-cooperative-gesture-screen",d);let t="Control",o=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(o=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map",t="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${o}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",h=>{h.key===t&&(this._metaPress=!0)}),document.addEventListener("keyup",h=>{h.key===t&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",h=>{this._onCooperativeGesture(h,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(d,t,o){this._canvas.width=o*d,this._canvas.height=o*t,this._canvas.style.width=`${d}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const d=r.extend({},T.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),t=this._canvas.getContext("webgl",d)||this._canvas.getContext("experimental-webgl",d);t?(this.painter=new Bl(t,this.transform),r.exported$1.testSupport(t)):this.fire(new r.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(d){d.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new r.Event("webglcontextlost",{originalEvent:d}))}_contextRestored(d){this._setupPainter(),this.resize(),this._update(),this.fire(new r.Event("webglcontextrestored",{originalEvent:d}))}_onMapScroll(d){if(d.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(d,t,o){return!t&&o<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(d){return this.style?(this._styleDirty=this._styleDirty||d,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(d){return this._update(),this._renderTaskQueue.add(d)}_cancelRenderFrame(d){this._renderTaskQueue.remove(d)}_render(d){let t,o=0;const h=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(t=h.createQueryEXT(),h.beginQueryEXT(h.TIME_ELAPSED_EXT,t),o=r.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(d),this._removed)return;let f=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const x=this.transform.zoom,E=r.exported.now();this.style.zoomHistory.update(x,E);const M=new r.EvaluationParameters(x,{now:E,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),P=M.crossFadingFactor();P===1&&P===this._crossFadingFactor||(f=!0,this._crossFadingFactor=P),this.style.update(M)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new r.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,r.PerformanceUtils.mark(r.PerformanceMarkers.load),this.fire(new r.Event("load"))),this.style&&(this.style.hasTransitions()||f)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const x=r.exported.now()-o;h.endQueryEXT(h.TIME_ELAPSED_EXT,t),setTimeout(()=>{const E=h.getQueryObjectEXT(t,h.QUERY_RESULT_EXT)/1e6;h.deleteQueryEXT(t),this.fire(new r.Event("gpu-timing-frame",{cpuTime:x,gpuTime:E}))},50)}if(this.listens("gpu-timing-layer")){const x=this.painter.collectGpuTimers();setTimeout(()=>{const E=this.painter.queryGpuTimers(x);this.fire(new r.Event("gpu-timing-layer",{layerTimes:E}))},50)}const y=this._sourcesDirty||this._styleDirty||this._placementDirty;return y||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new r.Event("idle")),!this._loaded||this._fullyLoaded||y||(this._fullyLoaded=!0,r.PerformanceUtils.mark(r.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const d=this.painter.context.gl.getExtension("WEBGL_lose_context");d&&d.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),k.remove(this._canvasContainer),k.remove(this._controlContainer),this._cooperativeGestures&&k.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),r.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new r.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=r.exported.frame(d=>{r.PerformanceUtils.frame(d),this._frame=null,this._render(d)}))}_onWindowOnline(){this._update()}_onWindowResize(d){this._trackResize&&this.resize({originalEvent:d})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(d){this._showTileBoundaries!==d&&(this._showTileBoundaries=d,this._update())}get showPadding(){return!!this._showPadding}set showPadding(d){this._showPadding!==d&&(this._showPadding=d,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(d){this._showCollisionBoxes!==d&&(this._showCollisionBoxes=d,d?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(d){this._showOverdrawInspector!==d&&(this._showOverdrawInspector=d,this._update())}get repaint(){return!!this._repaint}set repaint(d){this._repaint!==d&&(this._repaint=d,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(d){this._vertices=d,this._update()}_setCacheLimits(d,t){r.setCacheLimits(d,t)}get version(){return"2.4.0"}},NavigationControl:class{constructor(d){this.options=r.extend({},Ju,d),this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",t=>t.preventDefault()),this.options.showZoom&&(r.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",t=>this._map.zoomIn({},{originalEvent:t})),k.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",t=>this._map.zoomOut({},{originalEvent:t})),k.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(r.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})}),this._compassIcon=k.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const d=this._map.getZoom(),t=d===this._map.getMaxZoom(),o=d===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=o,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",o.toString())}_rotateCompassArrow(){const d=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=d}onAdd(d){return this._map=d,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new qr(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){k.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(d,t){const o=k.create("button",d,this._container);return o.type="button",o.addEventListener("click",t),o}_setButtonTitle(d,t){const o=this._map._getUIString(`NavigationControl.${t}`);d.title=o,d.setAttribute("aria-label",o)}},GeolocateControl:class extends r.Evented{constructor(d){super(),this.options=r.extend({},Zl,d),r.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(d){var t;return this._map=d,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),t=this._setupUI,xs!==void 0?t(xs):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(o=>{xs=o.state!=="denied",t(xs)}):(xs=!!window.navigator.geolocation,t(xs)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),k.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,La=0,ws=!1}_isOutOfMapMaxBounds(d){const t=this._map.getMaxBounds(),o=d.coords;return t&&(o.longitude<t.getWest()||o.longitude>t.getEast()||o.latitude<t.getSouth()||o.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(d){if(this._map){if(this._isOutOfMapMaxBounds(d))return this._setErrorState(),this.fire(new r.Event("outofmaxbounds",d)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=d,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(d),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(d),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new r.Event("geolocate",d)),this._finish()}}_updateCamera(d){const t=new r.LngLat(d.coords.longitude,d.coords.latitude),o=d.coords.accuracy,h=this._map.getBearing(),f=r.extend({bearing:h},this.options.fitBoundsOptions);this._map.fitBounds(t.toBounds(o),f,{geolocateSource:!0})}_updateMarker(d){if(d){const t=new r.LngLat(d.coords.longitude,d.coords.latitude);this._accuracyCircleMarker.setLngLat(t).addTo(this._map),this._userLocationDotMarker.setLngLat(t).addTo(this._map),this._accuracy=d.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const d=this._map._container.clientHeight/2,t=this._map.unproject([0,d]),o=this._map.unproject([1,d]),h=t.distanceTo(o),f=Math.ceil(2*this._accuracy/h);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(d){if(this._map){if(this.options.trackUserLocation)if(d.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(d.code===3&&ws)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new r.Event("error",d)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(d){if(this._container.addEventListener("contextmenu",t=>t.preventDefault()),this._geolocateButton=k.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),k.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",d===!1){r.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}else{const t=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=k.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new oo(this._dotElement),this._circleElement=k.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new oo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",t=>{t.geolocateSource||this._watchState!=="ACTIVE_LOCK"||t.originalEvent&&t.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new r.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return r.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new r.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":La--,ws=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new r.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new r.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let d;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),La++,La>1?(d={maximumAge:6e5,timeout:0},ws=!0):(d=this.options.positionOptions,ws=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,d)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Vo,LogoControl:ul,ScaleControl:class{constructor(d){this.options=r.extend({},Zr,d),r.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Hc(this._map,this._container,this.options)}onAdd(d){return this._map=d,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",d.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){k.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(d){this.options.unit=d,Hc(this._map,this._container,this.options)}},FullscreenControl:class{constructor(d){this._fullscreen=!1,d&&d.container&&(d.container instanceof HTMLElement?this._container=d.container:r.warnOnce("Full screen control 'container' must be a DOM element.")),r.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(d){return this._map=d,this._container||(this._container=this._map.getContainer()),this._controlContainer=k.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",r.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){k.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const d=this._fullscreenButton=k.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);k.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",d).setAttribute("aria-hidden","true"),d.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const d=this._getTitle();this._fullscreenButton.setAttribute("aria-label",d),this._fullscreenButton.title=d}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(d){this.options=d,r.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(d){return this._map=d,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=k.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),k.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){k.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends r.Evented{constructor(d){super(),this.options=r.extend(Object.create(ia),d),r.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(d){return this._map&&this.remove(),this._map=d,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new r.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&k.remove(this._content),this._container&&(k.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new r.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(d){return this._lngLat=r.LngLat.convert(d),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(d){return this.setDOMContent(document.createTextNode(d))}setHTML(d){const t=document.createDocumentFragment(),o=document.createElement("body");let h;for(o.innerHTML=d;h=o.firstChild,h;)t.appendChild(h);return this.setDOMContent(t)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(d){return this.options.maxWidth=d,this._update(),this}setDOMContent(d){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=k.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(d),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(d){this._container&&this._container.classList.add(d)}removeClassName(d){this._container&&this._container.classList.remove(d)}setOffset(d){return this.options.offset=d,this._update(),this}toggleClassName(d){if(this._container)return this._container.classList.toggle(d)}_createCloseButton(){this.options.closeButton&&(this._closeButton=k.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(d){this._update(d.point)}_onMouseMove(d){this._update(d.point)}_onDrag(d){this._update(d.point)}_update(d){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=k.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=k.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(y=>this._container.classList.add(y)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=jo(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!d))return;const t=this._pos=this._trackPointer&&d?d:this._map.project(this._lngLat);let o=this.options.anchor;const h=Kl(this.options.offset);if(!o){const y=this._container.offsetWidth,x=this._container.offsetHeight;let E;E=t.y+h.bottom.y<x?["top"]:t.y>this._map.transform.height-x?["bottom"]:[],t.x<y/2?E.push("left"):t.x>this._map.transform.width-y/2&&E.push("right"),o=E.length===0?"bottom":E.join("-")}const f=t.add(h[o]).round();k.setTransform(this._container,`${Kt[o]} translate(${f.x}px,${f.y}px)`),ci(this._container,o,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const d=this._container.querySelector(da);d&&d.focus()}_onClose(){this.remove()}},Marker:oo,Style:Pn,LngLat:r.LngLat,LngLatBounds:r.LngLatBounds,Point:r.pointGeometry,MercatorCoordinate:r.MercatorCoordinate,Evented:r.Evented,AJAXError:r.AJAXError,config:r.config,CanvasSource:mi,GeoJSONSource:Ft,ImageSource:jt,RasterDEMTileSource:Ne,RasterTileSource:Xe,VectorTileSource:He,VideoSource:yt,prewarm:function(){Vi().acquire(wi)},clearPrewarmedResources:function(){const d=ki;d&&(d.isPreloaded()&&d.numActive()===1?(d.release(wi),ki=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return Qe.workerCount},set workerCount(d){Qe.workerCount=d},get maxParallelImageRequests(){return r.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(d){r.config.MAX_PARALLEL_IMAGE_REQUESTS=d},clearStorage(d){r.clearTileCache(d)},workerUrl:"",addProtocol(d,t){r.config.REGISTERED_PROTOCOLS[d]=t},removeProtocol(d){delete r.config.REGISTERED_PROTOCOLS[d]}};return Ir.extend(Ns,{isSafari:r.isSafari,getPerformanceMetrics:r.PerformanceUtils.getPerformanceMetrics}),Ns});var v=m;return v})})(Jo);function $f(u,a,s){const l=u.slice();return l[8]=a[s],l}function em(u){let a,s,l,m,g,v,r=u[1],T=[];for(let C=0;C<r.length;C+=1)T[C]=tm($f(u,r,C));let A=u[2]&&im(u);return{c(){a=ge("div"),s=ge("select");for(let C=0;C<T.length;C+=1)T[C].c();l=St(),A&&A.c(),m=sn(),this.h()},l(C){a=_e(C,"DIV",{class:!0});var I=Ce(a);s=_e(I,"SELECT",{});var k=Ce(s);for(let K=0;K<T.length;K+=1)T[K].l(k);k.forEach(Y),I.forEach(Y),l=Et(C),A&&A.l(C),m=sn(),this.h()},h(){u[2]===void 0&&Ru(()=>u[4].call(s)),ve(a,"class","select is-small is-success")},m(C,I){et(C,a,I),ie(a,s);for(let k=0;k<T.length;k+=1)T[k].m(s,null);xo(s,u[2]),et(C,l,I),A&&A.m(C,I),et(C,m,I),g||(v=Ri(s,"change",u[4]),g=!0)},p(C,I){if(I&2){r=C[1];let k;for(k=0;k<r.length;k+=1){const K=$f(C,r,k);T[k]?T[k].p(K,I):(T[k]=tm(K),T[k].c(),T[k].m(s,null))}for(;k<T.length;k+=1)T[k].d(1);T.length=r.length}I&6&&xo(s,C[2]),C[2]?A?A.p(C,I):(A=im(C),A.c(),A.m(m.parentNode,m)):A&&(A.d(1),A=null)},d(C){C&&Y(a),wo(T,C),C&&Y(l),A&&A.d(C),C&&Y(m),g=!1,v()}}}function tm(u){let a,s=u[8].properties.datapoint_id+"",l,m,g=u[8].properties.component+"",v,r;return{c(){a=ge("option"),l=wt(s),m=wt(": "),v=wt(g),this.h()},l(T){a=_e(T,"OPTION",{});var A=Ce(a);l=Ct(A,s),m=Ct(A,": "),v=Ct(A,g),A.forEach(Y),this.h()},h(){a.__value=r=u[8],a.value=a.__value},m(T,A){et(T,a,A),ie(a,l),ie(a,m),ie(a,v)},p(T,A){A&2&&s!==(s=T[8].properties.datapoint_id+"")&&nn(l,s),A&2&&g!==(g=T[8].properties.component+"")&&nn(v,g),A&2&&r!==(r=T[8])&&(a.__value=r,a.value=a.__value)},d(T){T&&Y(a)}}}function im(u){let a,s,l,m,g,v,r=u[2].properties.system+"",T,A,C,I,k,K,$=u[2].properties.element+"",he,we,Te,me,Le,Ue,Oe=u[2].properties.component+"",We,Me,Ve,tt,it,dt,Dt=u[2].properties.data_collector+"",He,Xe,pt,Ne,Ft,ut,jt=u[2].properties.tach.toFixed()+"",yt,mi,bi,gi,Lt,vi,Qt=u[2].properties.tacc.toFixed()+"",ui,Ui,pi,ot,Bi,wi,Qe=u[2].properties.case_description+"",Nt,ki,Vi,fn,Mi,ni,si,Dn=u[2].properties.num_hh_served+"",ei,qt,Xi,ti,mn,xn,se,Ie=u[2].properties.num_people_served+"",mt,li,$t,di,Pi,tn,xi,nt=u[2].properties.lon+"",ii,Ut,Yi=u[2].properties.lat+"",wn,Vt,Cn,Zi,sa,Fi,on=u[2].properties.city+"",fi,Bn,gn,_n,Sn,Zn,hn=u[2].properties.country+"",W,L,B,R,U,X,ce=u[2].properties.region+"",ne,oe,fe,Be,Ye,Re,ht=u[2].properties.date+"",ft;return{c(){a=ge("div"),s=ge("table"),l=ge("tr"),m=ge("th"),g=wt("System"),v=ge("td"),T=wt(r),A=St(),C=ge("tr"),I=ge("th"),k=wt("Element"),K=ge("td"),he=wt($),we=St(),Te=ge("tr"),me=ge("th"),Le=wt("Component"),Ue=ge("td"),We=wt(Oe),Me=St(),Ve=ge("tr"),tt=ge("th"),it=wt("Data collector"),dt=ge("td"),He=wt(Dt),Xe=St(),pt=ge("tr"),Ne=ge("th"),Ft=wt("TACH (Int$2020)"),ut=ge("td"),yt=wt(jt),mi=St(),bi=ge("tr"),gi=ge("th"),Lt=wt("TACC (Int$2020)"),vi=ge("td"),ui=wt(Qt),Ui=St(),pi=ge("tr"),ot=ge("th"),Bi=wt("Description"),wi=ge("td"),Nt=wt(Qe),ki=St(),Vi=ge("tr"),fn=ge("th"),Mi=wt("Number of households served"),ni=St(),si=ge("td"),ei=wt(Dn),qt=St(),Xi=ge("tr"),ti=ge("th"),mn=wt("Number of people served"),xn=St(),se=ge("td"),mt=wt(Ie),li=St(),$t=ge("tr"),di=ge("th"),Pi=wt("Coordinates"),tn=St(),xi=ge("td"),ii=wt(nt),Ut=wt(", "),wn=wt(Yi),Vt=St(),Cn=ge("tr"),Zi=ge("th"),sa=wt("City"),Fi=ge("td"),fi=wt(on),Bn=St(),gn=ge("tr"),_n=ge("th"),Sn=wt("Country"),Zn=ge("td"),W=wt(hn),L=St(),B=ge("tr"),R=ge("th"),U=wt("Region"),X=ge("td"),ne=wt(ce),oe=St(),fe=ge("tr"),Be=ge("th"),Ye=wt("Date"),Re=ge("td"),ft=wt(ht),this.h()},l(Ee){a=_e(Ee,"DIV",{class:!0});var rt=Ce(a);s=_e(rt,"TABLE",{class:!0});var lt=Ce(s);l=_e(lt,"TR",{});var bt=Ce(l);m=_e(bt,"TH",{});var Zt=Ce(m);g=Ct(Zt,"System"),Zt.forEach(Y),v=_e(bt,"TD",{});var Rt=Ce(v);T=Ct(Rt,r),Rt.forEach(Y),bt.forEach(Y),A=Et(lt),C=_e(lt,"TR",{});var oi=Ce(C);I=_e(oi,"TH",{});var ji=Ce(I);k=Ct(ji,"Element"),ji.forEach(Y),K=_e(oi,"TD",{});var yn=Ce(K);he=Ct(yn,$),yn.forEach(Y),oi.forEach(Y),we=Et(lt),Te=_e(lt,"TR",{});var Ji=Ce(Te);me=_e(Ji,"TH",{});var Pn=Ce(me);Le=Ct(Pn,"Component"),Pn.forEach(Y),Ue=_e(Ji,"TD",{});var Da=Ce(Ue);We=Ct(Da,Oe),Da.forEach(Y),Ji.forEach(Y),Me=Et(lt),Ve=_e(lt,"TR",{});var Fa=Ce(Ve);tt=_e(Fa,"TH",{});var ee=Ce(tt);it=Ct(ee,"Data collector"),ee.forEach(Y),dt=_e(Fa,"TD",{});var Gt=Ce(dt);He=Ct(Gt,Dt),Gt.forEach(Y),Fa.forEach(Y),Xe=Et(lt),pt=_e(lt,"TR",{});var Wt=Ce(pt);Ne=_e(Wt,"TH",{});var Ci=Ce(Ne);Ft=Ct(Ci,"TACH (Int$2020)"),Ci.forEach(Y),ut=_e(Wt,"TD",{});var Ln=Ce(ut);yt=Ct(Ln,jt),Ln.forEach(Y),Wt.forEach(Y),mi=Et(lt),bi=_e(lt,"TR",{});var En=Ce(bi);gi=_e(En,"TH",{});var Oa=Ce(gi);Lt=Ct(Oa,"TACC (Int$2020)"),Oa.forEach(Y),vi=_e(En,"TD",{});var ga=Ce(vi);ui=Ct(ga,Qt),ga.forEach(Y),En.forEach(Y),Ui=Et(lt),pi=_e(lt,"TR",{});var oa=Ce(pi);ot=_e(oa,"TH",{});var dn=Ce(ot);Bi=Ct(dn,"Description"),dn.forEach(Y),wi=_e(oa,"TD",{});var Wn=Ce(wi);Nt=Ct(Wn,Qe),Wn.forEach(Y),oa.forEach(Y),ki=Et(lt),Vi=_e(lt,"TR",{});var On=Ce(Vi);fn=_e(On,"TH",{});var ta=Ce(fn);Mi=Ct(ta,"Number of households served"),ta.forEach(Y),ni=Et(On),si=_e(On,"TD",{});var Ca=Ce(si);ei=Ct(Ca,Dn),Ca.forEach(Y),On.forEach(Y),qt=Et(lt),Xi=_e(lt,"TR",{});var la=Ce(Xi);ti=_e(la,"TH",{});var ur=Ce(ti);mn=Ct(ur,"Number of people served"),ur.forEach(Y),xn=Et(la),se=_e(la,"TD",{});var hr=Ce(se);mt=Ct(hr,Ie),hr.forEach(Y),la.forEach(Y),li=Et(lt),$t=_e(lt,"TR",{});var Nn=Ce($t);di=_e(Nn,"TH",{});var Br=Ce(di);Pi=Ct(Br,"Coordinates"),Br.forEach(Y),tn=Et(Nn),xi=_e(Nn,"TD",{});var Na=Ce(xi);ii=Ct(Na,nt),Ut=Ct(Na,", "),wn=Ct(Na,Yi),Na.forEach(Y),Nn.forEach(Y),Vt=Et(lt),Cn=_e(lt,"TR",{});var Za=Ce(Cn);Zi=_e(Za,"TH",{});var ln=Ce(Zi);sa=Ct(ln,"City"),ln.forEach(Y),Fi=_e(Za,"TD",{});var Qa=Ce(Fi);fi=Ct(Qa,on),Qa.forEach(Y),Za.forEach(Y),Bn=Et(lt),gn=_e(lt,"TR",{});var Er=Ce(gn);_n=_e(Er,"TH",{});var dr=Ce(_n);Sn=Ct(dr,"Country"),dr.forEach(Y),Zn=_e(Er,"TD",{});var Fr=Ce(Zn);W=Ct(Fr,hn),Fr.forEach(Y),Er.forEach(Y),L=Et(lt),B=_e(lt,"TR",{});var $a=Ce(B);R=_e($a,"TH",{});var ks=Ce(R);U=Ct(ks,"Region"),ks.forEach(Y),X=_e($a,"TD",{});var Js=Ce(X);ne=Ct(Js,ce),Js.forEach(Y),$a.forEach(Y),oe=Et(lt),fe=_e(lt,"TR",{});var Ms=Ce(fe);Be=_e(Ms,"TH",{});var ts=Ce(Be);Ye=Ct(ts,"Date"),ts.forEach(Y),Re=_e(Ms,"TD",{});var ms=Ce(Re);ft=Ct(ms,ht),ms.forEach(Y),Ms.forEach(Y),lt.forEach(Y),rt.forEach(Y),this.h()},h(){ve(s,"class","table is-bordered is-striped is-narrow is-hoverable is-fullwidth"),ve(a,"class","popup-table svelte-1s5ex6w")},m(Ee,rt){et(Ee,a,rt),ie(a,s),ie(s,l),ie(l,m),ie(m,g),ie(l,v),ie(v,T),ie(s,A),ie(s,C),ie(C,I),ie(I,k),ie(C,K),ie(K,he),ie(s,we),ie(s,Te),ie(Te,me),ie(me,Le),ie(Te,Ue),ie(Ue,We),ie(s,Me),ie(s,Ve),ie(Ve,tt),ie(tt,it),ie(Ve,dt),ie(dt,He),ie(s,Xe),ie(s,pt),ie(pt,Ne),ie(Ne,Ft),ie(pt,ut),ie(ut,yt),ie(s,mi),ie(s,bi),ie(bi,gi),ie(gi,Lt),ie(bi,vi),ie(vi,ui),ie(s,Ui),ie(s,pi),ie(pi,ot),ie(ot,Bi),ie(pi,wi),ie(wi,Nt),ie(s,ki),ie(s,Vi),ie(Vi,fn),ie(fn,Mi),ie(Vi,ni),ie(Vi,si),ie(si,ei),ie(s,qt),ie(s,Xi),ie(Xi,ti),ie(ti,mn),ie(Xi,xn),ie(Xi,se),ie(se,mt),ie(s,li),ie(s,$t),ie($t,di),ie(di,Pi),ie($t,tn),ie($t,xi),ie(xi,ii),ie(xi,Ut),ie(xi,wn),ie(s,Vt),ie(s,Cn),ie(Cn,Zi),ie(Zi,sa),ie(Cn,Fi),ie(Fi,fi),ie(s,Bn),ie(s,gn),ie(gn,_n),ie(_n,Sn),ie(gn,Zn),ie(Zn,W),ie(s,L),ie(s,B),ie(B,R),ie(R,U),ie(B,X),ie(X,ne),ie(s,oe),ie(s,fe),ie(fe,Be),ie(Be,Ye),ie(fe,Re),ie(Re,ft)},p(Ee,rt){rt&4&&r!==(r=Ee[2].properties.system+"")&&nn(T,r),rt&4&&$!==($=Ee[2].properties.element+"")&&nn(he,$),rt&4&&Oe!==(Oe=Ee[2].properties.component+"")&&nn(We,Oe),rt&4&&Dt!==(Dt=Ee[2].properties.data_collector+"")&&nn(He,Dt),rt&4&&jt!==(jt=Ee[2].properties.tach.toFixed()+"")&&nn(yt,jt),rt&4&&Qt!==(Qt=Ee[2].properties.tacc.toFixed()+"")&&nn(ui,Qt),rt&4&&Qe!==(Qe=Ee[2].properties.case_description+"")&&nn(Nt,Qe),rt&4&&Dn!==(Dn=Ee[2].properties.num_hh_served+"")&&nn(ei,Dn),rt&4&&Ie!==(Ie=Ee[2].properties.num_people_served+"")&&nn(mt,Ie),rt&4&&nt!==(nt=Ee[2].properties.lon+"")&&nn(ii,nt),rt&4&&Yi!==(Yi=Ee[2].properties.lat+"")&&nn(wn,Yi),rt&4&&on!==(on=Ee[2].properties.city+"")&&nn(fi,on),rt&4&&hn!==(hn=Ee[2].properties.country+"")&&nn(W,hn),rt&4&&ce!==(ce=Ee[2].properties.region+"")&&nn(ne,ce),rt&4&&ht!==(ht=Ee[2].properties.date+"")&&nn(ft,ht)},d(Ee){Ee&&Y(a)}}}function j0(u){let a,s=u[1]&&u[1].length>0&&em(u);return{c(){a=ge("div"),s&&s.c()},l(l){a=_e(l,"DIV",{});var m=Ce(a);s&&s.l(m),m.forEach(Y)},m(l,m){et(l,a,m),s&&s.m(a,null),u[5](a)},p(l,[m]){l[1]&&l[1].length>0?s?s.p(l,m):(s=em(l),s.c(),s.m(a,null)):s&&(s.d(1),s=null)},i:Ba,o:Ba,d(l){l&&Y(a),s&&s.d(),u[5](null)}}}function G0(u,a,s){let l,m;ku(u,Lu,I=>s(6,l=I)),ku(u,Um,I=>s(3,m=I));let g,v=[],r;const T=async()=>{if(!l){const k=await ym();Lu.update(()=>k)}const I=[];return l.forEach(k=>{const K=k.master,$={id:K.datapoint_id,type:"Feature",geometry:{type:"Point",coordinates:[Number(K.lon),Number(K.lat)]},properties:K};I.push($)}),{type:"FeatureCollection",features:I}};function A(){r=Au(this),s(2,r),s(3,m),s(1,v),s(0,g),s(1,v),s(3,m),s(0,g)}function C(I){Di[I?"unshift":"push"](()=>{g=I,s(0,g)})}return u.$$.update=()=>{u.$$.dirty&11&&m&&m.on("load",async function(){const I=await T();m.addSource("cactus-data",{type:"geojson",data:I,attribution:ps.attribution}),m.addLayer({id:"cactus-data",type:"circle",source:"cactus-data",paint:{"circle-color":"#11b4da","circle-radius":8,"circle-stroke-width":1,"circle-stroke-color":"#fff"}}),m.on("click","cactus-data",function(k){const K=m.queryRenderedFeatures(k.point,{layers:["cactus-data"]});s(1,v=K),s(2,r=void 0),K.length!==0&&(s(2,r=v[0]),new Jo.exports.Popup().setLngLat(k.lngLat).setDOMContent(g).setMaxWidth("300px").addTo(m))})})},[g,v,r,m,A,C]}class H0 extends An{constructor(a){super(),kn(this,a,G0,j0,Mn,{})}}function q0(u){let a,s,l,m;return l=new H0({}),{c(){a=ge("div"),s=St(),Ei(l.$$.fragment),this.h()},l(g){a=_e(g,"DIV",{class:!0,id:!0}),Ce(a).forEach(Y),s=Et(g),qi(l.$$.fragment,g),this.h()},h(){ve(a,"class","map svelte-uwvlpd"),ve(a,"id","map")},m(g,v){et(g,a,v),u[1](a),et(g,s,v),Ii(l,g,v),m=!0},p:Ba,i(g){m||(_t(l.$$.fragment,g),m=!0)},o(g){It(l.$$.fragment,g),m=!1},d(g){g&&Y(a),u[1](null),g&&Y(s),Ai(l,g)}}}function Z0(u,a,s){let l;fs(async()=>{const g=new Jo.exports.Map({container:l,style:"https://undp-data.github.io/style/style.json",center:[37.138,.414],zoom:6,hash:!0,attributionControl:!1});g.addControl(new Jo.exports.NavigationControl({}),"top-right"),g.addControl(new Jo.exports.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0}),"top-right"),g.addControl(new Jo.exports.ScaleControl({maxWidth:80,unit:"metric"}),"bottom-left"),g.addControl(new Jo.exports.AttributionControl({compact:!0}),"bottom-right"),Um.update(()=>g)});function m(g){Di[g?"unshift":"push"](()=>{l=g,s(0,l)})}return[l,m]}class K0 extends An{constructor(a){super(),kn(this,a,Z0,q0,Mn,{})}}const W0=()=>{const u=sr("__svelte__");return{page:{subscribe:u.page.subscribe},navigating:{subscribe:u.navigating.subscribe},get preloading(){return console.error("stores.preloading is deprecated; use stores.navigating instead"),{subscribe:u.navigating.subscribe}},session:u.session,updated:u.updated}},X0={subscribe(u){return W0().page.subscribe(u)}};function Y0(u){let a;return{c(){a=wt("home")},l(s){a=Ct(s,"home")},m(s,l){et(s,a,l)},d(s){s&&Y(a)}}}function J0(u){let a;return{c(){a=wt("Home")},l(s){a=Ct(s,"Home")},m(s,l){et(s,a,l)},d(s){s&&Y(a)}}}function Q0(u){let a,s,l,m;return a=new Bu({props:{class:"material-icons","aria-hidden":"true",$$slots:{default:[Y0]},$$scope:{ctx:u}}}),l=new zu({props:{$$slots:{default:[J0]},$$scope:{ctx:u}}}),{c(){Ei(a.$$.fragment),s=St(),Ei(l.$$.fragment)},l(g){qi(a.$$.fragment,g),s=Et(g),qi(l.$$.fragment,g)},m(g,v){Ii(a,g,v),et(g,s,v),Ii(l,g,v),m=!0},p(g,v){const r={};v&2048&&(r.$$scope={dirty:v,ctx:g}),a.$set(r);const T={};v&2048&&(T.$$scope={dirty:v,ctx:g}),l.$set(T)},i(g){m||(_t(a.$$.fragment,g),_t(l.$$.fragment,g),m=!0)},o(g){It(a.$$.fragment,g),It(l.$$.fragment,g),m=!1},d(g){Ai(a,g),g&&Y(s),Ai(l,g)}}}function $0(u){let a;return{c(){a=wt("map")},l(s){a=Ct(s,"map")},m(s,l){et(s,a,l)},d(s){s&&Y(a)}}}function e1(u){let a;return{c(){a=wt("Map")},l(s){a=Ct(s,"Map")},m(s,l){et(s,a,l)},d(s){s&&Y(a)}}}function t1(u){let a,s,l,m;return a=new Bu({props:{class:"material-icons","aria-hidden":"true",$$slots:{default:[$0]},$$scope:{ctx:u}}}),l=new zu({props:{$$slots:{default:[e1]},$$scope:{ctx:u}}}),{c(){Ei(a.$$.fragment),s=St(),Ei(l.$$.fragment)},l(g){qi(a.$$.fragment,g),s=Et(g),qi(l.$$.fragment,g)},m(g,v){Ii(a,g,v),et(g,s,v),Ii(l,g,v),m=!0},p(g,v){const r={};v&2048&&(r.$$scope={dirty:v,ctx:g}),a.$set(r);const T={};v&2048&&(T.$$scope={dirty:v,ctx:g}),l.$set(T)},i(g){m||(_t(a.$$.fragment,g),_t(l.$$.fragment,g),m=!0)},o(g){It(a.$$.fragment,g),It(l.$$.fragment,g),m=!1},d(g){Ai(a,g),g&&Y(s),Ai(l,g)}}}function i1(u){let a;return{c(){a=wt("assessment")},l(s){a=Ct(s,"assessment")},m(s,l){et(s,a,l)},d(s){s&&Y(a)}}}function n1(u){let a;return{c(){a=wt("Data")},l(s){a=Ct(s,"Data")},m(s,l){et(s,a,l)},d(s){s&&Y(a)}}}function a1(u){let a,s,l,m;return a=new Bu({props:{class:"material-icons","aria-hidden":"true",$$slots:{default:[i1]},$$scope:{ctx:u}}}),l=new zu({props:{$$slots:{default:[n1]},$$scope:{ctx:u}}}),{c(){Ei(a.$$.fragment),s=St(),Ei(l.$$.fragment)},l(g){qi(a.$$.fragment,g),s=Et(g),qi(l.$$.fragment,g)},m(g,v){Ii(a,g,v),et(g,s,v),Ii(l,g,v),m=!0},p(g,v){const r={};v&2048&&(r.$$scope={dirty:v,ctx:g}),a.$set(r);const T={};v&2048&&(T.$$scope={dirty:v,ctx:g}),l.$set(T)},i(g){m||(_t(a.$$.fragment,g),_t(l.$$.fragment,g),m=!0)},o(g){It(a.$$.fragment,g),It(l.$$.fragment,g),m=!1},d(g){Ai(a,g),g&&Y(s),Ai(l,g)}}}function r1(u){let a;return{c(){a=wt("calculate")},l(s){a=Ct(s,"calculate")},m(s,l){et(s,a,l)},d(s){s&&Y(a)}}}function s1(u){let a;return{c(){a=wt("TACH calculator")},l(s){a=Ct(s,"TACH calculator")},m(s,l){et(s,a,l)},d(s){s&&Y(a)}}}function o1(u){let a,s,l,m;return a=new Bu({props:{class:"material-icons","aria-hidden":"true",$$slots:{default:[r1]},$$scope:{ctx:u}}}),l=new zu({props:{$$slots:{default:[s1]},$$scope:{ctx:u}}}),{c(){Ei(a.$$.fragment),s=St(),Ei(l.$$.fragment)},l(g){qi(a.$$.fragment,g),s=Et(g),qi(l.$$.fragment,g)},m(g,v){Ii(a,g,v),et(g,s,v),Ii(l,g,v),m=!0},p(g,v){const r={};v&2048&&(r.$$scope={dirty:v,ctx:g}),a.$set(r);const T={};v&2048&&(T.$$scope={dirty:v,ctx:g}),l.$set(T)},i(g){m||(_t(a.$$.fragment,g),_t(l.$$.fragment,g),m=!0)},o(g){It(a.$$.fragment,g),It(l.$$.fragment,g),m=!1},d(g){Ai(a,g),g&&Y(s),Ai(l,g)}}}function l1(u){let a,s,l,m,g,v,r,T;return a=new vu({props:{activated:u[1]==="Home",$$slots:{default:[Q0]},$$scope:{ctx:u}}}),a.$on("click",u[3]),l=new vu({props:{activated:u[1]==="Map",$$slots:{default:[t1]},$$scope:{ctx:u}}}),l.$on("click",u[4]),g=new vu({props:{activated:u[1]==="Data",$$slots:{default:[a1]},$$scope:{ctx:u}}}),g.$on("click",u[5]),r=new vu({props:{activated:u[1]==="TACH calculator",$$slots:{default:[o1]},$$scope:{ctx:u}}}),r.$on("click",u[6]),{c(){Ei(a.$$.fragment),s=St(),Ei(l.$$.fragment),m=St(),Ei(g.$$.fragment),v=St(),Ei(r.$$.fragment)},l(A){qi(a.$$.fragment,A),s=Et(A),qi(l.$$.fragment,A),m=Et(A),qi(g.$$.fragment,A),v=Et(A),qi(r.$$.fragment,A)},m(A,C){Ii(a,A,C),et(A,s,C),Ii(l,A,C),et(A,m,C),Ii(g,A,C),et(A,v,C),Ii(r,A,C),T=!0},p(A,C){const I={};C&2&&(I.activated=A[1]==="Home"),C&2048&&(I.$$scope={dirty:C,ctx:A}),a.$set(I);const k={};C&2&&(k.activated=A[1]==="Map"),C&2048&&(k.$$scope={dirty:C,ctx:A}),l.$set(k);const K={};C&2&&(K.activated=A[1]==="Data"),C&2048&&(K.$$scope={dirty:C,ctx:A}),g.$set(K);const $={};C&2&&($.activated=A[1]==="TACH calculator"),C&2048&&($.$$scope={dirty:C,ctx:A}),r.$set($)},i(A){T||(_t(a.$$.fragment,A),_t(l.$$.fragment,A),_t(g.$$.fragment,A),_t(r.$$.fragment,A),T=!0)},o(A){It(a.$$.fragment,A),It(l.$$.fragment,A),It(g.$$.fragment,A),It(r.$$.fragment,A),T=!1},d(A){Ai(a,A),A&&Y(s),Ai(l,A),A&&Y(m),Ai(g,A),A&&Y(v),Ai(r,A)}}}function c1(u){let a,s;return a=new Nb({props:{$$slots:{default:[l1]},$$scope:{ctx:u}}}),{c(){Ei(a.$$.fragment)},l(l){qi(a.$$.fragment,l)},m(l,m){Ii(a,l,m),s=!0},p(l,m){const g={};m&2050&&(g.$$scope={dirty:m,ctx:l}),a.$set(g)},i(l){s||(_t(a.$$.fragment,l),s=!0)},o(l){It(a.$$.fragment,l),s=!1},d(l){Ai(a,l)}}}function u1(u){let a,s;return a=new zb({props:{$$slots:{default:[c1]},$$scope:{ctx:u}}}),{c(){Ei(a.$$.fragment)},l(l){qi(a.$$.fragment,l)},m(l,m){Ii(a,l,m),s=!0},p(l,m){const g={};m&2050&&(g.$$scope={dirty:m,ctx:l}),a.$set(g)},i(l){s||(_t(a.$$.fragment,l),s=!0)},o(l){It(a.$$.fragment,l),s=!1},d(l){Ai(a,l)}}}function h1(u){let a,s;return a=new Yv({}),{c(){Ei(a.$$.fragment)},l(l){qi(a.$$.fragment,l)},m(l,m){Ii(a,l,m),s=!0},i(l){s||(_t(a.$$.fragment,l),s=!0)},o(l){It(a.$$.fragment,l),s=!1},d(l){Ai(a,l)}}}function d1(u){let a,s;return a=new V0({}),{c(){Ei(a.$$.fragment)},l(l){qi(a.$$.fragment,l)},m(l,m){Ii(a,l,m),s=!0},i(l){s||(_t(a.$$.fragment,l),s=!0)},o(l){It(a.$$.fragment,l),s=!1},d(l){Ai(a,l)}}}function p1(u){let a,s;return a=new K0({}),{c(){Ei(a.$$.fragment)},l(l){qi(a.$$.fragment,l)},m(l,m){Ii(a,l,m),s=!0},i(l){s||(_t(a.$$.fragment,l),s=!0)},o(l){It(a.$$.fragment,l),s=!1},d(l){Ai(a,l)}}}function f1(u){let a,s,l,m,g,v,r,T;return{c(){a=ge("h1"),s=wt("Welcome to CACTUS project"),l=St(),m=ge("div"),g=ge("p"),v=wt(`This is the third party website to manage some tools for the project. Please also visit
						the official website `),r=ge("a"),T=wt("here"),this.h()},l(A){a=_e(A,"H1",{class:!0});var C=Ce(a);s=Ct(C,"Welcome to CACTUS project"),C.forEach(Y),l=Et(A),m=_e(A,"DIV",{class:!0});var I=Ce(m);g=_e(I,"P",{class:!0});var k=Ce(g);v=Ct(k,`This is the third party website to manage some tools for the project. Please also visit
						the official website `),r=_e(k,"A",{href:!0,target:!0,class:!0});var K=Ce(r);T=Ct(K,"here"),K.forEach(Y),k.forEach(Y),I.forEach(Y),this.h()},h(){ve(a,"class","title svelte-170g6fl"),ve(r,"href","http://cactuscosting.com"),ve(r,"target","\u201D_blank\u201D"),ve(r,"class","svelte-170g6fl"),ve(g,"class","svelte-170g6fl"),ve(m,"class","content is-medium svelte-170g6fl")},m(A,C){et(A,a,C),ie(a,s),et(A,l,C),et(A,m,C),ie(m,g),ie(g,v),ie(g,r),ie(r,T)},i:Ba,o:Ba,d(A){A&&Y(a),A&&Y(l),A&&Y(m)}}}function m1(u){let a,s,l,m;const g=[f1,p1,d1,h1],v=[];function r(T,A){return T[1]==="Home"?0:T[1]==="Map"?1:T[1]==="Data"?2:T[1]==="TACH calculator"?3:-1}return~(s=r(u))&&(l=v[s]=g[s](u)),{c(){a=ge("main"),l&&l.c(),this.h()},l(T){a=_e(T,"MAIN",{class:!0,style:!0});var A=Ce(a);l&&l.l(A),A.forEach(Y),this.h()},h(){ve(a,"class","main-content svelte-170g6fl"),Ep(a,"margin",u[1]==="Map"?"0px":"15px")},m(T,A){et(T,a,A),~s&&v[s].m(a,null),m=!0},p(T,A){let C=s;s=r(T),s!==C&&(l&&(es(),It(v[C],1,1,()=>{v[C]=null}),$r()),~s?(l=v[s],l||(l=v[s]=g[s](T),l.c()),_t(l,1),l.m(a,null)):l=null),(!m||A&2)&&Ep(a,"margin",T[1]==="Map"?"0px":"15px")},i(T){m||(_t(l),m=!0)},o(T){It(l),m=!1},d(T){T&&Y(a),~s&&v[s].d()}}}function g1(u){let a,s,l,m,g,v;function r(A){u[7](A)}let T={variant:"dismissible",$$slots:{default:[u1]},$$scope:{ctx:u}};return u[0]!==void 0&&(T.open=u[0]),s=new Lb({props:T}),Di.push(()=>bo(s,"open",r)),g=new Rb({props:{class:"app-content",$$slots:{default:[m1]},$$scope:{ctx:u}}}),{c(){a=ge("div"),Ei(s.$$.fragment),m=St(),Ei(g.$$.fragment),this.h()},l(A){a=_e(A,"DIV",{class:!0});var C=Ce(a);qi(s.$$.fragment,C),m=Et(C),qi(g.$$.fragment,C),C.forEach(Y),this.h()},h(){ve(a,"class","drawer-container svelte-170g6fl")},m(A,C){et(A,a,C),Ii(s,a,null),ie(a,m),Ii(g,a,null),v=!0},p(A,[C]){const I={};C&2050&&(I.$$scope={dirty:C,ctx:A}),!l&&C&1&&(l=!0,I.open=A[0],vo(()=>l=!1)),s.$set(I);const k={};C&2050&&(k.$$scope={dirty:C,ctx:A}),g.$set(k)},i(A){v||(_t(s.$$.fragment,A),_t(g.$$.fragment,A),v=!0)},o(A){It(s.$$.fragment,A),It(g.$$.fragment,A),v=!1},d(A){A&&Y(a),Ai(s),Ai(g)}}}function _1(u,a,s){let l;ku(u,X0,$=>s(9,l=$));let{drawerOpen:m=!1}=a,g,v;fs(()=>{v=location;const $=l.url.searchParams.get("menu");$?s(1,g=$):s(1,g="Home")});const r=$=>{s(1,g=$),l.url.searchParams.set("menu",$),history.replaceState("","",l.url.toString())},T=()=>{!v||!m&&g==="Map"&&v.reload()},A=()=>{r("Home")},C=()=>{r("Map")},I=()=>{r("Data")},k=()=>{r("TACH calculator")};function K($){m=$,s(0,m)}return u.$$set=$=>{"drawerOpen"in $&&s(0,m=$.drawerOpen)},u.$$.update=()=>{u.$$.dirty&1&&T()},[m,g,r,A,C,I,k,K]}class y1 extends An{constructor(a){super(),kn(this,a,_1,g1,Mn,{drawerOpen:0})}}function b1(u){let a,s,l,m,g,v;function r(I){u[1](I)}let T={};u[0]!==void 0&&(T.drawerOpen=u[0]),a=new xb({props:T}),Di.push(()=>bo(a,"drawerOpen",r));function A(I){u[2](I)}let C={};return u[0]!==void 0&&(C.drawerOpen=u[0]),m=new y1({props:C}),Di.push(()=>bo(m,"drawerOpen",A)),{c(){Ei(a.$$.fragment),l=St(),Ei(m.$$.fragment)},l(I){qi(a.$$.fragment,I),l=Et(I),qi(m.$$.fragment,I)},m(I,k){Ii(a,I,k),et(I,l,k),Ii(m,I,k),v=!0},p(I,[k]){const K={};!s&&k&1&&(s=!0,K.drawerOpen=I[0],vo(()=>s=!1)),a.$set(K);const $={};!g&&k&1&&(g=!0,$.drawerOpen=I[0],vo(()=>g=!1)),m.$set($)},i(I){v||(_t(a.$$.fragment,I),_t(m.$$.fragment,I),v=!0)},o(I){It(a.$$.fragment,I),It(m.$$.fragment,I),v=!1},d(I){Ai(a,I),I&&Y(l),Ai(m,I)}}}function v1(u,a,s){let l=!1;function m(v){l=v,s(0,l)}function g(v){l=v,s(0,l)}return[l,m,g]}class C1 extends An{constructor(a){super(),kn(this,a,v1,b1,Mn,{})}}export{C1 as default};
